{"version":3,"mappings":"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","names":["l","n","p","q","r","t","v","w","x","y","z","A","a","B","C","D","E","b","e","F","G","H","I","J","K","L","M","d","c","k","h","g","f","m","N","O","escape","P","Q","R","S","T","U","V","W","X","react_production_min","reactModule","require$$0","reactJsxRuntime_production_min","jsxRuntimeModule","exports","u","schedulerModule","aa","ca","require$$1","da","ea","fa","ha","ia","ja","ka","la","ma","oa","pa","qa","ra","sa","ta","ua","va","wa","ya","za","Aa","Ba","Ca","Da","Ea","Fa","Ga","Ha","Ia","Ja","Ka","La","Ma","Na","Oa","Pa","Qa","Ra","Sa","Ta","Ua","Va","Wa","Xa","Ya","Za","ab","bb","cb","db","eb","fb","gb","hb","ib","jb","kb","lb","mb","nb","ob","pb","qb","rb","sb","tb","ub","vb","wb","xb","yb","zb","Ab","Bb","Cb","Db","Eb","Fb","Gb","Hb","Ib","Jb","Kb","Lb","Mb","Nb","Ob","Pb","Qb","Rb","Sb","Tb","Ub","Vb","Wb","Xb","Yb","Zb","$b","ac","bc","cc","dc","ec","fc","gc","hc","ic","jc","kc","lc","mc","oc","nc","pc","qc","rc","sc","tc","uc","vc","wc","xc","yc","zc","Ac","Bc","Cc","Dc","Ec","Fc","Gc","Hc","Ic","Jc","Kc","Lc","Mc","Nc","Oc","Pc","Qc","Rc","Sc","Tc","Uc","Vc","Wc","Xc","Yc","Zc","$c","ad","bd","cd","dd","ed","fd","gd","hd","id","jd","kd","ld","md","nd","od","pd","qd","rd","sd","td","ud","vd","wd","xd","yd","Ad","zd","Bd","Cd","Dd","Ed","Fd","Gd","Hd","Id","Jd","Kd","Ld","Md","Nd","Od","Pd","Qd","Rd","Sd","Td","Ud","Vd","Wd","Xd","Yd","Zd","$d","ae","be","ce","de","ee","fe","ge","he","ie","je","ke","le","me","ne","oe","pe","qe","re","se","te","ue","ve","we","xe","ye","ze","Ae","Be","Ce","De","Ee","Fe","Ge","He","Ie","Je","Ke","Le","Me","Ne","Oe","Pe","Qe","Re","Se","Te","Ue","Ve","We","Xe","Ye","Ze","$e","af","bf","cf","df","ef","ff","gf","hf","jf","kf","lf","mf","nf","of","pf","qf","rf","sf","tf","uf","vf","wf","na","xa","$a","ba","xf","yf","zf","Af","Bf","Cf","Df","Ef","Ff","Gf","Hf","Jf","If","Kf","Lf","Mf","Nf","Of","Pf","Qf","Rf","Sf","Tf","Uf","Vf","Wf","Xf","Yf","Zf","$f","ag","bg","cg","dg","eg","fg","gg","hg","ig","jg","kg","lg","mg","ng","og","pg","qg","rg","sg","tg","ug","vg","wg","xg","yg","zg","Ag","Bg","Cg","Dg","Eg","Fg","Gg","Hg","Ig","Jg","Kg","Lg","Mg","Ng","Og","Pg","Qg","Rg","Sg","Tg","Ug","Vg","Wg","Xg","Yg","Zg","$g","ah","bh","ch","dh","eh","fh","gh","hh","ih","jh","kh","lh","mh","nh","oh","ph","qh","rh","sh","th","uh","vh","wh","xh","yh","zh","Ah","Bh","Ch","Dh","Eh","Fh","Gh","Hh","Ih","Jh","Kh","Lh","Mh","Nh","Oh","Ph","Qh","Rh","Sh","Th","Uh","Vh","Wh","Xh","Yh","Zh","$h","ai","bi","ci","di","ei","fi","gi","hi","ii","ji","ki","li","mi","ni","oi","pi","qi","ri","si","ti","ui","vi","wi","xi","yi","zi","Ai","Bi","Ci","Di","Ei","Fi","Gi","Hi","Ii","Ji","Ki","Li","Mi","Ni","Oi","Pi","Qi","Ri","Si","Ti","Ui","Vi","Wi","Xi","Yi","Zi","$i","aj","bj","cj","dj","ej","fj","gj","hj","ij","jj","kj","lj","mj","nj","oj","pj","qj","rj","sj","tj","uj","vj","wj","xj","yj","zj","Aj","Bj","Cj","Dj","Ej","Fj","Gj","Hj","Ij","Jj","Kj","Lj","Mj","Nj","Oj","Pj","Qj","Rj","Sj","Tj","Uj","Vj","Wj","Xj","Yj","Zj","ak","bk","ck","dk","ek","fk","gk","hk","ik","jk","kk","lk","mk","nk","ok","Y","Z","pk","qk","rk","sk","tk","uk","vk","wk","xk","yk","zk","Ak","Bk","Ck","Dk","Ek","Fk","Gk","Hk","Ik","Jk","Kk","Lk","Mk","Nk","Ok","Pk","Qk","Rk","Sk","Tk","Uk","Vk","Wk","Xk","Yk","Zk","$k","al","bl","cl","dl","el","fl","gl","hl","il","jl","kl","ll","ml","nl","ol","pl","ql","rl","sl","tl","ul","vl","reactDom_production_min","checkDCE","err","reactDomModule","client","Subscribable","listener","defaultTimeoutProvider","callback","delay","timeoutId","intervalId","TimeoutManager","#provider","#providerCalled","provider","timeoutManager","systemSetTimeoutZero","isServer","noop","functionalUpdate","updater","input","isValidTimeout","value","timeUntilStale","updatedAt","staleTime","resolveStaleTime","query","resolveEnabled","enabled","matchQuery","filters","type","exact","fetchStatus","predicate","queryKey","stale","hashQueryKeyByOptions","partialMatchKey","isActive","matchMutation","mutation","status","mutationKey","hashKey","options","_","val","isPlainObject","result","key","hasOwn","replaceEqualDeep","array","isPlainArray","aSize","bItems","bSize","copy","equalItems","i","aItem","bItem","o","hasObjectPrototype","ctor","prot","sleep","timeout","resolve","replaceData","prevData","data","addToEnd","items","item","max","newItems","addToStart","skipToken","ensureQueryFn","fetchOptions","FocusManager","#focused","#cleanup","#setup","onFocus","setup","focused","isFocused","focusManager","pendingThenable","reject","thenable","_resolve","_reject","finalize","reason","defaultScheduler","createNotifyManager","queue","transactions","notifyFn","batchNotifyFn","scheduleFn","schedule","flush","originalQueue","args","fn","notifyManager","OnlineManager","#online","onOnline","onlineListener","offlineListener","online","onlineManager","defaultRetryDelay","failureCount","canFetch","networkMode","CancelledError","createRetryer","config","isRetryCancelled","continueFn","isResolved","cancel","cancelOptions","error","cancelRetry","continueRetry","canContinue","canStart","pause","continueResolve","run","promiseOrValue","initialPromise","retry","retryDelay","shouldRetry","Removable","#gcTimeout","newGcTime","Query","#initialState","#revertState","#cache","#client","#retryer","#defaultOptions","#abortSignalConsumed","getDefaultState","defaultState","successState","newData","#dispatch","state","setStateOptions","promise","observer","abortController","addSignalProperty","object","fetchFn","queryFn","queryFnContext","queryFnContext2","context","context2","action","reducer","fetchState","newState","dataUpdatedAt","hasData","initialDataUpdatedAt","infiniteQueryBehavior","pages","direction","oldPages","oldPageParams","currentPage","cancelled","fetchPage","param","previous","page","maxPages","addTo","pageParamFn","getPreviousPageParam","getNextPageParam","oldData","remainingPages","pageParams","lastIndex","Mutation","#observers","#mutationCache","variables","onContinue","mutationFnContext","restored","isPaused","MutationCache","#mutations","#scopes","#mutationId","scope","scopeFor","scopedMutations","index","firstPendingMutation","defaultedFilters","event","pausedMutations","QueryCache","#queries","queryHash","queryInMap","queries","QueryClient","#queryCache","#queryDefaults","#mutationDefaults","#mountCount","#unsubscribeFocus","#unsubscribeOnline","defaultedOptions","cachedData","queryCache","defaultedCancelOptions","promises","defaults","queryDefault","QueryClientContext","React.createContext","QueryClientProvider","children","React.useEffect","jsx","createStoreImpl","createState","listeners","setState","partial","replace","nextState","previousState","getState","api","initialState","createStore","identity","arg","useStore","selector","slice","React","createImpl","useBoundStore","create","createJSONStorage","getStorage","storage","name","_a","parse","str2","str","newValue","toThenable","onFulfilled","_onRejected","_onFulfilled","onRejected","persistImpl","baseOptions","set","get","persistedState","currentState","hasHydrated","hydrationListeners","finishHydrationListeners","setItem","savedSetState","configResult","stateFromStorage","hydrate","_b","_a2","postRehydrationCallback","deserializedStorageValue","migration","migrationResult","migrated","migratedState","newOptions","persist","VIEW_MODE_CELL_WIDTHS","getProjectLevelItems","project","levels","phase","hasChildren","collectSubphaseLevels","maxLevel","lvl","subphases","level","sub","getCurrentExpansionLevel","expandedProjects","expandedPhases","expandedSubphases","expandToLevel","targetLevel","newExpandedProjects","newExpandedPhases","newExpandedSubphases","useAppStore","sites","projects","staff","equipment","vacations","holidays","holidayDates","events","eventDates","users","settings","columns","values","skills","columnId","entityType","entityId","newFilters","customColumnFilters","customColumnValues","activeFilterColumns","colId","colIdStr","filterValues","valueKey","cellValue","show","newHidden","site","user","isChecking","isAuthenticated","mode","view","date","width","tab","scrollLeft","viewMode","currentDate","newDate","projectId","expanded","phaseId","subphaseId","staffId","equipmentId","ids","projectIds","phaseIds","subphaseIds","collectSubphases","child","currentLevel","criticalPathEnabled","criticalPathItems","newEnabled","calculateCriticalPath","updatedItems","__vitePreload","applyChanges","whatIfSnapshot","whatIfPendingOperations","apiRequest","clientConfig","originalIsWhatIfMode","op","operation","collapsed","persisted","selectCanManageResources","getApiBaseUrl","getTenantPrefix","match","configureApiClient","endpoint","baseUrl","tenantPrefix","url","method","prefix","relativeUrl","body","optHeaders","restOptions","response","text","messages","message","apiGet","apiPost","apiPut","apiDelete","apiPatch","transformUser","apiUser","checkAuth","login","email","password","logout","checkSSOEnabled","getSSOLoginUrl","DEFAULT_LEVEL_COLORS","getCSSVariable","getPhaseColor","getDepthColor","depth","clampedDepth","getProjects","archived","getProject","createProject","updateProject","deleteProject","createPhase","backendData","updatePhase","deletePhase","createSubphase","createChildSubphase","parentSubphaseId","updateSubphase","deleteSubphase","createStaffAssignment","updateStaffAssignment","assignmentId","deleteStaffAssignment","createEquipmentAssignment","updateEquipmentAssignment","deleteEquipmentAssignment","transformProject","transformPhase","transformStaffAssignment","transformEquipmentAssignment","PHASE_COLOR_FALLBACK","DEPTH_COLORS_FALLBACK","getDepthColorWithFallback","getPhaseColorWithFallback","transformSubphase","subphase","actualDepth","s","assignment","loadAllProjects","getSites","createSite","updateSite","getBankHolidays","siteId","year","addCustomHoliday","createBankHoliday","deleteCustomHoliday","holidayId","deleteBankHoliday","refreshBankHolidays","getCompanyEvents","createCompanyEvent","deleteCompanyEvent","eventId","buildHolidayDateSet","dates","holiday","startStr","endStr","startYear","startMonth","startDay","endYear","endMonth","endDay","startDate","endDate","current","dateStr","formatDateForLookup","buildEventDateSet","month","day","getStaff","includeAllSites","getEquipment","getVacations","createVacation","updateVacation","deleteVacation","getUsers","includeDisabled","createUser","updateUser","deleteUser","getSetting","updateSetting","getInstanceSettings","allSettings","getPredefinedPhases","getCustomColumnsWithValues","createCustomColumn","updateCustomColumn","deleteCustomColumn","setCustomColumnValue","getValueKey","skillsApi","userId","skillIds","skillId","adminLogin","adminLogout","changeAdminPassword","currentPassword","newPassword","getAdminMe","getTenants","getTenant","createTenant","updateTenantStatus","deleteTenant","deleteDatabase","provisionTenant","resetTenantAdminPassword","getTenantAuditLog","limit","getSystemStats","getAdminUsers","createAdminUser","updateAdminUser","deleteAdminUser","getOrganizations","getOrganization","createOrganization","updateOrganization","deleteOrganization","updateOrganizationSSOConfig","orgId","addTenantToOrganization","tenantId","removeTenantFromOrganization","updateTenantGroupAccess","useAuth","currentUser","isAuthChecking","setCurrentUser","setAuthChecking","setAuthenticated","reset","useEffect","useCallback","apiLogin","apiLogout","useDataLoader","isLoading","setIsLoading","useState","setError","setSites","setProjects","setStaff","setEquipment","setVacations","setBankHolidays","setCompanyEvents","setCurrentSite","setInstanceSettings","setCustomColumns","setCustomColumnValues","setSkills","persistedSiteId","loadAllData","instanceSettings","sortedSites","targetSite","foundSite","customColumnsData","refreshProjects","refreshSiteData","refreshCustomColumns","refreshStaff","LoadingScreen","styles","jsxs","getLocalStorage","defaultValue","setLocalStorage","STORAGE_KEYS","getProjectOrder","setProjectOrder","sortProjectsByOrder","order","orderMap","orderA","orderB","migrateLegacyStorage","oldKey","newKey","oldValue","THEME_FAMILIES","THEMES","getTheme","stored","getThemeInfo","theme","isDarkTheme","setTheme","toggleThemeMode","currentInfo","newTheme","fallback","getThemeFamily","setThemeFamily","family","initTheme","LoginScreen","setEmail","setPassword","isSubmitting","setIsSubmitting","ssoEnabled","setSsoEnabled","setThemeState","currentTheme","handleSubmit","handleSSOLogin","logoSrc","Fragment","useUIStore","vacation","modal","content","itemId","itemType","edge","left","top","lagDays","duration","zone","phantomStart","phantomEnd","loading","targetId","assignmentData","newCellWidth","resourceId","resourceName","previewStart","previewEnd","useUndoStore","description","newEntry","undoStack","redoStack","lastEntry","newUndoStack","nextEntry","newRedoStack","millisecondsInWeek","millisecondsInDay","millisecondsInMinute","millisecondsInHour","constructFromSymbol","constructFrom","toDate","argument","addDays","amount","_date","addMonths","dayOfMonth","endOfDesiredMonth","daysInMonth","isWeekend","defaultOptions","getDefaultOptions","startOfWeek","weekStartsOn","diff","startOfISOWeek","getISOWeekYear","fourthOfJanuaryOfNextYear","startOfNextYear","fourthOfJanuaryOfThisYear","startOfThisYear","getTimezoneOffsetInMilliseconds","utcDate","normalizeDates","normalize","startOfDay","differenceInCalendarDays","laterDate","earlierDate","laterDate_","earlierDate_","laterStartOfDay","earlierStartOfDay","laterTimestamp","earlierTimestamp","startOfISOWeekYear","fourthOfJanuary","addWeeks","isSameDay","dateLeft_","dateRight_","isDate","isValid","differenceInDays","sign","compareLocalAsc","difference","isLastDayNotFull","endOfMonth","normalizeInterval","interval","start","end","eachDayOfInterval","reversed","endTime","step","startOfQuarter","currentMonth","startOfMonth","startOfYear","date_","formatDistanceLocale","formatDistance","token","count","tokenValue","buildFormatLongFn","dateFormats","timeFormats","dateTimeFormats","formatLong","formatRelativeLocale","formatRelative","_baseDate","_options","buildLocalizeFn","valuesArray","defaultWidth","eraValues","quarterValues","monthValues","dayValues","dayPeriodValues","formattingDayPeriodValues","ordinalNumber","dirtyNumber","number","rem100","localize","quarter","buildMatchFn","string","matchPattern","matchResult","matchedString","parsePatterns","findIndex","pattern","findKey","rest","buildMatchPatternFn","parseResult","matchOrdinalNumberPattern","parseOrdinalNumberPattern","matchEraPatterns","parseEraPatterns","matchQuarterPatterns","parseQuarterPatterns","matchMonthPatterns","parseMonthPatterns","matchDayPatterns","parseDayPatterns","matchDayPeriodPatterns","parseDayPeriodPatterns","enUS","getDayOfYear","getISOWeek","getWeekYear","firstWeekContainsDate","firstWeekOfNextYear","firstWeekOfThisYear","startOfWeekYear","firstWeek","getWeek","addLeadingZeros","targetLength","output","lightFormatters","signedYear","dayPeriodEnumValue","numberOfDigits","milliseconds","fractionalSeconds","dayPeriodEnum","formatters","era","signedWeekYear","weekYear","twoDigitYear","isoWeekYear","week","isoWeek","dayOfYear","dayOfWeek","localDayOfWeek","isoDayOfWeek","hours","_localize","timezoneOffset","formatTimezoneWithOptionalMinutes","formatTimezone","formatTimezoneShort","timestamp","offset","delimiter","absOffset","minutes","dateLongFormatter","timeLongFormatter","dateTimeLongFormatter","datePattern","timePattern","dateTimeFormat","longFormatters","dayOfYearTokenRE","weekYearTokenRE","throwTokens","isProtectedDayOfYearToken","isProtectedWeekYearToken","warnOrThrowProtectedError","format","_message","subject","formattingTokensRegExp","longFormattingTokensRegExp","escapedStringRegExp","doubleQuoteRegExp","unescapedLatinCharacterRegExp","formatStr","locale","defaultLocale","originalDate","parts","substring","firstCharacter","longFormatter","cleanEscapedString","formatterOptions","part","formatter","matched","parseISO","invalidDate","dateStrings","splitDateString","parseYearResult","parseYear","parseDate","time","parseTime","parseTimezone","tmpDate","patterns","dateRegex","timeRegex","timezoneRegex","dateString","timeString","additionalDigits","regex","captures","century","isWeekDate","parseDateUnit","validateWeekDate","dayOfISOWeekYear","validateDate","validateDayOfYearDate","parseTimeUnit","seconds","validateTime","timezoneString","validateTimezone","fourthOfJanuaryDay","daysInMonths","isLeapYearIndex","_year","_hours","PERIODS_CONFIG","generateTimelineCells","bankHolidayDates","bankHolidays","companyEventDates","companyEvents","today","normalizeDate","getHolidayInfo","getEventInfo","generateWeekViewCells","generateMonthViewCells","generateQuarterViewCells","generateYearViewCells","cells","before","after","weekStart","totalDays","createCell","monthStart","quarterStart","weekEnd","isTodayInWeek","cell","_today","_bankHolidayDates","_getHolidayInfo","_getEventInfo","yearStart","totalMonths","createYearViewCell","isCurrentMonth","holidayInfo","eventInfo","generateTimelineHeaders","generateMonthHeaders","generateDayHeaders","generateQuarterHeaders","generateWeekHeaders","generateYearHeaders","generateMonthOnlyHeaders","headers","currentSpan","monthKey","currentQuarter","quarterKey","currentYear","thisYear","currentMonthKey","calculateBarPosition","cellWidth","startDateStr","endDateStr","fcd","lcd","lastCell","totalMs","tw","right","calculateTodayPosition","todayIndex","extractDependencies","links","dep","predItem","predType","findPhaseOrSubphase","extractSubphaseDependencies","findSubphaseById","sp","found","DEPENDENCY_STYLES","CORNER_RADIUS","roundedCorner","cornerX","cornerY","fromDir","toDir","radius","turns","turn","arcStartX","arcStartY","arcEndX","arcEndY","calculateDependencyPath","fromX","fromY","toX","toY","vDir","midX","turnY","leftX","exitX","dir1","dir2","rightX","getDependencyEdges","DETAIL_ROW_VISIBLE_HEIGHT","PROJECT_ROW_TOTAL_HEIGHT","DETAIL_ROW_TOTAL_HEIGHT","calculateRowPositions","phantomConfig","showAssignments","entityPassesFilters","anyDescendantMatches","positions","currentTop","phantomRowTop","isVisible","selfMatches","descendantMatches","projectTop","phaseTop","subphaseResult","addSubphasePositions","phaseStaffCount","phaseEquipCount","projectStaffCount","projectEquipCount","_parentPhaseId","_parentSubphaseId","nestedResult","staffCount","equipCount","formatDateLocal","moveStaffAssignmentsByOffset","assignments","dayOffset","pendingUpdates","oldStart","oldEnd","newStart","newEnd","moveEquipmentAssignmentsByOffset","moveChildrenByOffset","movePhasesWithProject","findParentOfSubphase","findParentRecursive","parent","cascadeParentDatesUp","changedSubphaseId","currentId","parentInfo","earliestStart","latestEnd","currentStart","currentEnd","needsUpdate","autoAdjustProjectDates","phases","phaseStart","phaseEnd","newStartDate","newEndDate","existingIdx","savePendingUpdates","update","processPhaseMove","_phaseId","_oldEndDate","_newEndDate","processSubphaseMove","cloneProject","useDragAndDrop","isDragging","dragType","dragItemId","startDrag","endDrag","showDragIndicator","hideIndicator","currentView","saveState","dragDataRef","useRef","currentXRef","getTimelineCellsFromDOM","headerCells","dateAttr","dateEndAttr","calculateDateFromPosition","leftPx","cw","vm","cellIndex","clampedIndex","msOffset","calculatePhaseLagDays","deps","origStart","durationMs","worstLagDays","depPhase","depStart","depEnd","expectedStart","findSubphaseInProject","searchInChildren","calculateSubphaseLagDays","depSubphase","handleMouseMove","deltaX","newLeft","estimatedStartDate","row","rowTop","barWidth","indicatorLeft","indicatorTop","handleMouseUp","finalLeft","daysDelta","days","commitDragUpdate","origEnd","durationDays","newStartDateObj","newEndDateObj","projectIndex","oldStartMs","newStartMs","phaseCount","projectCopy","childUpdates","updateInTree","updatedProjects","idx","reloadedProjects","startPhaseDrag","isMilestone","targetElement","element","startSubphaseDrag","startProjectDrag","startStaffAssignmentDrag","startEquipmentAssignmentDrag","useResize","isResizing","resizeEdge","resizeItemId","resizeItemType","startResize","endResize","showResizeIndicator","resizeDataRef","cellWidthRef","viewModeRef","currentCellWidth","currentViewMode","newWidth","startMs","endMs","finalWidth","leftDelta","widthDelta","calculatedStart","rightPosition","calculatedEnd","daysPerCell","startPhaseResize","rect","style","startSubphaseResize","startStaffAssignmentResize","startEquipmentAssignmentResize","useScrollSync","ref1","ref2","el1","el2","isSyncing","handleScroll1","handleScroll2","RECURRING_PATTERN","DAY_NAMES","DAY_NAMES_FULL","parseRecurringPattern","daysOfWeek","cleanDescription","createRecurringPattern","getRecurringDaysDisplay","isDateOnRecurringVacation","vacStart","vacEnd","checkDate","useWorkloadCalculation","maxCapacity","useMemo","cellDateStr","activeVacation","isRecurring","vStart","vEnd","isOnVacation","activeAssignments","aStart","aEnd","total","sum","available","getWorkloadTooltip","workload","vacDesc","recurringNote","getWorkloadBackground","determineDependencyType","fromZone","toZone","useDependencyLinking","isLinkingDependency","linkingFrom","startLinking","completeLinking","cancelLinking","findPhase","findSubphase","searchSubphases","hasCircularDependency","startItemId","checkItemId","visited","toCheck","searchDeps","handleLinkZoneClick","depType","createDependency","fromItemId","fromItemType","toItemId","toItemType","fromItem","toItem","currentDeps","newDeps","toStartDate","toEndDate","fromEnd","fromStart","childStart","childEnd","newChildStart","newChildEnd","parentUpdates","updateSubphaseInTree","handleCancelLinking","getSubphaseDepth","findSubphaseDepthRecursive","currentDepth","findSubphaseInChildren","getSubphaseIndexInParent","isParentSubphase","parentId","siblings","formatDate","cleanDate","usePhantomSibling","phantomSiblingMode","startPhantomSibling","updatePhantomPosition","endPhantomSibling","isPhantomModeRef","startPhantom","sourceId","sourceItem","phantomColor","sourceIndex","parentType","dependencyType","sourceStart","sourceEnd","siblingDurationDays","updatePhantom","mouseX","timelineRect","relativeX","firstCellDate","lastCellDate","totalWidth","msPerPixel","halfDurationPx","barLeftPx","clampedBarLeft","cancelPhantom","completePhantom","phantomPreset","rootPhaseId","handleKeyDown","calculateLag","MIN_CELL_WIDTH","MAX_CELL_WIDTH","ZOOM_STEP","useCtrlScrollZoom","containerRef","setCellWidth","isZoomingRef","handleWheel","container","containerRect","currentCellIndex","newScrollLeft","useKeyboardShortcuts","triggerScrollToToday","triggerZoom","closeModal","activeModal","target","DEFAULT_DURATION_DAYS","useResourceDragDrop","resourceDrag","startResourceDrag","updateResourceDragTarget","endResourceDrag","getStaffDefaultAllocation","handleDragStart","handleDragOver","dateFromPosition","handleDragLeave","relatedTarget","handleDrop","defaultAllocation","handleDragEnd","clientX","SiteSelector","currentSite","clearAllCustomColumnFilters","availableSites","handleChange","DateNavigation","setCurrentDate","navigate","goToToday","getPeriodLabel","monthYearFormatter","dateFormatter","yearFormatter","qStart","UserMenu","isOpen","setIsOpen","menuRef","handleClickOutside","handleLogout","initials","ThemeToggle","handleToggle","isDark","WhatIfToggle","whatIfMode","enterWhatIfMode","exitWhatIfMode","isApplying","setIsApplying","pendingCount","handleEnter","handleDiscard","handleApply","InstanceTitle","title","useWebSocket","onPresenceChange","onChangeReceived","autoConnect","connectionState","setConnectionState","onlineUsers","setOnlineUsers","recentChanges","setRecentChanges","onPresenceChangeRef","onChangeReceivedRef","WebSocketContext","createContext","WebSocketProvider","refreshTimeoutRef","pendingRefreshRef","handleChangeReceived","change","connect","disconnect","isConnected","getChangesForEntity","isRecentlyChanged","reconnect","useWebSocketContext","useContext","getInitials","firstName","lastName","getAvatarColor","colors","UserAvatar","memo","size","OnlineUsers","showDropdown","setShowDropdown","maxVisible","visibleUsers","remainingCount","VIEW_MODES","DEFAULT_CELL_WIDTH","Header","setViewMode","showStaffOverview","showEquipmentOverview","toggleShowStaffOverview","toggleShowEquipmentOverview","customLogoDark","setCustomLogoDark","customLogoLight","setCustomLogoLight","showPanelsDropdown","setShowPanelsDropdown","panelsDropdownRef","darkResult","lightResult","canUseWhatIf","canShowPanels","isGanttView","zoomPercent","canZoomIn","canZoomOut","handleZoomIn","handleZoomOut","handleResetZoom","activePanelCount","NAV_ITEMS","Navigation","setCurrentView","ADMIN_ITEMS","AdminSection","setActiveModal","isAdmin","handleClick","visibleItems","QuickStats","siteProjects","siteStaff","siteEquipment","confirmedProjects","unconfirmedProjects","Sidebar","sidebarCollapsed","setSidebarCollapsed","isAdminOrSuperuser","toggleCollapsed","ReorderContext","ReorderProvider","dragState","setDragState","dropTarget","setDropTarget","dragImageRef","cleanup","clone","midY","position","currentOrder","dragIndex","dropIndex","getDropPosition","useReorder","AssignmentRow","role","equipmentType","allocation","phaseType","phaseColor","showContextMenu","canEdit","paddingLeft","handleContextMenu","PhantomRow","onComplete","onCancel","depLabel","CompletionSlider","onChange","onClose","anchorEl","isCalculated","sliderValue","setSliderValue","popoverRef","popover","popoverRect","handleEscape","handleSliderChange","rounded","handleClear","quickValues","CustomColumnCell","column","readOnly","childEntities","setCustomColumnValueLocal","setCustomColumnValueApi","renderCellContent","BooleanCell","ListCell","TextCell","isEditing","setIsEditing","editValue","setEditValue","inputRef","handleBlur","trimmed","isChecked","cellRef","handleSelect","option","CustomColumnHeader","onEdit","onWidthChange","headerRef","setIsResizing","showFilter","setShowFilter","setCustomColumnFilter","clearCustomColumnFilter","activeFilter","hasActiveFilter","uniqueValues","handleMouseDown","startX","startWidth","moveEvent","delta","handleDoubleClick","handleFilterClick","handleFilterToggle","newFilter","handleClearFilter","handleSelectAll","getTypeIcon","toInputDateFormat","getBrowserLocale","formatDateShortLocale","formatShortDateRange","startFormatted","endFormatted","formatSingleDate","collectAllDescendants","traverse","getEffectiveCompletion","hasChildrenWithCompletion","childResult","totalWeight","weightedSum","completion","SubphaseRow","wbsLevel","customColumns","nameColumnWidth","toggleSubphaseExpanded","openSubphaseModal","triggerScrollToDate","sliderAnchor","setSliderAnchor","showSlider","isExpanded","handleEdit","handleLevelClick","handleCompletionClick","newCompletion","handleCompletionChange","dateDisplay","completionResult","onDragStart","onDragOver","onDrop","dragging","dropPosition","createPortal","SubphasesWithPhantom","staffMember","equip","showPhantomAfter","visibleSubphases","PhaseRow","togglePhaseExpanded","openPhaseModal","PhaseSubphasesWithPhantom","calculateProjectCompletion","effectiveResult","ProjectRow","onReorder","siblingIds","_index","toggleProjectExpanded","expandProjectLevel","collapseProjectLevel","toggleCriticalPath","isCriticalPathEnabled","openProjectModal","projectCriticalPathItems","anySubphaseExpanded","checkSubphases","maxDepth","checkDepth","handleExpandLevel","handleCollapseLevel","handleCriticalPathToggle","setDropPosition","setIsDragging","handleProjectDragStart","handleProjectDragEnd","handleProjectDragOver","midpoint","newPosition","handleProjectDragLeave","currentTarget","handleProjectDrop","draggedId","insertBefore","currentIndex","PhasesWithPhantom","visiblePhases","Modal","footer","closeOnOverlayClick","closeOnEscape","overlayRef","modalRef","wasOpenRef","onCloseRef","handleOverlayClick","modalClasses","Button","forwardRef","variant","icon","iconPosition","className","disabled","props","ref","classes","calculateDuration","formatPredecessors","dependencies","idMapping","phaseKey","subphaseKey","sourceRowId","processSubphases","outlineLevel","rows","rowId","internalId","milestone","collectAllSubphases","collect","exportProjectsToCSV","projectRowId","projectInternalId","phaseRowId","phaseInternalId","allSubphases","phaseRow","subRow","downloadCSV","csv","filename","blob","link","exportAndDownload","siteName","createMSProjectXML","lines","escapeXml","uid","addTask","addChildren","childMilestone","downloadXML","xml","exportProjectToXML","ProjectModal","editingProject","setName","customer","setCustomer","pmId","setPmId","salesPm","setSalesPm","volume","setVolume","confirmed","setConfirmed","setArchived","setStartDate","setEndDate","selectedPhases","setSelectedPhases","predefinedPhases","setPredefinedPhases","activePhases","nextMonth","togglePhase","phaseName","prev","next","phaseDuration","adjustedEnd","projectData","isExporting","setIsExporting","fullProject","handleExportCSV","handleExportXML","calculateProjectDateRange","minStart","maxEnd","cascadeProjectDates","newPhaseStart","newPhaseEnd","projectStart","projectEnd","updatedProjectStart","updatedProjectEnd","projectRange","PhaseModal","editingPhase","modalContext","ensureProjectExpanded","setIsMilestone","defaultStart","defaultEnd","phaseData","predecessorId","sourcePhase","lag","sourceSortOrder","handleDelete","updatedProject","finalProjects","findSubphaseDepthInChildren","findPhaseContainingSubphase","calculatePhaseDateRange","calculateSubphaseDateRange","processChildren","subs","findParentSubphaseChain","chain","cascadeDatesUpward","parentChain","immediateParent","parentSubphase","subStart","subEnd","updatedStart","updatedEnd","childRange","updatedPhaseStart","updatedPhaseEnd","SubphaseModal","editingSubphase","ensurePhaseExpanded","ensureSubphaseExpanded","parentPhase","subphaseColor","parentDepth","subphaseData","sourceSubphase","cascadePhaseId","cascadeParentSubphaseId","newSubphaseStart","newSubphaseEnd","containingPhase","parentSubphaseIdForCascade","snapTo5Percent","StaffAssignmentModal","editingStaffAssignment","setStaffId","setAllocation","selectedStaffMaxCapacity","isOverallocated","targetItem","findInChildren","handleStaffChange","newStaffId","maxCap","handleAllocationChange","rawValue","assignmentLevel","isPhaseOrSubphase","updateData","assignmentLevelLabel","targetName","capacityLabel","EquipmentAssignmentModal","editingEquipmentAssignment","setEquipmentId","normalizeICSContent","parseICSFile","inEvent","currentEvent","line","extractDateFromLine","unescapeICS","allDayMatch","dateMatch","ModalFooter","onSaveAndExport","onSave","canSubmit","isImportMode","importCount","VacationModal","editingVacation","canManageResources","setIsRecurring","selectedDays","setSelectedDays","importMode","setImportMode","parsedEvents","setParsedEvents","fileInputRef","descriptionRef","initializedRef","selectedEventsCount","nextMonday","nextFriday","diffTime","handleClose","handleFileSelect","file","reader","handleFileInputChange","toggleEventSelection","toggleAllEvents","selected","saveVacation","rawDescription","vacationData","updatedVacations","importVacations","selectedEvents","handleSave","exportICS","staffName","icsContent","generateICS","handleSaveAndExport","handleCancelImport","footerElement","formatEventDate","calculateDays","summary","allDay","adjustedEndDate","now","escapeICS","BankHolidayModal","selectedYear","setSelectedYear","isAdding","setIsAdding","newHolidayDate","setNewHolidayDate","newHolidayEndDate","setNewHolidayEndDate","newHolidayName","setNewHolidayName","years","filteredHolidays","customHolidays","standardHolidays","loadHolidays","handleRefresh","handleAddCustomHoliday","handleDeleteHoliday","handleExportICS","generateHolidaysICS","CustomHolidayModal","CompanyEventModal","COUNTRIES","SiteModal","editingSite","openModal","city","setCity","countryCode","setCountryCode","regionCode","setRegionCode","setIsActive","isRefreshing","setIsRefreshing","siteHolidayCount","updatedSite","updatedSites","handleRefreshHolidays","handleBack","lastFetchDate","getCountryName","code","SiteManagementModal","setEditingSite","newSiteName","setNewSiteName","handleAddSite","newSite","handleEditSite","SKILL_COLORS","SkillsManagementModal","setLocalSkills","editingSkill","setEditingSkill","isCreating","setIsCreating","loadSkills","skill","handleCreate","handleCloseForm","SkillForm","setDescription","color","setColor","ROLE_CONFIG","UserManagementModal","hasChanges","setHasChanges","setUsers","editingUser","setEditingUser","showSkillsModal","setShowSkillsModal","filterRole","setFilterRole","filterJobTitle","setFilterJobTitle","filterStatus","setFilterStatus","filterSite","setFilterSite","filterSkill","setFilterSkill","isFilterOpen","setIsFilterOpen","filterRef","isSuperUser","canManageUsers","loadUsers","jobTitles","titles","filteredUsers","activeFilterCount","clearFilters","getSiteNames","siteIds","UserForm","onDelete","setFirstName","setLastName","jobTitle","setJobTitle","setRole","setMaxCapacity","active","setActive","selectedSiteIds","setSelectedSiteIds","selectedSkillIds","setSelectedSkillIds","isAddingNewSkill","setIsAddingNewSkill","newSkillName","setNewSkillName","isCreatingSkill","setIsCreatingSkill","setGlobalSkills","canAssignAdmin","canAssignSuperUser","canDelete","canToggleActive","toggleSite","toggleSkill","confirmNewSkill","newSkill","allSkills","cancelNewSkill","SSOConfigModal","setEnabled","setTenantId","clientId","setClientId","clientSecret","setClientSecret","clientSecretPlaceholder","setClientSecretPlaceholder","redirectUri","setRedirectUri","autoCreateUsers","setAutoCreateUsers","defaultRole","setDefaultRole","isSaving","setIsSaving","success","setSuccess","redirectHint","loadConfig","EquipmentTypesManagementModal","onTypesChanged","types","setTypes","allEquipment","setAllEquipment","editingType","setEditingType","loadData","typeCounts","eq","typeInfos","typeName","typeInfo","TypeForm","existingTypes","equipmentCount","trimmedName","EquipmentManagementModal","canManage","setLocalEquipment","selectedSiteId","setSelectedSiteId","showInactive","setShowInactive","editingEquipment","setEditingEquipment","showTypesModal","setShowTypesModal","loadEquipment","filteredEquipment","getSiteName","EquipmentForm","defaultSiteId","setType","isAddingNewType","setIsAddingNewType","newTypeName","setNewTypeName","setSiteId","confirmNewType","cancelNewType","PredefinedPhasesModal","setPhases","newPhaseName","setNewPhaseName","editingId","setEditingId","editingName","setEditingName","setDraggedId","dragOverId","setDragOverId","dragOverPosition","setDragOverPosition","loadPhases","handleAdd","handleUpdateName","handleToggleActive","startEditing","draggedIndex","ImportProjectModal","selectedFile","setSelectedFile","isImporting","setIsImporting","progress","setProgress","setResult","fileName","handleInputChange","handleImport","formData","apiUrl","tenantMatch","responseText","errorMsg","getFileIcon","DEFAULT_SETTINGS","VIEW_OPTIONS","WEEK_START_OPTIONS","SettingsModal","setSettings","originalSettings","setOriginalSettings","themeFamily","setThemeFamilyState","loadSettings","loaded","newInstanceSettings","handleReset","LogoUploader","opt","dragActive","setDragActive","defaultLogo","handleFile","handleRemove","displaySrc","hasCustomLogo","Input","label","hint","leftIcon","rightIcon","fullWidth","inputId","wrapperClasses","inputClasses","Select","placeholder","selectId","selectClasses","CustomColumnModal","columnType","setColumnType","isGlobal","setIsGlobal","listOptions","setListOptions","setWidth","isDeleting","setIsDeleting","handleAddOption","handleRemoveOption","handleOptionChange","CustomColumnsManagerModal","editingColumn","setEditingColumn","showAddModal","setShowAddModal","draggedColumn","setDraggedColumn","dragOverIndex","setDragOverIndex","dragItemRef","refreshColumns","targetIndex","newColumns","removed","updates","col","updatedColumns","getColumnTypeLabel","getColumnTypeIcon","ModalContainer","ProjectPanel","onProjectReorder","toggleShowAssignments","showAllCustomColumns","hiddenCustomColumns","setShowAllCustomColumns","toggleCustomColumnVisibility","showManagerModal","setShowManagerModal","showColumnModal","setShowColumnModal","showVisibilityDropdown","setShowVisibilityDropdown","visibilityDropdownRef","visibleColumns","handleManageColumns","handleEditColumn","handleColumnSave","handleWidthChange","handleToggleAll","customColumnsWidth","hiddenCount","TimelineHeader","hasCustomColumns","showWeekNumbers","showHighlighting","header","bgClass","textClass","tooltipText","ProjectBar","DRAG_THRESHOLD","getEventCoordinates","createSyntheticMouseEvent","touch","PhaseBar","isSubphase","isCriticalPath","changedBy","onResizeStart","onClick","onLinkZoneClick","isLinkingSource","isLinkingActive","onPhantomStart","barRef","dragStateRef","height","handlePointerDown","isTouch","coords","mouseEvent","handleMove","moveCoords","dx","dy","handleUp","handleLeftResizePointerDown","handleRightResizePointerDown","handleStartLinkZoneClick","handleEndLinkZoneClick","dataAttrs","hasCompletion","completionWidth","barTitle","calculateSubphaseCompletion","childCompletion","calculatePhaseCompletion","ProjectTimeline","setEditingPhase","setEditingSubphase","projectCriticalItems","isPhantomMode","projectBar","minDate","maxDate","handlePhaseDragStart","handlePhaseResizeStart","handlePhaseClick","handleSubphaseDragStart","handleSubphaseResizeStart","handleSubphaseClick","handleStaffAssignmentDragStart","handleStaffAssignmentResizeStart","handleEquipmentAssignmentDragStart","handleEquipmentAssignmentResizeStart","handleLinkZone","handlePhantomStart","linkingFromId","linkingFromType","isPhantomSource","PhaseTimeline","AssignmentBar","onPhaseDragStart","onPhaseResizeStart","onPhaseClick","onSubphaseDragStart","onSubphaseResizeStart","onSubphaseClick","barPosition","phaseCompletion","handleResizeStart","handleLinkClick","handlePhantom","SubphaseTimeline","visibleChildren","subphaseCompletion","assignmentType","_projectId","_subphaseId","_equipmentId","interactive","vacationCellMarkers","staffVacations","markers","cellDate","cellEnd","overlappingVacation","lastMarker","cellLeft","isPhaseStaff","isSubphaseStaff","barType","barStyle","handleResizeMouseDown","marker","TodayLine","DEPENDENCY_TYPE_LABELS","DependencyPopup","visible","fromName","toName","popupRef","adjustedX","adjustedY","DependencyLayer","rowPositions","domPositions","setDomPositions","measureCounter","setMeasureCounter","selectedDep","setSelectedDep","rafId","rowsContainer","newPositions","effectivePositions","visibleDependencies","sourceKey","targetKey","itemDatesMap","map","addSubphases","parentColor","arrowPaths","sourcePos","targetPos","sourceDates","targetDates","sourceBar","targetBar","sourceEdge","targetEdge","path","itemNamesMap","addSubphaseNames","handleArrowClick","arrow","handleClosePopup","handleDeleteDependency","targetProject","targetPhase","targetSubphase","markerId","formatDisplayDate","DragIndicator","isPositive","lagText","transform","findSourceBarPosition","sourceType","timelineEl","dataAttr","barRow","bar","barRect","PhantomOverlay","timelineRef","containerWidth","containerHeight","calculatedPhantomRowTop","setSourceBar","updatePosition","pos","timeline","phantomData","sourceBarPos","phantomBarHeight","phantomBarTop","createArrowPath","sourceY","goLeftX","goRightX","goAroundY","ResourceDropOverlay","setMouseX","hoveredTarget","setHoveredTarget","handleCancel","getDateFromX","findTargetFromY","projectKey","projectPos","phasePos","parentPhaseId","spKey","spPos","subphaseTarget","updatePositionFromEvent","clientY","scrollTop","isProjectLevel","isPhaseLevel","isSubphaseLevel","previewBar","rowPos","barLeft","barTop","TimelineBody","dragIndicator","internalRef","setRefs","todayPosition","hasActiveFilters","handleDragEnter","TimelineScrollContext","TimelineScrollProvider","containersRef","lastScrollLeftRef","scrollSourceRef","scrollTimeoutRef","registerScrollContainer","otherId","otherRef","unregisterScrollContainer","syncScroll","getScrollLeft","useTimelineScrollSync","scrollRef","syncScrollPositionRef","currentScrollLeft","handleScroll","syncScrollPosition","SCROLL_SAVE_DELAY","Timeline","horizontalScrollRef","scrollToTodayTrigger","scrollToDateTrigger","clearScrollToDateTrigger","zoomTrigger","clearZoomTrigger","timelineScrollLeft","setTimelineScrollLeft","hasRestoredScroll","scrollSaveTimeout","previousViewModeRef","previousCellWidthRef","visibleDateRef","lastZoomTimestampRef","setCurrentScrollLeft","showAnyOverview","handleSyncScroll","getVisibleDate","scrollContainer","getCenterDate","scrollCenter","scrollToDate","scrollTo","scrollToCenterDate","centerDate","targetDate","targetPosition","projectPanelRef","source","projectPanel","isScrolling","handleProjectScroll","handleTimelineScroll","StaffTimelineBody","assignmentsMap","vacationsMap","rowHeights","expandedStaff","expandedBankHolidays","expandedCompanyEvents","canManageVacation","staffAssignments","StaffRow","VacationDetailRow","DETAIL_ROW_HEIGHT","AssignmentDetailRow","BankHolidaysTimelineRow","CompanyEventsTimelineRow","rowHeight","openVacationModal","workloadCells","showWorkloadHeatmap","stackedBars","allItems","stacks","placed","stack","positioned","stackIndex","ROW_PADDING","BAR_HEIGHT","BAR_GAP","handleBarClick","INDICATOR_AREA_HEIGHT","BankHolidaysRow","onToggle","holidaysByYear","acc","formatHolidayDate","exportToICS","endDateObj","handleAddCustom","handleDeleteCustom","CompanyEventsRow","eventsByYear","handleAddEvent","handleDeleteEvent","BASE_ROW_HEIGHT","StaffView","embedded","panelWidth","onPanelWidthChange","panelRef","timelineBodyRef","timelineScrollRef","rowRefs","measuredHeights","setMeasuredHeights","localPanelWidth","setLocalPanelWidth","effectivePanelWidth","setExpandedStaff","setExpandedBankHolidays","setExpandedCompanyEvents","selectedRoles","setSelectedRoles","selectedSkills","setSelectedSkills","deleteConfirm","setDeleteConfirm","allSiteStaff","staffRoles","roles","filtered","toggleRole","clearAllFilters","staffAssignmentsMap","totalAssignments","existing","staffVacationsMap","calculatedRowHeights","heights","vacas","maxStack","calculateMaxStack","useLayoutEffect","newMeasured","calculated","measured","setRowRef","isActiveToday","calcAvailability","totalAllocation","toggleStaffExpand","canDrag","formatDateRange","handleDeleteVacationRequest","vacationId","handleConfirmDelete","handleCancelDelete","panelStyle","containerStyle","filterLabel","totalFilters","isPartTime","recurringPattern","displayDescription","ranges","maxConcurrent","EquipmentTimelineBody","bookingsMap","EquipmentRow","bookings","bookingBars","booking","EquipmentView","selectedTypes","setSelectedTypes","allSiteEquipment","equipmentTypes","toggleType","selectAllTypes","clearAllTypes","equipmentBookingsMap","calcUtilization","utilization","GanttContainer","setPanelWidth","overviewHeight","setOverviewHeight","canShowOverview","projectOrderVersion","setProjectOrderVersion","filteredProjects","handleProjectReorder","fromId","toId","fromIndex","toIndex","timelineCells","timelineHeaders","totalPanelWidth","handleVerticalResizeStart","startY","startHeight","newHeight","showStaffPanel","showEquipmentPanel","RESIZER_WIDTH","handleOverviewPanelWidthChange","newTotalWidth","newPanelWidth","constrainedWidth","ganttContent","calculateDurationStats","workDays","isBankHoliday","isWeekendDay","findProjectByPhaseId","findPhaseById","findSubphaseContext","findSubphaseInTree","isInLinkZone","ShiftTooltip","tooltipData","setTooltipData","isShiftHeld","setIsShiftHeld","currentBarRef","handleKeyUp","showPhaseTooltip","showSubphaseTooltip","showProjectTooltip","latest","isCalculatedCompletion","comp","completionText","tooltipStyle","CrossSiteTimelineBody","isCurrentSite","displayName","CrossSiteView","projectsBySite","grouped","TimelineRow","startIndex","endIndex","ArchivedView","archivedProjects","MainLayout","renderView","Checkbox","indeterminate","checkboxId","ContextMenu","viewportWidth","viewportHeight","ContextMenuContainer","contextMenu","hideContextMenu","setEditingStaffAssignment","setEditingEquipmentAssignment","findTarget","getMenuItems","EditIcon","AddIcon","PersonIcon","EquipmentIcon","DeleteIcon","assignmentName","useAdminStore","auth","must","tenants","organizations","stats","tenant","organization","AdminLoginScreen","showChangePassword","setShowChangePassword","setCurrentPassword","setNewPassword","confirmPassword","setConfirmPassword","changeSuccess","setChangeSuccess","setAdminUser","setIsAuthenticated","setMustChangePassword","handleChangePassword","TenantList","onCreateNew","onViewDetails","onShowCredentials","onRefresh","systemStats","actionLoading","setActionLoading","handleProvision","handleResetPassword","handleStatusChange","confirmMsg","getStatusBadge","getDbStatusBadge","dbStatus","OrganizationList","org","AdminUserList","adminUsers","currentActive","SystemStatsPanel","formatUptime","mins","CreateTenantModal","onCreated","setFormData","handleNameChange","slug","CreateAdminModal","CreateOrganizationModal","setSlug","generateSlug","TenantDetailsModal","setTenant","auditLog","setAuditLog","loadTenantDetails","tenantData","logData","log","OrganizationDetailsModal","organizationId","allTenants","setOrganization","activeTab","setActiveTab","editName","setEditName","editDescription","setEditDescription","entraTenantId","setEntraTenantId","defaultUserRole","setDefaultUserRole","isSavingSSO","setIsSavingSSO","ssoSuccess","setSsoSuccess","selectedTenantToAdd","setSelectedTenantToAdd","editingTenant","setEditingTenant","tenantGroupIds","setTenantGroupIds","tenantGroupMode","setTenantGroupMode","loadOrganization","handleSaveDetails","handleSaveSSO","handleAddTenant","handleRemoveTenant","handleEditTenantGroups","handleSaveTenantGroups","groupIds","availableTenants","ot","CredentialsModal","copied","setCopied","handleCopy","AdminDashboard","adminUser","setTenants","setOrganizations","setSystemStats","setAdminUsers","showCreateTenant","setShowCreateTenant","showCreateOrganization","setShowCreateOrganization","showCreateAdmin","setShowCreateAdmin","selectedTenantId","setSelectedTenantId","selectedOrganizationId","setSelectedOrganizationId","credentials","setCredentials","loadTenants","loadOrganizations","loadStats","loadAdminUsers","handleShowCredentials","isSuperadmin","AdminApp","App","isDataLoading","isAdminRoute","setIsAdminRoute","queryClient","createRoot","StrictMode"],"ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96],"sources":["../../node_modules/react/cjs/react.production.min.js","../../node_modules/react/index.js","../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/scheduler/cjs/scheduler.production.min.js","../../node_modules/scheduler/index.js","../../node_modules/react-dom/cjs/react-dom.production.min.js","../../node_modules/react-dom/index.js","../../node_modules/react-dom/client.js","../../node_modules/@tanstack/query-core/build/modern/subscribable.js","../../node_modules/@tanstack/query-core/build/modern/timeoutManager.js","../../node_modules/@tanstack/query-core/build/modern/utils.js","../../node_modules/@tanstack/query-core/build/modern/focusManager.js","../../node_modules/@tanstack/query-core/build/modern/thenable.js","../../node_modules/@tanstack/query-core/build/modern/notifyManager.js","../../node_modules/@tanstack/query-core/build/modern/onlineManager.js","../../node_modules/@tanstack/query-core/build/modern/retryer.js","../../node_modules/@tanstack/query-core/build/modern/removable.js","../../node_modules/@tanstack/query-core/build/modern/query.js","../../node_modules/@tanstack/query-core/build/modern/infiniteQueryBehavior.js","../../node_modules/@tanstack/query-core/build/modern/mutation.js","../../node_modules/@tanstack/query-core/build/modern/mutationCache.js","../../node_modules/@tanstack/query-core/build/modern/queryCache.js","../../node_modules/@tanstack/query-core/build/modern/queryClient.js","../../node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js","../../node_modules/zustand/esm/vanilla.mjs","../../node_modules/zustand/esm/react.mjs","../../node_modules/zustand/esm/middleware.mjs","../../src/stores/appStore.ts","../../src/api/client.ts","../../src/api/endpoints/auth.ts","../../src/utils/themeColors.ts","../../src/api/endpoints/projects.ts","../../src/api/endpoints/sites.ts","../../src/api/endpoints/staff.ts","../../src/api/endpoints/equipment.ts","../../src/api/endpoints/vacations.ts","../../src/api/endpoints/users.ts","../../src/api/endpoints/settings.ts","../../src/api/endpoints/customColumns.ts","../../src/api/endpoints/skills.ts","../../src/api/endpoints/admin.ts","../../src/hooks/useAuth.ts","../../src/hooks/useDataLoader.ts","../../src/components/screens/LoadingScreen.tsx","../../src/utils/storage.ts","../../src/components/screens/LoginScreen.tsx","../../src/stores/uiStore.ts","../../src/stores/undoStore.ts","../../node_modules/date-fns/constants.js","../../node_modules/date-fns/constructFrom.js","../../node_modules/date-fns/toDate.js","../../node_modules/date-fns/addDays.js","../../node_modules/date-fns/addMonths.js","../../node_modules/date-fns/isWeekend.js","../../node_modules/date-fns/_lib/defaultOptions.js","../../node_modules/date-fns/startOfWeek.js","../../node_modules/date-fns/startOfISOWeek.js","../../node_modules/date-fns/getISOWeekYear.js","../../node_modules/date-fns/_lib/getTimezoneOffsetInMilliseconds.js","../../node_modules/date-fns/_lib/normalizeDates.js","../../node_modules/date-fns/startOfDay.js","../../node_modules/date-fns/differenceInCalendarDays.js","../../node_modules/date-fns/startOfISOWeekYear.js","../../node_modules/date-fns/addWeeks.js","../../node_modules/date-fns/isSameDay.js","../../node_modules/date-fns/isDate.js","../../node_modules/date-fns/isValid.js","../../node_modules/date-fns/differenceInDays.js","../../node_modules/date-fns/endOfMonth.js","../../node_modules/date-fns/_lib/normalizeInterval.js","../../node_modules/date-fns/eachDayOfInterval.js","../../node_modules/date-fns/startOfQuarter.js","../../node_modules/date-fns/startOfMonth.js","../../node_modules/date-fns/startOfYear.js","../../node_modules/date-fns/locale/en-US/_lib/formatDistance.js","../../node_modules/date-fns/locale/_lib/buildFormatLongFn.js","../../node_modules/date-fns/locale/en-US/_lib/formatLong.js","../../node_modules/date-fns/locale/en-US/_lib/formatRelative.js","../../node_modules/date-fns/locale/_lib/buildLocalizeFn.js","../../node_modules/date-fns/locale/en-US/_lib/localize.js","../../node_modules/date-fns/locale/_lib/buildMatchFn.js","../../node_modules/date-fns/locale/_lib/buildMatchPatternFn.js","../../node_modules/date-fns/locale/en-US/_lib/match.js","../../node_modules/date-fns/locale/en-US.js","../../node_modules/date-fns/getDayOfYear.js","../../node_modules/date-fns/getISOWeek.js","../../node_modules/date-fns/getWeekYear.js","../../node_modules/date-fns/startOfWeekYear.js","../../node_modules/date-fns/getWeek.js","../../node_modules/date-fns/_lib/addLeadingZeros.js","../../node_modules/date-fns/_lib/format/lightFormatters.js","../../node_modules/date-fns/_lib/format/formatters.js","../../node_modules/date-fns/_lib/format/longFormatters.js","../../node_modules/date-fns/_lib/protectedTokens.js","../../node_modules/date-fns/format.js","../../node_modules/date-fns/parseISO.js","../../src/components/gantt/utils/timeline.ts","../../src/components/gantt/utils/dependencies.ts","../../src/components/gantt/utils/rowPositions.ts","../../src/components/gantt/utils/autoCalculation.ts","../../src/hooks/useDragAndDrop.ts","../../src/hooks/useResize.ts","../../src/hooks/useScrollSync.ts","../../src/utils/recurringVacation.ts","../../src/hooks/useWorkloadCalculation.ts","../../src/hooks/useDependencyLinking.ts","../../src/hooks/usePhantomSibling.ts","../../src/hooks/useCtrlScrollZoom.ts","../../src/hooks/useKeyboardShortcuts.ts","../../src/hooks/useResourceDragDrop.ts","../../src/components/layout/Header/SiteSelector.tsx","../../src/components/layout/Header/DateNavigation.tsx","../../src/components/layout/Header/UserMenu.tsx","../../src/components/layout/Header/ThemeToggle.tsx","../../src/components/layout/Header/WhatIfToggle.tsx","../../src/components/layout/Header/InstanceTitle.tsx","../../src/hooks/useWebSocket.ts","../../src/contexts/WebSocketContext.tsx","../../src/components/common/OnlineUsers/OnlineUsers.tsx","../../src/components/layout/Header/Header.tsx","../../src/components/layout/Sidebar/Navigation.tsx","../../src/components/layout/Sidebar/AdminSection.tsx","../../src/components/layout/Sidebar/QuickStats.tsx","../../src/components/layout/Sidebar/Sidebar.tsx","../../src/contexts/ReorderContext.tsx","../../src/components/gantt/ProjectPanel/AssignmentRow.tsx","../../src/components/gantt/ProjectPanel/PhantomRow.tsx","../../src/components/gantt/CompletionSlider/CompletionSlider.tsx","../../src/components/gantt/CustomColumns/CustomColumnCell.tsx","../../src/components/gantt/CustomColumns/CustomColumnHeader.tsx","../../src/utils/date.ts","../../src/components/gantt/ProjectPanel/SubphaseRow.tsx","../../src/components/gantt/ProjectPanel/PhaseRow.tsx","../../src/components/gantt/ProjectPanel/ProjectRow.tsx","../../src/components/common/Modal/Modal.tsx","../../src/components/common/Button/Button.tsx","../../src/utils/csvExport.ts","../../src/utils/xmlExport.ts","../../src/components/modals/ProjectModal.tsx","../../src/components/modals/PhaseModal.tsx","../../src/components/modals/SubphaseModal.tsx","../../src/components/modals/StaffAssignmentModal.tsx","../../src/components/modals/EquipmentAssignmentModal.tsx","../../src/components/modals/VacationModal.tsx","../../src/components/modals/BankHolidayModal.tsx","../../src/components/modals/CustomHolidayModal.tsx","../../src/components/modals/CompanyEventModal.tsx","../../src/components/modals/SiteModal.tsx","../../src/components/modals/SiteManagementModal.tsx","../../src/components/modals/SkillsManagementModal.tsx","../../src/components/modals/UserManagementModal.tsx","../../src/components/modals/SSOConfigModal.tsx","../../src/components/modals/EquipmentTypesManagementModal.tsx","../../src/components/modals/EquipmentManagementModal.tsx","../../src/components/modals/PredefinedPhasesModal.tsx","../../src/components/modals/ImportProjectModal.tsx","../../src/components/modals/SettingsModal.tsx","../../src/components/common/Input/Input.tsx","../../src/components/common/Select/Select.tsx","../../src/components/modals/CustomColumnModal.tsx","../../src/components/modals/CustomColumnsManagerModal.tsx","../../src/components/modals/ModalContainer.tsx","../../src/components/gantt/ProjectPanel/ProjectPanel.tsx","../../src/components/gantt/Timeline/TimelineHeader.tsx","../../src/components/gantt/Timeline/ProjectBar.tsx","../../src/components/gantt/Timeline/PhaseBar.tsx","../../src/components/gantt/Timeline/ProjectTimeline.tsx","../../src/components/gantt/Timeline/TodayLine.tsx","../../src/components/gantt/Timeline/DependencyPopup.tsx","../../src/components/gantt/Timeline/DependencyLayer.tsx","../../src/components/gantt/Timeline/DragIndicator.tsx","../../src/components/gantt/Timeline/PhantomOverlay.tsx","../../src/components/gantt/Timeline/ResourceDropOverlay.tsx","../../src/components/gantt/Timeline/TimelineBody.tsx","../../src/contexts/TimelineScrollContext.tsx","../../src/components/gantt/Timeline/Timeline.tsx","../../src/components/gantt/hooks/useScrollSync.ts","../../src/components/views/StaffView/StaffTimelineBody.tsx","../../src/components/views/StaffView/BankHolidaysRow.tsx","../../src/components/views/StaffView/CompanyEventsRow.tsx","../../src/components/views/StaffView/StaffView.tsx","../../src/components/views/EquipmentView/EquipmentTimelineBody.tsx","../../src/components/views/EquipmentView/EquipmentView.tsx","../../src/components/gantt/GanttContainer.tsx","../../src/components/gantt/ShiftTooltip/ShiftTooltip.tsx","../../src/components/views/CrossSiteView/CrossSiteTimelineBody.tsx","../../src/components/views/CrossSiteView/CrossSiteView.tsx","../../src/components/views/ArchivedView/TimelineRow.tsx","../../src/components/views/ArchivedView/ArchivedView.tsx","../../src/components/layout/MainLayout.tsx","../../src/components/common/Checkbox/Checkbox.tsx","../../src/components/common/ContextMenu/ContextMenu.tsx","../../src/components/gantt/ContextMenuContainer.tsx","../../src/stores/adminStore.ts","../../src/components/admin/AdminLoginScreen.tsx","../../src/components/admin/TenantList.tsx","../../src/components/admin/OrganizationList.tsx","../../src/components/admin/AdminUserList.tsx","../../src/components/admin/SystemStatsPanel.tsx","../../src/components/admin/modals/CreateTenantModal.tsx","../../src/components/admin/modals/CreateAdminModal.tsx","../../src/components/admin/modals/CreateOrganizationModal.tsx","../../src/components/admin/modals/TenantDetailsModal.tsx","../../src/components/admin/modals/OrganizationDetailsModal.tsx","../../src/components/admin/modals/CredentialsModal.tsx","../../src/components/admin/AdminDashboard.tsx","../../src/components/admin/AdminApp.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var l=Symbol.for(\"react.element\"),n=Symbol.for(\"react.portal\"),p=Symbol.for(\"react.fragment\"),q=Symbol.for(\"react.strict_mode\"),r=Symbol.for(\"react.profiler\"),t=Symbol.for(\"react.provider\"),u=Symbol.for(\"react.context\"),v=Symbol.for(\"react.forward_ref\"),w=Symbol.for(\"react.suspense\"),x=Symbol.for(\"react.memo\"),y=Symbol.for(\"react.lazy\"),z=Symbol.iterator;function A(a){if(null===a||\"object\"!==typeof a)return null;a=z&&a[z]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}\nvar B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,D={};function E(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}E.prototype.isReactComponent={};\nE.prototype.setState=function(a,b){if(\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a)throw Error(\"setState(...): takes an object of state variables to update or a function which returns an object of state variables.\");this.updater.enqueueSetState(this,a,b,\"setState\")};E.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};function F(){}F.prototype=E.prototype;function G(a,b,e){this.props=a;this.context=b;this.refs=D;this.updater=e||B}var H=G.prototype=new F;\nH.constructor=G;C(H,E.prototype);H.isPureReactComponent=!0;var I=Array.isArray,J=Object.prototype.hasOwnProperty,K={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};\nfunction M(a,b,e){var d,c={},k=null,h=null;if(null!=b)for(d in void 0!==b.ref&&(h=b.ref),void 0!==b.key&&(k=\"\"+b.key),b)J.call(b,d)&&!L.hasOwnProperty(d)&&(c[d]=b[d]);var g=arguments.length-2;if(1===g)c.children=e;else if(1<g){for(var f=Array(g),m=0;m<g;m++)f[m]=arguments[m+2];c.children=f}if(a&&a.defaultProps)for(d in g=a.defaultProps,g)void 0===c[d]&&(c[d]=g[d]);return{$$typeof:l,type:a,key:k,ref:h,props:c,_owner:K.current}}\nfunction N(a,b){return{$$typeof:l,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function O(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===l}function escape(a){var b={\"=\":\"=0\",\":\":\"=2\"};return\"$\"+a.replace(/[=:]/g,function(a){return b[a]})}var P=/\\/+/g;function Q(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(\"\"+a.key):b.toString(36)}\nfunction R(a,b,e,d,c){var k=typeof a;if(\"undefined\"===k||\"boolean\"===k)a=null;var h=!1;if(null===a)h=!0;else switch(k){case \"string\":case \"number\":h=!0;break;case \"object\":switch(a.$$typeof){case l:case n:h=!0}}if(h)return h=a,c=c(h),a=\"\"===d?\".\"+Q(h,0):d,I(c)?(e=\"\",null!=a&&(e=a.replace(P,\"$&/\")+\"/\"),R(c,b,e,\"\",function(a){return a})):null!=c&&(O(c)&&(c=N(c,e+(!c.key||h&&h.key===c.key?\"\":(\"\"+c.key).replace(P,\"$&/\")+\"/\")+a)),b.push(c)),1;h=0;d=\"\"===d?\".\":d+\":\";if(I(a))for(var g=0;g<a.length;g++){k=\na[g];var f=d+Q(k,g);h+=R(k,b,e,f,c)}else if(f=A(a),\"function\"===typeof f)for(a=f.call(a),g=0;!(k=a.next()).done;)k=k.value,f=d+Q(k,g++),h+=R(k,b,e,f,c);else if(\"object\"===k)throw b=String(a),Error(\"Objects are not valid as a React child (found: \"+(\"[object Object]\"===b?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":b)+\"). If you meant to render a collection of children, use an array instead.\");return h}\nfunction S(a,b,e){if(null==a)return a;var d=[],c=0;R(a,d,\"\",\"\",function(a){return b.call(e,a,c++)});return d}function T(a){if(-1===a._status){var b=a._result;b=b();b.then(function(b){if(0===a._status||-1===a._status)a._status=1,a._result=b},function(b){if(0===a._status||-1===a._status)a._status=2,a._result=b});-1===a._status&&(a._status=0,a._result=b)}if(1===a._status)return a._result.default;throw a._result;}\nvar U={current:null},V={transition:null},W={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:V,ReactCurrentOwner:K};function X(){throw Error(\"act(...) is not supported in production builds of React.\");}\nexports.Children={map:S,forEach:function(a,b,e){S(a,function(){b.apply(this,arguments)},e)},count:function(a){var b=0;S(a,function(){b++});return b},toArray:function(a){return S(a,function(a){return a})||[]},only:function(a){if(!O(a))throw Error(\"React.Children.only expected to receive a single React element child.\");return a}};exports.Component=E;exports.Fragment=p;exports.Profiler=r;exports.PureComponent=G;exports.StrictMode=q;exports.Suspense=w;\nexports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W;exports.act=X;\nexports.cloneElement=function(a,b,e){if(null===a||void 0===a)throw Error(\"React.cloneElement(...): The argument must be a React element, but you passed \"+a+\".\");var d=C({},a.props),c=a.key,k=a.ref,h=a._owner;if(null!=b){void 0!==b.ref&&(k=b.ref,h=K.current);void 0!==b.key&&(c=\"\"+b.key);if(a.type&&a.type.defaultProps)var g=a.type.defaultProps;for(f in b)J.call(b,f)&&!L.hasOwnProperty(f)&&(d[f]=void 0===b[f]&&void 0!==g?g[f]:b[f])}var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){g=Array(f);\nfor(var m=0;m<f;m++)g[m]=arguments[m+2];d.children=g}return{$$typeof:l,type:a.type,key:c,ref:k,props:d,_owner:h}};exports.createContext=function(a){a={$$typeof:u,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null};a.Provider={$$typeof:t,_context:a};return a.Consumer=a};exports.createElement=M;exports.createFactory=function(a){var b=M.bind(null,a);b.type=a;return b};exports.createRef=function(){return{current:null}};\nexports.forwardRef=function(a){return{$$typeof:v,render:a}};exports.isValidElement=O;exports.lazy=function(a){return{$$typeof:y,_payload:{_status:-1,_result:a},_init:T}};exports.memo=function(a,b){return{$$typeof:x,type:a,compare:void 0===b?null:b}};exports.startTransition=function(a){var b=V.transition;V.transition={};try{a()}finally{V.transition=b}};exports.unstable_act=X;exports.useCallback=function(a,b){return U.current.useCallback(a,b)};exports.useContext=function(a){return U.current.useContext(a)};\nexports.useDebugValue=function(){};exports.useDeferredValue=function(a){return U.current.useDeferredValue(a)};exports.useEffect=function(a,b){return U.current.useEffect(a,b)};exports.useId=function(){return U.current.useId()};exports.useImperativeHandle=function(a,b,e){return U.current.useImperativeHandle(a,b,e)};exports.useInsertionEffect=function(a,b){return U.current.useInsertionEffect(a,b)};exports.useLayoutEffect=function(a,b){return U.current.useLayoutEffect(a,b)};\nexports.useMemo=function(a,b){return U.current.useMemo(a,b)};exports.useReducer=function(a,b,e){return U.current.useReducer(a,b,e)};exports.useRef=function(a){return U.current.useRef(a)};exports.useState=function(a){return U.current.useState(a)};exports.useSyncExternalStore=function(a,b,e){return U.current.useSyncExternalStore(a,b,e)};exports.useTransition=function(){return U.current.useTransition()};exports.version=\"18.3.1\";\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n","/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","/**\n * @license React\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';function f(a,b){var c=a.length;a.push(b);a:for(;0<c;){var d=c-1>>>1,e=a[d];if(0<g(e,b))a[d]=b,a[c]=e,c=d;else break a}}function h(a){return 0===a.length?null:a[0]}function k(a){if(0===a.length)return null;var b=a[0],c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length,w=e>>>1;d<w;){var m=2*(d+1)-1,C=a[m],n=m+1,x=a[n];if(0>g(C,c))n<e&&0>g(x,C)?(a[d]=x,a[n]=c,d=n):(a[d]=C,a[m]=c,d=m);else if(n<e&&0>g(x,c))a[d]=x,a[n]=c,d=n;else break a}}return b}\nfunction g(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}if(\"object\"===typeof performance&&\"function\"===typeof performance.now){var l=performance;exports.unstable_now=function(){return l.now()}}else{var p=Date,q=p.now();exports.unstable_now=function(){return p.now()-q}}var r=[],t=[],u=1,v=null,y=3,z=!1,A=!1,B=!1,D=\"function\"===typeof setTimeout?setTimeout:null,E=\"function\"===typeof clearTimeout?clearTimeout:null,F=\"undefined\"!==typeof setImmediate?setImmediate:null;\n\"undefined\"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(a){for(var b=h(t);null!==b;){if(null===b.callback)k(t);else if(b.startTime<=a)k(t),b.sortIndex=b.expirationTime,f(r,b);else break;b=h(t)}}function H(a){B=!1;G(a);if(!A)if(null!==h(r))A=!0,I(J);else{var b=h(t);null!==b&&K(H,b.startTime-a)}}\nfunction J(a,b){A=!1;B&&(B=!1,E(L),L=-1);z=!0;var c=y;try{G(b);for(v=h(r);null!==v&&(!(v.expirationTime>b)||a&&!M());){var d=v.callback;if(\"function\"===typeof d){v.callback=null;y=v.priorityLevel;var e=d(v.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?v.callback=e:v===h(r)&&k(r);G(b)}else k(r);v=h(r)}if(null!==v)var w=!0;else{var m=h(t);null!==m&&K(H,m.startTime-b);w=!1}return w}finally{v=null,y=c,z=!1}}var N=!1,O=null,L=-1,P=5,Q=-1;\nfunction M(){return exports.unstable_now()-Q<P?!1:!0}function R(){if(null!==O){var a=exports.unstable_now();Q=a;var b=!0;try{b=O(!0,a)}finally{b?S():(N=!1,O=null)}}else N=!1}var S;if(\"function\"===typeof F)S=function(){F(R)};else if(\"undefined\"!==typeof MessageChannel){var T=new MessageChannel,U=T.port2;T.port1.onmessage=R;S=function(){U.postMessage(null)}}else S=function(){D(R,0)};function I(a){O=a;N||(N=!0,S())}function K(a,b){L=D(function(){a(exports.unstable_now())},b)}\nexports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){A||z||(A=!0,I(J))};\nexports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"):P=0<a?Math.floor(1E3/a):5};exports.unstable_getCurrentPriorityLevel=function(){return y};exports.unstable_getFirstCallbackNode=function(){return h(r)};exports.unstable_next=function(a){switch(y){case 1:case 2:case 3:var b=3;break;default:b=y}var c=y;y=b;try{return a()}finally{y=c}};exports.unstable_pauseExecution=function(){};\nexports.unstable_requestPaint=function(){};exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=y;y=a;try{return b()}finally{y=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();\"object\"===typeof c&&null!==c?(c=c.delay,c=\"number\"===typeof c&&0<c?d+c:d):c=d;switch(a){case 1:var e=-1;break;case 2:e=250;break;case 5:e=1073741823;break;case 4:e=1E4;break;default:e=5E3}e=c+e;a={id:u++,callback:b,priorityLevel:a,startTime:c,expirationTime:e,sortIndex:-1};c>d?(a.sortIndex=c,f(t,a),null===h(r)&&a===h(t)&&(B?(E(L),L=-1):B=!0,K(H,c-d))):(a.sortIndex=e,f(r,a),A||z||(A=!0,I(J)));return a};\nexports.unstable_shouldYield=M;exports.unstable_wrapCallback=function(a){var b=y;return function(){var c=y;y=b;try{return a.apply(this,arguments)}finally{y=c}}};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/**\n * @license React\n * react-dom.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),ca=require(\"scheduler\");function p(a){for(var b=\"https://reactjs.org/docs/error-decoder.html?invariant=\"+a,c=1;c<arguments.length;c++)b+=\"&args[]=\"+encodeURIComponent(arguments[c]);return\"Minified React error #\"+a+\"; visit \"+b+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\"}var da=new Set,ea={};function fa(a,b){ha(a,b);ha(a+\"Capture\",b)}\nfunction ha(a,b){ea[a]=b;for(a=0;a<b.length;a++)da.add(b[a])}\nvar ia=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,la=\n{},ma={};function oa(a){if(ja.call(ma,a))return!0;if(ja.call(la,a))return!1;if(ka.test(a))return ma[a]=!0;la[a]=!0;return!1}function pa(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case \"function\":case \"symbol\":return!0;case \"boolean\":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return\"data-\"!==a&&\"aria-\"!==a;default:return!1}}\nfunction qa(a,b,c,d){if(null===b||\"undefined\"===typeof b||pa(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function v(a,b,c,d,e,f,g){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f;this.removeEmptyString=g}var z={};\n\"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style\".split(\" \").forEach(function(a){z[a]=new v(a,0,!1,a,null,!1,!1)});[[\"acceptCharset\",\"accept-charset\"],[\"className\",\"class\"],[\"htmlFor\",\"for\"],[\"httpEquiv\",\"http-equiv\"]].forEach(function(a){var b=a[0];z[b]=new v(b,1,!1,a[1],null,!1,!1)});[\"contentEditable\",\"draggable\",\"spellCheck\",\"value\"].forEach(function(a){z[a]=new v(a,2,!1,a.toLowerCase(),null,!1,!1)});\n[\"autoReverse\",\"externalResourcesRequired\",\"focusable\",\"preserveAlpha\"].forEach(function(a){z[a]=new v(a,2,!1,a,null,!1,!1)});\"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope\".split(\" \").forEach(function(a){z[a]=new v(a,3,!1,a.toLowerCase(),null,!1,!1)});\n[\"checked\",\"multiple\",\"muted\",\"selected\"].forEach(function(a){z[a]=new v(a,3,!0,a,null,!1,!1)});[\"capture\",\"download\"].forEach(function(a){z[a]=new v(a,4,!1,a,null,!1,!1)});[\"cols\",\"rows\",\"size\",\"span\"].forEach(function(a){z[a]=new v(a,6,!1,a,null,!1,!1)});[\"rowSpan\",\"start\"].forEach(function(a){z[a]=new v(a,5,!1,a.toLowerCase(),null,!1,!1)});var ra=/[\\-:]([a-z])/g;function sa(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height\".split(\" \").forEach(function(a){var b=a.replace(ra,\nsa);z[b]=new v(b,1,!1,a,null,!1,!1)});\"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type\".split(\" \").forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/1999/xlink\",!1,!1)});[\"xml:base\",\"xml:lang\",\"xml:space\"].forEach(function(a){var b=a.replace(ra,sa);z[b]=new v(b,1,!1,a,\"http://www.w3.org/XML/1998/namespace\",!1,!1)});[\"tabIndex\",\"crossOrigin\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!1,!1)});\nz.xlinkHref=new v(\"xlinkHref\",1,!1,\"xlink:href\",\"http://www.w3.org/1999/xlink\",!0,!1);[\"src\",\"href\",\"action\",\"formAction\"].forEach(function(a){z[a]=new v(a,1,!1,a.toLowerCase(),null,!0,!0)});\nfunction ta(a,b,c,d){var e=z.hasOwnProperty(b)?z[b]:null;if(null!==e?0!==e.type:d||!(2<b.length)||\"o\"!==b[0]&&\"O\"!==b[0]||\"n\"!==b[1]&&\"N\"!==b[1])qa(b,c,e,d)&&(c=null),d||null===e?oa(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,\"\"+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:\"\":c:(b=e.attributeName,d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?\"\":\"\"+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c)))}\nvar ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for(\"react.element\"),wa=Symbol.for(\"react.portal\"),ya=Symbol.for(\"react.fragment\"),za=Symbol.for(\"react.strict_mode\"),Aa=Symbol.for(\"react.profiler\"),Ba=Symbol.for(\"react.provider\"),Ca=Symbol.for(\"react.context\"),Da=Symbol.for(\"react.forward_ref\"),Ea=Symbol.for(\"react.suspense\"),Fa=Symbol.for(\"react.suspense_list\"),Ga=Symbol.for(\"react.memo\"),Ha=Symbol.for(\"react.lazy\");Symbol.for(\"react.scope\");Symbol.for(\"react.debug_trace_mode\");\nvar Ia=Symbol.for(\"react.offscreen\");Symbol.for(\"react.legacy_hidden\");Symbol.for(\"react.cache\");Symbol.for(\"react.tracing_marker\");var Ja=Symbol.iterator;function Ka(a){if(null===a||\"object\"!==typeof a)return null;a=Ja&&a[Ja]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var A=Object.assign,La;function Ma(a){if(void 0===La)try{throw Error();}catch(c){var b=c.stack.trim().match(/\\n( *(at )?)/);La=b&&b[1]||\"\"}return\"\\n\"+La+a}var Na=!1;\nfunction Oa(a,b){if(!a||Na)return\"\";Na=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(b)if(b=function(){throw Error();},Object.defineProperty(b.prototype,\"props\",{set:function(){throw Error();}}),\"object\"===typeof Reflect&&Reflect.construct){try{Reflect.construct(b,[])}catch(l){var d=l}Reflect.construct(a,[],b)}else{try{b.call()}catch(l){d=l}a.call(b.prototype)}else{try{throw Error();}catch(l){d=l}a()}}catch(l){if(l&&d&&\"string\"===typeof l.stack){for(var e=l.stack.split(\"\\n\"),\nf=d.stack.split(\"\\n\"),g=e.length-1,h=f.length-1;1<=g&&0<=h&&e[g]!==f[h];)h--;for(;1<=g&&0<=h;g--,h--)if(e[g]!==f[h]){if(1!==g||1!==h){do if(g--,h--,0>h||e[g]!==f[h]){var k=\"\\n\"+e[g].replace(\" at new \",\" at \");a.displayName&&k.includes(\"<anonymous>\")&&(k=k.replace(\"<anonymous>\",a.displayName));return k}while(1<=g&&0<=h)}break}}}finally{Na=!1,Error.prepareStackTrace=c}return(a=a?a.displayName||a.name:\"\")?Ma(a):\"\"}\nfunction Pa(a){switch(a.tag){case 5:return Ma(a.type);case 16:return Ma(\"Lazy\");case 13:return Ma(\"Suspense\");case 19:return Ma(\"SuspenseList\");case 0:case 2:case 15:return a=Oa(a.type,!1),a;case 11:return a=Oa(a.type.render,!1),a;case 1:return a=Oa(a.type,!0),a;default:return\"\"}}\nfunction Qa(a){if(null==a)return null;if(\"function\"===typeof a)return a.displayName||a.name||null;if(\"string\"===typeof a)return a;switch(a){case ya:return\"Fragment\";case wa:return\"Portal\";case Aa:return\"Profiler\";case za:return\"StrictMode\";case Ea:return\"Suspense\";case Fa:return\"SuspenseList\"}if(\"object\"===typeof a)switch(a.$$typeof){case Ca:return(a.displayName||\"Context\")+\".Consumer\";case Ba:return(a._context.displayName||\"Context\")+\".Provider\";case Da:var b=a.render;a=a.displayName;a||(a=b.displayName||\nb.name||\"\",a=\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");return a;case Ga:return b=a.displayName||null,null!==b?b:Qa(a.type)||\"Memo\";case Ha:b=a._payload;a=a._init;try{return Qa(a(b))}catch(c){}}return null}\nfunction Ra(a){var b=a.type;switch(a.tag){case 24:return\"Cache\";case 9:return(b.displayName||\"Context\")+\".Consumer\";case 10:return(b._context.displayName||\"Context\")+\".Provider\";case 18:return\"DehydratedFragment\";case 11:return a=b.render,a=a.displayName||a.name||\"\",b.displayName||(\"\"!==a?\"ForwardRef(\"+a+\")\":\"ForwardRef\");case 7:return\"Fragment\";case 5:return b;case 4:return\"Portal\";case 3:return\"Root\";case 6:return\"Text\";case 16:return Qa(b);case 8:return b===za?\"StrictMode\":\"Mode\";case 22:return\"Offscreen\";\ncase 12:return\"Profiler\";case 21:return\"Scope\";case 13:return\"Suspense\";case 19:return\"SuspenseList\";case 25:return\"TracingMarker\";case 1:case 0:case 17:case 2:case 14:case 15:if(\"function\"===typeof b)return b.displayName||b.name||null;if(\"string\"===typeof b)return b}return null}function Sa(a){switch(typeof a){case \"boolean\":case \"number\":case \"string\":case \"undefined\":return a;case \"object\":return a;default:return\"\"}}\nfunction Ta(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ua(a){var b=Ta(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"undefined\"!==typeof c&&\"function\"===typeof c.get&&\"function\"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=\"\"+a;f.call(this,a)}});Object.defineProperty(a,b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=\nnull;delete a[b]}}}}function Va(a){a._valueTracker||(a._valueTracker=Ua(a))}function Wa(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=Ta(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Xa(a){a=a||(\"undefined\"!==typeof document?document:void 0);if(\"undefined\"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}\nfunction Ya(a,b){var c=b.checked;return A({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=c?c:a._wrapperState.initialChecked})}function Za(a,b){var c=null==b.defaultValue?\"\":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=Sa(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}function ab(a,b){b=b.checked;null!=b&&ta(a,\"checked\",b,!1)}\nfunction bb(a,b){ab(a,b);var c=Sa(b.value),d=b.type;if(null!=c)if(\"number\"===d){if(0===c&&\"\"===a.value||a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else if(\"submit\"===d||\"reset\"===d){a.removeAttribute(\"value\");return}b.hasOwnProperty(\"value\")?cb(a,b.type,c):b.hasOwnProperty(\"defaultValue\")&&cb(a,b.type,Sa(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction db(a,b,c){if(b.hasOwnProperty(\"value\")||b.hasOwnProperty(\"defaultValue\")){var d=b.type;if(!(\"submit\"!==d&&\"reset\"!==d||void 0!==b.value&&null!==b.value))return;b=\"\"+a._wrapperState.initialValue;c||b===a.value||(a.value=b);a.defaultValue=b}c=a.name;\"\"!==c&&(a.name=\"\");a.defaultChecked=!!a._wrapperState.initialChecked;\"\"!==c&&(a.name=c)}\nfunction cb(a,b,c){if(\"number\"!==b||Xa(a.ownerDocument)!==a)null==c?a.defaultValue=\"\"+a._wrapperState.initialValue:a.defaultValue!==\"\"+c&&(a.defaultValue=\"\"+c)}var eb=Array.isArray;\nfunction fb(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+Sa(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction gb(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(p(91));return A({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function hb(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(p(92));if(eb(c)){if(1<c.length)throw Error(p(93));c=c[0]}b=c}null==b&&(b=\"\");c=b}a._wrapperState={initialValue:Sa(c)}}\nfunction ib(a,b){var c=Sa(b.value),d=Sa(b.defaultValue);null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=\"\"+d)}function jb(a){var b=a.textContent;b===a._wrapperState.initialValue&&\"\"!==b&&null!==b&&(a.value=b)}function kb(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}\nfunction lb(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?kb(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar mb,nb=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(\"http://www.w3.org/2000/svg\"!==a.namespaceURI||\"innerHTML\"in a)a.innerHTML=b;else{mb=mb||document.createElement(\"div\");mb.innerHTML=\"<svg>\"+b.valueOf().toString()+\"</svg>\";for(b=mb.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction ob(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,\nzoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(pb).forEach(function(a){qb.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);pb[b]=pb[a]})});function rb(a,b,c){return null==b||\"boolean\"===typeof b||\"\"===b?\"\":c||\"number\"!==typeof b||0===b||pb.hasOwnProperty(a)&&pb[a]?(\"\"+b).trim():b+\"px\"}\nfunction sb(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\"),e=rb(c,b[c],d);\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction ub(a,b){if(b){if(tb[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(p(137,a));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(p(60));if(\"object\"!==typeof b.dangerouslySetInnerHTML||!(\"__html\"in b.dangerouslySetInnerHTML))throw Error(p(61));}if(null!=b.style&&\"object\"!==typeof b.style)throw Error(p(62));}}\nfunction vb(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}var wb=null;function xb(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var yb=null,zb=null,Ab=null;\nfunction Bb(a){if(a=Cb(a)){if(\"function\"!==typeof yb)throw Error(p(280));var b=a.stateNode;b&&(b=Db(b),yb(a.stateNode,a.type,b))}}function Eb(a){zb?Ab?Ab.push(a):Ab=[a]:zb=a}function Fb(){if(zb){var a=zb,b=Ab;Ab=zb=null;Bb(a);if(b)for(a=0;a<b.length;a++)Bb(b[a])}}function Gb(a,b){return a(b)}function Hb(){}var Ib=!1;function Jb(a,b,c){if(Ib)return a(b,c);Ib=!0;try{return Gb(a,b,c)}finally{if(Ib=!1,null!==zb||null!==Ab)Hb(),Fb()}}\nfunction Kb(a,b){var c=a.stateNode;if(null===c)return null;var d=Db(c);if(null===d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":case \"onMouseEnter\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&\"function\"!==\ntypeof c)throw Error(p(231,b,typeof c));return c}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,\"passive\",{get:function(){Lb=!0}});window.addEventListener(\"test\",Mb,Mb);window.removeEventListener(\"test\",Mb,Mb)}catch(a){Lb=!1}function Nb(a,b,c,d,e,f,g,h,k){var l=Array.prototype.slice.call(arguments,3);try{b.apply(c,l)}catch(m){this.onError(m)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(a){Ob=!0;Pb=a}};function Tb(a,b,c,d,e,f,g,h,k){Ob=!1;Pb=null;Nb.apply(Sb,arguments)}\nfunction Ub(a,b,c,d,e,f,g,h,k){Tb.apply(this,arguments);if(Ob){if(Ob){var l=Pb;Ob=!1;Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=l)}}function Vb(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.flags&4098)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Wb(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Xb(a){if(Vb(a)!==a)throw Error(p(188));}\nfunction Yb(a){var b=a.alternate;if(!b){b=Vb(a);if(null===b)throw Error(p(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Xb(e),a;if(f===d)return Xb(e),b;f=f.sibling}throw Error(p(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===\nc){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(p(189));}}if(c.alternate!==d)throw Error(p(190));}if(3!==c.tag)throw Error(p(188));return c.stateNode.current===c?a:b}function Zb(a){a=Yb(a);return null!==a?$b(a):null}function $b(a){if(5===a.tag||6===a.tag)return a;for(a=a.child;null!==a;){var b=$b(a);if(null!==b)return b;a=a.sibling}return null}\nvar ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(a){if(lc&&\"function\"===typeof lc.onCommitFiberRoot)try{lc.onCommitFiberRoot(kc,a,void 0,128===(a.current.flags&128))}catch(b){}}\nvar oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(a){a>>>=0;return 0===a?32:31-(pc(a)/qc|0)|0}var rc=64,sc=4194304;\nfunction tc(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;\ndefault:return a}}function uc(a,b){var c=a.pendingLanes;if(0===c)return 0;var d=0,e=a.suspendedLanes,f=a.pingedLanes,g=c&268435455;if(0!==g){var h=g&~e;0!==h?d=tc(h):(f&=g,0!==f&&(d=tc(f)))}else g=c&~e,0!==g?d=tc(g):0!==f&&(d=tc(f));if(0===d)return 0;if(0!==b&&b!==d&&0===(b&e)&&(e=d&-d,f=b&-b,e>=f||16===e&&0!==(f&4194240)))return b;0!==(d&4)&&(d|=c&16);b=a.entangledLanes;if(0!==b)for(a=a.entanglements,b&=d;0<b;)c=31-oc(b),e=1<<c,d|=a[c],b&=~e;return d}\nfunction vc(a,b){switch(a){case 1:case 2:case 4:return b+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5E3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}\nfunction wc(a,b){for(var c=a.suspendedLanes,d=a.pingedLanes,e=a.expirationTimes,f=a.pendingLanes;0<f;){var g=31-oc(f),h=1<<g,k=e[g];if(-1===k){if(0===(h&c)||0!==(h&d))e[g]=vc(h,b)}else k<=b&&(a.expiredLanes|=h);f&=~h}}function xc(a){a=a.pendingLanes&-1073741825;return 0!==a?a:a&1073741824?1073741824:0}function yc(){var a=rc;rc<<=1;0===(rc&4194240)&&(rc=64);return a}function zc(a){for(var b=[],c=0;31>c;c++)b.push(a);return b}\nfunction Ac(a,b,c){a.pendingLanes|=b;536870912!==b&&(a.suspendedLanes=0,a.pingedLanes=0);a=a.eventTimes;b=31-oc(b);a[b]=c}function Bc(a,b){var c=a.pendingLanes&~b;a.pendingLanes=b;a.suspendedLanes=0;a.pingedLanes=0;a.expiredLanes&=b;a.mutableReadLanes&=b;a.entangledLanes&=b;b=a.entanglements;var d=a.eventTimes;for(a=a.expirationTimes;0<c;){var e=31-oc(c),f=1<<e;b[e]=0;d[e]=-1;a[e]=-1;c&=~f}}\nfunction Cc(a,b){var c=a.entangledLanes|=b;for(a=a.entanglements;c;){var d=31-oc(c),e=1<<d;e&b|a[d]&b&&(a[d]|=b);c&=~e}}var C=0;function Dc(a){a&=-a;return 1<a?4<a?0!==(a&268435455)?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc=\"mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit\".split(\" \");\nfunction Sc(a,b){switch(a){case \"focusin\":case \"focusout\":Lc=null;break;case \"dragenter\":case \"dragleave\":Mc=null;break;case \"mouseover\":case \"mouseout\":Nc=null;break;case \"pointerover\":case \"pointerout\":Oc.delete(b.pointerId);break;case \"gotpointercapture\":case \"lostpointercapture\":Pc.delete(b.pointerId)}}\nfunction Tc(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a={blockedOn:b,domEventName:c,eventSystemFlags:d,nativeEvent:f,targetContainers:[e]},null!==b&&(b=Cb(b),null!==b&&Fc(b)),a;a.eventSystemFlags|=d;b=a.targetContainers;null!==e&&-1===b.indexOf(e)&&b.push(e);return a}\nfunction Uc(a,b,c,d,e){switch(b){case \"focusin\":return Lc=Tc(Lc,a,b,c,d,e),!0;case \"dragenter\":return Mc=Tc(Mc,a,b,c,d,e),!0;case \"mouseover\":return Nc=Tc(Nc,a,b,c,d,e),!0;case \"pointerover\":var f=e.pointerId;Oc.set(f,Tc(Oc.get(f)||null,a,b,c,d,e));return!0;case \"gotpointercapture\":return f=e.pointerId,Pc.set(f,Tc(Pc.get(f)||null,a,b,c,d,e)),!0}return!1}\nfunction Vc(a){var b=Wc(a.target);if(null!==b){var c=Vb(b);if(null!==c)if(b=c.tag,13===b){if(b=Wb(c),null!==b){a.blockedOn=b;Ic(a.priority,function(){Gc(c)});return}}else if(3===b&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}\nfunction Xc(a){if(null!==a.blockedOn)return!1;for(var b=a.targetContainers;0<b.length;){var c=Yc(a.domEventName,a.eventSystemFlags,b[0],a.nativeEvent);if(null===c){c=a.nativeEvent;var d=new c.constructor(c.type,c);wb=d;c.target.dispatchEvent(d);wb=null}else return b=Cb(c),null!==b&&Fc(b),a.blockedOn=c,!1;b.shift()}return!0}function Zc(a,b,c){Xc(a)&&c.delete(b)}function $c(){Jc=!1;null!==Lc&&Xc(Lc)&&(Lc=null);null!==Mc&&Xc(Mc)&&(Mc=null);null!==Nc&&Xc(Nc)&&(Nc=null);Oc.forEach(Zc);Pc.forEach(Zc)}\nfunction ad(a,b){a.blockedOn===b&&(a.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}\nfunction bd(a){function b(b){return ad(b,a)}if(0<Kc.length){ad(Kc[0],a);for(var c=1;c<Kc.length;c++){var d=Kc[c];d.blockedOn===a&&(d.blockedOn=null)}}null!==Lc&&ad(Lc,a);null!==Mc&&ad(Mc,a);null!==Nc&&ad(Nc,a);Oc.forEach(b);Pc.forEach(b);for(c=0;c<Qc.length;c++)d=Qc[c],d.blockedOn===a&&(d.blockedOn=null);for(;0<Qc.length&&(c=Qc[0],null===c.blockedOn);)Vc(c),null===c.blockedOn&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;\nfunction ed(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=1,fd(a,b,c,d)}finally{C=e,cd.transition=f}}function gd(a,b,c,d){var e=C,f=cd.transition;cd.transition=null;try{C=4,fd(a,b,c,d)}finally{C=e,cd.transition=f}}\nfunction fd(a,b,c,d){if(dd){var e=Yc(a,b,c,d);if(null===e)hd(a,b,d,id,c),Sc(a,d);else if(Uc(e,a,b,c,d))d.stopPropagation();else if(Sc(a,d),b&4&&-1<Rc.indexOf(a)){for(;null!==e;){var f=Cb(e);null!==f&&Ec(f);f=Yc(a,b,c,d);null===f&&hd(a,b,d,id,c);if(f===e)break;e=f}null!==e&&d.stopPropagation()}else hd(a,b,d,null,c)}}var id=null;\nfunction Yc(a,b,c,d){id=null;a=xb(d);a=Wc(a);if(null!==a)if(b=Vb(a),null===b)a=null;else if(c=b.tag,13===c){a=Wb(b);if(null!==a)return a;a=null}else if(3===c){if(b.stateNode.current.memoizedState.isDehydrated)return 3===b.tag?b.stateNode.containerInfo:null;a=null}else b!==a&&(a=null);id=a;return null}\nfunction jd(a){switch(a){case \"cancel\":case \"click\":case \"close\":case \"contextmenu\":case \"copy\":case \"cut\":case \"auxclick\":case \"dblclick\":case \"dragend\":case \"dragstart\":case \"drop\":case \"focusin\":case \"focusout\":case \"input\":case \"invalid\":case \"keydown\":case \"keypress\":case \"keyup\":case \"mousedown\":case \"mouseup\":case \"paste\":case \"pause\":case \"play\":case \"pointercancel\":case \"pointerdown\":case \"pointerup\":case \"ratechange\":case \"reset\":case \"resize\":case \"seeked\":case \"submit\":case \"touchcancel\":case \"touchend\":case \"touchstart\":case \"volumechange\":case \"change\":case \"selectionchange\":case \"textInput\":case \"compositionstart\":case \"compositionend\":case \"compositionupdate\":case \"beforeblur\":case \"afterblur\":case \"beforeinput\":case \"blur\":case \"fullscreenchange\":case \"focus\":case \"hashchange\":case \"popstate\":case \"select\":case \"selectstart\":return 1;case \"drag\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"mousemove\":case \"mouseout\":case \"mouseover\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"scroll\":case \"toggle\":case \"touchmove\":case \"wheel\":case \"mouseenter\":case \"mouseleave\":case \"pointerenter\":case \"pointerleave\":return 4;\ncase \"message\":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var a,b=ld,c=b.length,d,e=\"value\"in kd?kd.value:kd.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return md=e.slice(a,1<d?1-d:void 0)}\nfunction od(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function pd(){return!0}function qd(){return!1}\nfunction rd(a){function b(b,d,e,f,g){this._reactName=b;this._targetInst=e;this.type=d;this.nativeEvent=f;this.target=g;this.currentTarget=null;for(var c in a)a.hasOwnProperty(c)&&(b=a[c],this[c]=b?b(f):f[c]);this.isDefaultPrevented=(null!=f.defaultPrevented?f.defaultPrevented:!1===f.returnValue)?pd:qd;this.isPropagationStopped=qd;return this}A(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&\n(a.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd});return b}\nvar sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(a){return void 0===a.relatedTarget?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){if(\"movementX\"in\na)return a.movementX;a!==yd&&(yd&&\"mousemove\"===a.type?(wd=a.screenX-yd.screenX,xd=a.screenY-yd.screenY):xd=wd=0,yd=a);return wd},movementY:function(a){return\"movementY\"in a?a.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:\"Escape\",\nSpacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Nd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",116:\"F5\",117:\"F6\",118:\"F7\",\n119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"},Od={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function Pd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Od[a])?!!b[a]:!1}function zd(){return Pd}\nvar Qd=A({},ud,{key:function(a){if(a.key){var b=Md[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=od(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Nd[a.keyCode]||\"Unidentified\":\"\"},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(a){return\"keypress\"===a.type?od(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?od(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},\ndeltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&\"CompositionEvent\"in window,be=null;ia&&\"documentMode\"in document&&(be=document.documentMode);var ce=ia&&\"TextEvent\"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=String.fromCharCode(32),fe=!1;\nfunction ge(a,b){switch(a){case \"keyup\":return-1!==$d.indexOf(b.keyCode);case \"keydown\":return 229!==b.keyCode;case \"keypress\":case \"mousedown\":case \"focusout\":return!0;default:return!1}}function he(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var ie=!1;function je(a,b){switch(a){case \"compositionend\":return he(b);case \"keypress\":if(32!==b.which)return null;fe=!0;return ee;case \"textInput\":return a=b.data,a===ee&&fe?null:a;default:return null}}\nfunction ke(a,b){if(ie)return\"compositionend\"===a||!ae&&ge(a,b)?(a=nd(),md=ld=kd=null,ie=!1,a):null;switch(a){case \"paste\":return null;case \"keypress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"compositionend\":return de&&\"ko\"!==b.locale?null:b.data;default:return null}}\nvar le={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!le[a.type]:\"textarea\"===b?!0:!1}function ne(a,b,c,d){Eb(d);b=oe(b,\"onChange\");0<b.length&&(c=new td(\"onChange\",\"change\",null,c,d),a.push({event:c,listeners:b}))}var pe=null,qe=null;function re(a){se(a,0)}function te(a){var b=ue(a);if(Wa(b))return a}\nfunction ve(a,b){if(\"change\"===a)return b}var we=!1;if(ia){var xe;if(ia){var ye=\"oninput\"in document;if(!ye){var ze=document.createElement(\"div\");ze.setAttribute(\"oninput\",\"return;\");ye=\"function\"===typeof ze.oninput}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent(\"onpropertychange\",Be),qe=pe=null)}function Be(a){if(\"value\"===a.propertyName&&te(qe)){var b=[];ne(b,qe,a,xb(a));Jb(re,b)}}\nfunction Ce(a,b,c){\"focusin\"===a?(Ae(),pe=b,qe=c,pe.attachEvent(\"onpropertychange\",Be)):\"focusout\"===a&&Ae()}function De(a){if(\"selectionchange\"===a||\"keyup\"===a||\"keydown\"===a)return te(qe)}function Ee(a,b){if(\"click\"===a)return te(b)}function Fe(a,b){if(\"input\"===a||\"change\"===a)return te(b)}function Ge(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}var He=\"function\"===typeof Object.is?Object.is:Ge;\nfunction Ie(a,b){if(He(a,b))return!0;if(\"object\"!==typeof a||null===a||\"object\"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var e=c[d];if(!ja.call(b,e)||!He(a[e],b[e]))return!1}return!0}function Je(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Ke(a,b){var c=Je(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Je(c)}}function Le(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?Le(a,b.parentNode):\"contains\"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}\nfunction Me(){for(var a=window,b=Xa();b instanceof a.HTMLIFrameElement;){try{var c=\"string\"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Xa(a.document)}return b}function Ne(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&(\"text\"===a.type||\"search\"===a.type||\"tel\"===a.type||\"url\"===a.type||\"password\"===a.type)||\"textarea\"===b||\"true\"===a.contentEditable)}\nfunction Oe(a){var b=Me(),c=a.focusedElem,d=a.selectionRange;if(b!==c&&c&&c.ownerDocument&&Le(c.ownerDocument.documentElement,c)){if(null!==d&&Ne(c))if(b=d.start,a=d.end,void 0===a&&(a=b),\"selectionStart\"in c)c.selectionStart=b,c.selectionEnd=Math.min(a,c.value.length);else if(a=(b=c.ownerDocument||document)&&b.defaultView||window,a.getSelection){a=a.getSelection();var e=c.textContent.length,f=Math.min(d.start,e);d=void 0===d.end?f:Math.min(d.end,e);!a.extend&&f>d&&(e=d,d=f,f=e);e=Ke(c,f);var g=Ke(c,\nd);e&&g&&(1!==a.rangeCount||a.anchorNode!==e.node||a.anchorOffset!==e.offset||a.focusNode!==g.node||a.focusOffset!==g.offset)&&(b=b.createRange(),b.setStart(e.node,e.offset),a.removeAllRanges(),f>d?(a.addRange(b),a.extend(g.node,g.offset)):(b.setEnd(g.node,g.offset),a.addRange(b)))}b=[];for(a=c;a=a.parentNode;)1===a.nodeType&&b.push({element:a,left:a.scrollLeft,top:a.scrollTop});\"function\"===typeof c.focus&&c.focus();for(c=0;c<b.length;c++)a=b[c],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}\nvar Pe=ia&&\"documentMode\"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;\nfunction Ue(a,b,c){var d=c.window===c?c.document:9===c.nodeType?c:c.ownerDocument;Te||null==Qe||Qe!==Xa(d)||(d=Qe,\"selectionStart\"in d&&Ne(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Se&&Ie(Se,d)||(Se=d,d=oe(Re,\"onSelect\"),0<d.length&&(b=new td(\"onSelect\",\"select\",null,b,c),a.push({event:b,listeners:d}),b.target=Qe)))}\nfunction Ve(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;return c}var We={animationend:Ve(\"Animation\",\"AnimationEnd\"),animationiteration:Ve(\"Animation\",\"AnimationIteration\"),animationstart:Ve(\"Animation\",\"AnimationStart\"),transitionend:Ve(\"Transition\",\"TransitionEnd\")},Xe={},Ye={};\nia&&(Ye=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),\"TransitionEvent\"in window||delete We.transitionend.transition);function Ze(a){if(Xe[a])return Xe[a];if(!We[a])return a;var b=We[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Ye)return Xe[a]=b[c];return a}var $e=Ze(\"animationend\"),af=Ze(\"animationiteration\"),bf=Ze(\"animationstart\"),cf=Ze(\"transitionend\"),df=new Map,ef=\"abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel\".split(\" \");\nfunction ff(a,b){df.set(a,b);fa(b,[a])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,\"on\"+kf)}ff($e,\"onAnimationEnd\");ff(af,\"onAnimationIteration\");ff(bf,\"onAnimationStart\");ff(\"dblclick\",\"onDoubleClick\");ff(\"focusin\",\"onFocus\");ff(\"focusout\",\"onBlur\");ff(cf,\"onTransitionEnd\");ha(\"onMouseEnter\",[\"mouseout\",\"mouseover\"]);ha(\"onMouseLeave\",[\"mouseout\",\"mouseover\"]);ha(\"onPointerEnter\",[\"pointerout\",\"pointerover\"]);\nha(\"onPointerLeave\",[\"pointerout\",\"pointerover\"]);fa(\"onChange\",\"change click focusin focusout input keydown keyup selectionchange\".split(\" \"));fa(\"onSelect\",\"focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange\".split(\" \"));fa(\"onBeforeInput\",[\"compositionend\",\"keypress\",\"textInput\",\"paste\"]);fa(\"onCompositionEnd\",\"compositionend focusout keydown keypress keyup mousedown\".split(\" \"));fa(\"onCompositionStart\",\"compositionstart focusout keydown keypress keyup mousedown\".split(\" \"));\nfa(\"onCompositionUpdate\",\"compositionupdate focusout keydown keypress keyup mousedown\".split(\" \"));var lf=\"abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting\".split(\" \"),mf=new Set(\"cancel close invalid load scroll toggle\".split(\" \").concat(lf));\nfunction nf(a,b,c){var d=a.type||\"unknown-event\";a.currentTarget=c;Ub(d,b,void 0,a);a.currentTarget=null}\nfunction se(a,b){b=0!==(b&4);for(var c=0;c<a.length;c++){var d=a[c],e=d.event;d=d.listeners;a:{var f=void 0;if(b)for(var g=d.length-1;0<=g;g--){var h=d[g],k=h.instance,l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}else for(g=0;g<d.length;g++){h=d[g];k=h.instance;l=h.currentTarget;h=h.listener;if(k!==f&&e.isPropagationStopped())break a;nf(e,h,l);f=k}}}if(Qb)throw a=Rb,Qb=!1,Rb=null,a;}\nfunction D(a,b){var c=b[of];void 0===c&&(c=b[of]=new Set);var d=a+\"__bubble\";c.has(d)||(pf(b,a,2,!1),c.add(d))}function qf(a,b,c){var d=0;b&&(d|=4);pf(c,a,d,b)}var rf=\"_reactListening\"+Math.random().toString(36).slice(2);function sf(a){if(!a[rf]){a[rf]=!0;da.forEach(function(b){\"selectionchange\"!==b&&(mf.has(b)||qf(b,!1,a),qf(b,!0,a))});var b=9===a.nodeType?a:a.ownerDocument;null===b||b[rf]||(b[rf]=!0,qf(\"selectionchange\",!1,b))}}\nfunction pf(a,b,c,d){switch(jd(b)){case 1:var e=ed;break;case 4:e=gd;break;default:e=fd}c=e.bind(null,b,c,a);e=void 0;!Lb||\"touchstart\"!==b&&\"touchmove\"!==b&&\"wheel\"!==b||(e=!0);d?void 0!==e?a.addEventListener(b,c,{capture:!0,passive:e}):a.addEventListener(b,c,!0):void 0!==e?a.addEventListener(b,c,{passive:e}):a.addEventListener(b,c,!1)}\nfunction hd(a,b,c,d,e){var f=d;if(0===(b&1)&&0===(b&2)&&null!==d)a:for(;;){if(null===d)return;var g=d.tag;if(3===g||4===g){var h=d.stateNode.containerInfo;if(h===e||8===h.nodeType&&h.parentNode===e)break;if(4===g)for(g=d.return;null!==g;){var k=g.tag;if(3===k||4===k)if(k=g.stateNode.containerInfo,k===e||8===k.nodeType&&k.parentNode===e)return;g=g.return}for(;null!==h;){g=Wc(h);if(null===g)return;k=g.tag;if(5===k||6===k){d=f=g;continue a}h=h.parentNode}}d=d.return}Jb(function(){var d=f,e=xb(c),g=[];\na:{var h=df.get(a);if(void 0!==h){var k=td,n=a;switch(a){case \"keypress\":if(0===od(c))break a;case \"keydown\":case \"keyup\":k=Rd;break;case \"focusin\":n=\"focus\";k=Fd;break;case \"focusout\":n=\"blur\";k=Fd;break;case \"beforeblur\":case \"afterblur\":k=Fd;break;case \"click\":if(2===c.button)break a;case \"auxclick\":case \"dblclick\":case \"mousedown\":case \"mousemove\":case \"mouseup\":case \"mouseout\":case \"mouseover\":case \"contextmenu\":k=Bd;break;case \"drag\":case \"dragend\":case \"dragenter\":case \"dragexit\":case \"dragleave\":case \"dragover\":case \"dragstart\":case \"drop\":k=\nDd;break;case \"touchcancel\":case \"touchend\":case \"touchmove\":case \"touchstart\":k=Vd;break;case $e:case af:case bf:k=Hd;break;case cf:k=Xd;break;case \"scroll\":k=vd;break;case \"wheel\":k=Zd;break;case \"copy\":case \"cut\":case \"paste\":k=Jd;break;case \"gotpointercapture\":case \"lostpointercapture\":case \"pointercancel\":case \"pointerdown\":case \"pointermove\":case \"pointerout\":case \"pointerover\":case \"pointerup\":k=Td}var t=0!==(b&4),J=!t&&\"scroll\"===a,x=t?null!==h?h+\"Capture\":null:h;t=[];for(var w=d,u;null!==\nw;){u=w;var F=u.stateNode;5===u.tag&&null!==F&&(u=F,null!==x&&(F=Kb(w,x),null!=F&&t.push(tf(w,F,u))));if(J)break;w=w.return}0<t.length&&(h=new k(h,n,null,c,e),g.push({event:h,listeners:t}))}}if(0===(b&7)){a:{h=\"mouseover\"===a||\"pointerover\"===a;k=\"mouseout\"===a||\"pointerout\"===a;if(h&&c!==wb&&(n=c.relatedTarget||c.fromElement)&&(Wc(n)||n[uf]))break a;if(k||h){h=e.window===e?e:(h=e.ownerDocument)?h.defaultView||h.parentWindow:window;if(k){if(n=c.relatedTarget||c.toElement,k=d,n=n?Wc(n):null,null!==\nn&&(J=Vb(n),n!==J||5!==n.tag&&6!==n.tag))n=null}else k=null,n=d;if(k!==n){t=Bd;F=\"onMouseLeave\";x=\"onMouseEnter\";w=\"mouse\";if(\"pointerout\"===a||\"pointerover\"===a)t=Td,F=\"onPointerLeave\",x=\"onPointerEnter\",w=\"pointer\";J=null==k?h:ue(k);u=null==n?h:ue(n);h=new t(F,w+\"leave\",k,c,e);h.target=J;h.relatedTarget=u;F=null;Wc(e)===d&&(t=new t(x,w+\"enter\",n,c,e),t.target=u,t.relatedTarget=J,F=t);J=F;if(k&&n)b:{t=k;x=n;w=0;for(u=t;u;u=vf(u))w++;u=0;for(F=x;F;F=vf(F))u++;for(;0<w-u;)t=vf(t),w--;for(;0<u-w;)x=\nvf(x),u--;for(;w--;){if(t===x||null!==x&&t===x.alternate)break b;t=vf(t);x=vf(x)}t=null}else t=null;null!==k&&wf(g,h,k,t,!1);null!==n&&null!==J&&wf(g,J,n,t,!0)}}}a:{h=d?ue(d):window;k=h.nodeName&&h.nodeName.toLowerCase();if(\"select\"===k||\"input\"===k&&\"file\"===h.type)var na=ve;else if(me(h))if(we)na=Fe;else{na=De;var xa=Ce}else(k=h.nodeName)&&\"input\"===k.toLowerCase()&&(\"checkbox\"===h.type||\"radio\"===h.type)&&(na=Ee);if(na&&(na=na(a,d))){ne(g,na,c,e);break a}xa&&xa(a,h,d);\"focusout\"===a&&(xa=h._wrapperState)&&\nxa.controlled&&\"number\"===h.type&&cb(h,\"number\",h.value)}xa=d?ue(d):window;switch(a){case \"focusin\":if(me(xa)||\"true\"===xa.contentEditable)Qe=xa,Re=d,Se=null;break;case \"focusout\":Se=Re=Qe=null;break;case \"mousedown\":Te=!0;break;case \"contextmenu\":case \"mouseup\":case \"dragend\":Te=!1;Ue(g,c,e);break;case \"selectionchange\":if(Pe)break;case \"keydown\":case \"keyup\":Ue(g,c,e)}var $a;if(ae)b:{switch(a){case \"compositionstart\":var ba=\"onCompositionStart\";break b;case \"compositionend\":ba=\"onCompositionEnd\";\nbreak b;case \"compositionupdate\":ba=\"onCompositionUpdate\";break b}ba=void 0}else ie?ge(a,c)&&(ba=\"onCompositionEnd\"):\"keydown\"===a&&229===c.keyCode&&(ba=\"onCompositionStart\");ba&&(de&&\"ko\"!==c.locale&&(ie||\"onCompositionStart\"!==ba?\"onCompositionEnd\"===ba&&ie&&($a=nd()):(kd=e,ld=\"value\"in kd?kd.value:kd.textContent,ie=!0)),xa=oe(d,ba),0<xa.length&&(ba=new Ld(ba,a,null,c,e),g.push({event:ba,listeners:xa}),$a?ba.data=$a:($a=he(c),null!==$a&&(ba.data=$a))));if($a=ce?je(a,c):ke(a,c))d=oe(d,\"onBeforeInput\"),\n0<d.length&&(e=new Ld(\"onBeforeInput\",\"beforeinput\",null,c,e),g.push({event:e,listeners:d}),e.data=$a)}se(g,b)})}function tf(a,b,c){return{instance:a,listener:b,currentTarget:c}}function oe(a,b){for(var c=b+\"Capture\",d=[];null!==a;){var e=a,f=e.stateNode;5===e.tag&&null!==f&&(e=f,f=Kb(a,c),null!=f&&d.unshift(tf(a,f,e)),f=Kb(a,b),null!=f&&d.push(tf(a,f,e)));a=a.return}return d}function vf(a){if(null===a)return null;do a=a.return;while(a&&5!==a.tag);return a?a:null}\nfunction wf(a,b,c,d,e){for(var f=b._reactName,g=[];null!==c&&c!==d;){var h=c,k=h.alternate,l=h.stateNode;if(null!==k&&k===d)break;5===h.tag&&null!==l&&(h=l,e?(k=Kb(c,f),null!=k&&g.unshift(tf(c,k,h))):e||(k=Kb(c,f),null!=k&&g.push(tf(c,k,h))));c=c.return}0!==g.length&&a.push({event:b,listeners:g})}var xf=/\\r\\n?/g,yf=/\\u0000|\\uFFFD/g;function zf(a){return(\"string\"===typeof a?a:\"\"+a).replace(xf,\"\\n\").replace(yf,\"\")}function Af(a,b,c){b=zf(b);if(zf(a)!==b&&c)throw Error(p(425));}function Bf(){}\nvar Cf=null,Df=null;function Ef(a,b){return\"textarea\"===a||\"noscript\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===typeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}\nvar Ff=\"function\"===typeof setTimeout?setTimeout:void 0,Gf=\"function\"===typeof clearTimeout?clearTimeout:void 0,Hf=\"function\"===typeof Promise?Promise:void 0,Jf=\"function\"===typeof queueMicrotask?queueMicrotask:\"undefined\"!==typeof Hf?function(a){return Hf.resolve(null).then(a).catch(If)}:Ff;function If(a){setTimeout(function(){throw a;})}\nfunction Kf(a,b){var c=b,d=0;do{var e=c.nextSibling;a.removeChild(c);if(e&&8===e.nodeType)if(c=e.data,\"/$\"===c){if(0===d){a.removeChild(e);bd(b);return}d--}else\"$\"!==c&&\"$?\"!==c&&\"$!\"!==c||d++;c=e}while(c);bd(b)}function Lf(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break;if(8===b){b=a.data;if(\"$\"===b||\"$!\"===b||\"$?\"===b)break;if(\"/$\"===b)return null}}return a}\nfunction Mf(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(\"$\"===c||\"$!\"===c||\"$?\"===c){if(0===b)return a;b--}else\"/$\"===c&&b++}a=a.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of=\"__reactFiber$\"+Nf,Pf=\"__reactProps$\"+Nf,uf=\"__reactContainer$\"+Nf,of=\"__reactEvents$\"+Nf,Qf=\"__reactListeners$\"+Nf,Rf=\"__reactHandles$\"+Nf;\nfunction Wc(a){var b=a[Of];if(b)return b;for(var c=a.parentNode;c;){if(b=c[uf]||c[Of]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=Mf(a);null!==a;){if(c=a[Of])return c;a=Mf(a)}return b}a=c;c=a.parentNode}return null}function Cb(a){a=a[Of]||a[uf];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function ue(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(p(33));}function Db(a){return a[Pf]||null}var Sf=[],Tf=-1;function Uf(a){return{current:a}}\nfunction E(a){0>Tf||(a.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(a,b){Tf++;Sf[Tf]=a.current;a.current=b}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(a,b){var c=a.type.contextTypes;if(!c)return Vf;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}\nfunction Zf(a){a=a.childContextTypes;return null!==a&&void 0!==a}function $f(){E(Wf);E(H)}function ag(a,b,c){if(H.current!==Vf)throw Error(p(168));G(H,b);G(Wf,c)}function bg(a,b,c){var d=a.stateNode;b=b.childContextTypes;if(\"function\"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in b))throw Error(p(108,Ra(a)||\"Unknown\",e));return A({},c,d)}\nfunction cg(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Vf;Xf=H.current;G(H,a);G(Wf,Wf.current);return!0}function dg(a,b,c){var d=a.stateNode;if(!d)throw Error(p(169));c?(a=bg(a,b,Xf),d.__reactInternalMemoizedMergedChildContext=a,E(Wf),E(H),G(H,a)):E(Wf);G(Wf,c)}var eg=null,fg=!1,gg=!1;function hg(a){null===eg?eg=[a]:eg.push(a)}function ig(a){fg=!0;hg(a)}\nfunction jg(){if(!gg&&null!==eg){gg=!0;var a=0,b=C;try{var c=eg;for(C=1;a<c.length;a++){var d=c[a];do d=d(!0);while(null!==d)}eg=null;fg=!1}catch(e){throw null!==eg&&(eg=eg.slice(a+1)),ac(fc,jg),e;}finally{C=b,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg=\"\";function tg(a,b){kg[lg++]=ng;kg[lg++]=mg;mg=a;ng=b}\nfunction ug(a,b,c){og[pg++]=rg;og[pg++]=sg;og[pg++]=qg;qg=a;var d=rg;a=sg;var e=32-oc(d)-1;d&=~(1<<e);c+=1;var f=32-oc(b)+e;if(30<f){var g=e-e%5;f=(d&(1<<g)-1).toString(32);d>>=g;e-=g;rg=1<<32-oc(b)+e|c<<e|d;sg=f+a}else rg=1<<f|c<<e|d,sg=a}function vg(a){null!==a.return&&(tg(a,1),ug(a,1,0))}function wg(a){for(;a===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;a===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;\nfunction Ag(a,b){var c=Bg(5,null,null,0);c.elementType=\"DELETED\";c.stateNode=b;c.return=a;b=a.deletions;null===b?(a.deletions=[c],a.flags|=16):b.push(c)}\nfunction Cg(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,xg=a,yg=Lf(b.firstChild),!0):!1;case 6:return b=\"\"===a.pendingProps||3!==b.nodeType?null:b,null!==b?(a.stateNode=b,xg=a,yg=null,!0):!1;case 13:return b=8!==b.nodeType?null:b,null!==b?(c=null!==qg?{id:rg,overflow:sg}:null,a.memoizedState={dehydrated:b,treeContext:c,retryLane:1073741824},c=Bg(18,null,null,0),c.stateNode=b,c.return=a,a.child=c,xg=a,yg=\nnull,!0):!1;default:return!1}}function Dg(a){return 0!==(a.mode&1)&&0===(a.flags&128)}function Eg(a){if(I){var b=yg;if(b){var c=b;if(!Cg(a,b)){if(Dg(a))throw Error(p(418));b=Lf(c.nextSibling);var d=xg;b&&Cg(a,b)?Ag(d,c):(a.flags=a.flags&-4097|2,I=!1,xg=a)}}else{if(Dg(a))throw Error(p(418));a.flags=a.flags&-4097|2;I=!1;xg=a}}}function Fg(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;xg=a}\nfunction Gg(a){if(a!==xg)return!1;if(!I)return Fg(a),I=!0,!1;var b;(b=3!==a.tag)&&!(b=5!==a.tag)&&(b=a.type,b=\"head\"!==b&&\"body\"!==b&&!Ef(a.type,a.memoizedProps));if(b&&(b=yg)){if(Dg(a))throw Hg(),Error(p(418));for(;b;)Ag(a,b),b=Lf(b.nextSibling)}Fg(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(p(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(\"/$\"===c){if(0===b){yg=Lf(a.nextSibling);break a}b--}else\"$\"!==c&&\"$!\"!==c&&\"$?\"!==c||b++}a=a.nextSibling}yg=\nnull}}else yg=xg?Lf(a.stateNode.nextSibling):null;return!0}function Hg(){for(var a=yg;a;)a=Lf(a.nextSibling)}function Ig(){yg=xg=null;I=!1}function Jg(a){null===zg?zg=[a]:zg.push(a)}var Kg=ua.ReactCurrentBatchConfig;\nfunction Lg(a,b,c){a=c.ref;if(null!==a&&\"function\"!==typeof a&&\"object\"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(p(309));var d=c.stateNode}if(!d)throw Error(p(147,a));var e=d,f=\"\"+a;if(null!==b&&null!==b.ref&&\"function\"===typeof b.ref&&b.ref._stringRef===f)return b.ref;b=function(a){var b=e.refs;null===a?delete b[f]:b[f]=a};b._stringRef=f;return b}if(\"string\"!==typeof a)throw Error(p(284));if(!c._owner)throw Error(p(290,a));}return a}\nfunction Mg(a,b){a=Object.prototype.toString.call(b);throw Error(p(31,\"[object Object]\"===a?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":a));}function Ng(a){var b=a._init;return b(a._payload)}\nfunction Og(a){function b(b,c){if(a){var d=b.deletions;null===d?(b.deletions=[c],b.flags|=16):d.push(c)}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b){a=Pg(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return b.flags|=1048576,c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.flags|=2,c):d;b.flags|=2;return c}function g(b){a&&\nnull===b.alternate&&(b.flags|=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=Qg(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function k(a,b,c,d){var f=c.type;if(f===ya)return m(a,b,c.props.children,d,c.key);if(null!==b&&(b.elementType===f||\"object\"===typeof f&&null!==f&&f.$$typeof===Ha&&Ng(f)===b.type))return d=e(b,c.props),d.ref=Lg(a,b,c),d.return=a,d;d=Rg(c.type,c.key,c.props,null,a.mode,d);d.ref=Lg(a,b,c);d.return=a;return d}function l(a,b,c,d){if(null===b||4!==b.tag||\nb.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=Sg(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function m(a,b,c,d,f){if(null===b||7!==b.tag)return b=Tg(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function q(a,b,c){if(\"string\"===typeof b&&\"\"!==b||\"number\"===typeof b)return b=Qg(\"\"+b,a.mode,c),b.return=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case va:return c=Rg(b.type,b.key,b.props,null,a.mode,c),\nc.ref=Lg(a,null,b),c.return=a,c;case wa:return b=Sg(b,a.mode,c),b.return=a,b;case Ha:var d=b._init;return q(a,d(b._payload),c)}if(eb(b)||Ka(b))return b=Tg(b,a.mode,c,null),b.return=a,b;Mg(a,b)}return null}function r(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c&&\"\"!==c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case va:return c.key===e?k(a,b,c,d):null;case wa:return c.key===e?l(a,b,c,d):null;case Ha:return e=c._init,r(a,\nb,e(c._payload),d)}if(eb(c)||Ka(c))return null!==e?null:m(a,b,c,d,null);Mg(a,c)}return null}function y(a,b,c,d,e){if(\"string\"===typeof d&&\"\"!==d||\"number\"===typeof d)return a=a.get(c)||null,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case va:return a=a.get(null===d.key?c:d.key)||null,k(b,a,d,e);case wa:return a=a.get(null===d.key?c:d.key)||null,l(b,a,d,e);case Ha:var f=d._init;return y(a,b,c,f(d._payload),e)}if(eb(d)||Ka(d))return a=a.get(c)||null,m(b,a,d,e,null);Mg(b,d)}return null}\nfunction n(e,g,h,k){for(var l=null,m=null,u=g,w=g=0,x=null;null!==u&&w<h.length;w++){u.index>w?(x=u,u=null):x=u.sibling;var n=r(e,u,h[w],k);if(null===n){null===u&&(u=x);break}a&&u&&null===n.alternate&&b(e,u);g=f(n,g,w);null===m?l=n:m.sibling=n;m=n;u=x}if(w===h.length)return c(e,u),I&&tg(e,w),l;if(null===u){for(;w<h.length;w++)u=q(e,h[w],k),null!==u&&(g=f(u,g,w),null===m?l=u:m.sibling=u,m=u);I&&tg(e,w);return l}for(u=d(e,u);w<h.length;w++)x=y(u,e,w,h[w],k),null!==x&&(a&&null!==x.alternate&&u.delete(null===\nx.key?w:x.key),g=f(x,g,w),null===m?l=x:m.sibling=x,m=x);a&&u.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function t(e,g,h,k){var l=Ka(h);if(\"function\"!==typeof l)throw Error(p(150));h=l.call(h);if(null==h)throw Error(p(151));for(var u=l=null,m=g,w=g=0,x=null,n=h.next();null!==m&&!n.done;w++,n=h.next()){m.index>w?(x=m,m=null):x=m.sibling;var t=r(e,m,n.value,k);if(null===t){null===m&&(m=x);break}a&&m&&null===t.alternate&&b(e,m);g=f(t,g,w);null===u?l=t:u.sibling=t;u=t;m=x}if(n.done)return c(e,\nm),I&&tg(e,w),l;if(null===m){for(;!n.done;w++,n=h.next())n=q(e,n.value,k),null!==n&&(g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);I&&tg(e,w);return l}for(m=d(e,m);!n.done;w++,n=h.next())n=y(m,e,w,n.value,k),null!==n&&(a&&null!==n.alternate&&m.delete(null===n.key?w:n.key),g=f(n,g,w),null===u?l=n:u.sibling=n,u=n);a&&m.forEach(function(a){return b(e,a)});I&&tg(e,w);return l}function J(a,d,f,h){\"object\"===typeof f&&null!==f&&f.type===ya&&null===f.key&&(f=f.props.children);if(\"object\"===typeof f&&null!==f){switch(f.$$typeof){case va:a:{for(var k=\nf.key,l=d;null!==l;){if(l.key===k){k=f.type;if(k===ya){if(7===l.tag){c(a,l.sibling);d=e(l,f.props.children);d.return=a;a=d;break a}}else if(l.elementType===k||\"object\"===typeof k&&null!==k&&k.$$typeof===Ha&&Ng(k)===l.type){c(a,l.sibling);d=e(l,f.props);d.ref=Lg(a,l,f);d.return=a;a=d;break a}c(a,l);break}else b(a,l);l=l.sibling}f.type===ya?(d=Tg(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Rg(f.type,f.key,f.props,null,a.mode,h),h.ref=Lg(a,d,f),h.return=a,a=h)}return g(a);case wa:a:{for(l=f.key;null!==\nd;){if(d.key===l)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=Sg(f,a.mode,h);d.return=a;a=d}return g(a);case Ha:return l=f._init,J(a,d,l(f._payload),h)}if(eb(f))return n(a,d,f,h);if(Ka(f))return t(a,d,f,h);Mg(a,f)}return\"string\"===typeof f&&\"\"!==f||\"number\"===typeof f?(f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):\n(c(a,d),d=Qg(f,a.mode,h),d.return=a,a=d),g(a)):c(a,d)}return J}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(a){var b=Wg.current;E(Wg);a._currentValue=b}function bh(a,b,c){for(;null!==a;){var d=a.alternate;(a.childLanes&b)!==b?(a.childLanes|=b,null!==d&&(d.childLanes|=b)):null!==d&&(d.childLanes&b)!==b&&(d.childLanes|=b);if(a===c)break;a=a.return}}\nfunction ch(a,b){Xg=a;Zg=Yg=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(0!==(a.lanes&b)&&(dh=!0),a.firstContext=null)}function eh(a){var b=a._currentValue;if(Zg!==a)if(a={context:a,memoizedValue:b,next:null},null===Yg){if(null===Xg)throw Error(p(308));Yg=a;Xg.dependencies={lanes:0,firstContext:a}}else Yg=Yg.next=a;return b}var fh=null;function gh(a){null===fh?fh=[a]:fh.push(a)}\nfunction hh(a,b,c,d){var e=b.interleaved;null===e?(c.next=c,gh(b)):(c.next=e.next,e.next=c);b.interleaved=c;return ih(a,d)}function ih(a,b){a.lanes|=b;var c=a.alternate;null!==c&&(c.lanes|=b);c=a;for(a=a.return;null!==a;)a.childLanes|=b,c=a.alternate,null!==c&&(c.childLanes|=b),c=a,a=a.return;return 3===c.tag?c.stateNode:null}var jh=!1;function kh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}\nfunction lh(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function mh(a,b){return{eventTime:a,lane:b,tag:0,payload:null,callback:null,next:null}}\nfunction nh(a,b,c){var d=a.updateQueue;if(null===d)return null;d=d.shared;if(0!==(K&2)){var e=d.pending;null===e?b.next=b:(b.next=e.next,e.next=b);d.pending=b;return ih(a,c)}e=d.interleaved;null===e?(b.next=b,gh(d)):(b.next=e.next,e.next=b);d.interleaved=b;return ih(a,c)}function oh(a,b,c){b=b.updateQueue;if(null!==b&&(b=b.shared,0!==(c&4194240))){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nfunction ph(a,b){var c=a.updateQueue,d=a.alternate;if(null!==d&&(d=d.updateQueue,c===d)){var e=null,f=null;c=c.firstBaseUpdate;if(null!==c){do{var g={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};null===f?e=f=g:f=f.next=g;c=c.next}while(null!==c);null===f?e=f=b:f=f.next=b}else e=f=b;c={baseState:d.baseState,firstBaseUpdate:e,lastBaseUpdate:f,shared:d.shared,effects:d.effects};a.updateQueue=c;return}a=c.lastBaseUpdate;null===a?c.firstBaseUpdate=b:a.next=\nb;c.lastBaseUpdate=b}\nfunction qh(a,b,c,d){var e=a.updateQueue;jh=!1;var f=e.firstBaseUpdate,g=e.lastBaseUpdate,h=e.shared.pending;if(null!==h){e.shared.pending=null;var k=h,l=k.next;k.next=null;null===g?f=l:g.next=l;g=k;var m=a.alternate;null!==m&&(m=m.updateQueue,h=m.lastBaseUpdate,h!==g&&(null===h?m.firstBaseUpdate=l:h.next=l,m.lastBaseUpdate=k))}if(null!==f){var q=e.baseState;g=0;m=l=k=null;h=f;do{var r=h.lane,y=h.eventTime;if((d&r)===r){null!==m&&(m=m.next={eventTime:y,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,\nnext:null});a:{var n=a,t=h;r=b;y=c;switch(t.tag){case 1:n=t.payload;if(\"function\"===typeof n){q=n.call(y,q,r);break a}q=n;break a;case 3:n.flags=n.flags&-65537|128;case 0:n=t.payload;r=\"function\"===typeof n?n.call(y,q,r):n;if(null===r||void 0===r)break a;q=A({},q,r);break a;case 2:jh=!0}}null!==h.callback&&0!==h.lane&&(a.flags|=64,r=e.effects,null===r?e.effects=[h]:r.push(h))}else y={eventTime:y,lane:r,tag:h.tag,payload:h.payload,callback:h.callback,next:null},null===m?(l=m=y,k=q):m=m.next=y,g|=r;\nh=h.next;if(null===h)if(h=e.shared.pending,null===h)break;else r=h,h=r.next,r.next=null,e.lastBaseUpdate=r,e.shared.pending=null}while(1);null===m&&(k=q);e.baseState=k;e.firstBaseUpdate=l;e.lastBaseUpdate=m;b=e.shared.interleaved;if(null!==b){e=b;do g|=e.lane,e=e.next;while(e!==b)}else null===f&&(e.shared.lanes=0);rh|=g;a.lanes=g;a.memoizedState=q}}\nfunction sh(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=c;if(\"function\"!==typeof e)throw Error(p(191,e));e.call(d)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(a){if(a===th)throw Error(p(174));return a}\nfunction yh(a,b){G(wh,b);G(vh,a);G(uh,th);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:lb(null,\"\");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=lb(b,a)}E(uh);G(uh,b)}function zh(){E(uh);E(vh);E(wh)}function Ah(a){xh(wh.current);var b=xh(uh.current);var c=lb(b,a.type);b!==c&&(G(vh,a),G(uh,c))}function Bh(a){vh.current===a&&(E(uh),E(vh))}var L=Uf(0);\nfunction Ch(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||\"$?\"===c.data||\"$!\"===c.data))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.flags&128))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}var Dh=[];\nfunction Eh(){for(var a=0;a<Dh.length;a++)Dh[a]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321));}function Mh(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!He(a[c],b[c]))return!1;return!0}\nfunction Nh(a,b,c,d,e,f){Hh=f;M=b;b.memoizedState=null;b.updateQueue=null;b.lanes=0;Fh.current=null===a||null===a.memoizedState?Oh:Ph;a=c(d,e);if(Jh){f=0;do{Jh=!1;Kh=0;if(25<=f)throw Error(p(301));f+=1;O=N=null;b.updateQueue=null;Fh.current=Qh;a=c(d,e)}while(Jh)}Fh.current=Rh;b=null!==N&&null!==N.next;Hh=0;O=N=M=null;Ih=!1;if(b)throw Error(p(300));return a}function Sh(){var a=0!==Kh;Kh=0;return a}\nfunction Th(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===O?M.memoizedState=O=a:O=O.next=a;return O}function Uh(){if(null===N){var a=M.alternate;a=null!==a?a.memoizedState:null}else a=N.next;var b=null===O?M.memoizedState:O.next;if(null!==b)O=b,N=a;else{if(null===a)throw Error(p(310));N=a;a={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null};null===O?M.memoizedState=O=a:O=O.next=a}return O}\nfunction Vh(a,b){return\"function\"===typeof b?b(a):b}\nfunction Wh(a){var b=Uh(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=N,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){f=e.next;d=d.baseState;var h=g=null,k=null,l=f;do{var m=l.lane;if((Hh&m)===m)null!==k&&(k=k.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),d=l.hasEagerState?l.eagerState:a(d,l.action);else{var q={lane:m,action:l.action,hasEagerState:l.hasEagerState,\neagerState:l.eagerState,next:null};null===k?(h=k=q,g=d):k=k.next=q;M.lanes|=m;rh|=m}l=l.next}while(null!==l&&l!==f);null===k?g=d:k.next=h;He(d,b.memoizedState)||(dh=!0);b.memoizedState=d;b.baseState=g;b.baseQueue=k;c.lastRenderedState=d}a=c.interleaved;if(null!==a){e=a;do f=e.lane,M.lanes|=f,rh|=f,e=e.next;while(e!==a)}else null===e&&(c.lanes=0);return[b.memoizedState,c.dispatch]}\nfunction Xh(a){var b=Uh(),c=b.queue;if(null===c)throw Error(p(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);He(f,b.memoizedState)||(dh=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function Yh(){}\nfunction Zh(a,b){var c=M,d=Uh(),e=b(),f=!He(d.memoizedState,e);f&&(d.memoizedState=e,dh=!0);d=d.queue;$h(ai.bind(null,c,d,a),[a]);if(d.getSnapshot!==b||f||null!==O&&O.memoizedState.tag&1){c.flags|=2048;bi(9,ci.bind(null,c,d,e,b),void 0,null);if(null===Q)throw Error(p(349));0!==(Hh&30)||di(c,b,e)}return e}function di(a,b,c){a.flags|=16384;a={getSnapshot:b,value:c};b=M.updateQueue;null===b?(b={lastEffect:null,stores:null},M.updateQueue=b,b.stores=[a]):(c=b.stores,null===c?b.stores=[a]:c.push(a))}\nfunction ci(a,b,c,d){b.value=c;b.getSnapshot=d;ei(b)&&fi(a)}function ai(a,b,c){return c(function(){ei(b)&&fi(a)})}function ei(a){var b=a.getSnapshot;a=a.value;try{var c=b();return!He(a,c)}catch(d){return!0}}function fi(a){var b=ih(a,1);null!==b&&gi(b,a,1,-1)}\nfunction hi(a){var b=Th();\"function\"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:a};b.queue=a;a=a.dispatch=ii.bind(null,M,a);return[b.memoizedState,a]}\nfunction bi(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=M.updateQueue;null===b?(b={lastEffect:null,stores:null},M.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function ji(){return Uh().memoizedState}function ki(a,b,c,d){var e=Th();M.flags|=a;e.memoizedState=bi(1|b,c,void 0,void 0===d?null:d)}\nfunction li(a,b,c,d){var e=Uh();d=void 0===d?null:d;var f=void 0;if(null!==N){var g=N.memoizedState;f=g.destroy;if(null!==d&&Mh(d,g.deps)){e.memoizedState=bi(b,c,f,d);return}}M.flags|=a;e.memoizedState=bi(1|b,c,f,d)}function mi(a,b){return ki(8390656,8,a,b)}function $h(a,b){return li(2048,8,a,b)}function ni(a,b){return li(4,2,a,b)}function oi(a,b){return li(4,4,a,b)}\nfunction pi(a,b){if(\"function\"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function qi(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return li(4,4,pi.bind(null,b,a),c)}function ri(){}function si(a,b){var c=Uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Mh(b,d[1]))return d[0];c.memoizedState=[a,b];return a}\nfunction ti(a,b){var c=Uh();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&Mh(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function ui(a,b,c){if(0===(Hh&21))return a.baseState&&(a.baseState=!1,dh=!0),a.memoizedState=c;He(c,b)||(c=yc(),M.lanes|=c,rh|=c,a.baseState=!0);return b}function vi(a,b){var c=C;C=0!==c&&4>c?c:4;a(!0);var d=Gh.transition;Gh.transition={};try{a(!1),b()}finally{C=c,Gh.transition=d}}function wi(){return Uh().memoizedState}\nfunction xi(a,b,c){var d=yi(a);c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(b,c);else if(c=hh(a,b,c,d),null!==c){var e=R();gi(c,a,d,e);Bi(c,b,d)}}\nfunction ii(a,b,c){var d=yi(a),e={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(zi(a))Ai(b,e);else{var f=a.alternate;if(0===a.lanes&&(null===f||0===f.lanes)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,h=f(g,c);e.hasEagerState=!0;e.eagerState=h;if(He(h,g)){var k=b.interleaved;null===k?(e.next=e,gh(b)):(e.next=k.next,k.next=e);b.interleaved=e;return}}catch(l){}finally{}c=hh(a,b,e,d);null!==c&&(e=R(),gi(c,a,d,e),Bi(c,b,d))}}\nfunction zi(a){var b=a.alternate;return a===M||null!==b&&b===M}function Ai(a,b){Jh=Ih=!0;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}function Bi(a,b,c){if(0!==(c&4194240)){var d=b.lanes;d&=a.pendingLanes;c|=d;b.lanes=c;Cc(a,c)}}\nvar Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(a,b){Th().memoizedState=[a,void 0===b?null:b];return a},useContext:eh,useEffect:mi,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ki(4194308,\n4,pi.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ki(4194308,4,a,b)},useInsertionEffect:function(a,b){return ki(4,2,a,b)},useMemo:function(a,b){var c=Th();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=Th();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};d.queue=a;a=a.dispatch=xi.bind(null,M,a);return[d.memoizedState,a]},useRef:function(a){var b=\nTh();a={current:a};return b.memoizedState=a},useState:hi,useDebugValue:ri,useDeferredValue:function(a){return Th().memoizedState=a},useTransition:function(){var a=hi(!1),b=a[0];a=vi.bind(null,a[1]);Th().memoizedState=a;return[b,a]},useMutableSource:function(){},useSyncExternalStore:function(a,b,c){var d=M,e=Th();if(I){if(void 0===c)throw Error(p(407));c=c()}else{c=b();if(null===Q)throw Error(p(349));0!==(Hh&30)||di(d,b,c)}e.memoizedState=c;var f={value:c,getSnapshot:b};e.queue=f;mi(ai.bind(null,d,\nf,a),[a]);d.flags|=2048;bi(9,ci.bind(null,d,f,c,b),void 0,null);return c},useId:function(){var a=Th(),b=Q.identifierPrefix;if(I){var c=sg;var d=rg;c=(d&~(1<<32-oc(d)-1)).toString(32)+c;b=\":\"+b+\"R\"+c;c=Kh++;0<c&&(b+=\"H\"+c.toString(32));b+=\":\"}else c=Lh++,b=\":\"+b+\"r\"+c.toString(32)+\":\";return a.memoizedState=b},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},\nuseDebugValue:ri,useDeferredValue:function(a){var b=Uh();return ui(b,N.memoizedState,a)},useTransition:function(){var a=Wh(Vh)[0],b=Uh().memoizedState;return[a,b]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(a){var b=Uh();return null===\nN?b.memoizedState=a:ui(b,N.memoizedState,a)},useTransition:function(){var a=Xh(Vh)[0],b=Uh().memoizedState;return[a,b]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(a,b){if(a&&a.defaultProps){b=A({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c]);return b}return b}function Di(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:A({},b,c);a.memoizedState=c;0===a.lanes&&(a.updateQueue.baseState=c)}\nvar Ei={isMounted:function(a){return(a=a._reactInternals)?Vb(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternals;var d=R(),e=yi(a),f=mh(d,e);f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=nh(a,f,e);null!==b&&(gi(b,a,e,d),oh(b,a,e))},enqueueReplaceState:function(a,b,c){a=a._reactInternals;var d=R(),e=yi(a),f=mh(d,e);f.tag=1;f.payload=b;void 0!==c&&null!==c&&(f.callback=c);b=nh(a,f,e);null!==b&&(gi(b,a,e,d),oh(b,a,e))},enqueueForceUpdate:function(a,b){a=a._reactInternals;var c=R(),d=\nyi(a),e=mh(c,d);e.tag=2;void 0!==b&&null!==b&&(e.callback=b);b=nh(a,e,d);null!==b&&(gi(b,a,d,c),oh(b,a,d))}};function Fi(a,b,c,d,e,f,g){a=a.stateNode;return\"function\"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,f,g):b.prototype&&b.prototype.isPureReactComponent?!Ie(c,d)||!Ie(e,f):!0}\nfunction Gi(a,b,c){var d=!1,e=Vf;var f=b.contextType;\"object\"===typeof f&&null!==f?f=eh(f):(e=Zf(b)?Xf:H.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?Yf(a,e):Vf);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Ei;a.stateNode=b;b._reactInternals=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}\nfunction Hi(a,b,c,d){a=b.state;\"function\"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);\"function\"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Ei.enqueueReplaceState(b,b.state,null)}\nfunction Ii(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs={};kh(a);var f=b.contextType;\"object\"===typeof f&&null!==f?e.context=eh(f):(f=Zf(b)?Xf:H.current,e.context=Yf(a,f));e.state=a.memoizedState;f=b.getDerivedStateFromProps;\"function\"===typeof f&&(Di(a,b,f,c),e.state=a.memoizedState);\"function\"===typeof b.getDerivedStateFromProps||\"function\"===typeof e.getSnapshotBeforeUpdate||\"function\"!==typeof e.UNSAFE_componentWillMount&&\"function\"!==typeof e.componentWillMount||(b=e.state,\n\"function\"===typeof e.componentWillMount&&e.componentWillMount(),\"function\"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Ei.enqueueReplaceState(e,e.state,null),qh(a,c,e,d),e.state=a.memoizedState);\"function\"===typeof e.componentDidMount&&(a.flags|=4194308)}function Ji(a,b){try{var c=\"\",d=b;do c+=Pa(d),d=d.return;while(d);var e=c}catch(f){e=\"\\nError generating stack: \"+f.message+\"\\n\"+f.stack}return{value:a,source:b,stack:e,digest:null}}\nfunction Ki(a,b,c){return{value:a,source:null,stack:null!=c?c:null,digest:null!=b?b:null}}function Li(a,b){try{console.error(b.value)}catch(c){setTimeout(function(){throw c;})}}var Mi=\"function\"===typeof WeakMap?WeakMap:Map;function Ni(a,b,c){c=mh(-1,c);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){Oi||(Oi=!0,Pi=d);Li(a,b)};return c}\nfunction Qi(a,b,c){c=mh(-1,c);c.tag=3;var d=a.type.getDerivedStateFromError;if(\"function\"===typeof d){var e=b.value;c.payload=function(){return d(e)};c.callback=function(){Li(a,b)}}var f=a.stateNode;null!==f&&\"function\"===typeof f.componentDidCatch&&(c.callback=function(){Li(a,b);\"function\"!==typeof d&&(null===Ri?Ri=new Set([this]):Ri.add(this));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:\"\"})});return c}\nfunction Si(a,b,c){var d=a.pingCache;if(null===d){d=a.pingCache=new Mi;var e=new Set;d.set(b,e)}else e=d.get(b),void 0===e&&(e=new Set,d.set(b,e));e.has(c)||(e.add(c),a=Ti.bind(null,a,b,c),b.then(a,a))}function Ui(a){do{var b;if(b=13===a.tag)b=a.memoizedState,b=null!==b?null!==b.dehydrated?!0:!1:!0;if(b)return a;a=a.return}while(null!==a);return null}\nfunction Vi(a,b,c,d,e){if(0===(a.mode&1))return a===b?a.flags|=65536:(a.flags|=128,c.flags|=131072,c.flags&=-52805,1===c.tag&&(null===c.alternate?c.tag=17:(b=mh(-1,1),b.tag=2,nh(c,b,1))),c.lanes|=1),a;a.flags|=65536;a.lanes=e;return a}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(a,b,c,d){b.child=null===a?Vg(b,null,c,d):Ug(b,a.child,c,d)}\nfunction Yi(a,b,c,d,e){c=c.render;var f=b.ref;ch(b,e);d=Nh(a,b,c,d,f,e);c=Sh();if(null!==a&&!dh)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zi(a,b,e);I&&c&&vg(b);b.flags|=1;Xi(a,b,d,e);return b.child}\nfunction $i(a,b,c,d,e){if(null===a){var f=c.type;if(\"function\"===typeof f&&!aj(f)&&void 0===f.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=f,bj(a,b,f,d,e);a=Rg(c.type,null,d,b,b.mode,e);a.ref=b.ref;a.return=b;return b.child=a}f=a.child;if(0===(a.lanes&e)){var g=f.memoizedProps;c=c.compare;c=null!==c?c:Ie;if(c(g,d)&&a.ref===b.ref)return Zi(a,b,e)}b.flags|=1;a=Pg(f,d);a.ref=b.ref;a.return=b;return b.child=a}\nfunction bj(a,b,c,d,e){if(null!==a){var f=a.memoizedProps;if(Ie(f,d)&&a.ref===b.ref)if(dh=!1,b.pendingProps=d=f,0!==(a.lanes&e))0!==(a.flags&131072)&&(dh=!0);else return b.lanes=a.lanes,Zi(a,b,e)}return cj(a,b,c,d,e)}\nfunction dj(a,b,c){var d=b.pendingProps,e=d.children,f=null!==a?a.memoizedState:null;if(\"hidden\"===d.mode)if(0===(b.mode&1))b.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=c;else{if(0===(c&1073741824))return a=null!==f?f.baseLanes|c:c,b.lanes=b.childLanes=1073741824,b.memoizedState={baseLanes:a,cachePool:null,transitions:null},b.updateQueue=null,G(ej,fj),fj|=a,null;b.memoizedState={baseLanes:0,cachePool:null,transitions:null};d=null!==f?f.baseLanes:c;G(ej,fj);fj|=d}else null!==\nf?(d=f.baseLanes|c,b.memoizedState=null):d=c,G(ej,fj),fj|=d;Xi(a,b,e,c);return b.child}function gj(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.flags|=512,b.flags|=2097152}function cj(a,b,c,d,e){var f=Zf(c)?Xf:H.current;f=Yf(b,f);ch(b,e);c=Nh(a,b,c,d,f,e);d=Sh();if(null!==a&&!dh)return b.updateQueue=a.updateQueue,b.flags&=-2053,a.lanes&=~e,Zi(a,b,e);I&&d&&vg(b);b.flags|=1;Xi(a,b,c,e);return b.child}\nfunction hj(a,b,c,d,e){if(Zf(c)){var f=!0;cg(b)}else f=!1;ch(b,e);if(null===b.stateNode)ij(a,b),Gi(b,c,d),Ii(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var k=g.context,l=c.contextType;\"object\"===typeof l&&null!==l?l=eh(l):(l=Zf(c)?Xf:H.current,l=Yf(b,l));var m=c.getDerivedStateFromProps,q=\"function\"===typeof m||\"function\"===typeof g.getSnapshotBeforeUpdate;q||\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||\n(h!==d||k!==l)&&Hi(b,g,d,l);jh=!1;var r=b.memoizedState;g.state=r;qh(b,d,g,e);k=b.memoizedState;h!==d||r!==k||Wf.current||jh?(\"function\"===typeof m&&(Di(b,c,m,d),k=b.memoizedState),(h=jh||Fi(b,c,h,d,r,k,l))?(q||\"function\"!==typeof g.UNSAFE_componentWillMount&&\"function\"!==typeof g.componentWillMount||(\"function\"===typeof g.componentWillMount&&g.componentWillMount(),\"function\"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),\"function\"===typeof g.componentDidMount&&(b.flags|=4194308)):\n(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),b.memoizedProps=d,b.memoizedState=k),g.props=d,g.state=k,g.context=l,d=h):(\"function\"===typeof g.componentDidMount&&(b.flags|=4194308),d=!1)}else{g=b.stateNode;lh(a,b);h=b.memoizedProps;l=b.type===b.elementType?h:Ci(b.type,h);g.props=l;q=b.pendingProps;r=g.context;k=c.contextType;\"object\"===typeof k&&null!==k?k=eh(k):(k=Zf(c)?Xf:H.current,k=Yf(b,k));var y=c.getDerivedStateFromProps;(m=\"function\"===typeof y||\"function\"===typeof g.getSnapshotBeforeUpdate)||\n\"function\"!==typeof g.UNSAFE_componentWillReceiveProps&&\"function\"!==typeof g.componentWillReceiveProps||(h!==q||r!==k)&&Hi(b,g,d,k);jh=!1;r=b.memoizedState;g.state=r;qh(b,d,g,e);var n=b.memoizedState;h!==q||r!==n||Wf.current||jh?(\"function\"===typeof y&&(Di(b,c,y,d),n=b.memoizedState),(l=jh||Fi(b,c,l,d,r,n,k)||!1)?(m||\"function\"!==typeof g.UNSAFE_componentWillUpdate&&\"function\"!==typeof g.componentWillUpdate||(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,n,k),\"function\"===typeof g.UNSAFE_componentWillUpdate&&\ng.UNSAFE_componentWillUpdate(d,n,k)),\"function\"===typeof g.componentDidUpdate&&(b.flags|=4),\"function\"===typeof g.getSnapshotBeforeUpdate&&(b.flags|=1024)):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),b.memoizedProps=d,b.memoizedState=n),g.props=d,g.state=n,g.context=k,d=l):(\"function\"!==typeof g.componentDidUpdate||h===a.memoizedProps&&r===\na.memoizedState||(b.flags|=4),\"function\"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&r===a.memoizedState||(b.flags|=1024),d=!1)}return jj(a,b,c,d,f,e)}\nfunction jj(a,b,c,d,e,f){gj(a,b);var g=0!==(b.flags&128);if(!d&&!g)return e&&dg(b,c,!1),Zi(a,b,f);d=b.stateNode;Wi.current=b;var h=g&&\"function\"!==typeof c.getDerivedStateFromError?null:d.render();b.flags|=1;null!==a&&g?(b.child=Ug(b,a.child,null,f),b.child=Ug(b,null,h,f)):Xi(a,b,h,f);b.memoizedState=d.state;e&&dg(b,c,!0);return b.child}function kj(a){var b=a.stateNode;b.pendingContext?ag(a,b.pendingContext,b.pendingContext!==b.context):b.context&&ag(a,b.context,!1);yh(a,b.containerInfo)}\nfunction lj(a,b,c,d,e){Ig();Jg(e);b.flags|=256;Xi(a,b,c,d);return b.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(a){return{baseLanes:a,cachePool:null,transitions:null}}\nfunction oj(a,b,c){var d=b.pendingProps,e=L.current,f=!1,g=0!==(b.flags&128),h;(h=g)||(h=null!==a&&null===a.memoizedState?!1:0!==(e&2));if(h)f=!0,b.flags&=-129;else if(null===a||null!==a.memoizedState)e|=1;G(L,e&1);if(null===a){Eg(b);a=b.memoizedState;if(null!==a&&(a=a.dehydrated,null!==a))return 0===(b.mode&1)?b.lanes=1:\"$!\"===a.data?b.lanes=8:b.lanes=1073741824,null;g=d.children;a=d.fallback;return f?(d=b.mode,f=b.child,g={mode:\"hidden\",children:g},0===(d&1)&&null!==f?(f.childLanes=0,f.pendingProps=\ng):f=pj(g,d,0,null),a=Tg(a,d,c,null),f.return=b,a.return=b,f.sibling=a,b.child=f,b.child.memoizedState=nj(c),b.memoizedState=mj,a):qj(b,g)}e=a.memoizedState;if(null!==e&&(h=e.dehydrated,null!==h))return rj(a,b,g,d,h,e,c);if(f){f=d.fallback;g=b.mode;e=a.child;h=e.sibling;var k={mode:\"hidden\",children:d.children};0===(g&1)&&b.child!==e?(d=b.child,d.childLanes=0,d.pendingProps=k,b.deletions=null):(d=Pg(e,k),d.subtreeFlags=e.subtreeFlags&14680064);null!==h?f=Pg(h,f):(f=Tg(f,g,c,null),f.flags|=2);f.return=\nb;d.return=b;d.sibling=f;b.child=d;d=f;f=b.child;g=a.child.memoizedState;g=null===g?nj(c):{baseLanes:g.baseLanes|c,cachePool:null,transitions:g.transitions};f.memoizedState=g;f.childLanes=a.childLanes&~c;b.memoizedState=mj;return d}f=a.child;a=f.sibling;d=Pg(f,{mode:\"visible\",children:d.children});0===(b.mode&1)&&(d.lanes=c);d.return=b;d.sibling=null;null!==a&&(c=b.deletions,null===c?(b.deletions=[a],b.flags|=16):c.push(a));b.child=d;b.memoizedState=null;return d}\nfunction qj(a,b){b=pj({mode:\"visible\",children:b},a.mode,0,null);b.return=a;return a.child=b}function sj(a,b,c,d){null!==d&&Jg(d);Ug(b,a.child,null,c);a=qj(b,b.pendingProps.children);a.flags|=2;b.memoizedState=null;return a}\nfunction rj(a,b,c,d,e,f,g){if(c){if(b.flags&256)return b.flags&=-257,d=Ki(Error(p(422))),sj(a,b,g,d);if(null!==b.memoizedState)return b.child=a.child,b.flags|=128,null;f=d.fallback;e=b.mode;d=pj({mode:\"visible\",children:d.children},e,0,null);f=Tg(f,e,g,null);f.flags|=2;d.return=b;f.return=b;d.sibling=f;b.child=d;0!==(b.mode&1)&&Ug(b,a.child,null,g);b.child.memoizedState=nj(g);b.memoizedState=mj;return f}if(0===(b.mode&1))return sj(a,b,g,null);if(\"$!\"===e.data){d=e.nextSibling&&e.nextSibling.dataset;\nif(d)var h=d.dgst;d=h;f=Error(p(419));d=Ki(f,d,void 0);return sj(a,b,g,d)}h=0!==(g&a.childLanes);if(dh||h){d=Q;if(null!==d){switch(g&-g){case 4:e=2;break;case 16:e=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:e=32;break;case 536870912:e=268435456;break;default:e=0}e=0!==(e&(d.suspendedLanes|g))?0:e;\n0!==e&&e!==f.retryLane&&(f.retryLane=e,ih(a,e),gi(d,a,e,-1))}tj();d=Ki(Error(p(421)));return sj(a,b,g,d)}if(\"$?\"===e.data)return b.flags|=128,b.child=a.child,b=uj.bind(null,a),e._reactRetry=b,null;a=f.treeContext;yg=Lf(e.nextSibling);xg=b;I=!0;zg=null;null!==a&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=a.id,sg=a.overflow,qg=b);b=qj(b,d.children);b.flags|=4096;return b}function vj(a,b,c){a.lanes|=b;var d=a.alternate;null!==d&&(d.lanes|=b);bh(a.return,b,c)}\nfunction wj(a,b,c,d,e){var f=a.memoizedState;null===f?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:e}:(f.isBackwards=b,f.rendering=null,f.renderingStartTime=0,f.last=d,f.tail=c,f.tailMode=e)}\nfunction xj(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;Xi(a,b,d.children,c);d=L.current;if(0!==(d&2))d=d&1|2,b.flags|=128;else{if(null!==a&&0!==(a.flags&128))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&vj(a,c,b);else if(19===a.tag)vj(a,c,b);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}G(L,d);if(0===(b.mode&1))b.memoizedState=\nnull;else switch(e){case \"forwards\":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Ch(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);wj(b,!1,e,c,f);break;case \"backwards\":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Ch(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}wj(b,!0,c,null,f);break;case \"together\":wj(b,!1,null,null,void 0);break;default:b.memoizedState=null}return b.child}\nfunction ij(a,b){0===(b.mode&1)&&null!==a&&(a.alternate=null,b.alternate=null,b.flags|=2)}function Zi(a,b,c){null!==a&&(b.dependencies=a.dependencies);rh|=b.lanes;if(0===(c&b.childLanes))return null;if(null!==a&&b.child!==a.child)throw Error(p(153));if(null!==b.child){a=b.child;c=Pg(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Pg(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}\nfunction yj(a,b,c){switch(b.tag){case 3:kj(b);Ig();break;case 5:Ah(b);break;case 1:Zf(b.type)&&cg(b);break;case 4:yh(b,b.stateNode.containerInfo);break;case 10:var d=b.type._context,e=b.memoizedProps.value;G(Wg,d._currentValue);d._currentValue=e;break;case 13:d=b.memoizedState;if(null!==d){if(null!==d.dehydrated)return G(L,L.current&1),b.flags|=128,null;if(0!==(c&b.child.childLanes))return oj(a,b,c);G(L,L.current&1);a=Zi(a,b,c);return null!==a?a.sibling:null}G(L,L.current&1);break;case 19:d=0!==(c&\nb.childLanes);if(0!==(a.flags&128)){if(d)return xj(a,b,c);b.flags|=128}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null,e.lastEffect=null);G(L,L.current);if(d)break;else return null;case 22:case 23:return b.lanes=0,dj(a,b,c)}return Zi(a,b,c)}var zj,Aj,Bj,Cj;\nzj=function(a,b){for(var c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};Aj=function(){};\nBj=function(a,b,c,d){var e=a.memoizedProps;if(e!==d){a=b.stateNode;xh(uh.current);var f=null;switch(c){case \"input\":e=Ya(a,e);d=Ya(a,d);f=[];break;case \"select\":e=A({},e,{value:void 0});d=A({},d,{value:void 0});f=[];break;case \"textarea\":e=gb(a,e);d=gb(a,d);f=[];break;default:\"function\"!==typeof e.onClick&&\"function\"===typeof d.onClick&&(a.onclick=Bf)}ub(c,d);var g;c=null;for(l in e)if(!d.hasOwnProperty(l)&&e.hasOwnProperty(l)&&null!=e[l])if(\"style\"===l){var h=e[l];for(g in h)h.hasOwnProperty(g)&&\n(c||(c={}),c[g]=\"\")}else\"dangerouslySetInnerHTML\"!==l&&\"children\"!==l&&\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&\"autoFocus\"!==l&&(ea.hasOwnProperty(l)?f||(f=[]):(f=f||[]).push(l,null));for(l in d){var k=d[l];h=null!=e?e[l]:void 0;if(d.hasOwnProperty(l)&&k!==h&&(null!=k||null!=h))if(\"style\"===l)if(h){for(g in h)!h.hasOwnProperty(g)||k&&k.hasOwnProperty(g)||(c||(c={}),c[g]=\"\");for(g in k)k.hasOwnProperty(g)&&h[g]!==k[g]&&(c||(c={}),c[g]=k[g])}else c||(f||(f=[]),f.push(l,\nc)),c=k;else\"dangerouslySetInnerHTML\"===l?(k=k?k.__html:void 0,h=h?h.__html:void 0,null!=k&&h!==k&&(f=f||[]).push(l,k)):\"children\"===l?\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(l,\"\"+k):\"suppressContentEditableWarning\"!==l&&\"suppressHydrationWarning\"!==l&&(ea.hasOwnProperty(l)?(null!=k&&\"onScroll\"===l&&D(\"scroll\",a),f||h===k||(f=[])):(f=f||[]).push(l,k))}c&&(f=f||[]).push(\"style\",c);var l=f;if(b.updateQueue=l)b.flags|=4}};Cj=function(a,b,c,d){c!==d&&(b.flags|=4)};\nfunction Dj(a,b){if(!I)switch(a.tailMode){case \"hidden\":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case \"collapsed\":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}\nfunction S(a){var b=null!==a.alternate&&a.alternate.child===a.child,c=0,d=0;if(b)for(var e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags&14680064,d|=e.flags&14680064,e.return=a,e=e.sibling;else for(e=a.child;null!==e;)c|=e.lanes|e.childLanes,d|=e.subtreeFlags,d|=e.flags,e.return=a,e=e.sibling;a.subtreeFlags|=d;a.childLanes=c;return b}\nfunction Ej(a,b,c){var d=b.pendingProps;wg(b);switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(b),null;case 1:return Zf(b.type)&&$f(),S(b),null;case 3:d=b.stateNode;zh();E(Wf);E(H);Eh();d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null);if(null===a||null===a.child)Gg(b)?b.flags|=4:null===a||a.memoizedState.isDehydrated&&0===(b.flags&256)||(b.flags|=1024,null!==zg&&(Fj(zg),zg=null));Aj(a,b);S(b);return null;case 5:Bh(b);var e=xh(wh.current);\nc=b.type;if(null!==a&&null!=b.stateNode)Bj(a,b,c,d,e),a.ref!==b.ref&&(b.flags|=512,b.flags|=2097152);else{if(!d){if(null===b.stateNode)throw Error(p(166));S(b);return null}a=xh(uh.current);if(Gg(b)){d=b.stateNode;c=b.type;var f=b.memoizedProps;d[Of]=b;d[Pf]=f;a=0!==(b.mode&1);switch(c){case \"dialog\":D(\"cancel\",d);D(\"close\",d);break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",d);break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],d);break;case \"source\":D(\"error\",d);break;case \"img\":case \"image\":case \"link\":D(\"error\",\nd);D(\"load\",d);break;case \"details\":D(\"toggle\",d);break;case \"input\":Za(d,f);D(\"invalid\",d);break;case \"select\":d._wrapperState={wasMultiple:!!f.multiple};D(\"invalid\",d);break;case \"textarea\":hb(d,f),D(\"invalid\",d)}ub(c,f);e=null;for(var g in f)if(f.hasOwnProperty(g)){var h=f[g];\"children\"===g?\"string\"===typeof h?d.textContent!==h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,h,a),e=[\"children\",h]):\"number\"===typeof h&&d.textContent!==\"\"+h&&(!0!==f.suppressHydrationWarning&&Af(d.textContent,\nh,a),e=[\"children\",\"\"+h]):ea.hasOwnProperty(g)&&null!=h&&\"onScroll\"===g&&D(\"scroll\",d)}switch(c){case \"input\":Va(d);db(d,f,!0);break;case \"textarea\":Va(d);jb(d);break;case \"select\":case \"option\":break;default:\"function\"===typeof f.onClick&&(d.onclick=Bf)}d=e;b.updateQueue=d;null!==d&&(b.flags|=4)}else{g=9===e.nodeType?e:e.ownerDocument;\"http://www.w3.org/1999/xhtml\"===a&&(a=kb(c));\"http://www.w3.org/1999/xhtml\"===a?\"script\"===c?(a=g.createElement(\"div\"),a.innerHTML=\"<script>\\x3c/script>\",a=a.removeChild(a.firstChild)):\n\"string\"===typeof d.is?a=g.createElement(c,{is:d.is}):(a=g.createElement(c),\"select\"===c&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,c);a[Of]=b;a[Pf]=d;zj(a,b,!1,!1);b.stateNode=a;a:{g=vb(c,d);switch(c){case \"dialog\":D(\"cancel\",a);D(\"close\",a);e=d;break;case \"iframe\":case \"object\":case \"embed\":D(\"load\",a);e=d;break;case \"video\":case \"audio\":for(e=0;e<lf.length;e++)D(lf[e],a);e=d;break;case \"source\":D(\"error\",a);e=d;break;case \"img\":case \"image\":case \"link\":D(\"error\",\na);D(\"load\",a);e=d;break;case \"details\":D(\"toggle\",a);e=d;break;case \"input\":Za(a,d);e=Ya(a,d);D(\"invalid\",a);break;case \"option\":e=d;break;case \"select\":a._wrapperState={wasMultiple:!!d.multiple};e=A({},d,{value:void 0});D(\"invalid\",a);break;case \"textarea\":hb(a,d);e=gb(a,d);D(\"invalid\",a);break;default:e=d}ub(c,e);h=e;for(f in h)if(h.hasOwnProperty(f)){var k=h[f];\"style\"===f?sb(a,k):\"dangerouslySetInnerHTML\"===f?(k=k?k.__html:void 0,null!=k&&nb(a,k)):\"children\"===f?\"string\"===typeof k?(\"textarea\"!==\nc||\"\"!==k)&&ob(a,k):\"number\"===typeof k&&ob(a,\"\"+k):\"suppressContentEditableWarning\"!==f&&\"suppressHydrationWarning\"!==f&&\"autoFocus\"!==f&&(ea.hasOwnProperty(f)?null!=k&&\"onScroll\"===f&&D(\"scroll\",a):null!=k&&ta(a,f,k,g))}switch(c){case \"input\":Va(a);db(a,d,!1);break;case \"textarea\":Va(a);jb(a);break;case \"option\":null!=d.value&&a.setAttribute(\"value\",\"\"+Sa(d.value));break;case \"select\":a.multiple=!!d.multiple;f=d.value;null!=f?fb(a,!!d.multiple,f,!1):null!=d.defaultValue&&fb(a,!!d.multiple,d.defaultValue,\n!0);break;default:\"function\"===typeof e.onClick&&(a.onclick=Bf)}switch(c){case \"button\":case \"input\":case \"select\":case \"textarea\":d=!!d.autoFocus;break a;case \"img\":d=!0;break a;default:d=!1}}d&&(b.flags|=4)}null!==b.ref&&(b.flags|=512,b.flags|=2097152)}S(b);return null;case 6:if(a&&null!=b.stateNode)Cj(a,b,a.memoizedProps,d);else{if(\"string\"!==typeof d&&null===b.stateNode)throw Error(p(166));c=xh(wh.current);xh(uh.current);if(Gg(b)){d=b.stateNode;c=b.memoizedProps;d[Of]=b;if(f=d.nodeValue!==c)if(a=\nxg,null!==a)switch(a.tag){case 3:Af(d.nodeValue,c,0!==(a.mode&1));break;case 5:!0!==a.memoizedProps.suppressHydrationWarning&&Af(d.nodeValue,c,0!==(a.mode&1))}f&&(b.flags|=4)}else d=(9===c.nodeType?c:c.ownerDocument).createTextNode(d),d[Of]=b,b.stateNode=d}S(b);return null;case 13:E(L);d=b.memoizedState;if(null===a||null!==a.memoizedState&&null!==a.memoizedState.dehydrated){if(I&&null!==yg&&0!==(b.mode&1)&&0===(b.flags&128))Hg(),Ig(),b.flags|=98560,f=!1;else if(f=Gg(b),null!==d&&null!==d.dehydrated){if(null===\na){if(!f)throw Error(p(318));f=b.memoizedState;f=null!==f?f.dehydrated:null;if(!f)throw Error(p(317));f[Of]=b}else Ig(),0===(b.flags&128)&&(b.memoizedState=null),b.flags|=4;S(b);f=!1}else null!==zg&&(Fj(zg),zg=null),f=!0;if(!f)return b.flags&65536?b:null}if(0!==(b.flags&128))return b.lanes=c,b;d=null!==d;d!==(null!==a&&null!==a.memoizedState)&&d&&(b.child.flags|=8192,0!==(b.mode&1)&&(null===a||0!==(L.current&1)?0===T&&(T=3):tj()));null!==b.updateQueue&&(b.flags|=4);S(b);return null;case 4:return zh(),\nAj(a,b),null===a&&sf(b.stateNode.containerInfo),S(b),null;case 10:return ah(b.type._context),S(b),null;case 17:return Zf(b.type)&&$f(),S(b),null;case 19:E(L);f=b.memoizedState;if(null===f)return S(b),null;d=0!==(b.flags&128);g=f.rendering;if(null===g)if(d)Dj(f,!1);else{if(0!==T||null!==a&&0!==(a.flags&128))for(a=b.child;null!==a;){g=Ch(a);if(null!==g){b.flags|=128;Dj(f,!1);d=g.updateQueue;null!==d&&(b.updateQueue=d,b.flags|=4);b.subtreeFlags=0;d=c;for(c=b.child;null!==c;)f=c,a=d,f.flags&=14680066,\ng=f.alternate,null===g?(f.childLanes=0,f.lanes=a,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=g.childLanes,f.lanes=g.lanes,f.child=g.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=g.memoizedProps,f.memoizedState=g.memoizedState,f.updateQueue=g.updateQueue,f.type=g.type,a=g.dependencies,f.dependencies=null===a?null:{lanes:a.lanes,firstContext:a.firstContext}),c=c.sibling;G(L,L.current&1|2);return b.child}a=\na.sibling}null!==f.tail&&B()>Gj&&(b.flags|=128,d=!0,Dj(f,!1),b.lanes=4194304)}else{if(!d)if(a=Ch(g),null!==a){if(b.flags|=128,d=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.flags|=4),Dj(f,!0),null===f.tail&&\"hidden\"===f.tailMode&&!g.alternate&&!I)return S(b),null}else 2*B()-f.renderingStartTime>Gj&&1073741824!==c&&(b.flags|=128,d=!0,Dj(f,!1),b.lanes=4194304);f.isBackwards?(g.sibling=b.child,b.child=g):(c=f.last,null!==c?c.sibling=g:b.child=g,f.last=g)}if(null!==f.tail)return b=f.tail,f.rendering=\nb,f.tail=b.sibling,f.renderingStartTime=B(),b.sibling=null,c=L.current,G(L,d?c&1|2:c&1),b;S(b);return null;case 22:case 23:return Hj(),d=null!==b.memoizedState,null!==a&&null!==a.memoizedState!==d&&(b.flags|=8192),d&&0!==(b.mode&1)?0!==(fj&1073741824)&&(S(b),b.subtreeFlags&6&&(b.flags|=8192)):S(b),null;case 24:return null;case 25:return null}throw Error(p(156,b.tag));}\nfunction Ij(a,b){wg(b);switch(b.tag){case 1:return Zf(b.type)&&$f(),a=b.flags,a&65536?(b.flags=a&-65537|128,b):null;case 3:return zh(),E(Wf),E(H),Eh(),a=b.flags,0!==(a&65536)&&0===(a&128)?(b.flags=a&-65537|128,b):null;case 5:return Bh(b),null;case 13:E(L);a=b.memoizedState;if(null!==a&&null!==a.dehydrated){if(null===b.alternate)throw Error(p(340));Ig()}a=b.flags;return a&65536?(b.flags=a&-65537|128,b):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(b.type._context),null;case 22:case 23:return Hj(),\nnull;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=\"function\"===typeof WeakSet?WeakSet:Set,V=null;function Lj(a,b){var c=a.ref;if(null!==c)if(\"function\"===typeof c)try{c(null)}catch(d){W(a,b,d)}else c.current=null}function Mj(a,b,c){try{c()}catch(d){W(a,b,d)}}var Nj=!1;\nfunction Oj(a,b){Cf=dd;a=Me();if(Ne(a)){if(\"selectionStart\"in a)var c={start:a.selectionStart,end:a.selectionEnd};else a:{c=(c=a.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&0!==d.rangeCount){c=d.anchorNode;var e=d.anchorOffset,f=d.focusNode;d=d.focusOffset;try{c.nodeType,f.nodeType}catch(F){c=null;break a}var g=0,h=-1,k=-1,l=0,m=0,q=a,r=null;b:for(;;){for(var y;;){q!==c||0!==e&&3!==q.nodeType||(h=g+e);q!==f||0!==d&&3!==q.nodeType||(k=g+d);3===q.nodeType&&(g+=\nq.nodeValue.length);if(null===(y=q.firstChild))break;r=q;q=y}for(;;){if(q===a)break b;r===c&&++l===e&&(h=g);r===f&&++m===d&&(k=g);if(null!==(y=q.nextSibling))break;q=r;r=q.parentNode}q=y}c=-1===h||-1===k?null:{start:h,end:k}}else c=null}c=c||{start:0,end:0}}else c=null;Df={focusedElem:a,selectionRange:c};dd=!1;for(V=b;null!==V;)if(b=V,a=b.child,0!==(b.subtreeFlags&1028)&&null!==a)a.return=b,V=a;else for(;null!==V;){b=V;try{var n=b.alternate;if(0!==(b.flags&1024))switch(b.tag){case 0:case 11:case 15:break;\ncase 1:if(null!==n){var t=n.memoizedProps,J=n.memoizedState,x=b.stateNode,w=x.getSnapshotBeforeUpdate(b.elementType===b.type?t:Ci(b.type,t),J);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var u=b.stateNode.containerInfo;1===u.nodeType?u.textContent=\"\":9===u.nodeType&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163));}}catch(F){W(b,b.return,F)}a=b.sibling;if(null!==a){a.return=b.return;V=a;break}V=b.return}n=Nj;Nj=!1;return n}\nfunction Pj(a,b,c){var d=b.updateQueue;d=null!==d?d.lastEffect:null;if(null!==d){var e=d=d.next;do{if((e.tag&a)===a){var f=e.destroy;e.destroy=void 0;void 0!==f&&Mj(b,c,f)}e=e.next}while(e!==d)}}function Qj(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function Rj(a){var b=a.ref;if(null!==b){var c=a.stateNode;switch(a.tag){case 5:a=c;break;default:a=c}\"function\"===typeof b?b(a):b.current=a}}\nfunction Sj(a){var b=a.alternate;null!==b&&(a.alternate=null,Sj(b));a.child=null;a.deletions=null;a.sibling=null;5===a.tag&&(b=a.stateNode,null!==b&&(delete b[Of],delete b[Pf],delete b[of],delete b[Qf],delete b[Rf]));a.stateNode=null;a.return=null;a.dependencies=null;a.memoizedProps=null;a.memoizedState=null;a.pendingProps=null;a.stateNode=null;a.updateQueue=null}function Tj(a){return 5===a.tag||3===a.tag||4===a.tag}\nfunction Uj(a){a:for(;;){for(;null===a.sibling;){if(null===a.return||Tj(a.return))return null;a=a.return}a.sibling.return=a.return;for(a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(a.flags&2)continue a;if(null===a.child||4===a.tag)continue a;else a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}\nfunction Vj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=Bf));else if(4!==d&&(a=a.child,null!==a))for(Vj(a,b,c),a=a.sibling;null!==a;)Vj(a,b,c),a=a.sibling}\nfunction Wj(a,b,c){var d=a.tag;if(5===d||6===d)a=a.stateNode,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Wj(a,b,c),a=a.sibling;null!==a;)Wj(a,b,c),a=a.sibling}var X=null,Xj=!1;function Yj(a,b,c){for(c=c.child;null!==c;)Zj(a,b,c),c=c.sibling}\nfunction Zj(a,b,c){if(lc&&\"function\"===typeof lc.onCommitFiberUnmount)try{lc.onCommitFiberUnmount(kc,c)}catch(h){}switch(c.tag){case 5:U||Lj(c,b);case 6:var d=X,e=Xj;X=null;Yj(a,b,c);X=d;Xj=e;null!==X&&(Xj?(a=X,c=c.stateNode,8===a.nodeType?a.parentNode.removeChild(c):a.removeChild(c)):X.removeChild(c.stateNode));break;case 18:null!==X&&(Xj?(a=X,c=c.stateNode,8===a.nodeType?Kf(a.parentNode,c):1===a.nodeType&&Kf(a,c),bd(a)):Kf(X,c.stateNode));break;case 4:d=X;e=Xj;X=c.stateNode.containerInfo;Xj=!0;\nYj(a,b,c);X=d;Xj=e;break;case 0:case 11:case 14:case 15:if(!U&&(d=c.updateQueue,null!==d&&(d=d.lastEffect,null!==d))){e=d=d.next;do{var f=e,g=f.destroy;f=f.tag;void 0!==g&&(0!==(f&2)?Mj(c,b,g):0!==(f&4)&&Mj(c,b,g));e=e.next}while(e!==d)}Yj(a,b,c);break;case 1:if(!U&&(Lj(c,b),d=c.stateNode,\"function\"===typeof d.componentWillUnmount))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(h){W(c,b,h)}Yj(a,b,c);break;case 21:Yj(a,b,c);break;case 22:c.mode&1?(U=(d=U)||null!==\nc.memoizedState,Yj(a,b,c),U=d):Yj(a,b,c);break;default:Yj(a,b,c)}}function ak(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=new Kj);b.forEach(function(b){var d=bk.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}\nfunction ck(a,b){var c=b.deletions;if(null!==c)for(var d=0;d<c.length;d++){var e=c[d];try{var f=a,g=b,h=g;a:for(;null!==h;){switch(h.tag){case 5:X=h.stateNode;Xj=!1;break a;case 3:X=h.stateNode.containerInfo;Xj=!0;break a;case 4:X=h.stateNode.containerInfo;Xj=!0;break a}h=h.return}if(null===X)throw Error(p(160));Zj(f,g,e);X=null;Xj=!1;var k=e.alternate;null!==k&&(k.return=null);e.return=null}catch(l){W(e,b,l)}}if(b.subtreeFlags&12854)for(b=b.child;null!==b;)dk(b,a),b=b.sibling}\nfunction dk(a,b){var c=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:ck(b,a);ek(a);if(d&4){try{Pj(3,a,a.return),Qj(3,a)}catch(t){W(a,a.return,t)}try{Pj(5,a,a.return)}catch(t){W(a,a.return,t)}}break;case 1:ck(b,a);ek(a);d&512&&null!==c&&Lj(c,c.return);break;case 5:ck(b,a);ek(a);d&512&&null!==c&&Lj(c,c.return);if(a.flags&32){var e=a.stateNode;try{ob(e,\"\")}catch(t){W(a,a.return,t)}}if(d&4&&(e=a.stateNode,null!=e)){var f=a.memoizedProps,g=null!==c?c.memoizedProps:f,h=a.type,k=a.updateQueue;\na.updateQueue=null;if(null!==k)try{\"input\"===h&&\"radio\"===f.type&&null!=f.name&&ab(e,f);vb(h,g);var l=vb(h,f);for(g=0;g<k.length;g+=2){var m=k[g],q=k[g+1];\"style\"===m?sb(e,q):\"dangerouslySetInnerHTML\"===m?nb(e,q):\"children\"===m?ob(e,q):ta(e,m,q,l)}switch(h){case \"input\":bb(e,f);break;case \"textarea\":ib(e,f);break;case \"select\":var r=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=!!f.multiple;var y=f.value;null!=y?fb(e,!!f.multiple,y,!1):r!==!!f.multiple&&(null!=f.defaultValue?fb(e,!!f.multiple,\nf.defaultValue,!0):fb(e,!!f.multiple,f.multiple?[]:\"\",!1))}e[Pf]=f}catch(t){W(a,a.return,t)}}break;case 6:ck(b,a);ek(a);if(d&4){if(null===a.stateNode)throw Error(p(162));e=a.stateNode;f=a.memoizedProps;try{e.nodeValue=f}catch(t){W(a,a.return,t)}}break;case 3:ck(b,a);ek(a);if(d&4&&null!==c&&c.memoizedState.isDehydrated)try{bd(b.containerInfo)}catch(t){W(a,a.return,t)}break;case 4:ck(b,a);ek(a);break;case 13:ck(b,a);ek(a);e=a.child;e.flags&8192&&(f=null!==e.memoizedState,e.stateNode.isHidden=f,!f||\nnull!==e.alternate&&null!==e.alternate.memoizedState||(fk=B()));d&4&&ak(a);break;case 22:m=null!==c&&null!==c.memoizedState;a.mode&1?(U=(l=U)||m,ck(b,a),U=l):ck(b,a);ek(a);if(d&8192){l=null!==a.memoizedState;if((a.stateNode.isHidden=l)&&!m&&0!==(a.mode&1))for(V=a,m=a.child;null!==m;){for(q=V=m;null!==V;){r=V;y=r.child;switch(r.tag){case 0:case 11:case 14:case 15:Pj(4,r,r.return);break;case 1:Lj(r,r.return);var n=r.stateNode;if(\"function\"===typeof n.componentWillUnmount){d=r;c=r.return;try{b=d,n.props=\nb.memoizedProps,n.state=b.memoizedState,n.componentWillUnmount()}catch(t){W(d,c,t)}}break;case 5:Lj(r,r.return);break;case 22:if(null!==r.memoizedState){gk(q);continue}}null!==y?(y.return=r,V=y):gk(q)}m=m.sibling}a:for(m=null,q=a;;){if(5===q.tag){if(null===m){m=q;try{e=q.stateNode,l?(f=e.style,\"function\"===typeof f.setProperty?f.setProperty(\"display\",\"none\",\"important\"):f.display=\"none\"):(h=q.stateNode,k=q.memoizedProps.style,g=void 0!==k&&null!==k&&k.hasOwnProperty(\"display\")?k.display:null,h.style.display=\nrb(\"display\",g))}catch(t){W(a,a.return,t)}}}else if(6===q.tag){if(null===m)try{q.stateNode.nodeValue=l?\"\":q.memoizedProps}catch(t){W(a,a.return,t)}}else if((22!==q.tag&&23!==q.tag||null===q.memoizedState||q===a)&&null!==q.child){q.child.return=q;q=q.child;continue}if(q===a)break a;for(;null===q.sibling;){if(null===q.return||q.return===a)break a;m===q&&(m=null);q=q.return}m===q&&(m=null);q.sibling.return=q.return;q=q.sibling}}break;case 19:ck(b,a);ek(a);d&4&&ak(a);break;case 21:break;default:ck(b,\na),ek(a)}}function ek(a){var b=a.flags;if(b&2){try{a:{for(var c=a.return;null!==c;){if(Tj(c)){var d=c;break a}c=c.return}throw Error(p(160));}switch(d.tag){case 5:var e=d.stateNode;d.flags&32&&(ob(e,\"\"),d.flags&=-33);var f=Uj(a);Wj(a,f,e);break;case 3:case 4:var g=d.stateNode.containerInfo,h=Uj(a);Vj(a,h,g);break;default:throw Error(p(161));}}catch(k){W(a,a.return,k)}a.flags&=-3}b&4096&&(a.flags&=-4097)}function hk(a,b,c){V=a;ik(a,b,c)}\nfunction ik(a,b,c){for(var d=0!==(a.mode&1);null!==V;){var e=V,f=e.child;if(22===e.tag&&d){var g=null!==e.memoizedState||Jj;if(!g){var h=e.alternate,k=null!==h&&null!==h.memoizedState||U;h=Jj;var l=U;Jj=g;if((U=k)&&!l)for(V=e;null!==V;)g=V,k=g.child,22===g.tag&&null!==g.memoizedState?jk(e):null!==k?(k.return=g,V=k):jk(e);for(;null!==f;)V=f,ik(f,b,c),f=f.sibling;V=e;Jj=h;U=l}kk(a,b,c)}else 0!==(e.subtreeFlags&8772)&&null!==f?(f.return=e,V=f):kk(a,b,c)}}\nfunction kk(a){for(;null!==V;){var b=V;if(0!==(b.flags&8772)){var c=b.alternate;try{if(0!==(b.flags&8772))switch(b.tag){case 0:case 11:case 15:U||Qj(5,b);break;case 1:var d=b.stateNode;if(b.flags&4&&!U)if(null===c)d.componentDidMount();else{var e=b.elementType===b.type?c.memoizedProps:Ci(b.type,c.memoizedProps);d.componentDidUpdate(e,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var f=b.updateQueue;null!==f&&sh(b,f,d);break;case 3:var g=b.updateQueue;if(null!==g){c=null;if(null!==b.child)switch(b.child.tag){case 5:c=\nb.child.stateNode;break;case 1:c=b.child.stateNode}sh(b,g,c)}break;case 5:var h=b.stateNode;if(null===c&&b.flags&4){c=h;var k=b.memoizedProps;switch(b.type){case \"button\":case \"input\":case \"select\":case \"textarea\":k.autoFocus&&c.focus();break;case \"img\":k.src&&(c.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(null===b.memoizedState){var l=b.alternate;if(null!==l){var m=l.memoizedState;if(null!==m){var q=m.dehydrated;null!==q&&bd(q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;\ndefault:throw Error(p(163));}U||b.flags&512&&Rj(b)}catch(r){W(b,b.return,r)}}if(b===a){V=null;break}c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}function gk(a){for(;null!==V;){var b=V;if(b===a){V=null;break}var c=b.sibling;if(null!==c){c.return=b.return;V=c;break}V=b.return}}\nfunction jk(a){for(;null!==V;){var b=V;try{switch(b.tag){case 0:case 11:case 15:var c=b.return;try{Qj(4,b)}catch(k){W(b,c,k)}break;case 1:var d=b.stateNode;if(\"function\"===typeof d.componentDidMount){var e=b.return;try{d.componentDidMount()}catch(k){W(b,e,k)}}var f=b.return;try{Rj(b)}catch(k){W(b,f,k)}break;case 5:var g=b.return;try{Rj(b)}catch(k){W(b,g,k)}}}catch(k){W(b,b.return,k)}if(b===a){V=null;break}var h=b.sibling;if(null!==h){h.return=b.return;V=h;break}V=b.return}}\nvar lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=Infinity,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return 0!==(K&6)?B():-1!==Ak?Ak:Ak=B()}\nfunction yi(a){if(0===(a.mode&1))return 1;if(0!==(K&2)&&0!==Z)return Z&-Z;if(null!==Kg.transition)return 0===Bk&&(Bk=yc()),Bk;a=C;if(0!==a)return a;a=window.event;a=void 0===a?16:jd(a.type);return a}function gi(a,b,c,d){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(a,c,d);if(0===(K&2)||a!==Q)a===Q&&(0===(K&2)&&(qk|=c),4===T&&Ck(a,Z)),Dk(a,d),1===c&&0===K&&0===(b.mode&1)&&(Gj=B()+500,fg&&jg())}\nfunction Dk(a,b){var c=a.callbackNode;wc(a,b);var d=uc(a,a===Q?Z:0);if(0===d)null!==c&&bc(c),a.callbackNode=null,a.callbackPriority=0;else if(b=d&-d,a.callbackPriority!==b){null!=c&&bc(c);if(1===b)0===a.tag?ig(Ek.bind(null,a)):hg(Ek.bind(null,a)),Jf(function(){0===(K&6)&&jg()}),c=null;else{switch(Dc(d)){case 1:c=fc;break;case 4:c=gc;break;case 16:c=hc;break;case 536870912:c=jc;break;default:c=hc}c=Fk(c,Gk.bind(null,a))}a.callbackPriority=b;a.callbackNode=c}}\nfunction Gk(a,b){Ak=-1;Bk=0;if(0!==(K&6))throw Error(p(327));var c=a.callbackNode;if(Hk()&&a.callbackNode!==c)return null;var d=uc(a,a===Q?Z:0);if(0===d)return null;if(0!==(d&30)||0!==(d&a.expiredLanes)||b)b=Ik(a,d);else{b=d;var e=K;K|=2;var f=Jk();if(Q!==a||Z!==b)uk=null,Gj=B()+500,Kk(a,b);do try{Lk();break}catch(h){Mk(a,h)}while(1);$g();mk.current=f;K=e;null!==Y?b=0:(Q=null,Z=0,b=T)}if(0!==b){2===b&&(e=xc(a),0!==e&&(d=e,b=Nk(a,e)));if(1===b)throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;if(6===b)Ck(a,d);\nelse{e=a.current.alternate;if(0===(d&30)&&!Ok(e)&&(b=Ik(a,d),2===b&&(f=xc(a),0!==f&&(d=f,b=Nk(a,f))),1===b))throw c=pk,Kk(a,0),Ck(a,d),Dk(a,B()),c;a.finishedWork=e;a.finishedLanes=d;switch(b){case 0:case 1:throw Error(p(345));case 2:Pk(a,tk,uk);break;case 3:Ck(a,d);if((d&130023424)===d&&(b=fk+500-B(),10<b)){if(0!==uc(a,0))break;e=a.suspendedLanes;if((e&d)!==d){R();a.pingedLanes|=a.suspendedLanes&e;break}a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),b);break}Pk(a,tk,uk);break;case 4:Ck(a,d);if((d&4194240)===\nd)break;b=a.eventTimes;for(e=-1;0<d;){var g=31-oc(d);f=1<<g;g=b[g];g>e&&(e=g);d&=~f}d=e;d=B()-d;d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*lk(d/1960))-d;if(10<d){a.timeoutHandle=Ff(Pk.bind(null,a,tk,uk),d);break}Pk(a,tk,uk);break;case 5:Pk(a,tk,uk);break;default:throw Error(p(329));}}}Dk(a,B());return a.callbackNode===c?Gk.bind(null,a):null}\nfunction Nk(a,b){var c=sk;a.current.memoizedState.isDehydrated&&(Kk(a,b).flags|=256);a=Ik(a,b);2!==a&&(b=tk,tk=c,null!==b&&Fj(b));return a}function Fj(a){null===tk?tk=a:tk.push.apply(tk,a)}\nfunction Ok(a){for(var b=a;;){if(b.flags&16384){var c=b.updateQueue;if(null!==c&&(c=c.stores,null!==c))for(var d=0;d<c.length;d++){var e=c[d],f=e.getSnapshot;e=e.value;try{if(!He(f(),e))return!1}catch(g){return!1}}}c=b.child;if(b.subtreeFlags&16384&&null!==c)c.return=b,b=c;else{if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return!0;b=b.return}b.sibling.return=b.return;b=b.sibling}}return!0}\nfunction Ck(a,b){b&=~rk;b&=~qk;a.suspendedLanes|=b;a.pingedLanes&=~b;for(a=a.expirationTimes;0<b;){var c=31-oc(b),d=1<<c;a[c]=-1;b&=~d}}function Ek(a){if(0!==(K&6))throw Error(p(327));Hk();var b=uc(a,0);if(0===(b&1))return Dk(a,B()),null;var c=Ik(a,b);if(0!==a.tag&&2===c){var d=xc(a);0!==d&&(b=d,c=Nk(a,d))}if(1===c)throw c=pk,Kk(a,0),Ck(a,b),Dk(a,B()),c;if(6===c)throw Error(p(345));a.finishedWork=a.current.alternate;a.finishedLanes=b;Pk(a,tk,uk);Dk(a,B());return null}\nfunction Qk(a,b){var c=K;K|=1;try{return a(b)}finally{K=c,0===K&&(Gj=B()+500,fg&&jg())}}function Rk(a){null!==wk&&0===wk.tag&&0===(K&6)&&Hk();var b=K;K|=1;var c=ok.transition,d=C;try{if(ok.transition=null,C=1,a)return a()}finally{C=d,ok.transition=c,K=b,0===(K&6)&&jg()}}function Hj(){fj=ej.current;E(ej)}\nfunction Kk(a,b){a.finishedWork=null;a.finishedLanes=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,Gf(c));if(null!==Y)for(c=Y.return;null!==c;){var d=c;wg(d);switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&$f();break;case 3:zh();E(Wf);E(H);Eh();break;case 5:Bh(d);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(d.type._context);break;case 22:case 23:Hj()}c=c.return}Q=a;Y=a=Pg(a.current,null);Z=fj=b;T=0;pk=null;rk=qk=rh=0;tk=sk=null;if(null!==fh){for(b=\n0;b<fh.length;b++)if(c=fh[b],d=c.interleaved,null!==d){c.interleaved=null;var e=d.next,f=c.pending;if(null!==f){var g=f.next;f.next=e;d.next=g}c.pending=d}fh=null}return a}\nfunction Mk(a,b){do{var c=Y;try{$g();Fh.current=Rh;if(Ih){for(var d=M.memoizedState;null!==d;){var e=d.queue;null!==e&&(e.pending=null);d=d.next}Ih=!1}Hh=0;O=N=M=null;Jh=!1;Kh=0;nk.current=null;if(null===c||null===c.return){T=1;pk=b;Y=null;break}a:{var f=a,g=c.return,h=c,k=b;b=Z;h.flags|=32768;if(null!==k&&\"object\"===typeof k&&\"function\"===typeof k.then){var l=k,m=h,q=m.tag;if(0===(m.mode&1)&&(0===q||11===q||15===q)){var r=m.alternate;r?(m.updateQueue=r.updateQueue,m.memoizedState=r.memoizedState,\nm.lanes=r.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=Ui(g);if(null!==y){y.flags&=-257;Vi(y,g,h,f,b);y.mode&1&&Si(f,l,b);b=y;k=l;var n=b.updateQueue;if(null===n){var t=new Set;t.add(k);b.updateQueue=t}else n.add(k);break a}else{if(0===(b&1)){Si(f,l,b);tj();break a}k=Error(p(426))}}else if(I&&h.mode&1){var J=Ui(g);if(null!==J){0===(J.flags&65536)&&(J.flags|=256);Vi(J,g,h,f,b);Jg(Ji(k,h));break a}}f=k=Ji(k,h);4!==T&&(T=2);null===sk?sk=[f]:sk.push(f);f=g;do{switch(f.tag){case 3:f.flags|=65536;\nb&=-b;f.lanes|=b;var x=Ni(f,k,b);ph(f,x);break a;case 1:h=k;var w=f.type,u=f.stateNode;if(0===(f.flags&128)&&(\"function\"===typeof w.getDerivedStateFromError||null!==u&&\"function\"===typeof u.componentDidCatch&&(null===Ri||!Ri.has(u)))){f.flags|=65536;b&=-b;f.lanes|=b;var F=Qi(f,h,b);ph(f,F);break a}}f=f.return}while(null!==f)}Sk(c)}catch(na){b=na;Y===c&&null!==c&&(Y=c=c.return);continue}break}while(1)}function Jk(){var a=mk.current;mk.current=Rh;return null===a?Rh:a}\nfunction tj(){if(0===T||3===T||2===T)T=4;null===Q||0===(rh&268435455)&&0===(qk&268435455)||Ck(Q,Z)}function Ik(a,b){var c=K;K|=2;var d=Jk();if(Q!==a||Z!==b)uk=null,Kk(a,b);do try{Tk();break}catch(e){Mk(a,e)}while(1);$g();K=c;mk.current=d;if(null!==Y)throw Error(p(261));Q=null;Z=0;return T}function Tk(){for(;null!==Y;)Uk(Y)}function Lk(){for(;null!==Y&&!cc();)Uk(Y)}function Uk(a){var b=Vk(a.alternate,a,fj);a.memoizedProps=a.pendingProps;null===b?Sk(a):Y=b;nk.current=null}\nfunction Sk(a){var b=a;do{var c=b.alternate;a=b.return;if(0===(b.flags&32768)){if(c=Ej(c,b,fj),null!==c){Y=c;return}}else{c=Ij(c,b);if(null!==c){c.flags&=32767;Y=c;return}if(null!==a)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{T=6;Y=null;return}}b=b.sibling;if(null!==b){Y=b;return}Y=b=a}while(null!==b);0===T&&(T=5)}function Pk(a,b,c){var d=C,e=ok.transition;try{ok.transition=null,C=1,Wk(a,b,c,d)}finally{ok.transition=e,C=d}return null}\nfunction Wk(a,b,c,d){do Hk();while(null!==wk);if(0!==(K&6))throw Error(p(327));c=a.finishedWork;var e=a.finishedLanes;if(null===c)return null;a.finishedWork=null;a.finishedLanes=0;if(c===a.current)throw Error(p(177));a.callbackNode=null;a.callbackPriority=0;var f=c.lanes|c.childLanes;Bc(a,f);a===Q&&(Y=Q=null,Z=0);0===(c.subtreeFlags&2064)&&0===(c.flags&2064)||vk||(vk=!0,Fk(hc,function(){Hk();return null}));f=0!==(c.flags&15990);if(0!==(c.subtreeFlags&15990)||f){f=ok.transition;ok.transition=null;\nvar g=C;C=1;var h=K;K|=4;nk.current=null;Oj(a,c);dk(c,a);Oe(Df);dd=!!Cf;Df=Cf=null;a.current=c;hk(c,a,e);dc();K=h;C=g;ok.transition=f}else a.current=c;vk&&(vk=!1,wk=a,xk=e);f=a.pendingLanes;0===f&&(Ri=null);mc(c.stateNode,d);Dk(a,B());if(null!==b)for(d=a.onRecoverableError,c=0;c<b.length;c++)e=b[c],d(e.value,{componentStack:e.stack,digest:e.digest});if(Oi)throw Oi=!1,a=Pi,Pi=null,a;0!==(xk&1)&&0!==a.tag&&Hk();f=a.pendingLanes;0!==(f&1)?a===zk?yk++:(yk=0,zk=a):yk=0;jg();return null}\nfunction Hk(){if(null!==wk){var a=Dc(xk),b=ok.transition,c=C;try{ok.transition=null;C=16>a?16:a;if(null===wk)var d=!1;else{a=wk;wk=null;xk=0;if(0!==(K&6))throw Error(p(331));var e=K;K|=4;for(V=a.current;null!==V;){var f=V,g=f.child;if(0!==(V.flags&16)){var h=f.deletions;if(null!==h){for(var k=0;k<h.length;k++){var l=h[k];for(V=l;null!==V;){var m=V;switch(m.tag){case 0:case 11:case 15:Pj(8,m,f)}var q=m.child;if(null!==q)q.return=m,V=q;else for(;null!==V;){m=V;var r=m.sibling,y=m.return;Sj(m);if(m===\nl){V=null;break}if(null!==r){r.return=y;V=r;break}V=y}}}var n=f.alternate;if(null!==n){var t=n.child;if(null!==t){n.child=null;do{var J=t.sibling;t.sibling=null;t=J}while(null!==t)}}V=f}}if(0!==(f.subtreeFlags&2064)&&null!==g)g.return=f,V=g;else b:for(;null!==V;){f=V;if(0!==(f.flags&2048))switch(f.tag){case 0:case 11:case 15:Pj(9,f,f.return)}var x=f.sibling;if(null!==x){x.return=f.return;V=x;break b}V=f.return}}var w=a.current;for(V=w;null!==V;){g=V;var u=g.child;if(0!==(g.subtreeFlags&2064)&&null!==\nu)u.return=g,V=u;else b:for(g=w;null!==V;){h=V;if(0!==(h.flags&2048))try{switch(h.tag){case 0:case 11:case 15:Qj(9,h)}}catch(na){W(h,h.return,na)}if(h===g){V=null;break b}var F=h.sibling;if(null!==F){F.return=h.return;V=F;break b}V=h.return}}K=e;jg();if(lc&&\"function\"===typeof lc.onPostCommitFiberRoot)try{lc.onPostCommitFiberRoot(kc,a)}catch(na){}d=!0}return d}finally{C=c,ok.transition=b}}return!1}function Xk(a,b,c){b=Ji(c,b);b=Ni(a,b,1);a=nh(a,b,1);b=R();null!==a&&(Ac(a,1,b),Dk(a,b))}\nfunction W(a,b,c){if(3===a.tag)Xk(a,a,c);else for(;null!==b;){if(3===b.tag){Xk(b,a,c);break}else if(1===b.tag){var d=b.stateNode;if(\"function\"===typeof b.type.getDerivedStateFromError||\"function\"===typeof d.componentDidCatch&&(null===Ri||!Ri.has(d))){a=Ji(c,a);a=Qi(b,a,1);b=nh(b,a,1);a=R();null!==b&&(Ac(b,1,a),Dk(b,a));break}}b=b.return}}\nfunction Ti(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);b=R();a.pingedLanes|=a.suspendedLanes&c;Q===a&&(Z&c)===c&&(4===T||3===T&&(Z&130023424)===Z&&500>B()-fk?Kk(a,0):rk|=c);Dk(a,b)}function Yk(a,b){0===b&&(0===(a.mode&1)?b=1:(b=sc,sc<<=1,0===(sc&130023424)&&(sc=4194304)));var c=R();a=ih(a,b);null!==a&&(Ac(a,b,c),Dk(a,c))}function uj(a){var b=a.memoizedState,c=0;null!==b&&(c=b.retryLane);Yk(a,c)}\nfunction bk(a,b){var c=0;switch(a.tag){case 13:var d=a.stateNode;var e=a.memoizedState;null!==e&&(c=e.retryLane);break;case 19:d=a.stateNode;break;default:throw Error(p(314));}null!==d&&d.delete(b);Yk(a,c)}var Vk;\nVk=function(a,b,c){if(null!==a)if(a.memoizedProps!==b.pendingProps||Wf.current)dh=!0;else{if(0===(a.lanes&c)&&0===(b.flags&128))return dh=!1,yj(a,b,c);dh=0!==(a.flags&131072)?!0:!1}else dh=!1,I&&0!==(b.flags&1048576)&&ug(b,ng,b.index);b.lanes=0;switch(b.tag){case 2:var d=b.type;ij(a,b);a=b.pendingProps;var e=Yf(b,H.current);ch(b,c);e=Nh(null,b,d,a,e,c);var f=Sh();b.flags|=1;\"object\"===typeof e&&null!==e&&\"function\"===typeof e.render&&void 0===e.$$typeof?(b.tag=1,b.memoizedState=null,b.updateQueue=\nnull,Zf(d)?(f=!0,cg(b)):f=!1,b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,kh(b),e.updater=Ei,b.stateNode=e,e._reactInternals=b,Ii(b,d,a,c),b=jj(null,b,d,!0,f,c)):(b.tag=0,I&&f&&vg(b),Xi(null,b,e,c),b=b.child);return b;case 16:d=b.elementType;a:{ij(a,b);a=b.pendingProps;e=d._init;d=e(d._payload);b.type=d;e=b.tag=Zk(d);a=Ci(d,a);switch(e){case 0:b=cj(null,b,d,a,c);break a;case 1:b=hj(null,b,d,a,c);break a;case 11:b=Yi(null,b,d,a,c);break a;case 14:b=$i(null,b,d,Ci(d.type,a),c);break a}throw Error(p(306,\nd,\"\"));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),cj(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),hj(a,b,d,e,c);case 3:a:{kj(b);if(null===a)throw Error(p(387));d=b.pendingProps;f=b.memoizedState;e=f.element;lh(a,b);qh(b,d,null,c);var g=b.memoizedState;d=g.element;if(f.isDehydrated)if(f={element:d,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},b.updateQueue.baseState=\nf,b.memoizedState=f,b.flags&256){e=Ji(Error(p(423)),b);b=lj(a,b,d,c,e);break a}else if(d!==e){e=Ji(Error(p(424)),b);b=lj(a,b,d,c,e);break a}else for(yg=Lf(b.stateNode.containerInfo.firstChild),xg=b,I=!0,zg=null,c=Vg(b,null,d,c),b.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{Ig();if(d===e){b=Zi(a,b,c);break a}Xi(a,b,d,c)}b=b.child}return b;case 5:return Ah(b),null===a&&Eg(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:null,g=e.children,Ef(d,e)?g=null:null!==f&&Ef(d,f)&&(b.flags|=32),\ngj(a,b),Xi(a,b,g,c),b.child;case 6:return null===a&&Eg(b),null;case 13:return oj(a,b,c);case 4:return yh(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=Ug(b,null,d,c):Xi(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),Yi(a,b,d,e,c);case 7:return Xi(a,b,b.pendingProps,c),b.child;case 8:return Xi(a,b,b.pendingProps.children,c),b.child;case 12:return Xi(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;f=b.memoizedProps;\ng=e.value;G(Wg,d._currentValue);d._currentValue=g;if(null!==f)if(He(f.value,g)){if(f.children===e.children&&!Wf.current){b=Zi(a,b,c);break a}}else for(f=b.child,null!==f&&(f.return=b);null!==f;){var h=f.dependencies;if(null!==h){g=f.child;for(var k=h.firstContext;null!==k;){if(k.context===d){if(1===f.tag){k=mh(-1,c&-c);k.tag=2;var l=f.updateQueue;if(null!==l){l=l.shared;var m=l.pending;null===m?k.next=k:(k.next=m.next,m.next=k);l.pending=k}}f.lanes|=c;k=f.alternate;null!==k&&(k.lanes|=c);bh(f.return,\nc,b);h.lanes|=c;break}k=k.next}}else if(10===f.tag)g=f.type===b.type?null:f.child;else if(18===f.tag){g=f.return;if(null===g)throw Error(p(341));g.lanes|=c;h=g.alternate;null!==h&&(h.lanes|=c);bh(g,c,b);g=f.sibling}else g=f.child;if(null!==g)g.return=f;else for(g=f;null!==g;){if(g===b){g=null;break}f=g.sibling;if(null!==f){f.return=g.return;g=f;break}g=g.return}f=g}Xi(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,d=b.pendingProps.children,ch(b,c),e=eh(e),d=d(e),b.flags|=1,Xi(a,b,d,c),\nb.child;case 14:return d=b.type,e=Ci(d,b.pendingProps),e=Ci(d.type,e),$i(a,b,d,e,c);case 15:return bj(a,b,b.type,b.pendingProps,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:Ci(d,e),ij(a,b),b.tag=1,Zf(d)?(a=!0,cg(b)):a=!1,ch(b,c),Gi(b,d,e),Ii(b,d,e,c),jj(null,b,d,!0,a,c);case 19:return xj(a,b,c);case 22:return dj(a,b,c)}throw Error(p(156,b.tag));};function Fk(a,b){return ac(a,b)}\nfunction $k(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.subtreeFlags=this.flags=0;this.deletions=null;this.childLanes=this.lanes=0;this.alternate=null}function Bg(a,b,c,d){return new $k(a,b,c,d)}function aj(a){a=a.prototype;return!(!a||!a.isReactComponent)}\nfunction Zk(a){if(\"function\"===typeof a)return aj(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===Da)return 11;if(a===Ga)return 14}return 2}\nfunction Pg(a,b){var c=a.alternate;null===c?(c=Bg(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null);c.flags=a.flags&14680064;c.childLanes=a.childLanes;c.lanes=a.lanes;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{lanes:b.lanes,firstContext:b.firstContext};\nc.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}\nfunction Rg(a,b,c,d,e,f){var g=2;d=a;if(\"function\"===typeof a)aj(a)&&(g=1);else if(\"string\"===typeof a)g=5;else a:switch(a){case ya:return Tg(c.children,e,f,b);case za:g=8;e|=8;break;case Aa:return a=Bg(12,c,b,e|2),a.elementType=Aa,a.lanes=f,a;case Ea:return a=Bg(13,c,b,e),a.elementType=Ea,a.lanes=f,a;case Fa:return a=Bg(19,c,b,e),a.elementType=Fa,a.lanes=f,a;case Ia:return pj(c,e,f,b);default:if(\"object\"===typeof a&&null!==a)switch(a.$$typeof){case Ba:g=10;break a;case Ca:g=9;break a;case Da:g=11;\nbreak a;case Ga:g=14;break a;case Ha:g=16;d=null;break a}throw Error(p(130,null==a?a:typeof a,\"\"));}b=Bg(g,c,b,e);b.elementType=a;b.type=d;b.lanes=f;return b}function Tg(a,b,c,d){a=Bg(7,a,d,b);a.lanes=c;return a}function pj(a,b,c,d){a=Bg(22,a,d,b);a.elementType=Ia;a.lanes=c;a.stateNode={isHidden:!1};return a}function Qg(a,b,c){a=Bg(6,a,null,b);a.lanes=c;return a}\nfunction Sg(a,b,c){b=Bg(4,null!==a.children?a.children:[],a.key,b);b.lanes=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}\nfunction al(a,b,c,d,e){this.tag=b;this.containerInfo=a;this.finishedWork=this.pingCache=this.current=this.pendingChildren=null;this.timeoutHandle=-1;this.callbackNode=this.pendingContext=this.context=null;this.callbackPriority=0;this.eventTimes=zc(0);this.expirationTimes=zc(-1);this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0;this.entanglements=zc(0);this.identifierPrefix=d;this.onRecoverableError=e;this.mutableSourceEagerHydrationData=\nnull}function bl(a,b,c,d,e,f,g,h,k){a=new al(a,b,c,h,k);1===b?(b=1,!0===f&&(b|=8)):b=0;f=Bg(3,null,null,b);a.current=f;f.stateNode=a;f.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null};kh(f);return a}function cl(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:wa,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}\nfunction dl(a){if(!a)return Vf;a=a._reactInternals;a:{if(Vb(a)!==a||1!==a.tag)throw Error(p(170));var b=a;do{switch(b.tag){case 3:b=b.stateNode.context;break a;case 1:if(Zf(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break a}}b=b.return}while(null!==b);throw Error(p(171));}if(1===a.tag){var c=a.type;if(Zf(c))return bg(a,c,b)}return b}\nfunction el(a,b,c,d,e,f,g,h,k){a=bl(c,d,!0,a,e,f,g,h,k);a.context=dl(null);c=a.current;d=R();e=yi(c);f=mh(d,e);f.callback=void 0!==b&&null!==b?b:null;nh(c,f,e);a.current.lanes=e;Ac(a,e,d);Dk(a,d);return a}function fl(a,b,c,d){var e=b.current,f=R(),g=yi(e);c=dl(c);null===b.context?b.context=c:b.pendingContext=c;b=mh(f,g);b.payload={element:a};d=void 0===d?null:d;null!==d&&(b.callback=d);a=nh(e,b,g);null!==a&&(gi(a,e,g,f),oh(a,e,g));return g}\nfunction gl(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function hl(a,b){a=a.memoizedState;if(null!==a&&null!==a.dehydrated){var c=a.retryLane;a.retryLane=0!==c&&c<b?c:b}}function il(a,b){hl(a,b);(a=a.alternate)&&hl(a,b)}function jl(){return null}var kl=\"function\"===typeof reportError?reportError:function(a){console.error(a)};function ll(a){this._internalRoot=a}\nml.prototype.render=ll.prototype.render=function(a){var b=this._internalRoot;if(null===b)throw Error(p(409));fl(a,b,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var a=this._internalRoot;if(null!==a){this._internalRoot=null;var b=a.containerInfo;Rk(function(){fl(null,a,null,null)});b[uf]=null}};function ml(a){this._internalRoot=a}\nml.prototype.unstable_scheduleHydration=function(a){if(a){var b=Hc();a={blockedOn:null,target:a,priority:b};for(var c=0;c<Qc.length&&0!==b&&b<Qc[c].priority;c++);Qc.splice(c,0,a);0===c&&Vc(a)}};function nl(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType)}function ol(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}function pl(){}\nfunction ql(a,b,c,d,e){if(e){if(\"function\"===typeof d){var f=d;d=function(){var a=gl(g);f.call(a)}}var g=el(b,d,a,0,null,!1,!1,\"\",pl);a._reactRootContainer=g;a[uf]=g.current;sf(8===a.nodeType?a.parentNode:a);Rk();return g}for(;e=a.lastChild;)a.removeChild(e);if(\"function\"===typeof d){var h=d;d=function(){var a=gl(k);h.call(a)}}var k=bl(a,0,!1,null,null,!1,!1,\"\",pl);a._reactRootContainer=k;a[uf]=k.current;sf(8===a.nodeType?a.parentNode:a);Rk(function(){fl(b,k,c,d)});return k}\nfunction rl(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f;if(\"function\"===typeof e){var h=e;e=function(){var a=gl(g);h.call(a)}}fl(b,g,a,e)}else g=ql(c,b,a,e,d);return gl(g)}Ec=function(a){switch(a.tag){case 3:var b=a.stateNode;if(b.current.memoizedState.isDehydrated){var c=tc(b.pendingLanes);0!==c&&(Cc(b,c|1),Dk(b,B()),0===(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var b=ih(a,1);if(null!==b){var c=R();gi(b,a,1,c)}}),il(a,1)}};\nFc=function(a){if(13===a.tag){var b=ih(a,134217728);if(null!==b){var c=R();gi(b,a,134217728,c)}il(a,134217728)}};Gc=function(a){if(13===a.tag){var b=yi(a),c=ih(a,b);if(null!==c){var d=R();gi(c,a,b,d)}il(a,b)}};Hc=function(){return C};Ic=function(a,b){var c=C;try{return C=a,b()}finally{C=c}};\nyb=function(a,b,c){switch(b){case \"input\":bb(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll(\"input[name=\"+JSON.stringify(\"\"+b)+'][type=\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=Db(d);if(!e)throw Error(p(90));Wa(d);bb(d,e)}}}break;case \"textarea\":ib(a,c);break;case \"select\":b=c.value,null!=b&&fb(a,!!c.multiple,b,!1)}};Gb=Qk;Hb=Rk;\nvar sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:\"18.3.1\",rendererPackageName:\"react-dom\"};\nvar ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Zb(a);return null===a?null:a.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||\njl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:\"18.3.1-next-f1338f8080-20240426\"};if(\"undefined\"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch(a){}}exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;\nexports.createPortal=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nl(b))throw Error(p(200));return cl(a,b,null,c)};exports.createRoot=function(a,b){if(!nl(a))throw Error(p(299));var c=!1,d=\"\",e=kl;null!==b&&void 0!==b&&(!0===b.unstable_strictMode&&(c=!0),void 0!==b.identifierPrefix&&(d=b.identifierPrefix),void 0!==b.onRecoverableError&&(e=b.onRecoverableError));b=bl(a,1,!1,null,null,c,!1,d,e);a[uf]=b.current;sf(8===a.nodeType?a.parentNode:a);return new ll(b)};\nexports.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternals;if(void 0===b){if(\"function\"===typeof a.render)throw Error(p(188));a=Object.keys(a).join(\",\");throw Error(p(268,a));}a=Zb(b);a=null===a?null:a.stateNode;return a};exports.flushSync=function(a){return Rk(a)};exports.hydrate=function(a,b,c){if(!ol(b))throw Error(p(200));return rl(null,a,b,!0,c)};\nexports.hydrateRoot=function(a,b,c){if(!nl(a))throw Error(p(405));var d=null!=c&&c.hydratedSources||null,e=!1,f=\"\",g=kl;null!==c&&void 0!==c&&(!0===c.unstable_strictMode&&(e=!0),void 0!==c.identifierPrefix&&(f=c.identifierPrefix),void 0!==c.onRecoverableError&&(g=c.onRecoverableError));b=el(b,null,a,1,null!=c?c:null,e,!1,f,g);a[uf]=b.current;sf(a);if(d)for(a=0;a<d.length;a++)c=d[a],e=c._getVersion,e=e(c._source),null==b.mutableSourceEagerHydrationData?b.mutableSourceEagerHydrationData=[c,e]:b.mutableSourceEagerHydrationData.push(c,\ne);return new ml(b)};exports.render=function(a,b,c){if(!ol(b))throw Error(p(200));return rl(null,a,b,!1,c)};exports.unmountComponentAtNode=function(a){if(!ol(a))throw Error(p(40));return a._reactRootContainer?(Rk(function(){rl(null,null,a,!1,function(){a._reactRootContainer=null;a[uf]=null})}),!0):!1};exports.unstable_batchedUpdates=Qk;\nexports.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!ol(c))throw Error(p(200));if(null==a||void 0===a._reactInternals)throw Error(p(38));return rl(a,b,c,!1,d)};exports.version=\"18.3.1-next-f1338f8080-20240426\";\n","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","// src/subscribable.ts\nvar Subscribable = class {\n  constructor() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.subscribe = this.subscribe.bind(this);\n  }\n  subscribe(listener) {\n    this.listeners.add(listener);\n    this.onSubscribe();\n    return () => {\n      this.listeners.delete(listener);\n      this.onUnsubscribe();\n    };\n  }\n  hasListeners() {\n    return this.listeners.size > 0;\n  }\n  onSubscribe() {\n  }\n  onUnsubscribe() {\n  }\n};\nexport {\n  Subscribable\n};\n//# sourceMappingURL=subscribable.js.map","// src/timeoutManager.ts\nvar defaultTimeoutProvider = {\n  // We need the wrapper function syntax below instead of direct references to\n  // global setTimeout etc.\n  //\n  // BAD: `setTimeout: setTimeout`\n  // GOOD: `setTimeout: (cb, delay) => setTimeout(cb, delay)`\n  //\n  // If we use direct references here, then anything that wants to spy on or\n  // replace the global setTimeout (like tests) won't work since we'll already\n  // have a hard reference to the original implementation at the time when this\n  // file was imported.\n  setTimeout: (callback, delay) => setTimeout(callback, delay),\n  clearTimeout: (timeoutId) => clearTimeout(timeoutId),\n  setInterval: (callback, delay) => setInterval(callback, delay),\n  clearInterval: (intervalId) => clearInterval(intervalId)\n};\nvar TimeoutManager = class {\n  // We cannot have TimeoutManager<T> as we must instantiate it with a concrete\n  // type at app boot; and if we leave that type, then any new timer provider\n  // would need to support ReturnType<typeof setTimeout>, which is infeasible.\n  //\n  // We settle for type safety for the TimeoutProvider type, and accept that\n  // this class is unsafe internally to allow for extension.\n  #provider = defaultTimeoutProvider;\n  #providerCalled = false;\n  setTimeoutProvider(provider) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (this.#providerCalled && provider !== this.#provider) {\n        console.error(\n          `[timeoutManager]: Switching provider after calls to previous provider might result in unexpected behavior.`,\n          { previous: this.#provider, provider }\n        );\n      }\n    }\n    this.#provider = provider;\n    if (process.env.NODE_ENV !== \"production\") {\n      this.#providerCalled = false;\n    }\n  }\n  setTimeout(callback, delay) {\n    if (process.env.NODE_ENV !== \"production\") {\n      this.#providerCalled = true;\n    }\n    return this.#provider.setTimeout(callback, delay);\n  }\n  clearTimeout(timeoutId) {\n    this.#provider.clearTimeout(timeoutId);\n  }\n  setInterval(callback, delay) {\n    if (process.env.NODE_ENV !== \"production\") {\n      this.#providerCalled = true;\n    }\n    return this.#provider.setInterval(callback, delay);\n  }\n  clearInterval(intervalId) {\n    this.#provider.clearInterval(intervalId);\n  }\n};\nvar timeoutManager = new TimeoutManager();\nfunction systemSetTimeoutZero(callback) {\n  setTimeout(callback, 0);\n}\nexport {\n  TimeoutManager,\n  defaultTimeoutProvider,\n  systemSetTimeoutZero,\n  timeoutManager\n};\n//# sourceMappingURL=timeoutManager.js.map","// src/utils.ts\nimport { timeoutManager } from \"./timeoutManager.js\";\nvar isServer = typeof window === \"undefined\" || \"Deno\" in globalThis;\nfunction noop() {\n}\nfunction functionalUpdate(updater, input) {\n  return typeof updater === \"function\" ? updater(input) : updater;\n}\nfunction isValidTimeout(value) {\n  return typeof value === \"number\" && value >= 0 && value !== Infinity;\n}\nfunction timeUntilStale(updatedAt, staleTime) {\n  return Math.max(updatedAt + (staleTime || 0) - Date.now(), 0);\n}\nfunction resolveStaleTime(staleTime, query) {\n  return typeof staleTime === \"function\" ? staleTime(query) : staleTime;\n}\nfunction resolveEnabled(enabled, query) {\n  return typeof enabled === \"function\" ? enabled(query) : enabled;\n}\nfunction matchQuery(filters, query) {\n  const {\n    type = \"all\",\n    exact,\n    fetchStatus,\n    predicate,\n    queryKey,\n    stale\n  } = filters;\n  if (queryKey) {\n    if (exact) {\n      if (query.queryHash !== hashQueryKeyByOptions(queryKey, query.options)) {\n        return false;\n      }\n    } else if (!partialMatchKey(query.queryKey, queryKey)) {\n      return false;\n    }\n  }\n  if (type !== \"all\") {\n    const isActive = query.isActive();\n    if (type === \"active\" && !isActive) {\n      return false;\n    }\n    if (type === \"inactive\" && isActive) {\n      return false;\n    }\n  }\n  if (typeof stale === \"boolean\" && query.isStale() !== stale) {\n    return false;\n  }\n  if (fetchStatus && fetchStatus !== query.state.fetchStatus) {\n    return false;\n  }\n  if (predicate && !predicate(query)) {\n    return false;\n  }\n  return true;\n}\nfunction matchMutation(filters, mutation) {\n  const { exact, status, predicate, mutationKey } = filters;\n  if (mutationKey) {\n    if (!mutation.options.mutationKey) {\n      return false;\n    }\n    if (exact) {\n      if (hashKey(mutation.options.mutationKey) !== hashKey(mutationKey)) {\n        return false;\n      }\n    } else if (!partialMatchKey(mutation.options.mutationKey, mutationKey)) {\n      return false;\n    }\n  }\n  if (status && mutation.state.status !== status) {\n    return false;\n  }\n  if (predicate && !predicate(mutation)) {\n    return false;\n  }\n  return true;\n}\nfunction hashQueryKeyByOptions(queryKey, options) {\n  const hashFn = options?.queryKeyHashFn || hashKey;\n  return hashFn(queryKey);\n}\nfunction hashKey(queryKey) {\n  return JSON.stringify(\n    queryKey,\n    (_, val) => isPlainObject(val) ? Object.keys(val).sort().reduce((result, key) => {\n      result[key] = val[key];\n      return result;\n    }, {}) : val\n  );\n}\nfunction partialMatchKey(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (a && b && typeof a === \"object\" && typeof b === \"object\") {\n    return Object.keys(b).every((key) => partialMatchKey(a[key], b[key]));\n  }\n  return false;\n}\nvar hasOwn = Object.prototype.hasOwnProperty;\nfunction replaceEqualDeep(a, b) {\n  if (a === b) {\n    return a;\n  }\n  const array = isPlainArray(a) && isPlainArray(b);\n  if (!array && !(isPlainObject(a) && isPlainObject(b))) return b;\n  const aItems = array ? a : Object.keys(a);\n  const aSize = aItems.length;\n  const bItems = array ? b : Object.keys(b);\n  const bSize = bItems.length;\n  const copy = array ? new Array(bSize) : {};\n  let equalItems = 0;\n  for (let i = 0; i < bSize; i++) {\n    const key = array ? i : bItems[i];\n    const aItem = a[key];\n    const bItem = b[key];\n    if (aItem === bItem) {\n      copy[key] = aItem;\n      if (array ? i < aSize : hasOwn.call(a, key)) equalItems++;\n      continue;\n    }\n    if (aItem === null || bItem === null || typeof aItem !== \"object\" || typeof bItem !== \"object\") {\n      copy[key] = bItem;\n      continue;\n    }\n    const v = replaceEqualDeep(aItem, bItem);\n    copy[key] = v;\n    if (v === aItem) equalItems++;\n  }\n  return aSize === bSize && equalItems === aSize ? a : copy;\n}\nfunction shallowEqualObjects(a, b) {\n  if (!b || Object.keys(a).length !== Object.keys(b).length) {\n    return false;\n  }\n  for (const key in a) {\n    if (a[key] !== b[key]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction isPlainArray(value) {\n  return Array.isArray(value) && value.length === Object.keys(value).length;\n}\nfunction isPlainObject(o) {\n  if (!hasObjectPrototype(o)) {\n    return false;\n  }\n  const ctor = o.constructor;\n  if (ctor === void 0) {\n    return true;\n  }\n  const prot = ctor.prototype;\n  if (!hasObjectPrototype(prot)) {\n    return false;\n  }\n  if (!prot.hasOwnProperty(\"isPrototypeOf\")) {\n    return false;\n  }\n  if (Object.getPrototypeOf(o) !== Object.prototype) {\n    return false;\n  }\n  return true;\n}\nfunction hasObjectPrototype(o) {\n  return Object.prototype.toString.call(o) === \"[object Object]\";\n}\nfunction sleep(timeout) {\n  return new Promise((resolve) => {\n    timeoutManager.setTimeout(resolve, timeout);\n  });\n}\nfunction replaceData(prevData, data, options) {\n  if (typeof options.structuralSharing === \"function\") {\n    return options.structuralSharing(prevData, data);\n  } else if (options.structuralSharing !== false) {\n    if (process.env.NODE_ENV !== \"production\") {\n      try {\n        return replaceEqualDeep(prevData, data);\n      } catch (error) {\n        console.error(\n          `Structural sharing requires data to be JSON serializable. To fix this, turn off structuralSharing or return JSON-serializable data from your queryFn. [${options.queryHash}]: ${error}`\n        );\n        throw error;\n      }\n    }\n    return replaceEqualDeep(prevData, data);\n  }\n  return data;\n}\nfunction keepPreviousData(previousData) {\n  return previousData;\n}\nfunction addToEnd(items, item, max = 0) {\n  const newItems = [...items, item];\n  return max && newItems.length > max ? newItems.slice(1) : newItems;\n}\nfunction addToStart(items, item, max = 0) {\n  const newItems = [item, ...items];\n  return max && newItems.length > max ? newItems.slice(0, -1) : newItems;\n}\nvar skipToken = Symbol();\nfunction ensureQueryFn(options, fetchOptions) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (options.queryFn === skipToken) {\n      console.error(\n        `Attempted to invoke queryFn when set to skipToken. This is likely a configuration error. Query hash: '${options.queryHash}'`\n      );\n    }\n  }\n  if (!options.queryFn && fetchOptions?.initialPromise) {\n    return () => fetchOptions.initialPromise;\n  }\n  if (!options.queryFn || options.queryFn === skipToken) {\n    return () => Promise.reject(new Error(`Missing queryFn: '${options.queryHash}'`));\n  }\n  return options.queryFn;\n}\nfunction shouldThrowError(throwOnError, params) {\n  if (typeof throwOnError === \"function\") {\n    return throwOnError(...params);\n  }\n  return !!throwOnError;\n}\nexport {\n  addToEnd,\n  addToStart,\n  ensureQueryFn,\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  isPlainArray,\n  isPlainObject,\n  isServer,\n  isValidTimeout,\n  keepPreviousData,\n  matchMutation,\n  matchQuery,\n  noop,\n  partialMatchKey,\n  replaceData,\n  replaceEqualDeep,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  shouldThrowError,\n  skipToken,\n  sleep,\n  timeUntilStale\n};\n//# sourceMappingURL=utils.js.map","// src/focusManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar FocusManager = class extends Subscribable {\n  #focused;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onFocus) => {\n      if (!isServer && window.addEventListener) {\n        const listener = () => onFocus();\n        window.addEventListener(\"visibilitychange\", listener, false);\n        return () => {\n          window.removeEventListener(\"visibilitychange\", listener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup((focused) => {\n      if (typeof focused === \"boolean\") {\n        this.setFocused(focused);\n      } else {\n        this.onFocus();\n      }\n    });\n  }\n  setFocused(focused) {\n    const changed = this.#focused !== focused;\n    if (changed) {\n      this.#focused = focused;\n      this.onFocus();\n    }\n  }\n  onFocus() {\n    const isFocused = this.isFocused();\n    this.listeners.forEach((listener) => {\n      listener(isFocused);\n    });\n  }\n  isFocused() {\n    if (typeof this.#focused === \"boolean\") {\n      return this.#focused;\n    }\n    return globalThis.document?.visibilityState !== \"hidden\";\n  }\n};\nvar focusManager = new FocusManager();\nexport {\n  FocusManager,\n  focusManager\n};\n//# sourceMappingURL=focusManager.js.map","// src/thenable.ts\nimport { noop } from \"./utils.js\";\nfunction pendingThenable() {\n  let resolve;\n  let reject;\n  const thenable = new Promise((_resolve, _reject) => {\n    resolve = _resolve;\n    reject = _reject;\n  });\n  thenable.status = \"pending\";\n  thenable.catch(() => {\n  });\n  function finalize(data) {\n    Object.assign(thenable, data);\n    delete thenable.resolve;\n    delete thenable.reject;\n  }\n  thenable.resolve = (value) => {\n    finalize({\n      status: \"fulfilled\",\n      value\n    });\n    resolve(value);\n  };\n  thenable.reject = (reason) => {\n    finalize({\n      status: \"rejected\",\n      reason\n    });\n    reject(reason);\n  };\n  return thenable;\n}\nfunction tryResolveSync(promise) {\n  let data;\n  promise.then((result) => {\n    data = result;\n    return result;\n  }, noop)?.catch(noop);\n  if (data !== void 0) {\n    return { data };\n  }\n  return void 0;\n}\nexport {\n  pendingThenable,\n  tryResolveSync\n};\n//# sourceMappingURL=thenable.js.map","// src/notifyManager.ts\nimport { systemSetTimeoutZero } from \"./timeoutManager.js\";\nvar defaultScheduler = systemSetTimeoutZero;\nfunction createNotifyManager() {\n  let queue = [];\n  let transactions = 0;\n  let notifyFn = (callback) => {\n    callback();\n  };\n  let batchNotifyFn = (callback) => {\n    callback();\n  };\n  let scheduleFn = defaultScheduler;\n  const schedule = (callback) => {\n    if (transactions) {\n      queue.push(callback);\n    } else {\n      scheduleFn(() => {\n        notifyFn(callback);\n      });\n    }\n  };\n  const flush = () => {\n    const originalQueue = queue;\n    queue = [];\n    if (originalQueue.length) {\n      scheduleFn(() => {\n        batchNotifyFn(() => {\n          originalQueue.forEach((callback) => {\n            notifyFn(callback);\n          });\n        });\n      });\n    }\n  };\n  return {\n    batch: (callback) => {\n      let result;\n      transactions++;\n      try {\n        result = callback();\n      } finally {\n        transactions--;\n        if (!transactions) {\n          flush();\n        }\n      }\n      return result;\n    },\n    /**\n     * All calls to the wrapped function will be batched.\n     */\n    batchCalls: (callback) => {\n      return (...args) => {\n        schedule(() => {\n          callback(...args);\n        });\n      };\n    },\n    schedule,\n    /**\n     * Use this method to set a custom notify function.\n     * This can be used to for example wrap notifications with `React.act` while running tests.\n     */\n    setNotifyFunction: (fn) => {\n      notifyFn = fn;\n    },\n    /**\n     * Use this method to set a custom function to batch notifications together into a single tick.\n     * By default React Query will use the batch function provided by ReactDOM or React Native.\n     */\n    setBatchNotifyFunction: (fn) => {\n      batchNotifyFn = fn;\n    },\n    setScheduler: (fn) => {\n      scheduleFn = fn;\n    }\n  };\n}\nvar notifyManager = createNotifyManager();\nexport {\n  createNotifyManager,\n  defaultScheduler,\n  notifyManager\n};\n//# sourceMappingURL=notifyManager.js.map","// src/onlineManager.ts\nimport { Subscribable } from \"./subscribable.js\";\nimport { isServer } from \"./utils.js\";\nvar OnlineManager = class extends Subscribable {\n  #online = true;\n  #cleanup;\n  #setup;\n  constructor() {\n    super();\n    this.#setup = (onOnline) => {\n      if (!isServer && window.addEventListener) {\n        const onlineListener = () => onOnline(true);\n        const offlineListener = () => onOnline(false);\n        window.addEventListener(\"online\", onlineListener, false);\n        window.addEventListener(\"offline\", offlineListener, false);\n        return () => {\n          window.removeEventListener(\"online\", onlineListener);\n          window.removeEventListener(\"offline\", offlineListener);\n        };\n      }\n      return;\n    };\n  }\n  onSubscribe() {\n    if (!this.#cleanup) {\n      this.setEventListener(this.#setup);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#cleanup?.();\n      this.#cleanup = void 0;\n    }\n  }\n  setEventListener(setup) {\n    this.#setup = setup;\n    this.#cleanup?.();\n    this.#cleanup = setup(this.setOnline.bind(this));\n  }\n  setOnline(online) {\n    const changed = this.#online !== online;\n    if (changed) {\n      this.#online = online;\n      this.listeners.forEach((listener) => {\n        listener(online);\n      });\n    }\n  }\n  isOnline() {\n    return this.#online;\n  }\n};\nvar onlineManager = new OnlineManager();\nexport {\n  OnlineManager,\n  onlineManager\n};\n//# sourceMappingURL=onlineManager.js.map","// src/retryer.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport { isServer, sleep } from \"./utils.js\";\nfunction defaultRetryDelay(failureCount) {\n  return Math.min(1e3 * 2 ** failureCount, 3e4);\n}\nfunction canFetch(networkMode) {\n  return (networkMode ?? \"online\") === \"online\" ? onlineManager.isOnline() : true;\n}\nvar CancelledError = class extends Error {\n  constructor(options) {\n    super(\"CancelledError\");\n    this.revert = options?.revert;\n    this.silent = options?.silent;\n  }\n};\nfunction isCancelledError(value) {\n  return value instanceof CancelledError;\n}\nfunction createRetryer(config) {\n  let isRetryCancelled = false;\n  let failureCount = 0;\n  let continueFn;\n  const thenable = pendingThenable();\n  const isResolved = () => thenable.status !== \"pending\";\n  const cancel = (cancelOptions) => {\n    if (!isResolved()) {\n      const error = new CancelledError(cancelOptions);\n      reject(error);\n      config.onCancel?.(error);\n    }\n  };\n  const cancelRetry = () => {\n    isRetryCancelled = true;\n  };\n  const continueRetry = () => {\n    isRetryCancelled = false;\n  };\n  const canContinue = () => focusManager.isFocused() && (config.networkMode === \"always\" || onlineManager.isOnline()) && config.canRun();\n  const canStart = () => canFetch(config.networkMode) && config.canRun();\n  const resolve = (value) => {\n    if (!isResolved()) {\n      continueFn?.();\n      thenable.resolve(value);\n    }\n  };\n  const reject = (value) => {\n    if (!isResolved()) {\n      continueFn?.();\n      thenable.reject(value);\n    }\n  };\n  const pause = () => {\n    return new Promise((continueResolve) => {\n      continueFn = (value) => {\n        if (isResolved() || canContinue()) {\n          continueResolve(value);\n        }\n      };\n      config.onPause?.();\n    }).then(() => {\n      continueFn = void 0;\n      if (!isResolved()) {\n        config.onContinue?.();\n      }\n    });\n  };\n  const run = () => {\n    if (isResolved()) {\n      return;\n    }\n    let promiseOrValue;\n    const initialPromise = failureCount === 0 ? config.initialPromise : void 0;\n    try {\n      promiseOrValue = initialPromise ?? config.fn();\n    } catch (error) {\n      promiseOrValue = Promise.reject(error);\n    }\n    Promise.resolve(promiseOrValue).then(resolve).catch((error) => {\n      if (isResolved()) {\n        return;\n      }\n      const retry = config.retry ?? (isServer ? 0 : 3);\n      const retryDelay = config.retryDelay ?? defaultRetryDelay;\n      const delay = typeof retryDelay === \"function\" ? retryDelay(failureCount, error) : retryDelay;\n      const shouldRetry = retry === true || typeof retry === \"number\" && failureCount < retry || typeof retry === \"function\" && retry(failureCount, error);\n      if (isRetryCancelled || !shouldRetry) {\n        reject(error);\n        return;\n      }\n      failureCount++;\n      config.onFail?.(failureCount, error);\n      sleep(delay).then(() => {\n        return canContinue() ? void 0 : pause();\n      }).then(() => {\n        if (isRetryCancelled) {\n          reject(error);\n        } else {\n          run();\n        }\n      });\n    });\n  };\n  return {\n    promise: thenable,\n    status: () => thenable.status,\n    cancel,\n    continue: () => {\n      continueFn?.();\n      return thenable;\n    },\n    cancelRetry,\n    continueRetry,\n    canStart,\n    start: () => {\n      if (canStart()) {\n        run();\n      } else {\n        pause().then(run);\n      }\n      return thenable;\n    }\n  };\n}\nexport {\n  CancelledError,\n  canFetch,\n  createRetryer,\n  isCancelledError\n};\n//# sourceMappingURL=retryer.js.map","// src/removable.ts\nimport { timeoutManager } from \"./timeoutManager.js\";\nimport { isServer, isValidTimeout } from \"./utils.js\";\nvar Removable = class {\n  #gcTimeout;\n  destroy() {\n    this.clearGcTimeout();\n  }\n  scheduleGc() {\n    this.clearGcTimeout();\n    if (isValidTimeout(this.gcTime)) {\n      this.#gcTimeout = timeoutManager.setTimeout(() => {\n        this.optionalRemove();\n      }, this.gcTime);\n    }\n  }\n  updateGcTime(newGcTime) {\n    this.gcTime = Math.max(\n      this.gcTime || 0,\n      newGcTime ?? (isServer ? Infinity : 5 * 60 * 1e3)\n    );\n  }\n  clearGcTimeout() {\n    if (this.#gcTimeout) {\n      timeoutManager.clearTimeout(this.#gcTimeout);\n      this.#gcTimeout = void 0;\n    }\n  }\n};\nexport {\n  Removable\n};\n//# sourceMappingURL=removable.js.map","// src/query.ts\nimport {\n  ensureQueryFn,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  skipToken,\n  timeUntilStale\n} from \"./utils.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { CancelledError, canFetch, createRetryer } from \"./retryer.js\";\nimport { Removable } from \"./removable.js\";\nvar Query = class extends Removable {\n  #initialState;\n  #revertState;\n  #cache;\n  #client;\n  #retryer;\n  #defaultOptions;\n  #abortSignalConsumed;\n  constructor(config) {\n    super();\n    this.#abortSignalConsumed = false;\n    this.#defaultOptions = config.defaultOptions;\n    this.setOptions(config.options);\n    this.observers = [];\n    this.#client = config.client;\n    this.#cache = this.#client.getQueryCache();\n    this.queryKey = config.queryKey;\n    this.queryHash = config.queryHash;\n    this.#initialState = getDefaultState(this.options);\n    this.state = config.state ?? this.#initialState;\n    this.scheduleGc();\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  get promise() {\n    return this.#retryer?.promise;\n  }\n  setOptions(options) {\n    this.options = { ...this.#defaultOptions, ...options };\n    this.updateGcTime(this.options.gcTime);\n    if (this.state && this.state.data === void 0) {\n      const defaultState = getDefaultState(this.options);\n      if (defaultState.data !== void 0) {\n        this.setState(\n          successState(defaultState.data, defaultState.dataUpdatedAt)\n        );\n        this.#initialState = defaultState;\n      }\n    }\n  }\n  optionalRemove() {\n    if (!this.observers.length && this.state.fetchStatus === \"idle\") {\n      this.#cache.remove(this);\n    }\n  }\n  setData(newData, options) {\n    const data = replaceData(this.state.data, newData, this.options);\n    this.#dispatch({\n      data,\n      type: \"success\",\n      dataUpdatedAt: options?.updatedAt,\n      manual: options?.manual\n    });\n    return data;\n  }\n  setState(state, setStateOptions) {\n    this.#dispatch({ type: \"setState\", state, setStateOptions });\n  }\n  cancel(options) {\n    const promise = this.#retryer?.promise;\n    this.#retryer?.cancel(options);\n    return promise ? promise.then(noop).catch(noop) : Promise.resolve();\n  }\n  destroy() {\n    super.destroy();\n    this.cancel({ silent: true });\n  }\n  reset() {\n    this.destroy();\n    this.setState(this.#initialState);\n  }\n  isActive() {\n    return this.observers.some(\n      (observer) => resolveEnabled(observer.options.enabled, this) !== false\n    );\n  }\n  isDisabled() {\n    if (this.getObserversCount() > 0) {\n      return !this.isActive();\n    }\n    return this.options.queryFn === skipToken || this.state.dataUpdateCount + this.state.errorUpdateCount === 0;\n  }\n  isStatic() {\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => resolveStaleTime(observer.options.staleTime, this) === \"static\"\n      );\n    }\n    return false;\n  }\n  isStale() {\n    if (this.getObserversCount() > 0) {\n      return this.observers.some(\n        (observer) => observer.getCurrentResult().isStale\n      );\n    }\n    return this.state.data === void 0 || this.state.isInvalidated;\n  }\n  isStaleByTime(staleTime = 0) {\n    if (this.state.data === void 0) {\n      return true;\n    }\n    if (staleTime === \"static\") {\n      return false;\n    }\n    if (this.state.isInvalidated) {\n      return true;\n    }\n    return !timeUntilStale(this.state.dataUpdatedAt, staleTime);\n  }\n  onFocus() {\n    const observer = this.observers.find((x) => x.shouldFetchOnWindowFocus());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  onOnline() {\n    const observer = this.observers.find((x) => x.shouldFetchOnReconnect());\n    observer?.refetch({ cancelRefetch: false });\n    this.#retryer?.continue();\n  }\n  addObserver(observer) {\n    if (!this.observers.includes(observer)) {\n      this.observers.push(observer);\n      this.clearGcTimeout();\n      this.#cache.notify({ type: \"observerAdded\", query: this, observer });\n    }\n  }\n  removeObserver(observer) {\n    if (this.observers.includes(observer)) {\n      this.observers = this.observers.filter((x) => x !== observer);\n      if (!this.observers.length) {\n        if (this.#retryer) {\n          if (this.#abortSignalConsumed) {\n            this.#retryer.cancel({ revert: true });\n          } else {\n            this.#retryer.cancelRetry();\n          }\n        }\n        this.scheduleGc();\n      }\n      this.#cache.notify({ type: \"observerRemoved\", query: this, observer });\n    }\n  }\n  getObserversCount() {\n    return this.observers.length;\n  }\n  invalidate() {\n    if (!this.state.isInvalidated) {\n      this.#dispatch({ type: \"invalidate\" });\n    }\n  }\n  async fetch(options, fetchOptions) {\n    if (this.state.fetchStatus !== \"idle\" && // If the promise in the retyer is already rejected, we have to definitely\n    // re-start the fetch; there is a chance that the query is still in a\n    // pending state when that happens\n    this.#retryer?.status() !== \"rejected\") {\n      if (this.state.data !== void 0 && fetchOptions?.cancelRefetch) {\n        this.cancel({ silent: true });\n      } else if (this.#retryer) {\n        this.#retryer.continueRetry();\n        return this.#retryer.promise;\n      }\n    }\n    if (options) {\n      this.setOptions(options);\n    }\n    if (!this.options.queryFn) {\n      const observer = this.observers.find((x) => x.options.queryFn);\n      if (observer) {\n        this.setOptions(observer.options);\n      }\n    }\n    if (process.env.NODE_ENV !== \"production\") {\n      if (!Array.isArray(this.options.queryKey)) {\n        console.error(\n          `As of v4, queryKey needs to be an Array. If you are using a string like 'repoData', please change it to an Array, e.g. ['repoData']`\n        );\n      }\n    }\n    const abortController = new AbortController();\n    const addSignalProperty = (object) => {\n      Object.defineProperty(object, \"signal\", {\n        enumerable: true,\n        get: () => {\n          this.#abortSignalConsumed = true;\n          return abortController.signal;\n        }\n      });\n    };\n    const fetchFn = () => {\n      const queryFn = ensureQueryFn(this.options, fetchOptions);\n      const createQueryFnContext = () => {\n        const queryFnContext2 = {\n          client: this.#client,\n          queryKey: this.queryKey,\n          meta: this.meta\n        };\n        addSignalProperty(queryFnContext2);\n        return queryFnContext2;\n      };\n      const queryFnContext = createQueryFnContext();\n      this.#abortSignalConsumed = false;\n      if (this.options.persister) {\n        return this.options.persister(\n          queryFn,\n          queryFnContext,\n          this\n        );\n      }\n      return queryFn(queryFnContext);\n    };\n    const createFetchContext = () => {\n      const context2 = {\n        fetchOptions,\n        options: this.options,\n        queryKey: this.queryKey,\n        client: this.#client,\n        state: this.state,\n        fetchFn\n      };\n      addSignalProperty(context2);\n      return context2;\n    };\n    const context = createFetchContext();\n    this.options.behavior?.onFetch(context, this);\n    this.#revertState = this.state;\n    if (this.state.fetchStatus === \"idle\" || this.state.fetchMeta !== context.fetchOptions?.meta) {\n      this.#dispatch({ type: \"fetch\", meta: context.fetchOptions?.meta });\n    }\n    this.#retryer = createRetryer({\n      initialPromise: fetchOptions?.initialPromise,\n      fn: context.fetchFn,\n      onCancel: (error) => {\n        if (error instanceof CancelledError && error.revert) {\n          this.setState({\n            ...this.#revertState,\n            fetchStatus: \"idle\"\n          });\n        }\n        abortController.abort();\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue: () => {\n        this.#dispatch({ type: \"continue\" });\n      },\n      retry: context.options.retry,\n      retryDelay: context.options.retryDelay,\n      networkMode: context.options.networkMode,\n      canRun: () => true\n    });\n    try {\n      const data = await this.#retryer.start();\n      if (data === void 0) {\n        if (process.env.NODE_ENV !== \"production\") {\n          console.error(\n            `Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: ${this.queryHash}`\n          );\n        }\n        throw new Error(`${this.queryHash} data is undefined`);\n      }\n      this.setData(data);\n      this.#cache.config.onSuccess?.(data, this);\n      this.#cache.config.onSettled?.(\n        data,\n        this.state.error,\n        this\n      );\n      return data;\n    } catch (error) {\n      if (error instanceof CancelledError) {\n        if (error.silent) {\n          return this.#retryer.promise;\n        } else if (error.revert) {\n          if (this.state.data === void 0) {\n            throw error;\n          }\n          return this.state.data;\n        }\n      }\n      this.#dispatch({\n        type: \"error\",\n        error\n      });\n      this.#cache.config.onError?.(\n        error,\n        this\n      );\n      this.#cache.config.onSettled?.(\n        this.state.data,\n        error,\n        this\n      );\n      throw error;\n    } finally {\n      this.scheduleGc();\n    }\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            fetchFailureCount: action.failureCount,\n            fetchFailureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            fetchStatus: \"paused\"\n          };\n        case \"continue\":\n          return {\n            ...state,\n            fetchStatus: \"fetching\"\n          };\n        case \"fetch\":\n          return {\n            ...state,\n            ...fetchState(state.data, this.options),\n            fetchMeta: action.meta ?? null\n          };\n        case \"success\":\n          const newState = {\n            ...state,\n            ...successState(action.data, action.dataUpdatedAt),\n            dataUpdateCount: state.dataUpdateCount + 1,\n            ...!action.manual && {\n              fetchStatus: \"idle\",\n              fetchFailureCount: 0,\n              fetchFailureReason: null\n            }\n          };\n          this.#revertState = action.manual ? newState : void 0;\n          return newState;\n        case \"error\":\n          const error = action.error;\n          return {\n            ...state,\n            error,\n            errorUpdateCount: state.errorUpdateCount + 1,\n            errorUpdatedAt: Date.now(),\n            fetchFailureCount: state.fetchFailureCount + 1,\n            fetchFailureReason: error,\n            fetchStatus: \"idle\",\n            status: \"error\"\n          };\n        case \"invalidate\":\n          return {\n            ...state,\n            isInvalidated: true\n          };\n        case \"setState\":\n          return {\n            ...state,\n            ...action.state\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.observers.forEach((observer) => {\n        observer.onQueryUpdate();\n      });\n      this.#cache.notify({ query: this, type: \"updated\", action });\n    });\n  }\n};\nfunction fetchState(data, options) {\n  return {\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchStatus: canFetch(options.networkMode) ? \"fetching\" : \"paused\",\n    ...data === void 0 && {\n      error: null,\n      status: \"pending\"\n    }\n  };\n}\nfunction successState(data, dataUpdatedAt) {\n  return {\n    data,\n    dataUpdatedAt: dataUpdatedAt ?? Date.now(),\n    error: null,\n    isInvalidated: false,\n    status: \"success\"\n  };\n}\nfunction getDefaultState(options) {\n  const data = typeof options.initialData === \"function\" ? options.initialData() : options.initialData;\n  const hasData = data !== void 0;\n  const initialDataUpdatedAt = hasData ? typeof options.initialDataUpdatedAt === \"function\" ? options.initialDataUpdatedAt() : options.initialDataUpdatedAt : 0;\n  return {\n    data,\n    dataUpdateCount: 0,\n    dataUpdatedAt: hasData ? initialDataUpdatedAt ?? Date.now() : 0,\n    error: null,\n    errorUpdateCount: 0,\n    errorUpdatedAt: 0,\n    fetchFailureCount: 0,\n    fetchFailureReason: null,\n    fetchMeta: null,\n    isInvalidated: false,\n    status: hasData ? \"success\" : \"pending\",\n    fetchStatus: \"idle\"\n  };\n}\nexport {\n  Query,\n  fetchState\n};\n//# sourceMappingURL=query.js.map","// src/infiniteQueryBehavior.ts\nimport { addToEnd, addToStart, ensureQueryFn } from \"./utils.js\";\nfunction infiniteQueryBehavior(pages) {\n  return {\n    onFetch: (context, query) => {\n      const options = context.options;\n      const direction = context.fetchOptions?.meta?.fetchMore?.direction;\n      const oldPages = context.state.data?.pages || [];\n      const oldPageParams = context.state.data?.pageParams || [];\n      let result = { pages: [], pageParams: [] };\n      let currentPage = 0;\n      const fetchFn = async () => {\n        let cancelled = false;\n        const addSignalProperty = (object) => {\n          Object.defineProperty(object, \"signal\", {\n            enumerable: true,\n            get: () => {\n              if (context.signal.aborted) {\n                cancelled = true;\n              } else {\n                context.signal.addEventListener(\"abort\", () => {\n                  cancelled = true;\n                });\n              }\n              return context.signal;\n            }\n          });\n        };\n        const queryFn = ensureQueryFn(context.options, context.fetchOptions);\n        const fetchPage = async (data, param, previous) => {\n          if (cancelled) {\n            return Promise.reject();\n          }\n          if (param == null && data.pages.length) {\n            return Promise.resolve(data);\n          }\n          const createQueryFnContext = () => {\n            const queryFnContext2 = {\n              client: context.client,\n              queryKey: context.queryKey,\n              pageParam: param,\n              direction: previous ? \"backward\" : \"forward\",\n              meta: context.options.meta\n            };\n            addSignalProperty(queryFnContext2);\n            return queryFnContext2;\n          };\n          const queryFnContext = createQueryFnContext();\n          const page = await queryFn(queryFnContext);\n          const { maxPages } = context.options;\n          const addTo = previous ? addToStart : addToEnd;\n          return {\n            pages: addTo(data.pages, page, maxPages),\n            pageParams: addTo(data.pageParams, param, maxPages)\n          };\n        };\n        if (direction && oldPages.length) {\n          const previous = direction === \"backward\";\n          const pageParamFn = previous ? getPreviousPageParam : getNextPageParam;\n          const oldData = {\n            pages: oldPages,\n            pageParams: oldPageParams\n          };\n          const param = pageParamFn(options, oldData);\n          result = await fetchPage(oldData, param, previous);\n        } else {\n          const remainingPages = pages ?? oldPages.length;\n          do {\n            const param = currentPage === 0 ? oldPageParams[0] ?? options.initialPageParam : getNextPageParam(options, result);\n            if (currentPage > 0 && param == null) {\n              break;\n            }\n            result = await fetchPage(result, param);\n            currentPage++;\n          } while (currentPage < remainingPages);\n        }\n        return result;\n      };\n      if (context.options.persister) {\n        context.fetchFn = () => {\n          return context.options.persister?.(\n            fetchFn,\n            {\n              client: context.client,\n              queryKey: context.queryKey,\n              meta: context.options.meta,\n              signal: context.signal\n            },\n            query\n          );\n        };\n      } else {\n        context.fetchFn = fetchFn;\n      }\n    }\n  };\n}\nfunction getNextPageParam(options, { pages, pageParams }) {\n  const lastIndex = pages.length - 1;\n  return pages.length > 0 ? options.getNextPageParam(\n    pages[lastIndex],\n    pages,\n    pageParams[lastIndex],\n    pageParams\n  ) : void 0;\n}\nfunction getPreviousPageParam(options, { pages, pageParams }) {\n  return pages.length > 0 ? options.getPreviousPageParam?.(pages[0], pages, pageParams[0], pageParams) : void 0;\n}\nfunction hasNextPage(options, data) {\n  if (!data) return false;\n  return getNextPageParam(options, data) != null;\n}\nfunction hasPreviousPage(options, data) {\n  if (!data || !options.getPreviousPageParam) return false;\n  return getPreviousPageParam(options, data) != null;\n}\nexport {\n  hasNextPage,\n  hasPreviousPage,\n  infiniteQueryBehavior\n};\n//# sourceMappingURL=infiniteQueryBehavior.js.map","// src/mutation.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Removable } from \"./removable.js\";\nimport { createRetryer } from \"./retryer.js\";\nvar Mutation = class extends Removable {\n  #client;\n  #observers;\n  #mutationCache;\n  #retryer;\n  constructor(config) {\n    super();\n    this.#client = config.client;\n    this.mutationId = config.mutationId;\n    this.#mutationCache = config.mutationCache;\n    this.#observers = [];\n    this.state = config.state || getDefaultState();\n    this.setOptions(config.options);\n    this.scheduleGc();\n  }\n  setOptions(options) {\n    this.options = options;\n    this.updateGcTime(this.options.gcTime);\n  }\n  get meta() {\n    return this.options.meta;\n  }\n  addObserver(observer) {\n    if (!this.#observers.includes(observer)) {\n      this.#observers.push(observer);\n      this.clearGcTimeout();\n      this.#mutationCache.notify({\n        type: \"observerAdded\",\n        mutation: this,\n        observer\n      });\n    }\n  }\n  removeObserver(observer) {\n    this.#observers = this.#observers.filter((x) => x !== observer);\n    this.scheduleGc();\n    this.#mutationCache.notify({\n      type: \"observerRemoved\",\n      mutation: this,\n      observer\n    });\n  }\n  optionalRemove() {\n    if (!this.#observers.length) {\n      if (this.state.status === \"pending\") {\n        this.scheduleGc();\n      } else {\n        this.#mutationCache.remove(this);\n      }\n    }\n  }\n  continue() {\n    return this.#retryer?.continue() ?? // continuing a mutation assumes that variables are set, mutation must have been dehydrated before\n    this.execute(this.state.variables);\n  }\n  async execute(variables) {\n    const onContinue = () => {\n      this.#dispatch({ type: \"continue\" });\n    };\n    const mutationFnContext = {\n      client: this.#client,\n      meta: this.options.meta,\n      mutationKey: this.options.mutationKey\n    };\n    this.#retryer = createRetryer({\n      fn: () => {\n        if (!this.options.mutationFn) {\n          return Promise.reject(new Error(\"No mutationFn found\"));\n        }\n        return this.options.mutationFn(variables, mutationFnContext);\n      },\n      onFail: (failureCount, error) => {\n        this.#dispatch({ type: \"failed\", failureCount, error });\n      },\n      onPause: () => {\n        this.#dispatch({ type: \"pause\" });\n      },\n      onContinue,\n      retry: this.options.retry ?? 0,\n      retryDelay: this.options.retryDelay,\n      networkMode: this.options.networkMode,\n      canRun: () => this.#mutationCache.canRun(this)\n    });\n    const restored = this.state.status === \"pending\";\n    const isPaused = !this.#retryer.canStart();\n    try {\n      if (restored) {\n        onContinue();\n      } else {\n        this.#dispatch({ type: \"pending\", variables, isPaused });\n        await this.#mutationCache.config.onMutate?.(\n          variables,\n          this,\n          mutationFnContext\n        );\n        const context = await this.options.onMutate?.(\n          variables,\n          mutationFnContext\n        );\n        if (context !== this.state.context) {\n          this.#dispatch({\n            type: \"pending\",\n            context,\n            variables,\n            isPaused\n          });\n        }\n      }\n      const data = await this.#retryer.start();\n      await this.#mutationCache.config.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        this,\n        mutationFnContext\n      );\n      await this.options.onSuccess?.(\n        data,\n        variables,\n        this.state.context,\n        mutationFnContext\n      );\n      await this.#mutationCache.config.onSettled?.(\n        data,\n        null,\n        this.state.variables,\n        this.state.context,\n        this,\n        mutationFnContext\n      );\n      await this.options.onSettled?.(\n        data,\n        null,\n        variables,\n        this.state.context,\n        mutationFnContext\n      );\n      this.#dispatch({ type: \"success\", data });\n      return data;\n    } catch (error) {\n      try {\n        await this.#mutationCache.config.onError?.(\n          error,\n          variables,\n          this.state.context,\n          this,\n          mutationFnContext\n        );\n        await this.options.onError?.(\n          error,\n          variables,\n          this.state.context,\n          mutationFnContext\n        );\n        await this.#mutationCache.config.onSettled?.(\n          void 0,\n          error,\n          this.state.variables,\n          this.state.context,\n          this,\n          mutationFnContext\n        );\n        await this.options.onSettled?.(\n          void 0,\n          error,\n          variables,\n          this.state.context,\n          mutationFnContext\n        );\n        throw error;\n      } finally {\n        this.#dispatch({ type: \"error\", error });\n      }\n    } finally {\n      this.#mutationCache.runNext(this);\n    }\n  }\n  #dispatch(action) {\n    const reducer = (state) => {\n      switch (action.type) {\n        case \"failed\":\n          return {\n            ...state,\n            failureCount: action.failureCount,\n            failureReason: action.error\n          };\n        case \"pause\":\n          return {\n            ...state,\n            isPaused: true\n          };\n        case \"continue\":\n          return {\n            ...state,\n            isPaused: false\n          };\n        case \"pending\":\n          return {\n            ...state,\n            context: action.context,\n            data: void 0,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            isPaused: action.isPaused,\n            status: \"pending\",\n            variables: action.variables,\n            submittedAt: Date.now()\n          };\n        case \"success\":\n          return {\n            ...state,\n            data: action.data,\n            failureCount: 0,\n            failureReason: null,\n            error: null,\n            status: \"success\",\n            isPaused: false\n          };\n        case \"error\":\n          return {\n            ...state,\n            data: void 0,\n            error: action.error,\n            failureCount: state.failureCount + 1,\n            failureReason: action.error,\n            isPaused: false,\n            status: \"error\"\n          };\n      }\n    };\n    this.state = reducer(this.state);\n    notifyManager.batch(() => {\n      this.#observers.forEach((observer) => {\n        observer.onMutationUpdate(action);\n      });\n      this.#mutationCache.notify({\n        mutation: this,\n        type: \"updated\",\n        action\n      });\n    });\n  }\n};\nfunction getDefaultState() {\n  return {\n    context: void 0,\n    data: void 0,\n    error: null,\n    failureCount: 0,\n    failureReason: null,\n    isPaused: false,\n    status: \"idle\",\n    variables: void 0,\n    submittedAt: 0\n  };\n}\nexport {\n  Mutation,\n  getDefaultState\n};\n//# sourceMappingURL=mutation.js.map","// src/mutationCache.ts\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Mutation } from \"./mutation.js\";\nimport { matchMutation, noop } from \"./utils.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar MutationCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#mutations = /* @__PURE__ */ new Set();\n    this.#scopes = /* @__PURE__ */ new Map();\n    this.#mutationId = 0;\n  }\n  #mutations;\n  #scopes;\n  #mutationId;\n  build(client, options, state) {\n    const mutation = new Mutation({\n      client,\n      mutationCache: this,\n      mutationId: ++this.#mutationId,\n      options: client.defaultMutationOptions(options),\n      state\n    });\n    this.add(mutation);\n    return mutation;\n  }\n  add(mutation) {\n    this.#mutations.add(mutation);\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const scopedMutations = this.#scopes.get(scope);\n      if (scopedMutations) {\n        scopedMutations.push(mutation);\n      } else {\n        this.#scopes.set(scope, [mutation]);\n      }\n    }\n    this.notify({ type: \"added\", mutation });\n  }\n  remove(mutation) {\n    if (this.#mutations.delete(mutation)) {\n      const scope = scopeFor(mutation);\n      if (typeof scope === \"string\") {\n        const scopedMutations = this.#scopes.get(scope);\n        if (scopedMutations) {\n          if (scopedMutations.length > 1) {\n            const index = scopedMutations.indexOf(mutation);\n            if (index !== -1) {\n              scopedMutations.splice(index, 1);\n            }\n          } else if (scopedMutations[0] === mutation) {\n            this.#scopes.delete(scope);\n          }\n        }\n      }\n    }\n    this.notify({ type: \"removed\", mutation });\n  }\n  canRun(mutation) {\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const mutationsWithSameScope = this.#scopes.get(scope);\n      const firstPendingMutation = mutationsWithSameScope?.find(\n        (m) => m.state.status === \"pending\"\n      );\n      return !firstPendingMutation || firstPendingMutation === mutation;\n    } else {\n      return true;\n    }\n  }\n  runNext(mutation) {\n    const scope = scopeFor(mutation);\n    if (typeof scope === \"string\") {\n      const foundMutation = this.#scopes.get(scope)?.find((m) => m !== mutation && m.state.isPaused);\n      return foundMutation?.continue() ?? Promise.resolve();\n    } else {\n      return Promise.resolve();\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.#mutations.forEach((mutation) => {\n        this.notify({ type: \"removed\", mutation });\n      });\n      this.#mutations.clear();\n      this.#scopes.clear();\n    });\n  }\n  getAll() {\n    return Array.from(this.#mutations);\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (mutation) => matchMutation(defaultedFilters, mutation)\n    );\n  }\n  findAll(filters = {}) {\n    return this.getAll().filter((mutation) => matchMutation(filters, mutation));\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  resumePausedMutations() {\n    const pausedMutations = this.getAll().filter((x) => x.state.isPaused);\n    return notifyManager.batch(\n      () => Promise.all(\n        pausedMutations.map((mutation) => mutation.continue().catch(noop))\n      )\n    );\n  }\n};\nfunction scopeFor(mutation) {\n  return mutation.options.scope?.id;\n}\nexport {\n  MutationCache\n};\n//# sourceMappingURL=mutationCache.js.map","// src/queryCache.ts\nimport { hashQueryKeyByOptions, matchQuery } from \"./utils.js\";\nimport { Query } from \"./query.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nvar QueryCache = class extends Subscribable {\n  constructor(config = {}) {\n    super();\n    this.config = config;\n    this.#queries = /* @__PURE__ */ new Map();\n  }\n  #queries;\n  build(client, options, state) {\n    const queryKey = options.queryKey;\n    const queryHash = options.queryHash ?? hashQueryKeyByOptions(queryKey, options);\n    let query = this.get(queryHash);\n    if (!query) {\n      query = new Query({\n        client,\n        queryKey,\n        queryHash,\n        options: client.defaultQueryOptions(options),\n        state,\n        defaultOptions: client.getQueryDefaults(queryKey)\n      });\n      this.add(query);\n    }\n    return query;\n  }\n  add(query) {\n    if (!this.#queries.has(query.queryHash)) {\n      this.#queries.set(query.queryHash, query);\n      this.notify({\n        type: \"added\",\n        query\n      });\n    }\n  }\n  remove(query) {\n    const queryInMap = this.#queries.get(query.queryHash);\n    if (queryInMap) {\n      query.destroy();\n      if (queryInMap === query) {\n        this.#queries.delete(query.queryHash);\n      }\n      this.notify({ type: \"removed\", query });\n    }\n  }\n  clear() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        this.remove(query);\n      });\n    });\n  }\n  get(queryHash) {\n    return this.#queries.get(queryHash);\n  }\n  getAll() {\n    return [...this.#queries.values()];\n  }\n  find(filters) {\n    const defaultedFilters = { exact: true, ...filters };\n    return this.getAll().find(\n      (query) => matchQuery(defaultedFilters, query)\n    );\n  }\n  findAll(filters = {}) {\n    const queries = this.getAll();\n    return Object.keys(filters).length > 0 ? queries.filter((query) => matchQuery(filters, query)) : queries;\n  }\n  notify(event) {\n    notifyManager.batch(() => {\n      this.listeners.forEach((listener) => {\n        listener(event);\n      });\n    });\n  }\n  onFocus() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onFocus();\n      });\n    });\n  }\n  onOnline() {\n    notifyManager.batch(() => {\n      this.getAll().forEach((query) => {\n        query.onOnline();\n      });\n    });\n  }\n};\nexport {\n  QueryCache\n};\n//# sourceMappingURL=queryCache.js.map","// src/queryClient.ts\nimport {\n  functionalUpdate,\n  hashKey,\n  hashQueryKeyByOptions,\n  noop,\n  partialMatchKey,\n  resolveStaleTime,\n  skipToken\n} from \"./utils.js\";\nimport { QueryCache } from \"./queryCache.js\";\nimport { MutationCache } from \"./mutationCache.js\";\nimport { focusManager } from \"./focusManager.js\";\nimport { onlineManager } from \"./onlineManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { infiniteQueryBehavior } from \"./infiniteQueryBehavior.js\";\nvar QueryClient = class {\n  #queryCache;\n  #mutationCache;\n  #defaultOptions;\n  #queryDefaults;\n  #mutationDefaults;\n  #mountCount;\n  #unsubscribeFocus;\n  #unsubscribeOnline;\n  constructor(config = {}) {\n    this.#queryCache = config.queryCache || new QueryCache();\n    this.#mutationCache = config.mutationCache || new MutationCache();\n    this.#defaultOptions = config.defaultOptions || {};\n    this.#queryDefaults = /* @__PURE__ */ new Map();\n    this.#mutationDefaults = /* @__PURE__ */ new Map();\n    this.#mountCount = 0;\n  }\n  mount() {\n    this.#mountCount++;\n    if (this.#mountCount !== 1) return;\n    this.#unsubscribeFocus = focusManager.subscribe(async (focused) => {\n      if (focused) {\n        await this.resumePausedMutations();\n        this.#queryCache.onFocus();\n      }\n    });\n    this.#unsubscribeOnline = onlineManager.subscribe(async (online) => {\n      if (online) {\n        await this.resumePausedMutations();\n        this.#queryCache.onOnline();\n      }\n    });\n  }\n  unmount() {\n    this.#mountCount--;\n    if (this.#mountCount !== 0) return;\n    this.#unsubscribeFocus?.();\n    this.#unsubscribeFocus = void 0;\n    this.#unsubscribeOnline?.();\n    this.#unsubscribeOnline = void 0;\n  }\n  isFetching(filters) {\n    return this.#queryCache.findAll({ ...filters, fetchStatus: \"fetching\" }).length;\n  }\n  isMutating(filters) {\n    return this.#mutationCache.findAll({ ...filters, status: \"pending\" }).length;\n  }\n  /**\n   * Imperative (non-reactive) way to retrieve data for a QueryKey.\n   * Should only be used in callbacks or functions where reading the latest data is necessary, e.g. for optimistic updates.\n   *\n   * Hint: Do not use this function inside a component, because it won't receive updates.\n   * Use `useQuery` to create a `QueryObserver` that subscribes to changes.\n   */\n  getQueryData(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(options.queryHash)?.state.data;\n  }\n  ensureQueryData(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    const query = this.#queryCache.build(this, defaultedOptions);\n    const cachedData = query.state.data;\n    if (cachedData === void 0) {\n      return this.fetchQuery(options);\n    }\n    if (options.revalidateIfStale && query.isStaleByTime(resolveStaleTime(defaultedOptions.staleTime, query))) {\n      void this.prefetchQuery(defaultedOptions);\n    }\n    return Promise.resolve(cachedData);\n  }\n  getQueriesData(filters) {\n    return this.#queryCache.findAll(filters).map(({ queryKey, state }) => {\n      const data = state.data;\n      return [queryKey, data];\n    });\n  }\n  setQueryData(queryKey, updater, options) {\n    const defaultedOptions = this.defaultQueryOptions({ queryKey });\n    const query = this.#queryCache.get(\n      defaultedOptions.queryHash\n    );\n    const prevData = query?.state.data;\n    const data = functionalUpdate(updater, prevData);\n    if (data === void 0) {\n      return void 0;\n    }\n    return this.#queryCache.build(this, defaultedOptions).setData(data, { ...options, manual: true });\n  }\n  setQueriesData(filters, updater, options) {\n    return notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map(({ queryKey }) => [\n        queryKey,\n        this.setQueryData(queryKey, updater, options)\n      ])\n    );\n  }\n  getQueryState(queryKey) {\n    const options = this.defaultQueryOptions({ queryKey });\n    return this.#queryCache.get(\n      options.queryHash\n    )?.state;\n  }\n  removeQueries(filters) {\n    const queryCache = this.#queryCache;\n    notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        queryCache.remove(query);\n      });\n    });\n  }\n  resetQueries(filters, options) {\n    const queryCache = this.#queryCache;\n    return notifyManager.batch(() => {\n      queryCache.findAll(filters).forEach((query) => {\n        query.reset();\n      });\n      return this.refetchQueries(\n        {\n          type: \"active\",\n          ...filters\n        },\n        options\n      );\n    });\n  }\n  cancelQueries(filters, cancelOptions = {}) {\n    const defaultedCancelOptions = { revert: true, ...cancelOptions };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).map((query) => query.cancel(defaultedCancelOptions))\n    );\n    return Promise.all(promises).then(noop).catch(noop);\n  }\n  invalidateQueries(filters, options = {}) {\n    return notifyManager.batch(() => {\n      this.#queryCache.findAll(filters).forEach((query) => {\n        query.invalidate();\n      });\n      if (filters?.refetchType === \"none\") {\n        return Promise.resolve();\n      }\n      return this.refetchQueries(\n        {\n          ...filters,\n          type: filters?.refetchType ?? filters?.type ?? \"active\"\n        },\n        options\n      );\n    });\n  }\n  refetchQueries(filters, options = {}) {\n    const fetchOptions = {\n      ...options,\n      cancelRefetch: options.cancelRefetch ?? true\n    };\n    const promises = notifyManager.batch(\n      () => this.#queryCache.findAll(filters).filter((query) => !query.isDisabled() && !query.isStatic()).map((query) => {\n        let promise = query.fetch(void 0, fetchOptions);\n        if (!fetchOptions.throwOnError) {\n          promise = promise.catch(noop);\n        }\n        return query.state.fetchStatus === \"paused\" ? Promise.resolve() : promise;\n      })\n    );\n    return Promise.all(promises).then(noop);\n  }\n  fetchQuery(options) {\n    const defaultedOptions = this.defaultQueryOptions(options);\n    if (defaultedOptions.retry === void 0) {\n      defaultedOptions.retry = false;\n    }\n    const query = this.#queryCache.build(this, defaultedOptions);\n    return query.isStaleByTime(\n      resolveStaleTime(defaultedOptions.staleTime, query)\n    ) ? query.fetch(defaultedOptions) : Promise.resolve(query.state.data);\n  }\n  prefetchQuery(options) {\n    return this.fetchQuery(options).then(noop).catch(noop);\n  }\n  fetchInfiniteQuery(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.fetchQuery(options);\n  }\n  prefetchInfiniteQuery(options) {\n    return this.fetchInfiniteQuery(options).then(noop).catch(noop);\n  }\n  ensureInfiniteQueryData(options) {\n    options.behavior = infiniteQueryBehavior(options.pages);\n    return this.ensureQueryData(options);\n  }\n  resumePausedMutations() {\n    if (onlineManager.isOnline()) {\n      return this.#mutationCache.resumePausedMutations();\n    }\n    return Promise.resolve();\n  }\n  getQueryCache() {\n    return this.#queryCache;\n  }\n  getMutationCache() {\n    return this.#mutationCache;\n  }\n  getDefaultOptions() {\n    return this.#defaultOptions;\n  }\n  setDefaultOptions(options) {\n    this.#defaultOptions = options;\n  }\n  setQueryDefaults(queryKey, options) {\n    this.#queryDefaults.set(hashKey(queryKey), {\n      queryKey,\n      defaultOptions: options\n    });\n  }\n  getQueryDefaults(queryKey) {\n    const defaults = [...this.#queryDefaults.values()];\n    const result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(queryKey, queryDefault.queryKey)) {\n        Object.assign(result, queryDefault.defaultOptions);\n      }\n    });\n    return result;\n  }\n  setMutationDefaults(mutationKey, options) {\n    this.#mutationDefaults.set(hashKey(mutationKey), {\n      mutationKey,\n      defaultOptions: options\n    });\n  }\n  getMutationDefaults(mutationKey) {\n    const defaults = [...this.#mutationDefaults.values()];\n    const result = {};\n    defaults.forEach((queryDefault) => {\n      if (partialMatchKey(mutationKey, queryDefault.mutationKey)) {\n        Object.assign(result, queryDefault.defaultOptions);\n      }\n    });\n    return result;\n  }\n  defaultQueryOptions(options) {\n    if (options._defaulted) {\n      return options;\n    }\n    const defaultedOptions = {\n      ...this.#defaultOptions.queries,\n      ...this.getQueryDefaults(options.queryKey),\n      ...options,\n      _defaulted: true\n    };\n    if (!defaultedOptions.queryHash) {\n      defaultedOptions.queryHash = hashQueryKeyByOptions(\n        defaultedOptions.queryKey,\n        defaultedOptions\n      );\n    }\n    if (defaultedOptions.refetchOnReconnect === void 0) {\n      defaultedOptions.refetchOnReconnect = defaultedOptions.networkMode !== \"always\";\n    }\n    if (defaultedOptions.throwOnError === void 0) {\n      defaultedOptions.throwOnError = !!defaultedOptions.suspense;\n    }\n    if (!defaultedOptions.networkMode && defaultedOptions.persister) {\n      defaultedOptions.networkMode = \"offlineFirst\";\n    }\n    if (defaultedOptions.queryFn === skipToken) {\n      defaultedOptions.enabled = false;\n    }\n    return defaultedOptions;\n  }\n  defaultMutationOptions(options) {\n    if (options?._defaulted) {\n      return options;\n    }\n    return {\n      ...this.#defaultOptions.mutations,\n      ...options?.mutationKey && this.getMutationDefaults(options.mutationKey),\n      ...options,\n      _defaulted: true\n    };\n  }\n  clear() {\n    this.#queryCache.clear();\n    this.#mutationCache.clear();\n  }\n};\nexport {\n  QueryClient\n};\n//# sourceMappingURL=queryClient.js.map","\"use client\";\n\n// src/QueryClientProvider.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nvar QueryClientContext = React.createContext(\n  void 0\n);\nvar useQueryClient = (queryClient) => {\n  const client = React.useContext(QueryClientContext);\n  if (queryClient) {\n    return queryClient;\n  }\n  if (!client) {\n    throw new Error(\"No QueryClient set, use QueryClientProvider to set one\");\n  }\n  return client;\n};\nvar QueryClientProvider = ({\n  client,\n  children\n}) => {\n  React.useEffect(() => {\n    client.mount();\n    return () => {\n      client.unmount();\n    };\n  }, [client]);\n  return /* @__PURE__ */ jsx(QueryClientContext.Provider, { value: client, children });\n};\nexport {\n  QueryClientContext,\n  QueryClientProvider,\n  useQueryClient\n};\n//# sourceMappingURL=QueryClientProvider.js.map","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const api = { setState, getState, getInitialState, subscribe };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = ((createState) => createState ? createStoreImpl(createState) : createStoreImpl);\n\nexport { createStore };\n","import React from 'react';\nimport { createStore } from 'zustand/vanilla';\n\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity) {\n  const slice = React.useSyncExternalStore(\n    api.subscribe,\n    React.useCallback(() => selector(api.getState()), [api, selector]),\n    React.useCallback(() => selector(api.getInitialState()), [api, selector])\n  );\n  React.useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  const api = createStore(createState);\n  const useBoundStore = (selector) => useStore(api, selector);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = ((createState) => createState ? createImpl(createState) : createImpl);\n\nexport { create, useStore };\n","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...args) => api.dispatch(...args), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst removeStoreFromTrackedConnections = (name, store) => {\n  if (store === void 0) return;\n  const connectionInfo = trackedConnections.get(name);\n  if (!connectionInfo) return;\n  delete connectionInfo.stores[store];\n  if (Object.keys(connectionInfo.stores).length === 0) {\n    trackedConnections.delete(name);\n  }\n};\nconst findCallerName = (stack) => {\n  var _a, _b;\n  if (!stack) return void 0;\n  const traceLines = stack.split(\"\\n\");\n  const apiSetStateLineIndex = traceLines.findIndex(\n    (traceLine) => traceLine.includes(\"api.setState\")\n  );\n  if (apiSetStateLineIndex < 0) return void 0;\n  const callerLine = ((_a = traceLines[apiSetStateLineIndex + 1]) == null ? void 0 : _a.trim()) || \"\";\n  return (_b = /.+ (.+) .+/.exec(callerLine)) == null ? void 0 : _b[1];\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (e) {\n  }\n  if (!extensionConnector) {\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = ((state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? {\n      type: anonymousActionType || findCallerName(new Error().stack) || \"anonymous\"\n    } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  });\n  api.devtools = {\n    cleanup: () => {\n      if (connection && typeof connection.unsubscribe === \"function\") {\n        connection.unsubscribe();\n      }\n      removeStoreFromTrackedConnections(options.name, store);\n    }\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...args) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && args[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...args);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format.\n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, fn) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) fn(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = ((selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  });\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nfunction combine(initialState, create) {\n  return (...args) => Object.assign({}, initialState, create(...args));\n}\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(name, JSON.stringify(newValue, options == null ? void 0 : options.replacer)),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst persistImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    return setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      return setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            const migration = options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n            if (migration instanceof Promise) {\n              return migration.then((result) => [true, result]);\n            }\n            return [true, migration];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persist = persistImpl;\n\nfunction ssrSafe(config, isSSR = typeof window === \"undefined\") {\n  return (set, get, api) => {\n    if (!isSSR) {\n      return config(set, get, api);\n    }\n    const ssrSet = () => {\n      throw new Error(\"Cannot set state of Zustand store in SSR\");\n    };\n    api.setState = ssrSet;\n    return config(ssrSet, get, api);\n  };\n}\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector, ssrSafe as unstable_ssrSafe };\n","/**\n * Main Application Store\n * Central state management using Zustand\n * Mirrors the structure of the existing vanilla JS state.js\n */\n\nimport { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport type { \n  Site, \n  Project,\n  Subphase,\n  Staff, \n  Equipment, \n  User, \n  Vacation, \n  BankHoliday,\n  CompanyEvent,\n  ViewMode,\n  CurrentView,\n  ResourceTab,\n  InstanceSettings,\n  CustomColumn,\n  CustomColumnValuesMap,\n  Skill,\n} from '@/types';\n\n// =============================================================================\n// WHAT-IF MODE TYPES\n// =============================================================================\n\n/** Represents a pending API operation for What-If mode */\nexport interface WhatIfOperation {\n  id: string;\n  method: 'POST' | 'PUT' | 'DELETE';\n  url: string;\n  body?: unknown;\n  timestamp: number;\n}\n\n// =============================================================================\n// STATE INTERFACE\n// =============================================================================\n\ninterface AppState {\n  // ---------------------------------------------\n  // AUTH STATE\n  // ---------------------------------------------\n  isAuthChecking: boolean;\n  isAuthenticated: boolean;\n  \n  // ---------------------------------------------\n  // DATA\n  // ---------------------------------------------\n  sites: Site[];\n  projects: Project[];\n  staff: Staff[];\n  equipment: Equipment[];\n  vacations: Vacation[];\n  bankHolidays: BankHoliday[];\n  bankHolidayDates: Set<string>;\n  companyEvents: CompanyEvent[];\n  companyEventDates: Set<string>;\n  users: User[];\n  instanceSettings: InstanceSettings | null;\n  customColumns: CustomColumn[];\n  customColumnValues: CustomColumnValuesMap;\n  customColumnFilters: Record<number, string[]>;  // columnId -> selected values to filter by\n  showAllCustomColumns: boolean;  // Master toggle for all custom columns\n  hiddenCustomColumns: Set<number>;  // Set of column IDs that are individually hidden\n  skills: Skill[];  // Global skills list\n  \n  // ---------------------------------------------\n  // CURRENT SELECTIONS\n  // ---------------------------------------------\n  currentSite: Site | null;\n  currentUser: User | null;\n  \n  // ---------------------------------------------\n  // VIEW STATE\n  // ---------------------------------------------\n  viewMode: ViewMode;\n  currentView: CurrentView;\n  currentDate: Date;\n  cellWidth: number;\n  currentResourceTab: ResourceTab;\n  timelineScrollLeft: number;  // Scroll position within timeline\n  showAssignments: boolean;  // Show/hide staff and equipment assignments\n  showStaffOverview: boolean;  // Show/hide staff overview panel below Gantt\n  showEquipmentOverview: boolean;  // Show/hide equipment overview panel below Gantt\n  \n  // Persisted site ID - saved/restored from localStorage\n  // This is separate from currentSite because currentSite is a full object\n  // that gets set by useDataLoader after data loads\n  _persistedSiteId: number | null;\n  \n  // ---------------------------------------------\n  // EXPANDED STATES (for tree views)\n  // ---------------------------------------------\n  expandedProjects: Set<number>;\n  expandedPhases: Set<number>;\n  expandedSubphases: Set<number>;\n  expandedStaff: Set<number>;\n  expandedEquipment: Set<number>;\n  expandedBankHolidays: boolean;\n  \n  // ---------------------------------------------\n  // CRITICAL PATH\n  // ---------------------------------------------\n  /** Set of project IDs that have critical path display enabled */\n  criticalPathEnabled: Set<number>;\n  /** Cached critical path items per project: projectId -> Set of 'phase-{id}' or 'subphase-{id}' */\n  criticalPathItems: Map<number, Set<string>>;\n  \n  // ---------------------------------------------\n  // WHAT IF MODE\n  // ---------------------------------------------\n  whatIfMode: boolean;\n  whatIfSnapshot: {\n    projects: Project[];\n  } | null;\n  /** Queue of API operations to replay when applying What-If changes */\n  whatIfPendingOperations: WhatIfOperation[];\n  \n  // ---------------------------------------------\n  // UI STATE\n  // ---------------------------------------------\n  sidebarCollapsed: boolean;\n  resourcePanelCollapsed: boolean;\n  \n  // ---------------------------------------------\n  // ACTIONS - Data Setters\n  // ---------------------------------------------\n  setSites: (sites: Site[]) => void;\n  setProjects: (projects: Project[]) => void;\n  setStaff: (staff: Staff[]) => void;\n  setEquipment: (equipment: Equipment[]) => void;\n  setVacations: (vacations: Vacation[]) => void;\n  setBankHolidays: (holidays: BankHoliday[], holidayDates: Set<string>) => void;\n  setCompanyEvents: (events: CompanyEvent[], eventDates: Set<string>) => void;\n  setUsers: (users: User[]) => void;\n  setInstanceSettings: (settings: InstanceSettings | null) => void;\n  setCustomColumns: (columns: CustomColumn[]) => void;\n  setCustomColumnValues: (values: CustomColumnValuesMap) => void;\n  setCustomColumnValue: (columnId: number, entityType: string, entityId: number, value: string | null) => void;\n  setCustomColumnFilter: (columnId: number, values: string[]) => void;\n  clearCustomColumnFilter: (columnId: number) => void;\n  clearAllCustomColumnFilters: () => void;\n  entityPassesFilters: (entityType: string, entityId: number) => boolean;\n  setShowAllCustomColumns: (show: boolean) => void;\n  toggleCustomColumnVisibility: (columnId: number) => void;\n  setSkills: (skills: Skill[]) => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - Selection Setters\n  // ---------------------------------------------\n  setCurrentSite: (site: Site | null) => void;\n  setCurrentUser: (user: User | null) => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - Auth State\n  // ---------------------------------------------\n  setAuthChecking: (isChecking: boolean) => void;\n  setAuthenticated: (isAuthenticated: boolean) => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - View State\n  // ---------------------------------------------\n  setViewMode: (mode: ViewMode) => void;\n  setCurrentView: (view: CurrentView) => void;\n  setCurrentDate: (date: Date) => void;\n  setCellWidth: (width: number) => void;\n  setCurrentResourceTab: (tab: ResourceTab) => void;\n  setTimelineScrollLeft: (scrollLeft: number) => void;\n  setShowAssignments: (show: boolean) => void;\n  toggleShowAssignments: () => void;\n  navigatePeriod: (direction: 1 | -1) => void;\n  goToToday: () => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - Expanded States\n  // ---------------------------------------------\n  toggleProjectExpanded: (projectId: number) => void;\n  togglePhaseExpanded: (phaseId: number) => void;\n  toggleSubphaseExpanded: (subphaseId: number) => void;\n  toggleStaffExpanded: (staffId: number) => void;\n  toggleEquipmentExpanded: (equipmentId: number) => void;\n  toggleBankHolidaysExpanded: () => void;\n  ensureProjectExpanded: (projectId: number) => void;\n  ensurePhaseExpanded: (phaseId: number) => void;\n  ensureSubphaseExpanded: (subphaseId: number) => void;\n  setExpandedProjects: (ids: Set<number>) => void;\n  setExpandedPhases: (ids: Set<number>) => void;\n  collapseAll: () => void;\n  expandAll: () => void;\n  expandProjectLevel: (projectId: number) => void;\n  collapseProjectLevel: (projectId: number) => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - Critical Path\n  // ---------------------------------------------\n  toggleCriticalPath: (projectId: number) => void;\n  recalculateCriticalPath: (projectId: number) => void;\n  isCriticalPathEnabled: (projectId: number) => boolean;\n  getCriticalPathItems: (projectId: number) => Set<string>;\n  \n  // ---------------------------------------------\n  // ACTIONS - What If Mode\n  // ---------------------------------------------\n  enterWhatIfMode: () => void;\n  exitWhatIfMode: (applyChanges: boolean) => Promise<void>;\n  queueWhatIfOperation: (operation: Omit<WhatIfOperation, 'id' | 'timestamp'>) => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - UI State\n  // ---------------------------------------------\n  toggleSidebar: () => void;\n  toggleResourcePanel: () => void;\n  setSidebarCollapsed: (collapsed: boolean) => void;\n  setResourcePanelCollapsed: (collapsed: boolean) => void;\n  setShowStaffOverview: (show: boolean) => void;\n  toggleShowStaffOverview: () => void;\n  setShowEquipmentOverview: (show: boolean) => void;\n  toggleShowEquipmentOverview: () => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - Reset\n  // ---------------------------------------------\n  reset: () => void;\n}\n\n// =============================================================================\n// DEFAULT CELL WIDTHS BY VIEW MODE\n// =============================================================================\n\nconst VIEW_MODE_CELL_WIDTHS: Record<ViewMode, number> = {\n  week: 100,\n  month: 36,\n  quarter: 50,\n  year: 80,\n};\n\n// =============================================================================\n// LEVEL EXPANSION HELPERS\n// =============================================================================\n\ninterface LevelItem {\n  type: 'phase' | 'subphase';\n  id: number;\n  hasChildren: boolean;\n}\n\ninterface LevelMap {\n  [level: number]: LevelItem[];\n}\n\n// Get all expandable items at each level for a project\nfunction getProjectLevelItems(project: Project): { levels: LevelMap; maxLevel: number } {\n  const levels: LevelMap = {\n    1: [], // Phases\n  };\n  \n  // Collect phases and their children\n  for (const phase of (project.phases || [])) {\n    if (!phase.is_milestone) {\n      const children = phase.children || [];\n      const hasChildren = children.length > 0;\n      levels[1].push({ type: 'phase', id: phase.id, hasChildren });\n      \n      // Collect children recursively\n      if (hasChildren) {\n        collectSubphaseLevels(children, 2, levels);\n      }\n    }\n  }\n  \n  // Find max level with content\n  let maxLevel = 0;\n  for (const lvl in levels) {\n    if (levels[lvl] && levels[lvl].length > 0) {\n      maxLevel = Math.max(maxLevel, parseInt(lvl));\n    }\n  }\n  \n  // Always allow expanding to at least level 1\n  maxLevel = Math.max(maxLevel, 1);\n  \n  return { levels, maxLevel };\n}\n\nfunction collectSubphaseLevels(subphases: Subphase[], level: number, levels: LevelMap): void {\n  if (!subphases || subphases.length === 0) return;\n  if (!levels[level]) levels[level] = [];\n  \n  for (const sub of subphases) {\n    const children = sub.children || [];\n    const hasChildren = children.length > 0;\n    levels[level].push({ type: 'subphase', id: sub.id, hasChildren });\n    \n    if (hasChildren) {\n      collectSubphaseLevels(children, level + 1, levels);\n    }\n  }\n}\n\n// Get current expansion level for a project\nfunction getCurrentExpansionLevel(\n  project: Project,\n  expandedProjects: Set<number>,\n  expandedPhases: Set<number>,\n  expandedSubphases: Set<number>\n): number {\n  if (!expandedProjects.has(project.id)) return 0;\n  \n  const { levels, maxLevel } = getProjectLevelItems(project);\n  \n  // If no phases, we're at level 1\n  if (!levels[1] || levels[1].length === 0) return 1;\n  \n  // Check if ANY phase is expanded\n  const anyPhaseExpanded = levels[1].some(item => expandedPhases.has(item.id));\n  if (!anyPhaseExpanded) return 1;\n  \n  // At least one phase is expanded, so we're at level 2 minimum\n  // Now check subphase levels\n  for (let lvl = 2; lvl <= maxLevel; lvl++) {\n    if (!levels[lvl] || levels[lvl].length === 0) continue;\n    \n    // Check if ANY subphase at this level is expanded\n    const anyExpanded = levels[lvl].some(item => expandedSubphases.has(item.id));\n    if (!anyExpanded) return lvl;\n  }\n  \n  return maxLevel;\n}\n\n// Expand to a specific level\nfunction expandToLevel(\n  project: Project,\n  targetLevel: number,\n  levels: LevelMap,\n  maxLevel: number,\n  expandedProjects: Set<number>,\n  expandedPhases: Set<number>,\n  expandedSubphases: Set<number>\n): { expandedProjects: Set<number>; expandedPhases: Set<number>; expandedSubphases: Set<number> } {\n  const newExpandedProjects = new Set(expandedProjects);\n  const newExpandedPhases = new Set(expandedPhases);\n  const newExpandedSubphases = new Set(expandedSubphases);\n  \n  // Level 0: collapse project\n  if (targetLevel === 0) {\n    newExpandedProjects.delete(project.id);\n    // Collapse all phases and subphases for this project\n    for (const item of (levels[1] || [])) newExpandedPhases.delete(item.id);\n    for (let lvl = 2; lvl <= maxLevel; lvl++) {\n      for (const item of (levels[lvl] || [])) newExpandedSubphases.delete(item.id);\n    }\n  } else {\n    // Expand project\n    newExpandedProjects.add(project.id);\n    \n    // Level 1: show phases, collapse all phases (don't expand them)\n    if (targetLevel === 1) {\n      for (const item of (levels[1] || [])) newExpandedPhases.delete(item.id);\n      for (let lvl = 2; lvl <= maxLevel; lvl++) {\n        for (const item of (levels[lvl] || [])) newExpandedSubphases.delete(item.id);\n      }\n    } else {\n      // Level 2+: expand phases to show subphases\n      for (const item of (levels[1] || [])) {\n        newExpandedPhases.add(item.id);\n      }\n      \n      // For level 3+, expand subphases at levels below target\n      for (let lvl = 2; lvl <= maxLevel; lvl++) {\n        for (const item of (levels[lvl] || [])) {\n          if (lvl < targetLevel) {\n            // Expand this level to show next level\n            newExpandedSubphases.add(item.id);\n          } else {\n            // Collapse this level\n            newExpandedSubphases.delete(item.id);\n          }\n        }\n      }\n    }\n  }\n  \n  return {\n    expandedProjects: newExpandedProjects,\n    expandedPhases: newExpandedPhases,\n    expandedSubphases: newExpandedSubphases,\n  };\n}\n\n// =============================================================================\n// INITIAL STATE\n// =============================================================================\n\nconst initialState = {\n  // Auth state\n  isAuthChecking: true,\n  isAuthenticated: false,\n  \n  // Data\n  sites: [],\n  projects: [],\n  staff: [],\n  equipment: [],\n  vacations: [],\n  bankHolidays: [],\n  bankHolidayDates: new Set<string>(),\n  companyEvents: [],\n  companyEventDates: new Set<string>(),\n  users: [],\n  instanceSettings: null,\n  customColumns: [],\n  customColumnValues: {},\n  customColumnFilters: {},\n  showAllCustomColumns: true,  // Show all custom columns by default\n  hiddenCustomColumns: new Set<number>(),  // No columns hidden by default\n  skills: [],\n  \n  // Selections\n  currentSite: null,\n  currentUser: null,\n  _persistedSiteId: null as number | null,  // Persisted site ID from localStorage\n  \n  // View state\n  viewMode: 'month' as ViewMode,\n  currentView: 'gantt' as CurrentView,\n  currentDate: new Date(),\n  cellWidth: 36,\n  currentResourceTab: 'staff' as ResourceTab,\n  timelineScrollLeft: 0,\n  showAssignments: true,  // Show staff/equipment by default\n  showStaffOverview: false,  // Staff overview panel hidden by default\n  showEquipmentOverview: false,  // Equipment overview panel hidden by default\n  \n  // Expanded states\n  expandedProjects: new Set<number>(),\n  expandedPhases: new Set<number>(),\n  expandedSubphases: new Set<number>(),\n  expandedStaff: new Set<number>(),\n  expandedEquipment: new Set<number>(),\n  expandedBankHolidays: false,\n  \n  // Critical path\n  criticalPathEnabled: new Set<number>(),\n  criticalPathItems: new Map<number, Set<string>>(),\n  \n  // What If mode\n  whatIfMode: false,\n  whatIfSnapshot: null,\n  whatIfPendingOperations: [],\n  \n  // UI state\n  sidebarCollapsed: false,\n  resourcePanelCollapsed: false,\n};\n\n// =============================================================================\n// STORE CREATION\n// =============================================================================\n\nexport const useAppStore = create<AppState>()(\n  persist(\n    (set, get) => ({\n      ...initialState,\n      \n      // -----------------------------------------\n      // DATA SETTERS\n      // -----------------------------------------\n      setSites: (sites) => set({ sites }),\n      \n      setProjects: (projects) => set({ projects }),\n      \n      setStaff: (staff) => set({ staff }),\n      \n      setEquipment: (equipment) => set({ equipment }),\n      \n      setVacations: (vacations) => set({ vacations }),\n      \n      setBankHolidays: (holidays, holidayDates) => set({ \n        bankHolidays: holidays,\n        bankHolidayDates: holidayDates,\n      }),\n      \n      setCompanyEvents: (events, eventDates) => set({\n        companyEvents: events,\n        companyEventDates: eventDates,\n      }),\n      \n      setUsers: (users) => set({ users }),\n      \n      setInstanceSettings: (settings) => set({ instanceSettings: settings }),\n      \n      setCustomColumns: (columns) => set({ customColumns: columns }),\n      \n      setCustomColumnValues: (values) => set({ customColumnValues: values }),\n      \n      setSkills: (skills) => set({ skills }),\n      \n      setCustomColumnValue: (columnId, entityType, entityId, value) => set((state) => ({\n        customColumnValues: {\n          ...state.customColumnValues,\n          [`${columnId}-${entityType}-${entityId}`]: value,\n        },\n      })),\n      \n      setCustomColumnFilter: (columnId, values) => set((state) => ({\n        customColumnFilters: {\n          ...state.customColumnFilters,\n          [columnId]: values,\n        },\n      })),\n      \n      clearCustomColumnFilter: (columnId) => set((state) => {\n        const newFilters = { ...state.customColumnFilters };\n        delete newFilters[columnId];\n        return { customColumnFilters: newFilters };\n      }),\n      \n      clearAllCustomColumnFilters: () => set({ customColumnFilters: {} }),\n      \n      entityPassesFilters: (entityType, entityId) => {\n        const state = get();\n        const { customColumnFilters, customColumnValues } = state;\n        \n        // If no filters are active, pass\n        const activeFilterColumns = Object.keys(customColumnFilters).filter(\n          colId => customColumnFilters[Number(colId)]?.length > 0\n        );\n        \n        if (activeFilterColumns.length === 0) return true;\n        \n        // Check each active filter\n        for (const colIdStr of activeFilterColumns) {\n          const colId = Number(colIdStr);\n          const filterValues = customColumnFilters[colId];\n          const valueKey = `${colId}-${entityType}-${entityId}`;\n          const cellValue = customColumnValues[valueKey] ?? null;\n          \n          // Check if this cell value is in the filter set\n          if (cellValue === null) {\n            // Empty values pass only if '__empty__' is in the filter\n            if (!filterValues.includes('__empty__')) {\n              return false;\n            }\n          } else {\n            if (!filterValues.includes(cellValue)) {\n              return false;\n            }\n          }\n        }\n        \n        return true;\n      },\n      \n      setShowAllCustomColumns: (show) => set({ showAllCustomColumns: show }),\n      \n      toggleCustomColumnVisibility: (columnId) => set((state) => {\n        const newHidden = new Set(state.hiddenCustomColumns);\n        if (newHidden.has(columnId)) {\n          newHidden.delete(columnId);\n        } else {\n          newHidden.add(columnId);\n        }\n        return { hiddenCustomColumns: newHidden };\n      }),\n      \n      // -----------------------------------------\n      // SELECTION SETTERS\n      // -----------------------------------------\n      setCurrentSite: (site) => set({ \n        currentSite: site,\n        _persistedSiteId: site?.id ?? null,  // Keep in sync for persistence\n      }),\n      \n      setCurrentUser: (user) => set({ currentUser: user }),\n      \n      // -----------------------------------------\n      // AUTH STATE ACTIONS\n      // -----------------------------------------\n      setAuthChecking: (isChecking) => set({ isAuthChecking: isChecking }),\n      \n      setAuthenticated: (isAuthenticated) => set({ isAuthenticated }),\n      \n      // -----------------------------------------\n      // VIEW STATE ACTIONS\n      // -----------------------------------------\n      setViewMode: (mode) => set({ \n        viewMode: mode,\n        cellWidth: VIEW_MODE_CELL_WIDTHS[mode],\n      }),\n      \n      setCurrentView: (view) => set({ currentView: view }),\n      \n      setCurrentDate: (date) => set({ currentDate: date }),\n      \n      setCellWidth: (width) => set({ cellWidth: width }),\n      \n      setCurrentResourceTab: (tab) => set({ currentResourceTab: tab }),\n      \n      setTimelineScrollLeft: (scrollLeft) => set({ timelineScrollLeft: scrollLeft }),\n      \n      setShowAssignments: (show) => set({ showAssignments: show }),\n      \n      toggleShowAssignments: () => set((state) => ({ showAssignments: !state.showAssignments })),\n      \n      // Staff overview - closes equipment if opening staff\n      setShowStaffOverview: (show) => set({ \n        showStaffOverview: show,\n        showEquipmentOverview: show ? false : get().showEquipmentOverview \n      }),\n      \n      toggleShowStaffOverview: () => set((state) => ({ \n        showStaffOverview: !state.showStaffOverview,\n        showEquipmentOverview: !state.showStaffOverview ? false : state.showEquipmentOverview\n      })),\n      \n      // Equipment overview - closes staff if opening equipment\n      setShowEquipmentOverview: (show: boolean) => set({ \n        showEquipmentOverview: show,\n        showStaffOverview: show ? false : get().showStaffOverview \n      }),\n      \n      toggleShowEquipmentOverview: () => set((state) => ({ \n        showEquipmentOverview: !state.showEquipmentOverview,\n        showStaffOverview: !state.showEquipmentOverview ? false : state.showStaffOverview\n      })),\n      \n      navigatePeriod: (direction) => {\n        const { viewMode, currentDate } = get();\n        const newDate = new Date(currentDate);\n        \n        switch (viewMode) {\n          case 'week':\n            newDate.setDate(newDate.getDate() + direction * 7);\n            break;\n          case 'month':\n            newDate.setMonth(newDate.getMonth() + direction);\n            break;\n          case 'quarter':\n            newDate.setMonth(newDate.getMonth() + direction * 3);\n            break;\n          case 'year':\n            newDate.setFullYear(newDate.getFullYear() + direction);\n            break;\n        }\n        \n        set({ currentDate: newDate });\n      },\n      \n      goToToday: () => set({ currentDate: new Date() }),\n      \n      // -----------------------------------------\n      // EXPANDED STATE ACTIONS\n      // -----------------------------------------\n      toggleProjectExpanded: (projectId) => set((state) => {\n        const expanded = new Set(state.expandedProjects);\n        if (expanded.has(projectId)) {\n          expanded.delete(projectId);\n        } else {\n          expanded.add(projectId);\n        }\n        return { expandedProjects: expanded };\n      }),\n      \n      togglePhaseExpanded: (phaseId) => set((state) => {\n        const expanded = new Set(state.expandedPhases);\n        if (expanded.has(phaseId)) {\n          expanded.delete(phaseId);\n        } else {\n          expanded.add(phaseId);\n        }\n        return { expandedPhases: expanded };\n      }),\n      \n      toggleSubphaseExpanded: (subphaseId) => set((state) => {\n        const expanded = new Set(state.expandedSubphases);\n        if (expanded.has(subphaseId)) {\n          expanded.delete(subphaseId);\n        } else {\n          expanded.add(subphaseId);\n        }\n        return { expandedSubphases: expanded };\n      }),\n      \n      toggleStaffExpanded: (staffId) => set((state) => {\n        const expanded = new Set(state.expandedStaff);\n        if (expanded.has(staffId)) {\n          expanded.delete(staffId);\n        } else {\n          expanded.add(staffId);\n        }\n        return { expandedStaff: expanded };\n      }),\n      \n      toggleEquipmentExpanded: (equipmentId) => set((state) => {\n        const expanded = new Set(state.expandedEquipment);\n        if (expanded.has(equipmentId)) {\n          expanded.delete(equipmentId);\n        } else {\n          expanded.add(equipmentId);\n        }\n        return { expandedEquipment: expanded };\n      }),\n      \n      toggleBankHolidaysExpanded: () => set((state) => ({\n        expandedBankHolidays: !state.expandedBankHolidays,\n      })),\n      \n      // Ensure expanded (only add, never remove)\n      ensureProjectExpanded: (projectId) => set((state) => {\n        if (state.expandedProjects.has(projectId)) return state;\n        const expanded = new Set(state.expandedProjects);\n        expanded.add(projectId);\n        return { expandedProjects: expanded };\n      }),\n      \n      ensurePhaseExpanded: (phaseId) => set((state) => {\n        if (state.expandedPhases.has(phaseId)) return state;\n        const expanded = new Set(state.expandedPhases);\n        expanded.add(phaseId);\n        return { expandedPhases: expanded };\n      }),\n      \n      ensureSubphaseExpanded: (subphaseId) => set((state) => {\n        if (state.expandedSubphases.has(subphaseId)) return state;\n        const expanded = new Set(state.expandedSubphases);\n        expanded.add(subphaseId);\n        return { expandedSubphases: expanded };\n      }),\n      \n      setExpandedProjects: (ids) => set({ expandedProjects: ids }),\n      \n      setExpandedPhases: (ids) => set({ expandedPhases: ids }),\n      \n      collapseAll: () => set({\n        expandedProjects: new Set(),\n        expandedPhases: new Set(),\n        expandedSubphases: new Set(),\n        expandedStaff: new Set(),\n        expandedEquipment: new Set(),\n      }),\n      \n      expandAll: () => {\n        const { projects } = get();\n        const projectIds = new Set(projects.map(p => p.id));\n        const phaseIds = new Set<number>();\n        const subphaseIds = new Set<number>();\n        \n        // Collect all phase and subphase IDs\n        projects.forEach(project => {\n          project.phases?.forEach(phase => {\n            phaseIds.add(phase.id);\n            const collectSubphases = (children: typeof phase.children) => {\n              children?.forEach(child => {\n                subphaseIds.add(child.id);\n                collectSubphases(child.children);\n              });\n            };\n            collectSubphases(phase.children);\n          });\n        });\n        \n        set({\n          expandedProjects: projectIds,\n          expandedPhases: phaseIds,\n          expandedSubphases: subphaseIds,\n        });\n      },\n      \n      expandProjectLevel: (projectId: number) => {\n        const { projects, expandedProjects, expandedPhases, expandedSubphases } = get();\n        const project = projects.find(p => p.id === projectId);\n        if (!project) return;\n        \n        // Get current level and calculate next level\n        const { levels, maxLevel } = getProjectLevelItems(project);\n        const currentLevel = getCurrentExpansionLevel(project, expandedProjects, expandedPhases, expandedSubphases);\n        const targetLevel = Math.min(currentLevel + 1, maxLevel);\n        \n        // Apply the new level\n        const newState = expandToLevel(project, targetLevel, levels, maxLevel, expandedProjects, expandedPhases, expandedSubphases);\n        set(newState);\n      },\n      \n      collapseProjectLevel: (projectId: number) => {\n        const { projects, expandedProjects, expandedPhases, expandedSubphases } = get();\n        const project = projects.find(p => p.id === projectId);\n        if (!project) return;\n        \n        // Get current level and calculate previous level\n        const { levels, maxLevel } = getProjectLevelItems(project);\n        const currentLevel = getCurrentExpansionLevel(project, expandedProjects, expandedPhases, expandedSubphases);\n        const targetLevel = Math.max(currentLevel - 1, 0);\n        \n        // Apply the new level\n        const newState = expandToLevel(project, targetLevel, levels, maxLevel, expandedProjects, expandedPhases, expandedSubphases);\n        set(newState);\n      },\n      \n      // -----------------------------------------\n      // CRITICAL PATH ACTIONS\n      // -----------------------------------------\n      toggleCriticalPath: (projectId) => {\n        const { criticalPathEnabled, criticalPathItems, projects } = get();\n        const newEnabled = new Set(criticalPathEnabled);\n        const newItems = new Map(criticalPathItems);\n        \n        if (newEnabled.has(projectId)) {\n          // Disable critical path for this project\n          newEnabled.delete(projectId);\n          newItems.delete(projectId);\n        } else {\n          // Enable critical path for this project\n          newEnabled.add(projectId);\n          \n          // Calculate critical path\n          const project = projects.find(p => p.id === projectId);\n          if (project) {\n            // Dynamic import to avoid circular dependency\n            import('@/components/gantt/utils/criticalPath').then(({ calculateCriticalPath }) => {\n              const result = calculateCriticalPath(project);\n              const updatedItems = new Map(get().criticalPathItems);\n              updatedItems.set(projectId, result.criticalItems);\n              set({ criticalPathItems: updatedItems });\n            });\n          }\n        }\n        \n        set({ criticalPathEnabled: newEnabled, criticalPathItems: newItems });\n      },\n      \n      recalculateCriticalPath: (projectId) => {\n        const { criticalPathEnabled, projects } = get();\n        \n        // Only recalculate if critical path is enabled for this project\n        if (!criticalPathEnabled.has(projectId)) return;\n        \n        const project = projects.find(p => p.id === projectId);\n        if (project) {\n          import('@/components/gantt/utils/criticalPath').then(({ calculateCriticalPath }) => {\n            const result = calculateCriticalPath(project);\n            const updatedItems = new Map(get().criticalPathItems);\n            updatedItems.set(projectId, result.criticalItems);\n            set({ criticalPathItems: updatedItems });\n          });\n        }\n      },\n      \n      isCriticalPathEnabled: (projectId) => {\n        return get().criticalPathEnabled.has(projectId);\n      },\n      \n      getCriticalPathItems: (projectId) => {\n        return get().criticalPathItems.get(projectId) || new Set();\n      },\n      \n      // -----------------------------------------\n      // WHAT IF MODE ACTIONS\n      // -----------------------------------------\n      enterWhatIfMode: () => {\n        const { projects } = get();\n        set({\n          whatIfMode: true,\n          whatIfSnapshot: {\n            projects: structuredClone(projects),\n          },\n          whatIfPendingOperations: [],\n        });\n      },\n      \n      exitWhatIfMode: async (applyChanges) => {\n        const { whatIfSnapshot, whatIfPendingOperations } = get();\n        \n        if (!applyChanges && whatIfSnapshot) {\n          // Discard: Restore original state\n          set({\n            projects: whatIfSnapshot.projects,\n            whatIfMode: false,\n            whatIfSnapshot: null,\n            whatIfPendingOperations: [],\n          });\n        } else if (applyChanges && whatIfPendingOperations.length > 0) {\n          // Apply: Execute all pending operations\n          console.log(`[What If] Applying ${whatIfPendingOperations.length} pending operations...`);\n          \n          // Import the API client to make real requests\n          const { apiRequest, clientConfig } = await import('@/api/client');\n          \n          // Temporarily disable What-If mode check for these requests\n          const originalIsWhatIfMode = clientConfig.isWhatIfMode;\n          clientConfig.isWhatIfMode = () => false;\n          \n          try {\n            for (const op of whatIfPendingOperations) {\n              console.log(`[What If] Executing: ${op.method} ${op.url}`);\n              await apiRequest(op.url, {\n                method: op.method,\n                body: op.body,\n              });\n            }\n            console.log('[What If] All operations applied successfully');\n          } catch (error) {\n            console.error('[What If] Failed to apply operations:', error);\n            // Note: Some operations may have succeeded, so we don't restore snapshot\n            // User should reload to see actual state\n          } finally {\n            // Restore the What-If mode check\n            clientConfig.isWhatIfMode = originalIsWhatIfMode;\n          }\n          \n          set({\n            whatIfMode: false,\n            whatIfSnapshot: null,\n            whatIfPendingOperations: [],\n          });\n        } else {\n          // No changes or no pending ops, just exit\n          set({\n            whatIfMode: false,\n            whatIfSnapshot: null,\n            whatIfPendingOperations: [],\n          });\n        }\n      },\n      \n      queueWhatIfOperation: (operation) => {\n        set((state) => ({\n          whatIfPendingOperations: [\n            ...state.whatIfPendingOperations,\n            {\n              ...operation,\n              id: `op_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n              timestamp: Date.now(),\n            },\n          ],\n        }));\n      },\n      \n      // -----------------------------------------\n      // UI STATE ACTIONS\n      // -----------------------------------------\n      toggleSidebar: () => set((state) => ({\n        sidebarCollapsed: !state.sidebarCollapsed,\n      })),\n      \n      toggleResourcePanel: () => set((state) => ({\n        resourcePanelCollapsed: !state.resourcePanelCollapsed,\n      })),\n      \n      setSidebarCollapsed: (collapsed) => set({ sidebarCollapsed: collapsed }),\n      \n      setResourcePanelCollapsed: (collapsed) => set({ resourcePanelCollapsed: collapsed }),\n      \n      // -----------------------------------------\n      // RESET\n      // -----------------------------------------\n      reset: () => set(initialState),\n    }),\n    {\n      name: 'milestone-app-storage-v3',\n      storage: createJSONStorage(() => localStorage),\n      // Only persist certain fields\n      partialize: (state) => ({\n        viewMode: state.viewMode,\n        currentView: state.currentView,\n        cellWidth: state.cellWidth,\n        currentResourceTab: state.currentResourceTab,\n        sidebarCollapsed: state.sidebarCollapsed,\n        resourcePanelCollapsed: state.resourcePanelCollapsed,\n        timelineScrollLeft: state.timelineScrollLeft,\n        // Panel visibility (don't persist showAssignments - always show on load)\n        showStaffOverview: state.showStaffOverview,\n        showEquipmentOverview: state.showEquipmentOverview,\n        // Custom column visibility\n        showAllCustomColumns: state.showAllCustomColumns,\n        hiddenCustomColumns: Array.from(state.hiddenCustomColumns),\n        // Convert Sets to Arrays for JSON serialization\n        expandedProjects: Array.from(state.expandedProjects),\n        expandedPhases: Array.from(state.expandedPhases),\n        expandedSubphases: Array.from(state.expandedSubphases),\n        // Store current site ID (use _persistedSiteId which is properly maintained)\n        currentSiteId: state._persistedSiteId,\n        // Store current date as ISO string\n        currentDateISO: state.currentDate.toISOString(),\n      }),\n      // Callback when hydration starts/completes\n      onRehydrateStorage: () => {\n        console.log('[AppStore] Starting hydration from localStorage...');\n        return (state, error) => {\n          if (error) {\n            console.error('[AppStore] Hydration error:', error);\n          } else if (state) {\n            console.log('[AppStore] Hydration complete:', {\n              viewMode: state.viewMode,\n              currentDate: state.currentDate?.toISOString?.(),\n              cellWidth: state.cellWidth,\n            });\n          }\n        };\n      },\n      // Custom merge to handle Sets properly\n      merge: (persistedState, currentState) => {\n        // Zustand persist stores data in { state: { ... }, version: ... } format\n        // The persistedState might be the unwrapped state or the wrapped object\n        const persisted = (persistedState as any)?.state ?? persistedState as any;\n        console.log('[AppStore] Merging persisted state:', {\n          raw: persistedState,\n          unwrapped: persisted,\n          currentSiteId: persisted?.currentSiteId,\n        });\n        \n        return {\n          ...currentState,\n          // Restore _persistedSiteId from localStorage so it doesn't get overwritten\n          _persistedSiteId: persisted?.currentSiteId ?? currentState._persistedSiteId,\n          // Restore the view state fields\n          viewMode: persisted?.viewMode ?? currentState.viewMode,\n          currentView: persisted?.currentView ?? currentState.currentView,\n          cellWidth: persisted?.cellWidth ?? currentState.cellWidth,\n          currentResourceTab: persisted?.currentResourceTab ?? currentState.currentResourceTab,\n          sidebarCollapsed: persisted?.sidebarCollapsed ?? currentState.sidebarCollapsed,\n          resourcePanelCollapsed: persisted?.resourcePanelCollapsed ?? currentState.resourcePanelCollapsed,\n          timelineScrollLeft: persisted?.timelineScrollLeft ?? currentState.timelineScrollLeft,\n          // Panel visibility (showAssignments always defaults to true - not restored)\n          showStaffOverview: persisted?.showStaffOverview ?? currentState.showStaffOverview,\n          showEquipmentOverview: persisted?.showEquipmentOverview ?? currentState.showEquipmentOverview,\n          // Custom column visibility\n          showAllCustomColumns: persisted?.showAllCustomColumns ?? currentState.showAllCustomColumns,\n          hiddenCustomColumns: Array.isArray(persisted?.hiddenCustomColumns)\n            ? new Set(persisted.hiddenCustomColumns)\n            : currentState.hiddenCustomColumns,\n          // Convert Arrays back to Sets\n          expandedProjects: Array.isArray(persisted?.expandedProjects) \n            ? new Set(persisted.expandedProjects) \n            : currentState.expandedProjects,\n          expandedPhases: Array.isArray(persisted?.expandedPhases) \n            ? new Set(persisted.expandedPhases) \n            : currentState.expandedPhases,\n          expandedSubphases: Array.isArray(persisted?.expandedSubphases) \n            ? new Set(persisted.expandedSubphases) \n            : currentState.expandedSubphases,\n          // Restore current date from ISO string\n          currentDate: persisted?.currentDateISO \n            ? new Date(persisted.currentDateISO)\n            : currentState.currentDate,\n        };\n      },\n    }\n  )\n);\n\n// =============================================================================\n// SELECTORS (for derived state)\n// =============================================================================\n\n/**\n * Get projects filtered by current site (non-archived)\n */\nexport const selectSiteProjects = (state: AppState): Project[] => {\n  return state.projects.filter(\n    p => p.site_id === state.currentSite?.id && !p.archived\n  );\n};\n\n/**\n * Get archived projects for current site\n */\nexport const selectArchivedProjects = (state: AppState): Project[] => {\n  return state.projects.filter(\n    p => p.site_id === state.currentSite?.id && p.archived\n  );\n};\n\n/**\n * Get staff for current site\n */\nexport const selectSiteStaff = (state: AppState): Staff[] => {\n  return state.staff.filter(s => s.site_id === state.currentSite?.id);\n};\n\n/**\n * Get equipment for current site\n */\nexport const selectSiteEquipment = (state: AppState): Equipment[] => {\n  return state.equipment.filter(e => e.site_id === state.currentSite?.id);\n};\n\n/**\n * Check if user can manage resources (admin or superuser)\n */\nexport const selectCanManageResources = (state: AppState): boolean => {\n  return state.currentUser?.role === 'admin' || state.currentUser?.role === 'superuser';\n};\n\n/**\n * Check if user is admin\n */\nexport const selectIsAdmin = (state: AppState): boolean => {\n  return state.currentUser?.role === 'admin';\n};\n","/**\n * API Client for Milestone\n * Handles all HTTP communication with the backend, including:\n * - Tenant prefix detection for multi-tenant routes\n * - What If mode request blocking\n * - Error handling and response parsing\n */\n\nimport type { } from '@/types';\n\n// =============================================================================\n// API BASE URL\n// =============================================================================\n\n/**\n * Get the API base URL\n * In development, this points to the backend on port 8485\n * In production (same origin), this is empty\n */\nfunction getApiBaseUrl(): string {\n  // Check if we're on a different port (development)\n  if (window.location.port === '3333') {\n    // Development: API is on port 8485 on same host\n    return `${window.location.protocol}//${window.location.hostname}:8485`;\n  }\n  // Production: same origin\n  return '';\n}\n\n// =============================================================================\n// TENANT PREFIX DETECTION\n// =============================================================================\n\n/**\n * Extracts tenant prefix from current URL path\n * e.g., /t/acme/dashboard -> /t/acme\n */\nexport function getTenantPrefix(): string {\n  const match = window.location.pathname.match(/^(\\/t\\/[a-z0-9][a-z0-9-]*)/);\n  return match ? match[1] : '';\n}\n\n// =============================================================================\n// REQUEST CONFIGURATION\n// =============================================================================\n\ninterface RequestOptions extends Omit<RequestInit, 'body'> {\n  body?: unknown;\n}\n\ninterface ApiClientConfig {\n  /** Check if What If mode is active (blocks write operations) */\n  isWhatIfMode?: () => boolean;\n  /** Queue a What-If operation for later execution */\n  queueWhatIfOperation?: (op: { method: 'POST' | 'PUT' | 'DELETE'; url: string; body?: unknown }) => void;\n}\n\nexport let clientConfig: ApiClientConfig = {\n  isWhatIfMode: () => false,\n  queueWhatIfOperation: undefined,\n};\n\n/**\n * Configure the API client\n * Call this during app initialization to connect store state\n */\nexport function configureApiClient(config: ApiClientConfig): void {\n  clientConfig = { ...clientConfig, ...config };\n}\n\n// =============================================================================\n// CORE REQUEST FUNCTION\n// =============================================================================\n\n/**\n * Make an API request with automatic tenant prefix handling\n * @param endpoint - API endpoint (e.g., '/api/projects')\n * @param options - Fetch options including body, method, headers\n * @returns Parsed JSON response\n * @throws Error with message from API or HTTP status\n */\nexport async function apiRequest<T>(\n  endpoint: string,\n  options: RequestOptions = {}\n): Promise<T> {\n  const baseUrl = getApiBaseUrl();\n  const tenantPrefix = getTenantPrefix();\n  let url = endpoint.startsWith('/') ? endpoint : `/${endpoint}`;\n  \n  // Add tenant prefix to /api/ routes\n  if (url.startsWith('/api/') && tenantPrefix) {\n    url = tenantPrefix + url;\n  }\n  \n  // Prepend base URL for cross-origin requests\n  url = baseUrl + url;\n  \n  const method = options.method || 'GET';\n  \n  // In What If mode, block write operations (except auth and settings) and queue them\n  if (clientConfig.isWhatIfMode?.() && ['PUT', 'POST', 'DELETE'].includes(method)) {\n    const allowedPrefixes = ['/api/auth/', '/api/settings/'];\n    const isAllowed = allowedPrefixes.some(prefix => url.includes(prefix));\n    \n    if (!isAllowed) {\n      console.log(`[What If Mode] Queued ${method} request to ${url}`);\n      \n      // Queue the operation for later execution when applying changes\n      if (clientConfig.queueWhatIfOperation) {\n        // Store the relative URL (without base) for replay\n        const relativeUrl = url.replace(baseUrl, '');\n        clientConfig.queueWhatIfOperation({\n          method: method as 'POST' | 'PUT' | 'DELETE',\n          url: relativeUrl,\n          body: options.body,\n        });\n      }\n      \n      // Return fake success response for blocked operations\n      return { success: true, whatIfMode: true, id: Date.now() } as T;\n    }\n  }\n  \n  // Build fetch config\n  const { body, headers: optHeaders, ...restOptions } = options;\n  \n  const config: RequestInit = {\n    method,\n    headers: {\n      'Content-Type': 'application/json',\n      ...optHeaders,\n    },\n    credentials: 'include', // Include cookies for session auth\n    ...restOptions,\n  };\n  \n  // Serialize body if present\n  if (body !== undefined) {\n    config.body = JSON.stringify(body);\n  }\n  \n  try {\n    const response = await fetch(url, config);\n    \n    // Handle empty responses (204 No Content)\n    if (response.status === 204) {\n      return {} as T;\n    }\n    \n    // Handle no content or empty body\n    const text = await response.text();\n    if (!text || text.trim() === '') {\n      if (response.ok) {\n        return {} as T;\n      }\n      throw new Error(`HTTP ${response.status}: Empty response`);\n    }\n    \n    // Try to parse as JSON\n    let data: unknown;\n    try {\n      data = JSON.parse(text);\n    } catch {\n      // Not JSON - might be an HTML error page from proxy\n      console.error(`[API Error] Non-JSON response from ${endpoint}:`, text.substring(0, 200));\n      throw new Error(`HTTP ${response.status}: Invalid response`);\n    }\n    \n    if (!response.ok) {\n      const error = data as Record<string, unknown>;\n      // Handle FastAPI validation errors (422) which have detail as array\n      if (Array.isArray(error.detail)) {\n        const messages = error.detail.map((d: { msg?: string; loc?: string[] }) => {\n          const field = d.loc?.slice(-1)[0] || 'field';\n          return `${field}: ${d.msg || 'invalid'}`;\n        });\n        throw new Error(messages.join(', '));\n      }\n      // Standard error format\n      const message = (error.error as string) || (error.detail as string) || `HTTP ${response.status}`;\n      throw new Error(message);\n    }\n    \n    return data as T;\n  } catch (err) {\n    // Re-throw API errors\n    if (err instanceof Error) {\n      console.error(`[API Error] ${method} ${endpoint}:`, err.message);\n      throw err;\n    }\n    // Wrap unknown errors\n    throw new Error('An unexpected error occurred');\n  }\n}\n\n// =============================================================================\n// CONVENIENCE METHODS\n// =============================================================================\n\n/**\n * GET request helper\n */\nexport function apiGet<T>(endpoint: string): Promise<T> {\n  return apiRequest<T>(endpoint, { method: 'GET' });\n}\n\n/**\n * POST request helper\n */\nexport function apiPost<T>(endpoint: string, body?: unknown): Promise<T> {\n  return apiRequest<T>(endpoint, { method: 'POST', body });\n}\n\n/**\n * PUT request helper\n */\nexport function apiPut<T>(endpoint: string, body?: unknown): Promise<T> {\n  return apiRequest<T>(endpoint, { method: 'PUT', body });\n}\n\n/**\n * DELETE request helper\n */\nexport function apiDelete<T>(endpoint: string): Promise<T> {\n  return apiRequest<T>(endpoint, { method: 'DELETE' });\n}\n\n/**\n * PATCH request helper\n */\nexport function apiPatch<T>(endpoint: string, body?: unknown): Promise<T> {\n  return apiRequest<T>(endpoint, { method: 'PATCH', body });\n}\n","/**\n * Authentication API endpoints\n */\n\nimport { apiGet, apiPost } from '../client';\nimport type { User, AuthResponse } from '@/types';\n\n/**\n * Transform user from API camelCase to frontend snake_case\n */\nfunction transformUser(apiUser: any): User {\n  return {\n    id: apiUser.id,\n    email: apiUser.email,\n    first_name: apiUser.firstName,\n    last_name: apiUser.lastName,\n    name: apiUser.name,\n    job_title: apiUser.jobTitle,\n    role: apiUser.role,\n    max_capacity: apiUser.maxCapacity ?? apiUser.max_capacity ?? 100,\n    active: true,\n    site_ids: apiUser.siteIds || [],\n    skills: apiUser.skills || [],\n  };\n}\n\n/**\n * Check current authentication status\n * Returns the current user if authenticated\n */\nexport async function checkAuth(): Promise<{ user: User | null }> {\n  try {\n    const response = await apiGet<{ user: any }>('/api/auth/me');\n    if (response.user) {\n      return { user: transformUser(response.user) };\n    }\n    return { user: null };\n  } catch {\n    return { user: null };\n  }\n}\n\n/**\n * Login with email and password\n */\nexport async function login(email: string, password: string): Promise<AuthResponse> {\n  const response = await apiPost<{ success: boolean; user: any }>('/api/auth/login', { email, password });\n  return {\n    user: transformUser(response.user),\n  };\n}\n\n/**\n * Logout current user\n */\nexport async function logout(): Promise<void> {\n  await apiPost('/api/auth/logout');\n}\n\n/**\n * Check if SSO is enabled for this tenant\n */\nexport async function checkSSOEnabled(): Promise<{ enabled: boolean; provider?: string }> {\n  try {\n    const response = await apiGet<{ enabled: boolean; provider?: string }>('/api/auth/sso/status');\n    return response;\n  } catch {\n    return { enabled: false };\n  }\n}\n\n/**\n * Get SSO login URL\n */\nexport async function getSSOLoginUrl(): Promise<{ url: string }> {\n  return apiGet<{ url: string }>('/api/auth/sso/login');\n}\n","/**\n * Theme Colors Utility\n * \n * Provides access to theme-aware colors, particularly for phase/subphase levels.\n * Colors are read from CSS variables which change based on the active theme.\n */\n\n// Default fallback colors (Default theme)\nconst DEFAULT_LEVEL_COLORS: Record<number, string> = {\n  0: '#FF50A8',  // Phase level (Pink)\n  1: '#05B6D4',  // Cyan\n  2: '#8B5CF6',  // Purple\n  3: '#3B82F6',  // Blue\n  4: '#FA7315',  // Orange\n  5: '#11B981',  // Emerald\n  6: '#EC4899',  // Fuchsia\n  7: '#EAB30A',  // Amber\n  8: '#14B8A6',  // Teal\n  9: '#A755F7',  // Violet\n  10: '#F43F5E', // Rose\n};\n\n/**\n * Get the computed value of a CSS variable\n */\nfunction getCSSVariable(name: string): string | null {\n  if (typeof window === 'undefined') return null;\n  const value = getComputedStyle(document.documentElement).getPropertyValue(name).trim();\n  return value || null;\n}\n\n/**\n * Get the color for a phase (top-level)\n */\nexport function getPhaseColor(): string {\n  return getCSSVariable('--level-phase') || DEFAULT_LEVEL_COLORS[0];\n}\n\n/**\n * Get the color for a subphase at a specific depth\n * @param depth - The depth level (1-10)\n */\nexport function getDepthColor(depth: number): string {\n  // Clamp depth to 1-10 range\n  const clampedDepth = Math.max(1, Math.min(10, depth));\n  const cssVar = getCSSVariable(`--level-${clampedDepth}`);\n  return cssVar || DEFAULT_LEVEL_COLORS[clampedDepth] || DEFAULT_LEVEL_COLORS[1];\n}\n\n/**\n * Get the text color for bars (should be white for contrast)\n */\nexport function getLevelBarTextColor(): string {\n  return getCSSVariable('--level-bar-text') || '#ffffff';\n}\n\n/**\n * Get all level colors as a map\n */\nexport function getAllLevelColors(): Record<number, string> {\n  const colors: Record<number, string> = {};\n  \n  // Phase level\n  colors[0] = getPhaseColor();\n  \n  // Subphase levels 1-10\n  for (let i = 1; i <= 10; i++) {\n    colors[i] = getDepthColor(i);\n  }\n  \n  return colors;\n}\n","/**\n * Projects API endpoints\n */\n\nimport { apiGet, apiPost, apiPut, apiDelete } from '../client';\nimport type { \n  Project, \n  CreateProjectRequest, \n  UpdateProjectRequest,\n  Phase,\n  CreatePhaseRequest,\n  UpdatePhaseRequest,\n  Subphase,\n  CreateSubphaseRequest,\n  StaffAssignment,\n  CreateStaffAssignmentRequest,\n  EquipmentAssignment,\n  CreateEquipmentAssignmentRequest,\n} from '@/types';\n\n// =============================================================================\n// PROJECTS\n// =============================================================================\n\n/**\n * Get all projects\n * @param archived - Filter: 'all', 'true', 'false' (default: active only)\n */\nexport async function getProjects(archived: 'all' | 'true' | 'false' = 'false'): Promise<Project[]> {\n  return apiGet<Project[]>(`/api/projects?archived=${archived}`);\n}\n\n/**\n * Get a single project with all nested data\n */\nexport async function getProject(id: number): Promise<Project> {\n  return apiGet<Project>(`/api/projects/${id}`);\n}\n\n/**\n * Create a new project\n */\nexport async function createProject(data: CreateProjectRequest): Promise<Project> {\n  return apiPost<Project>('/api/projects', data);\n}\n\n/**\n * Update a project\n */\nexport async function updateProject(id: number, data: UpdateProjectRequest): Promise<Project> {\n  return apiPut<Project>(`/api/projects/${id}`, data);\n}\n\n/**\n * Delete a project\n */\nexport async function deleteProject(id: number): Promise<void> {\n  await apiDelete(`/api/projects/${id}`);\n}\n\n/**\n * Archive a project\n */\nexport async function archiveProject(id: number): Promise<Project> {\n  return apiPut<Project>(`/api/projects/${id}`, { archived: true });\n}\n\n/**\n * Restore an archived project\n */\nexport async function restoreProject(id: number): Promise<Project> {\n  return apiPut<Project>(`/api/projects/${id}`, { archived: false });\n}\n\n// =============================================================================\n// PHASES\n// =============================================================================\n\n/**\n * Create a new phase for a project\n * Backend expects: { type, start_date, end_date, is_milestone }\n */\nexport async function createPhase(projectId: number, data: CreatePhaseRequest): Promise<Phase> {\n  // Map frontend 'name' to backend 'type'\n  const backendData: Record<string, unknown> = {\n    type: data.name,\n    start_date: data.start_date,\n    end_date: data.end_date,\n    is_milestone: data.is_milestone ?? false,\n  };\n  \n  // Include optional fields if provided\n  if (data.order_index !== undefined) {\n    backendData.order_index = data.order_index;\n  }\n  if (data.dependencies !== undefined) {\n    backendData.dependencies = data.dependencies;\n  }\n  \n  return apiPost<Phase>(`/api/projects/${projectId}/phases`, backendData);\n}\n\n/**\n * Update a phase\n * Backend expects 'type' instead of 'name' for the phase name\n */\nexport async function updatePhase(phaseId: number, data: UpdatePhaseRequest): Promise<Phase> {\n  // Map frontend 'name' to backend 'type'\n  const backendData: Record<string, unknown> = {};\n  \n  if (data.name !== undefined) {\n    backendData.type = data.name;\n  }\n  if (data.start_date !== undefined) {\n    backendData.start_date = data.start_date;\n  }\n  if (data.end_date !== undefined) {\n    backendData.end_date = data.end_date;\n  }\n  if (data.is_milestone !== undefined) {\n    backendData.is_milestone = data.is_milestone;\n  }\n  if (data.dependencies !== undefined) {\n    backendData.dependencies = data.dependencies;\n  }\n  if (data.completion !== undefined) {\n    backendData.completion = data.completion;\n  }\n  \n  return apiPut<Phase>(`/api/phases/${phaseId}`, backendData);\n}\n\n/**\n * Delete a phase\n */\nexport async function deletePhase(phaseId: number): Promise<void> {\n  await apiDelete(`/api/phases/${phaseId}`);\n}\n\n// =============================================================================\n// SUBPHASES\n// =============================================================================\n\n/**\n * Create a new subphase under a phase\n * Backend endpoint: POST /phases/{phase_id}/subphases\n */\nexport async function createSubphase(\n  phaseId: number, \n  projectId: number, \n  data: CreateSubphaseRequest\n): Promise<Subphase> {\n  const backendData: Record<string, unknown> = {\n    name: data.name,\n    start_date: data.start_date,\n    end_date: data.end_date,\n    project_id: projectId,\n    is_milestone: data.is_milestone ?? false,\n  };\n  \n  // Include optional fields if provided\n  if (data.order_index !== undefined) {\n    backendData.order_index = data.order_index;\n  }\n  if (data.dependencies !== undefined) {\n    backendData.dependencies = data.dependencies;\n  }\n  \n  return apiPost<Subphase>(`/api/phases/${phaseId}/subphases`, backendData);\n}\n\n/**\n * Create a nested subphase under another subphase\n * Backend endpoint: POST /subphases/{subphase_id}/children\n */\nexport async function createChildSubphase(\n  parentSubphaseId: number,\n  projectId: number,\n  data: CreateSubphaseRequest\n): Promise<Subphase> {\n  const backendData: Record<string, unknown> = {\n    name: data.name,\n    start_date: data.start_date,\n    end_date: data.end_date,\n    project_id: projectId,\n    is_milestone: data.is_milestone ?? false,\n  };\n  \n  // Include optional fields if provided\n  if (data.order_index !== undefined) {\n    backendData.order_index = data.order_index;\n  }\n  if (data.dependencies !== undefined) {\n    backendData.dependencies = data.dependencies;\n  }\n  \n  return apiPost<Subphase>(`/api/subphases/${parentSubphaseId}/children`, backendData);\n}\n\n/**\n * Update a subphase\n */\nexport async function updateSubphase(subphaseId: number, data: Partial<CreateSubphaseRequest>): Promise<Subphase> {\n  return apiPut<Subphase>(`/api/subphases/${subphaseId}`, data);\n}\n\n/**\n * Delete a subphase\n */\nexport async function deleteSubphase(subphaseId: number): Promise<void> {\n  await apiDelete(`/api/subphases/${subphaseId}`);\n}\n\n// =============================================================================\n// STAFF ASSIGNMENTS\n// =============================================================================\n\n/**\n * Create a staff assignment\n * Can be assigned to project, phase, or subphase\n */\nexport async function createStaffAssignment(\n  data: CreateStaffAssignmentRequest & { \n    project_id?: number; \n    phase_id?: number; \n    subphase_id?: number; \n  }\n): Promise<StaffAssignment> {\n  // Determine endpoint based on what we're assigning to\n  if (data.subphase_id) {\n    return apiPost<StaffAssignment>(`/api/subphases/${data.subphase_id}/staff`, data);\n  } else if (data.phase_id) {\n    return apiPost<StaffAssignment>(`/api/phases/${data.phase_id}/staff`, data);\n  } else if (data.project_id) {\n    return apiPost<StaffAssignment>(`/api/projects/${data.project_id}/staff`, data);\n  }\n  throw new Error('Must specify project_id, phase_id, or subphase_id');\n}\n\n/**\n * Update a staff assignment\n * Routes to correct endpoint based on assignment level\n */\nexport async function updateStaffAssignment(\n  assignmentId: number, \n  data: Partial<CreateStaffAssignmentRequest>,\n  level: 'project' | 'phase' | 'subphase' = 'project'\n): Promise<StaffAssignment> {\n  const endpoint = level === 'subphase' \n    ? `/api/subphase-staff/${assignmentId}`\n    : level === 'phase'\n    ? `/api/phase-staff/${assignmentId}`\n    : `/api/assignments/${assignmentId}`;\n  return apiPut<StaffAssignment>(endpoint, data);\n}\n\n/**\n * Delete a staff assignment\n * Routes to correct endpoint based on assignment level\n */\nexport async function deleteStaffAssignment(\n  assignmentId: number,\n  level: 'project' | 'phase' | 'subphase' = 'project'\n): Promise<void> {\n  const endpoint = level === 'subphase' \n    ? `/api/subphase-staff/${assignmentId}`\n    : level === 'phase'\n    ? `/api/phase-staff/${assignmentId}`\n    : `/api/assignments/${assignmentId}`;\n  await apiDelete(endpoint);\n}\n\n// =============================================================================\n// EQUIPMENT ASSIGNMENTS\n// =============================================================================\n\n/**\n * Create an equipment assignment\n * Can be assigned to project, phase, or subphase\n */\nexport async function createEquipmentAssignment(\n  data: CreateEquipmentAssignmentRequest & { \n    project_id?: number; \n    phase_id?: number; \n    subphase_id?: number; \n  }\n): Promise<EquipmentAssignment> {\n  // Determine endpoint based on what we're assigning to\n  if (data.subphase_id) {\n    return apiPost<EquipmentAssignment>(`/api/subphases/${data.subphase_id}/equipment`, data);\n  } else if (data.phase_id) {\n    return apiPost<EquipmentAssignment>(`/api/phases/${data.phase_id}/equipment`, data);\n  } else if (data.project_id) {\n    return apiPost<EquipmentAssignment>(`/api/projects/${data.project_id}/equipment`, data);\n  }\n  throw new Error('Must specify project_id, phase_id, or subphase_id');\n}\n\n/**\n * Update an equipment assignment\n */\nexport async function updateEquipmentAssignment(\n  assignmentId: number, \n  data: Partial<CreateEquipmentAssignmentRequest>\n): Promise<EquipmentAssignment> {\n  return apiPut<EquipmentAssignment>(`/api/equipment-assignments/${assignmentId}`, data);\n}\n\n/**\n * Delete an equipment assignment\n */\nexport async function deleteEquipmentAssignment(assignmentId: number): Promise<void> {\n  await apiDelete(`/api/equipment-assignments/${assignmentId}`);\n}\n\n// =============================================================================\n// BULK OPERATIONS\n// =============================================================================\n\n/**\n * Transform API response from snake_case to camelCase\n */\nfunction transformProject(project: any): Project {\n  return {\n    ...project,\n    // Ensure arrays exist and transform nested data\n    phases: (project.phases ?? []).map(transformPhase),\n    staffAssignments: (project.staff_assignments ?? project.staffAssignments ?? []).map(transformStaffAssignment),\n    equipmentAssignments: (project.equipment_assignments ?? project.equipmentAssignments ?? []).map(transformEquipmentAssignment),\n  };\n}\n\n// Phase color - use theme-aware function\nimport { getPhaseColor, getDepthColor } from '@/utils/themeColors';\n\n// Legacy constants for fallback (kept for reference)\nconst PHASE_COLOR_FALLBACK = '#ec4899';\n\n// Subphase depth colors fallback\nconst DEPTH_COLORS_FALLBACK: Record<number, string> = {\n  1: '#06b6d4',  // Cyan\n  2: '#8b5cf6',  // Purple\n  3: '#3b82f6',  // Blue\n  4: '#f97316',  // Orange\n  5: '#10b981',  // Green\n  6: '#ec4899',  // Pink\n  7: '#eab308',  // Yellow\n  8: '#14b8a6',  // Teal\n  9: '#a855f7',  // Light Purple\n};\n\nfunction getDepthColorWithFallback(depth: number): string {\n  // Try to get from CSS variables first, fall back to hardcoded\n  try {\n    return getDepthColor(depth);\n  } catch {\n    return DEPTH_COLORS_FALLBACK[depth] || DEPTH_COLORS_FALLBACK[1];\n  }\n}\n\nfunction getPhaseColorWithFallback(): string {\n  try {\n    return getPhaseColor();\n  } catch {\n    return PHASE_COLOR_FALLBACK;\n  }\n}\n\nfunction transformPhase(phase: any): Phase {\n  return {\n    id: phase.id,\n    project_id: phase.project_id,\n    name: phase.type || phase.name || 'Phase',  // API returns 'type' for phases\n    start_date: phase.start_date,\n    end_date: phase.end_date,\n    color: getPhaseColorWithFallback(),\n    order_index: phase.sort_order ?? 0,\n    completion: phase.completion ?? null,\n    // Handle SQLite integer (0/1) and boolean\n    is_milestone: Boolean(phase.is_milestone),\n    dependencies: phase.dependencies ?? [],\n    children: (phase.children ?? phase.subphases ?? []).map((s: any) => transformSubphase(s, 1)),\n    staffAssignments: (phase.staff_assignments ?? phase.staffAssignments ?? []).map(transformStaffAssignment),\n    equipmentAssignments: (phase.equipment_assignments ?? phase.equipmentAssignments ?? []).map(transformEquipmentAssignment),\n  };\n}\n\nfunction transformSubphase(subphase: any, depth: number = 1): Subphase {\n  const actualDepth = subphase.depth ?? depth;\n  return {\n    id: subphase.id,\n    project_id: subphase.project_id,\n    parent_phase_id: subphase.parent_type === 'phase' ? subphase.parent_id : null,\n    parent_subphase_id: subphase.parent_type === 'subphase' ? subphase.parent_id : null,\n    name: subphase.name,\n    start_date: subphase.start_date,\n    end_date: subphase.end_date,\n    color: getDepthColorWithFallback(actualDepth),\n    order_index: subphase.sort_order ?? 0,\n    completion: subphase.completion ?? null,\n    // Handle SQLite integer (0/1) and boolean\n    is_milestone: Boolean(subphase.is_milestone),\n    dependencies: subphase.dependencies ?? [],\n    children: (subphase.children ?? []).map((s: any) => transformSubphase(s, actualDepth + 1)),\n    staffAssignments: (subphase.staff_assignments ?? subphase.staffAssignments ?? []).map(transformStaffAssignment),\n    equipmentAssignments: (subphase.equipment_assignments ?? subphase.equipmentAssignments ?? []).map(transformEquipmentAssignment),\n  };\n}\n\nfunction transformStaffAssignment(assignment: any): StaffAssignment {\n  return {\n    id: assignment.id,\n    staff_id: assignment.staff_id,\n    staff_name: assignment.staff_name,\n    project_id: assignment.project_id,\n    phase_id: assignment.phase_id,\n    subphase_id: assignment.subphase_id,\n    allocation: assignment.allocation ?? assignment.allocation_percent ?? 100,\n    start_date: assignment.start_date,\n    end_date: assignment.end_date,\n  };\n}\n\nfunction transformEquipmentAssignment(assignment: any): EquipmentAssignment {\n  return {\n    id: assignment.id,\n    equipment_id: assignment.equipment_id,\n    equipment_name: assignment.equipment_name,\n    project_id: assignment.project_id,\n    phase_id: assignment.phase_id,\n    subphase_id: assignment.subphase_id,\n    start_date: assignment.start_date,\n    end_date: assignment.end_date,\n  };\n}\n\n/**\n * Load all projects with full nested data\n * This is the main data loading function used at app startup\n */\nexport async function loadAllProjects(): Promise<Project[]> {\n  const projects = await getProjects('all');\n  \n  if (!projects || projects.length === 0) {\n    return [];\n  }\n  \n  // Load full details for each project in parallel\n  const fullProjects = await Promise.all(\n    projects.map(p => getProject(p.id))\n  );\n  \n  // Transform to ensure correct property names\n  return fullProjects.map(transformProject);\n}\n","/**\n * Sites API endpoints\n */\n\nimport { apiGet, apiPost, apiPut, apiDelete } from '../client';\nimport type { Site, BankHoliday, CompanyEvent } from '@/types';\n\n// =============================================================================\n// SITES\n// =============================================================================\n\n/**\n * Get all sites\n */\nexport async function getSites(): Promise<Site[]> {\n  return apiGet<Site[]>('/api/sites');\n}\n\n/**\n * Get a single site\n */\nexport async function getSite(id: number): Promise<Site> {\n  return apiGet<Site>(`/api/sites/${id}`);\n}\n\n/**\n * Create a new site\n */\nexport async function createSite(data: Omit<Site, 'id' | 'created_at'>): Promise<Site> {\n  return apiPost<Site>('/api/sites', data);\n}\n\n/**\n * Update a site\n */\nexport async function updateSite(id: number, data: Partial<Omit<Site, 'id'>>): Promise<Site> {\n  return apiPut<Site>(`/api/sites/${id}`, data);\n}\n\n/**\n * Delete a site\n */\nexport async function deleteSite(id: number): Promise<void> {\n  await apiDelete(`/api/sites/${id}`);\n}\n\n// =============================================================================\n// BANK HOLIDAYS\n// =============================================================================\n\n/**\n * Get bank holidays for a site\n * @param siteId - Site ID\n * @param year - Optional year filter\n */\nexport async function getBankHolidays(siteId: number, year?: number): Promise<BankHoliday[]> {\n  const url = year \n    ? `/api/sites/${siteId}/holidays?year=${year}`\n    : `/api/sites/${siteId}/holidays`;\n  return apiGet<BankHoliday[]>(url);\n}\n\n/**\n * Add a custom bank holiday\n */\nexport async function addCustomHoliday(\n  siteId: number, \n  data: { date: string; end_date?: string; name: string }\n): Promise<BankHoliday> {\n  return apiPost<BankHoliday>(`/api/sites/${siteId}/holidays`, data);\n}\n\n// Alias for consistent naming\nexport const createBankHoliday = addCustomHoliday;\n\n/**\n * Delete a custom bank holiday\n */\nexport async function deleteCustomHoliday(siteId: number, holidayId: number): Promise<void> {\n  await apiDelete(`/api/sites/${siteId}/holidays/${holidayId}`);\n}\n\n// Alias for consistent naming\nexport const deleteBankHoliday = deleteCustomHoliday;\n\n/**\n * Refresh bank holidays from external source (Nager.Date API)\n */\nexport async function refreshBankHolidays(siteId: number): Promise<BankHoliday[]> {\n  return apiPost<BankHoliday[]>(`/api/sites/${siteId}/holidays/refresh`);\n}\n\n// =============================================================================\n// COMPANY EVENTS\n// =============================================================================\n\n/**\n * Get company events for a site\n */\nexport async function getCompanyEvents(siteId: number): Promise<CompanyEvent[]> {\n  return apiGet<CompanyEvent[]>(`/api/sites/${siteId}/events`);\n}\n\n/**\n * Create a company event\n */\nexport async function createCompanyEvent(\n  siteId: number,\n  data: { date: string; end_date?: string; name: string }\n): Promise<CompanyEvent> {\n  return apiPost<CompanyEvent>(`/api/sites/${siteId}/events`, data);\n}\n\n/**\n * Delete a company event\n */\nexport async function deleteCompanyEvent(siteId: number, eventId: number): Promise<void> {\n  await apiDelete(`/api/sites/${siteId}/events/${eventId}`);\n}\n\n// =============================================================================\n// HELPERS\n// =============================================================================\n\n/**\n * Build a Set of holiday date strings for quick lookup\n * Expands date ranges into individual dates\n */\nexport function buildHolidayDateSet(holidays: BankHoliday[]): Set<string> {\n  const dates = new Set<string>();\n  \n  holidays.forEach(holiday => {\n    // Normalize date strings to YYYY-MM-DD (handles ISO strings with time)\n    const startStr = holiday.date.substring(0, 10);\n    const endStr = (holiday.end_date || holiday.date).substring(0, 10);\n    \n    // Parse as local dates to avoid timezone issues\n    const [startYear, startMonth, startDay] = startStr.split('-').map(Number);\n    const [endYear, endMonth, endDay] = endStr.split('-').map(Number);\n    \n    const startDate = new Date(startYear, startMonth - 1, startDay);\n    const endDate = new Date(endYear, endMonth - 1, endDay);\n    \n    // Add all dates in the range\n    const current = new Date(startDate);\n    while (current <= endDate) {\n      const dateStr = formatDateForLookup(current);\n      dates.add(dateStr);\n      current.setDate(current.getDate() + 1);\n    }\n  });\n  \n  return dates;\n}\n\n/**\n * Build a Set of company event date strings for quick lookup\n */\nexport function buildEventDateSet(events: CompanyEvent[]): Set<string> {\n  const dates = new Set<string>();\n  \n  events.forEach(event => {\n    // Normalize date strings to YYYY-MM-DD (handles ISO strings with time)\n    const startStr = event.date.substring(0, 10);\n    const endStr = (event.end_date || event.date).substring(0, 10);\n    \n    // Parse as local dates to avoid timezone issues\n    const [startYear, startMonth, startDay] = startStr.split('-').map(Number);\n    const [endYear, endMonth, endDay] = endStr.split('-').map(Number);\n    \n    const startDate = new Date(startYear, startMonth - 1, startDay);\n    const endDate = new Date(endYear, endMonth - 1, endDay);\n    \n    // Add all dates in the range\n    const current = new Date(startDate);\n    while (current <= endDate) {\n      const dateStr = formatDateForLookup(current);\n      dates.add(dateStr);\n      current.setDate(current.getDate() + 1);\n    }\n  });\n  \n  return dates;\n}\n\n/**\n * Format a date as YYYY-MM-DD for holiday lookup\n */\nfunction formatDateForLookup(date: Date): string {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n","/**\n * Staff API endpoints\n */\n\nimport { apiGet, apiPost, apiPut, apiDelete } from '../client';\nimport type { Staff } from '@/types';\n\n/**\n * Get all staff members\n * @param includeAllSites - If true, return staff from all sites\n */\nexport async function getStaff(includeAllSites = false): Promise<Staff[]> {\n  const url = includeAllSites \n    ? '/api/staff?includeAllSites=true'\n    : '/api/staff';\n  return apiGet<Staff[]>(url);\n}\n\n/**\n * Get a single staff member\n */\nexport async function getStaffMember(id: number): Promise<Staff> {\n  return apiGet<Staff>(`/api/staff/${id}`);\n}\n\n/**\n * Create a new staff member\n */\nexport async function createStaff(data: Omit<Staff, 'id'>): Promise<Staff> {\n  return apiPost<Staff>('/api/staff', data);\n}\n\n/**\n * Update a staff member\n */\nexport async function updateStaff(id: number, data: Partial<Omit<Staff, 'id'>>): Promise<Staff> {\n  return apiPut<Staff>(`/api/staff/${id}`, data);\n}\n\n/**\n * Delete a staff member\n */\nexport async function deleteStaff(id: number): Promise<void> {\n  await apiDelete(`/api/staff/${id}`);\n}\n","/**\n * Equipment API endpoints\n */\n\nimport { apiGet, apiPost, apiPut, apiDelete } from '../client';\nimport type { Equipment } from '@/types';\n\n/**\n * Get all equipment\n * @param includeAllSites - If true, return equipment from all sites\n */\nexport async function getEquipment(includeAllSites = false): Promise<Equipment[]> {\n  const url = includeAllSites \n    ? '/api/equipment?includeAllSites=true'\n    : '/api/equipment';\n  return apiGet<Equipment[]>(url);\n}\n\n/**\n * Get a single equipment item\n */\nexport async function getEquipmentItem(id: number): Promise<Equipment> {\n  return apiGet<Equipment>(`/api/equipment/${id}`);\n}\n\n/**\n * Create new equipment\n */\nexport async function createEquipment(data: Omit<Equipment, 'id'>): Promise<Equipment> {\n  return apiPost<Equipment>('/api/equipment', data);\n}\n\n/**\n * Update equipment\n */\nexport async function updateEquipment(id: number, data: Partial<Omit<Equipment, 'id'>>): Promise<Equipment> {\n  return apiPut<Equipment>(`/api/equipment/${id}`, data);\n}\n\n/**\n * Delete equipment\n */\nexport async function deleteEquipment(id: number): Promise<void> {\n  await apiDelete(`/api/equipment/${id}`);\n}\n","/**\n * Vacations API endpoints\n */\n\nimport { apiGet, apiPost, apiPut, apiDelete } from '../client';\nimport type { Vacation, CreateVacationRequest } from '@/types';\n\n/**\n * Get all vacations\n */\nexport async function getVacations(): Promise<Vacation[]> {\n  return apiGet<Vacation[]>('/api/vacations');\n}\n\n/**\n * Get vacations for a specific staff member\n */\nexport async function getStaffVacations(staffId: number): Promise<Vacation[]> {\n  return apiGet<Vacation[]>(`/api/vacations?staff_id=${staffId}`);\n}\n\n/**\n * Create a new vacation\n */\nexport async function createVacation(data: CreateVacationRequest): Promise<Vacation> {\n  return apiPost<Vacation>('/api/vacations', data);\n}\n\n/**\n * Update a vacation\n */\nexport async function updateVacation(id: number, data: Partial<CreateVacationRequest>): Promise<Vacation> {\n  return apiPut<Vacation>(`/api/vacations/${id}`, data);\n}\n\n/**\n * Delete a vacation\n */\nexport async function deleteVacation(id: number): Promise<void> {\n  await apiDelete(`/api/vacations/${id}`);\n}\n","/**\n * Users API endpoints\n */\n\nimport { apiGet, apiPost, apiPut, apiDelete } from '../client';\nimport type { User, CreateUserRequest, UpdateUserRequest } from '@/types';\n\n/**\n * Get all users\n * @param includeDisabled - If true, include disabled users\n */\nexport async function getUsers(includeDisabled = false): Promise<User[]> {\n  const url = includeDisabled \n    ? '/api/users?includeDisabled=true'\n    : '/api/users';\n  return apiGet<User[]>(url);\n}\n\n/**\n * Get a single user\n */\nexport async function getUser(id: number): Promise<User> {\n  return apiGet<User>(`/api/users/${id}`);\n}\n\n/**\n * Create a new user\n */\nexport async function createUser(data: CreateUserRequest): Promise<User> {\n  return apiPost<User>('/api/users', data);\n}\n\n/**\n * Update a user\n */\nexport async function updateUser(id: number, data: UpdateUserRequest): Promise<User> {\n  return apiPut<User>(`/api/users/${id}`, data);\n}\n\n/**\n * Delete a user\n */\nexport async function deleteUser(id: number): Promise<void> {\n  await apiDelete(`/api/users/${id}`);\n}\n","/**\n * Settings API endpoints\n */\n\nimport { apiGet, apiPut, apiPost, apiDelete } from '../client';\nimport type { PredefinedPhase, SSOConfig, InstanceSettings } from '@/types';\n\n// =============================================================================\n// INSTANCE SETTINGS\n// =============================================================================\n\n/**\n * Get a specific setting value\n */\nexport async function getSetting(key: string): Promise<{ value: string | null }> {\n  return apiGet<{ value: string | null }>(`/api/settings/${key}`);\n}\n\n/**\n * Update a setting value\n */\nexport async function updateSetting(key: string, value: string): Promise<{ value: string }> {\n  return apiPut<{ value: string }>(`/api/settings/${key}`, { value });\n}\n\n/**\n * Get instance title\n */\nexport async function getInstanceTitle(): Promise<string> {\n  try {\n    const response = await getSetting('instance_title');\n    return response.value || 'R&D Planning';\n  } catch {\n    return 'R&D Planning';\n  }\n}\n\n/**\n * Get all instance settings\n * Uses the GET /api/settings endpoint that returns all settings as key-value\n */\nexport async function getInstanceSettings(): Promise<InstanceSettings> {\n  const allSettings = await apiGet<Record<string, string | null>>('/api/settings');\n  return {\n    instance_title: allSettings.instance_title || undefined,\n    instance_name: allSettings.instance_name || undefined,\n  };\n}\n\n/**\n * Update instance title\n */\nexport async function updateInstanceTitle(title: string): Promise<void> {\n  await updateSetting('instance_title', title);\n}\n\n// =============================================================================\n// PREDEFINED PHASES\n// =============================================================================\n\n/**\n * Get all predefined phases\n */\nexport async function getPredefinedPhases(): Promise<PredefinedPhase[]> {\n  return apiGet<PredefinedPhase[]>('/api/predefined-phases');\n}\n\n/**\n * Create a predefined phase\n */\nexport async function createPredefinedPhase(\n  data: Omit<PredefinedPhase, 'id'>\n): Promise<PredefinedPhase> {\n  return apiPost<PredefinedPhase>('/api/predefined-phases', data);\n}\n\n/**\n * Update a predefined phase\n */\nexport async function updatePredefinedPhase(\n  id: number, \n  data: Partial<Omit<PredefinedPhase, 'id'>>\n): Promise<PredefinedPhase> {\n  return apiPut<PredefinedPhase>(`/api/predefined-phases/${id}`, data);\n}\n\n/**\n * Delete a predefined phase\n */\nexport async function deletePredefinedPhase(id: number): Promise<void> {\n  await apiDelete(`/api/predefined-phases/${id}`);\n}\n\n// =============================================================================\n// SSO CONFIGURATION\n// =============================================================================\n\n/**\n * Get SSO configuration\n */\nexport async function getSSOConfig(): Promise<SSOConfig> {\n  return apiGet<SSOConfig>('/api/settings/sso');\n}\n\n/**\n * Update SSO configuration\n */\nexport async function updateSSOConfig(config: Partial<SSOConfig>): Promise<SSOConfig> {\n  return apiPut<SSOConfig>('/api/settings/sso', config);\n}\n","/**\n * Custom Columns API endpoints\n */\n\nimport { apiGet, apiPost, apiPut, apiDelete, apiRequest } from '../client';\n\n// Types\nexport interface CustomColumn {\n  id: number;\n  name: string;\n  column_type: 'text' | 'boolean' | 'list';\n  list_options: string[] | null;\n  site_id: number | null;  // null = global (all sites)\n  display_order: number;\n  width: number;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface CustomColumnCreate {\n  name: string;\n  column_type: 'text' | 'boolean' | 'list';\n  list_options?: string[];\n  site_id?: number | null;  // null = global (all sites)\n  width?: number;\n}\n\nexport interface CustomColumnUpdate {\n  name?: string;\n  list_options?: string[];\n  width?: number;\n  display_order?: number;\n}\n\nexport interface CustomColumnValue {\n  id: number;\n  custom_column_id: number;\n  entity_type: 'project' | 'phase' | 'subphase';\n  entity_id: number;\n  value: string | null;\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface CustomColumnValueCreate {\n  custom_column_id: number;\n  entity_type: 'project' | 'phase' | 'subphase';\n  entity_id: number;\n  value: string | null;\n}\n\nexport interface CustomColumnsWithValues {\n  columns: CustomColumn[];\n  values: Record<string, string>; // key: \"{column_id}-{entity_type}-{entity_id}\"\n}\n\n// API Functions\n\n/**\n * Get all custom columns for a site (includes global columns)\n */\nexport async function getCustomColumns(siteId?: number): Promise<CustomColumn[]> {\n  const params = siteId ? `?site_id=${siteId}` : '';\n  return apiGet(`/api/custom-columns${params}`);\n}\n\n/**\n * Get all custom columns with their values for a site\n * This is the main endpoint for initial data loading\n */\nexport async function getCustomColumnsWithValues(siteId: number): Promise<CustomColumnsWithValues> {\n  return apiGet(`/api/custom-columns/with-values?site_id=${siteId}`);\n}\n\n/**\n * Create a new custom column\n */\nexport async function createCustomColumn(data: CustomColumnCreate): Promise<CustomColumn> {\n  return apiPost('/api/custom-columns', data);\n}\n\n/**\n * Update a custom column\n */\nexport async function updateCustomColumn(columnId: number, data: CustomColumnUpdate): Promise<CustomColumn> {\n  return apiRequest(`/api/custom-columns/${columnId}`, { method: 'PATCH', body: data });\n}\n\n/**\n * Delete a custom column\n */\nexport async function deleteCustomColumn(columnId: number): Promise<{ success: boolean; message: string }> {\n  return apiDelete(`/api/custom-columns/${columnId}`);\n}\n\n/**\n * Reorder custom columns\n */\nexport async function reorderCustomColumns(columnOrder: number[]): Promise<CustomColumn[]> {\n  return apiRequest('/api/custom-columns/reorder', { method: 'PATCH', body: { column_order: columnOrder } });\n}\n\n/**\n * Set a custom column value (upsert)\n */\nexport async function setCustomColumnValue(data: CustomColumnValueCreate): Promise<CustomColumnValue> {\n  return apiPut('/api/custom-columns/values', data);\n}\n\n/**\n * Batch update custom column values (for drag-fill)\n */\nexport async function setCustomColumnValuesBatch(updates: CustomColumnValueCreate[]): Promise<CustomColumnValue[]> {\n  return apiPut('/api/custom-columns/values/batch', { updates });\n}\n\n/**\n * Delete a custom column value\n */\nexport async function deleteCustomColumnValue(\n  columnId: number,\n  entityType: 'project' | 'phase' | 'subphase',\n  entityId: number\n): Promise<{ success: boolean; message: string }> {\n  return apiDelete(`/api/custom-columns/values/${columnId}/${entityType}/${entityId}`);\n}\n\n// Helper functions\n\n/**\n * Generate a key for the values map\n */\nexport function getValueKey(columnId: number, entityType: string, entityId: number): string {\n  return `${columnId}-${entityType}-${entityId}`;\n}\n\n/**\n * Parse a boolean value from string\n */\nexport function parseBooleanValue(value: string | null): boolean {\n  return value?.toLowerCase() === 'true';\n}\n\n/**\n * Convert boolean to string for storage\n */\nexport function booleanToString(value: boolean): string {\n  return value ? 'true' : 'false';\n}\n","/**\n * Skills API endpoints\n */\n\nimport { apiGet, apiPost, apiPut, apiDelete } from '../client';\nimport type { Skill } from '@/types';\n\nexport interface SkillCreate {\n  name: string;\n  description?: string;\n  color?: string;\n}\n\nexport interface SkillUpdate {\n  name?: string;\n  description?: string;\n  color?: string;\n}\n\nexport interface UserSkillAssignment {\n  skill_ids: number[];\n}\n\nexport const skillsApi = {\n  // Get all skills\n  getAll: () => \n    apiGet<Skill[]>('/api/skills'),\n\n  // Get single skill\n  get: (id: number) => \n    apiGet<Skill>(`/api/skills/${id}`),\n\n  // Create skill\n  create: (data: SkillCreate) => \n    apiPost<Skill>('/api/skills', data),\n\n  // Update skill\n  update: (id: number, data: SkillUpdate) => \n    apiPut<Skill>(`/api/skills/${id}`, data),\n\n  // Delete skill\n  delete: (id: number) => \n    apiDelete<void>(`/api/skills/${id}`),\n\n  // Get user's skills\n  getUserSkills: (userId: number) => \n    apiGet<Skill[]>(`/api/skills/user/${userId}`),\n\n  // Update user's skills (replace all)\n  updateUserSkills: (userId: number, skillIds: number[]) => \n    apiPut<Skill[]>(`/api/skills/user/${userId}`, { skill_ids: skillIds }),\n\n  // Add single skill to user\n  addUserSkill: (userId: number, skillId: number) => \n    apiPost<Skill[]>(`/api/skills/user/${userId}/${skillId}`),\n\n  // Remove single skill from user\n  removeUserSkill: (userId: number, skillId: number) => \n    apiDelete<Skill[]>(`/api/skills/user/${userId}/${skillId}`),\n};\n","/**\n * Admin API Endpoints\n * Multi-tenant administration\n */\n\nimport { apiGet, apiPost, apiPut, apiDelete, apiPatch } from '../client';\n\n// Types\nexport interface AdminUser {\n  id: number;\n  email: string;\n  name: string;\n  role: 'admin' | 'superadmin';\n}\n\n// Organization Types\nexport interface Organization {\n  id: string;\n  name: string;\n  slug: string;\n  description?: string;\n  created_at: string;\n  updated_at?: string;\n  tenant_count: number;\n  sso_enabled: boolean;\n}\n\nexport interface OrganizationSSOConfig {\n  enabled: boolean;\n  configured: boolean;\n  provider: string;\n  entraTenantId?: string;\n  clientId?: string;\n  redirectUri?: string;\n  autoCreateUsers: boolean;\n  defaultUserRole: string;\n}\n\nexport interface TenantSummary {\n  id: string;\n  name: string;\n  slug: string;\n  status: string;\n  required_group_ids: string[];\n  group_membership_mode: 'any' | 'all';\n}\n\nexport interface OrganizationDetail extends Omit<Organization, 'tenant_count' | 'sso_enabled'> {\n  sso_config?: OrganizationSSOConfig;\n  tenants: TenantSummary[];\n}\n\nexport interface OrganizationCreateRequest {\n  name: string;\n  slug: string;\n  description?: string;\n}\n\nexport interface OrganizationSSOConfigUpdate {\n  enabled?: boolean;\n  entraTenantId?: string;\n  clientId?: string;\n  clientSecret?: string;\n  redirectUri?: string;\n  autoCreateUsers?: boolean;\n  defaultUserRole?: string;\n}\n\nexport interface TenantGroupAccessUpdate {\n  organizationId?: string | null;\n  requiredGroupIds?: string[];\n  groupMembershipMode?: 'any' | 'all';\n}\n\nexport interface AdminLoginResponse {\n  success: boolean;\n  user: AdminUser;\n  must_change_password?: boolean;\n}\n\nexport interface AdminMeResponse {\n  user: AdminUser | null;\n}\n\nexport interface Tenant {\n  id: string;\n  name: string;\n  slug: string;\n  company_name?: string;\n  admin_email: string;\n  status: 'pending' | 'active' | 'suspended' | 'archived';\n  plan: string;\n  max_users: number;\n  max_projects: number;\n  database_name: string;\n  database_user: string;\n  database_status?: {\n    exists: boolean;\n    accessible: boolean;\n  };\n  // Organization fields\n  organization_id?: string;\n  organization_name?: string;\n  required_group_ids?: string[];\n  group_membership_mode?: 'any' | 'all';\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface TenantCreateRequest {\n  name: string;\n  slug: string;\n  company_name?: string;\n  admin_email: string;\n  plan?: string;\n  max_users?: number;\n  max_projects?: number;\n}\n\nexport interface TenantProvisionResponse {\n  success: boolean;\n  adminEmail: string;\n  adminPassword: string;\n}\n\nexport interface SystemStats {\n  tenants: {\n    total: number;\n    active: number;\n    suspended: number;\n    pending: number;\n    archived: number;\n  };\n  connections: {\n    active_pools: number;\n    total_connections: number;\n  };\n  system: {\n    uptime: number;\n    memory_mb: number;\n    python_version: string;\n  };\n}\n\nexport interface AdminUserListItem {\n  id: number;\n  email: string;\n  name: string;\n  role: string;\n  active: boolean;\n  created_at: string;\n  last_login: string | null;\n}\n\nexport interface AuditLogEntry {\n  id: string;\n  action: string;\n  details: Record<string, unknown>;\n  actor: string | null;\n  created_at: string;\n}\n\n// Admin Authentication\nexport async function adminLogin(email: string, password: string): Promise<AdminLoginResponse> {\n  return apiPost<AdminLoginResponse>('/api/admin/auth/login', { email, password });\n}\n\nexport async function adminLogout(): Promise<void> {\n  await apiPost('/api/admin/auth/logout', {});\n}\n\nexport async function changeAdminPassword(currentPassword: string, newPassword: string): Promise<{ success: boolean }> {\n  return apiPost('/api/admin/auth/change-password', {\n    current_password: currentPassword,\n    new_password: newPassword,\n  });\n}\n\nexport async function getAdminMe(): Promise<AdminMeResponse> {\n  return apiGet<AdminMeResponse>('/api/admin/auth/me');\n}\n\n// Tenant Management\nexport async function getTenants(): Promise<Tenant[]> {\n  return apiGet<Tenant[]>('/api/admin/tenants');\n}\n\nexport async function getTenant(id: string): Promise<Tenant> {\n  return apiGet<Tenant>(`/api/admin/tenants/${id}`);\n}\n\nexport async function createTenant(data: TenantCreateRequest): Promise<Tenant> {\n  return apiPost<Tenant>('/api/admin/tenants', data);\n}\n\nexport async function updateTenant(id: string, data: Partial<TenantCreateRequest>): Promise<Tenant> {\n  return apiPut<Tenant>(`/api/admin/tenants/${id}`, data);\n}\n\nexport async function updateTenantStatus(id: string, status: Tenant['status']): Promise<Tenant> {\n  return apiPut<Tenant>(`/api/admin/tenants/${id}/status`, { status });\n}\n\nexport async function deleteTenant(id: string, deleteDatabase: boolean = false): Promise<void> {\n  await apiDelete(`/api/admin/tenants/${id}?delete_database=${deleteDatabase}`);\n}\n\nexport async function provisionTenant(id: string): Promise<TenantProvisionResponse> {\n  return apiPost<TenantProvisionResponse>(`/api/admin/tenants/${id}/provision`, {});\n}\n\nexport async function deprovisionTenant(id: string): Promise<void> {\n  await apiPost(`/api/admin/tenants/${id}/deprovision`, {});\n}\n\nexport async function resetTenantAdminPassword(id: string): Promise<{ email: string; password: string }> {\n  return apiPost(`/api/admin/tenants/${id}/reset-admin-password`, {});\n}\n\nexport async function getTenantAuditLog(id: string, limit = 50): Promise<AuditLogEntry[]> {\n  return apiGet<AuditLogEntry[]>(`/api/admin/tenants/${id}/audit?limit=${limit}`);\n}\n\n// System Stats\nexport async function getSystemStats(): Promise<SystemStats> {\n  return apiGet<SystemStats>('/api/admin/stats');\n}\n\n// Admin User Management (Superadmin only)\nexport async function getAdminUsers(): Promise<AdminUserListItem[]> {\n  return apiGet<AdminUserListItem[]>('/api/admin/users');\n}\n\nexport async function createAdminUser(data: {\n  email: string;\n  password: string;\n  name: string;\n  role: string;\n}): Promise<AdminUserListItem> {\n  return apiPost<AdminUserListItem>('/api/admin/users', data);\n}\n\nexport async function updateAdminUser(\n  id: number,\n  data: { name?: string; role?: string; active?: boolean; password?: string }\n): Promise<AdminUserListItem> {\n  return apiPut<AdminUserListItem>(`/api/admin/users/${id}`, data);\n}\n\nexport async function deleteAdminUser(id: number): Promise<void> {\n  await apiDelete(`/api/admin/users/${id}`);\n}\n\n// Organization Management\nexport async function getOrganizations(): Promise<Organization[]> {\n  return apiGet<Organization[]>('/api/admin/organizations');\n}\n\nexport async function getOrganization(id: string): Promise<OrganizationDetail> {\n  return apiGet<OrganizationDetail>(`/api/admin/organizations/${id}`);\n}\n\nexport async function createOrganization(data: OrganizationCreateRequest): Promise<Organization> {\n  return apiPost<Organization>('/api/admin/organizations', data);\n}\n\nexport async function updateOrganization(id: string, data: Partial<OrganizationCreateRequest>): Promise<Organization> {\n  return apiPut<Organization>(`/api/admin/organizations/${id}`, data);\n}\n\nexport async function deleteOrganization(id: string): Promise<void> {\n  await apiDelete(`/api/admin/organizations/${id}`);\n}\n\n// Organization SSO Configuration\nexport async function getOrganizationSSOConfig(orgId: string): Promise<OrganizationSSOConfig> {\n  return apiGet<OrganizationSSOConfig>(`/api/admin/organizations/${orgId}/sso`);\n}\n\nexport async function updateOrganizationSSOConfig(orgId: string, data: OrganizationSSOConfigUpdate): Promise<OrganizationSSOConfig> {\n  return apiPut<OrganizationSSOConfig>(`/api/admin/organizations/${orgId}/sso`, data);\n}\n\nexport async function deleteOrganizationSSOConfig(orgId: string): Promise<void> {\n  await apiDelete(`/api/admin/organizations/${orgId}/sso`);\n}\n\n// Tenant Organization Assignment\nexport async function addTenantToOrganization(orgId: string, tenantId: string, data?: TenantGroupAccessUpdate): Promise<void> {\n  await apiPut(`/api/admin/organizations/${orgId}/tenants/${tenantId}`, data || {});\n}\n\nexport async function removeTenantFromOrganization(orgId: string, tenantId: string): Promise<void> {\n  await apiDelete(`/api/admin/organizations/${orgId}/tenants/${tenantId}`);\n}\n\nexport async function updateTenantGroupAccess(tenantId: string, data: TenantGroupAccessUpdate): Promise<void> {\n  await apiPatch(`/api/admin/organizations/tenants/${tenantId}/groups`, data);\n}\n","/**\n * useAuth Hook\n * Manages authentication state and operations\n */\n\nimport { useEffect, useCallback } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { checkAuth, login as apiLogin, logout as apiLogout } from '@/api';\nimport type { User } from '@/types';\n\ninterface UseAuthReturn {\n  isLoading: boolean;\n  isAuthenticated: boolean;\n  user: User | null;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => Promise<void>;\n}\n\nexport function useAuth(): UseAuthReturn {\n  const currentUser = useAppStore((s) => s.currentUser);\n  const isAuthChecking = useAppStore((s) => s.isAuthChecking);\n  const isAuthenticated = useAppStore((s) => s.isAuthenticated);\n  const setCurrentUser = useAppStore((s) => s.setCurrentUser);\n  const setAuthChecking = useAppStore((s) => s.setAuthChecking);\n  const setAuthenticated = useAppStore((s) => s.setAuthenticated);\n  const reset = useAppStore((s) => s.reset);\n\n  // Check authentication status on mount\n  useEffect(() => {\n    const checkAuthentication = async () => {\n      try {\n        const response = await checkAuth();\n        if (response.user) {\n          setCurrentUser(response.user);\n          setAuthenticated(true);\n        } else {\n          setAuthenticated(false);\n        }\n      } catch (err) {\n        console.error('Auth check failed:', err);\n        setAuthenticated(false);\n      } finally {\n        setAuthChecking(false);\n      }\n    };\n\n    // Only check if we haven't finished checking yet\n    if (isAuthChecking) {\n      checkAuthentication();\n    }\n  }, [isAuthChecking, setCurrentUser, setAuthenticated, setAuthChecking]);\n\n  // Login function\n  const login = useCallback(async (email: string, password: string) => {\n    try {\n      const response = await apiLogin(email, password);\n      setCurrentUser(response.user);\n      setAuthenticated(true);\n    } catch (err) {\n      const message = err instanceof Error ? err.message : 'Login failed';\n      throw new Error(message);\n    }\n  }, [setCurrentUser, setAuthenticated]);\n\n  // Logout function\n  const logout = useCallback(async () => {\n    try {\n      await apiLogout();\n    } catch (err) {\n      console.error('Logout error:', err);\n    } finally {\n      setCurrentUser(null);\n      setAuthenticated(false);\n      reset();\n    }\n  }, [setCurrentUser, setAuthenticated, reset]);\n\n  return {\n    isLoading: isAuthChecking,\n    isAuthenticated,\n    user: currentUser,\n    login,\n    logout,\n  };\n}\n","/**\n * useDataLoader Hook\n * Handles loading all application data after authentication\n */\n\nimport { useState, useCallback } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { \n  getSites, \n  getStaff, \n  getEquipment, \n  getVacations, \n  loadAllProjects,\n  getBankHolidays,\n  buildHolidayDateSet,\n  getCompanyEvents,\n  buildEventDateSet,\n  getInstanceSettings,\n  getCustomColumnsWithValues,\n  skillsApi,\n} from '@/api';\n\ninterface UseDataLoaderReturn {\n  isLoading: boolean;\n  error: string | null;\n  loadAllData: () => Promise<void>;\n  refreshProjects: () => Promise<void>;\n  refreshSiteData: (siteId: number) => Promise<void>;\n  refreshCustomColumns: (siteId: number) => Promise<void>;\n  refreshStaff: () => Promise<void>;\n}\n\nexport function useDataLoader(): UseDataLoaderReturn {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  const {\n    setSites,\n    setProjects,\n    setStaff,\n    setEquipment,\n    setVacations,\n    setBankHolidays,\n    setCompanyEvents,\n    setCurrentSite,\n    setInstanceSettings,\n    setCustomColumns,\n    setCustomColumnValues,\n    setSkills,\n  } = useAppStore();\n  \n  // Get persisted site ID from store (restored by Zustand persist)\n  const persistedSiteId = useAppStore((s) => s._persistedSiteId);\n\n  /**\n   * Load all initial data\n   */\n  const loadAllData = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      console.log('[DataLoader] Loading all data...');\n\n      // Load core data in parallel\n      const [sites, staff, equipment, vacations, instanceSettings, skills] = await Promise.all([\n        getSites(),\n        getStaff(true), // Include all sites\n        getEquipment(true), // Include all sites\n        getVacations(),\n        getInstanceSettings().catch(() => null), // Don't fail if settings not available\n        skillsApi.getAll().catch(() => []), // Don't fail if skills not available\n      ]);\n\n      console.log('[DataLoader] Loaded:', {\n        sites: sites.length,\n        staff: staff.length,\n        equipment: equipment.length,\n        vacations: vacations.length,\n        instanceSettings: instanceSettings ? 'yes' : 'no',\n        skills: skills.length,\n      });\n\n      // Update store\n      setSites(sites);\n      setStaff(staff);\n      setEquipment(equipment);\n      setVacations(vacations);\n      setSkills(skills);\n      if (instanceSettings) {\n        setInstanceSettings(instanceSettings);\n      }\n\n      // Restore current site from persisted storage or use first site\n      if (sites.length > 0) {\n        // Sort sites by ID for consistent ordering\n        const sortedSites = [...sites].sort((a, b) => a.id - b.id);\n        \n        // Check for persisted site ID from store (restored by Zustand persist)\n        let targetSite = sortedSites[0];\n        console.log('[DataLoader] Default site (first by ID):', targetSite.name, 'id:', targetSite.id);\n        console.log('[DataLoader] Persisted site ID from store:', persistedSiteId);\n        \n        if (persistedSiteId != null) {\n          const foundSite = sortedSites.find(s => s.id === persistedSiteId);\n          if (foundSite) {\n            targetSite = foundSite;\n            console.log('[DataLoader]  Restored persisted site:', targetSite.name, 'id:', targetSite.id);\n          } else {\n            console.log('[DataLoader]  Site ID', persistedSiteId, 'not found in available sites');\n          }\n        } else {\n          console.log('[DataLoader] No persistedSiteId in store');\n        }\n        \n        console.log('[DataLoader] Final selected site:', targetSite.name, 'id:', targetSite.id);\n        setCurrentSite(targetSite);\n        \n        // Load bank holidays for restored site\n        const holidays = await getBankHolidays(targetSite.id);\n        const holidayDates = buildHolidayDateSet(holidays);\n        setBankHolidays(holidays, holidayDates);\n        \n        // Load company events for restored site\n        const events = await getCompanyEvents(targetSite.id);\n        const eventDates = buildEventDateSet(events);\n        setCompanyEvents(events, eventDates);\n        \n        // Load custom columns and values for restored site\n        try {\n          const customColumnsData = await getCustomColumnsWithValues(targetSite.id);\n          setCustomColumns(customColumnsData.columns);\n          setCustomColumnValues(customColumnsData.values);\n          console.log('[DataLoader] Loaded custom columns:', customColumnsData.columns.length);\n        } catch (err) {\n          console.warn('[DataLoader] Failed to load custom columns:', err);\n        }\n      }\n\n      // Load projects with full details\n      const projects = await loadAllProjects();\n      setProjects(projects);\n      console.log('[DataLoader] Loaded projects:', projects.length);\n\n    } catch (err) {\n      const message = err instanceof Error ? err.message : 'Failed to load data';\n      console.error('[DataLoader] Error:', message);\n      setError(message);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [\n    setSites,\n    setProjects,\n    setStaff,\n    setEquipment,\n    setVacations,\n    setBankHolidays,\n    setCompanyEvents,\n    setCurrentSite,\n    setInstanceSettings,\n    setCustomColumns,\n    setCustomColumnValues,\n    setSkills,\n  ]);\n\n  /**\n   * Refresh only projects data\n   */\n  const refreshProjects = useCallback(async () => {\n    try {\n      const projects = await loadAllProjects();\n      setProjects(projects);\n    } catch (err) {\n      console.error('[DataLoader] Failed to refresh projects:', err);\n    }\n  }, [setProjects]);\n\n  /**\n   * Refresh data for a specific site (bank holidays and company events)\n   */\n  const refreshSiteData = useCallback(async (siteId: number) => {\n    try {\n      const holidays = await getBankHolidays(siteId);\n      const holidayDates = buildHolidayDateSet(holidays);\n      setBankHolidays(holidays, holidayDates);\n      \n      const events = await getCompanyEvents(siteId);\n      const eventDates = buildEventDateSet(events);\n      setCompanyEvents(events, eventDates);\n    } catch (err) {\n      console.error('[DataLoader] Failed to refresh site data:', err);\n    }\n  }, [setBankHolidays, setCompanyEvents]);\n\n  /**\n   * Refresh custom columns for a specific site\n   */\n  const refreshCustomColumns = useCallback(async (siteId: number) => {\n    try {\n      const customColumnsData = await getCustomColumnsWithValues(siteId);\n      setCustomColumns(customColumnsData.columns);\n      setCustomColumnValues(customColumnsData.values);\n    } catch (err) {\n      console.error('[DataLoader] Failed to refresh custom columns:', err);\n    }\n  }, [setCustomColumns, setCustomColumnValues]);\n\n  /**\n   * Refresh staff data (including their skills)\n   */\n  const refreshStaff = useCallback(async () => {\n    try {\n      const staff = await getStaff(true);\n      setStaff(staff);\n    } catch (err) {\n      console.error('[DataLoader] Failed to refresh staff:', err);\n    }\n  }, [setStaff]);\n\n  return {\n    isLoading,\n    error,\n    loadAllData,\n    refreshProjects,\n    refreshSiteData,\n    refreshCustomColumns,\n    refreshStaff,\n  };\n}\n","/**\n * Loading Screen\n * Displayed while checking authentication or loading data\n */\n\nimport styles from './LoadingScreen.module.css';\n\ninterface LoadingScreenProps {\n  message?: string;\n}\n\nexport function LoadingScreen({ message = 'Loading...' }: LoadingScreenProps) {\n  return (\n    <div className={styles.container}>\n      <div className={styles.content}>\n        <img\n          src=\"/img/milestone_logo_no_text.svg\"\n          alt=\"Milestone\"\n          className={styles.logo}\n        />\n        <div className={styles.spinner} />\n        <p className={styles.message}>{message}</p>\n      </div>\n    </div>\n  );\n}\n","/**\n * Storage Utilities\n * Helpers for localStorage/sessionStorage with type safety\n */\n\n// =============================================================================\n// LOCAL STORAGE\n// =============================================================================\n\n/**\n * Get a value from localStorage with type safety\n */\nexport function getLocalStorage<T>(key: string, defaultValue: T): T {\n  try {\n    const item = localStorage.getItem(key);\n    if (item === null) {\n      return defaultValue;\n    }\n    return JSON.parse(item) as T;\n  } catch {\n    console.warn(`Failed to parse localStorage key \"${key}\"`);\n    return defaultValue;\n  }\n}\n\n/**\n * Set a value in localStorage\n */\nexport function setLocalStorage<T>(key: string, value: T): void {\n  try {\n    localStorage.setItem(key, JSON.stringify(value));\n  } catch (err) {\n    console.warn(`Failed to set localStorage key \"${key}\"`, err);\n  }\n}\n\n/**\n * Remove a value from localStorage\n */\nexport function removeLocalStorage(key: string): void {\n  try {\n    localStorage.removeItem(key);\n  } catch (err) {\n    console.warn(`Failed to remove localStorage key \"${key}\"`, err);\n  }\n}\n\n// =============================================================================\n// SESSION STORAGE\n// =============================================================================\n\n/**\n * Get a value from sessionStorage with type safety\n */\nexport function getSessionStorage<T>(key: string, defaultValue: T): T {\n  try {\n    const item = sessionStorage.getItem(key);\n    if (item === null) {\n      return defaultValue;\n    }\n    return JSON.parse(item) as T;\n  } catch {\n    console.warn(`Failed to parse sessionStorage key \"${key}\"`);\n    return defaultValue;\n  }\n}\n\n/**\n * Set a value in sessionStorage\n */\nexport function setSessionStorage<T>(key: string, value: T): void {\n  try {\n    sessionStorage.setItem(key, JSON.stringify(value));\n  } catch (err) {\n    console.warn(`Failed to set sessionStorage key \"${key}\"`, err);\n  }\n}\n\n/**\n * Remove a value from sessionStorage\n */\nexport function removeSessionStorage(key: string): void {\n  try {\n    sessionStorage.removeItem(key);\n  } catch (err) {\n    console.warn(`Failed to remove sessionStorage key \"${key}\"`, err);\n  }\n}\n\n// =============================================================================\n// STORAGE KEYS\n// =============================================================================\n\n/**\n * Centralized storage keys to avoid typos and enable easy refactoring\n */\nexport const STORAGE_KEYS = {\n  // Preferences\n  PREF_SITE_ID: 'milestone_pref_site_id',\n  PREF_VIEW: 'milestone_pref_view',\n  PREF_VIEW_MODE: 'milestone_pref_view_mode',\n  PREF_THEME: 'milestone_theme',\n  \n  // UI State\n  SIDEBAR_COLLAPSED: 'milestone_sidebar_collapsed',\n  RESOURCE_PANEL_COLLAPSED: 'milestone_resource_panel_collapsed',\n  \n  // Project Order (per site)\n  PROJECT_ORDER_PREFIX: 'milestone_project_order_site_',\n  \n  // View State (persisted by Zustand)\n  VIEW_STATE: 'milestone-app-storage',\n  \n  // Legacy keys (for migration from old vanilla JS app)\n  LEGACY_SITE_ID: 'rd_pref_site_id',\n  LEGACY_VIEW: 'rd_pref_view',\n  LEGACY_VIEW_MODE: 'rd_pref_view_mode',\n  LEGACY_VIEW_STATE: 'milestone_view_state',\n} as const;\n\n// =============================================================================\n// PROJECT ORDER STORAGE\n// =============================================================================\n\n/**\n * Get the project order for a specific site\n * Returns an array of project IDs in the user's preferred order\n */\nexport function getProjectOrder(siteId: number): number[] {\n  const key = `${STORAGE_KEYS.PROJECT_ORDER_PREFIX}${siteId}`;\n  return getLocalStorage<number[]>(key, []);\n}\n\n/**\n * Set the project order for a specific site\n */\nexport function setProjectOrder(siteId: number, projectIds: number[]): void {\n  const key = `${STORAGE_KEYS.PROJECT_ORDER_PREFIX}${siteId}`;\n  setLocalStorage(key, projectIds);\n}\n\n/**\n * Sort projects by user's preferred order (projects not in order list go at the end)\n */\nexport function sortProjectsByOrder<T extends { id: number }>(projects: T[], siteId: number): T[] {\n  const order = getProjectOrder(siteId);\n  if (order.length === 0) {\n    return projects; // No custom order, return as-is\n  }\n  \n  // Create a map of project ID to its position in the order array\n  const orderMap = new Map<number, number>();\n  order.forEach((id, index) => orderMap.set(id, index));\n  \n  // Sort projects: those in order list first (by their position), then the rest\n  return [...projects].sort((a, b) => {\n    const orderA = orderMap.get(a.id);\n    const orderB = orderMap.get(b.id);\n    \n    // Both have custom order\n    if (orderA !== undefined && orderB !== undefined) {\n      return orderA - orderB;\n    }\n    // Only A has custom order - A comes first\n    if (orderA !== undefined) return -1;\n    // Only B has custom order - B comes first\n    if (orderB !== undefined) return 1;\n    // Neither has custom order - maintain original order\n    return 0;\n  });\n}\n\n// =============================================================================\n// MIGRATION HELPERS\n// =============================================================================\n\n/**\n * Migrate data from legacy storage keys to new keys\n * Call this once during app initialization\n */\nexport function migrateLegacyStorage(): void {\n  const migrations: [string, string][] = [\n    [STORAGE_KEYS.LEGACY_SITE_ID, STORAGE_KEYS.PREF_SITE_ID],\n    [STORAGE_KEYS.LEGACY_VIEW, STORAGE_KEYS.PREF_VIEW],\n    [STORAGE_KEYS.LEGACY_VIEW_MODE, STORAGE_KEYS.PREF_VIEW_MODE],\n  ];\n  \n  migrations.forEach(([oldKey, newKey]) => {\n    const oldValue = localStorage.getItem(oldKey);\n    if (oldValue !== null && localStorage.getItem(newKey) === null) {\n      localStorage.setItem(newKey, oldValue);\n      console.log(`Migrated storage: ${oldKey} -> ${newKey}`);\n    }\n  });\n}\n\n// =============================================================================\n// THEME STORAGE\n// =============================================================================\n\n/**\n * Available themes:\n * - dark: Default Milestone dark theme\n * - light: Default Milestone light theme\n * - sulzer-dark: S-Theme dark variant\n * - sulzer-light: S-Theme light variant\n */\nexport type Theme = 'dark' | 'light' | 'sulzer-dark' | 'sulzer-light';\nexport type ThemeFamily = 'default' | 'sulzer';\n\nexport interface ThemeInfo {\n  id: Theme;\n  name: string;\n  description: string;\n  family: ThemeFamily;\n  mode: 'dark' | 'light';\n}\n\nexport interface ThemeFamilyInfo {\n  id: ThemeFamily;\n  name: string;\n  description: string;\n}\n\nexport const THEME_FAMILIES: ThemeFamilyInfo[] = [\n  {\n    id: 'default',\n    name: 'Default',\n    description: 'Original Milestone theme',\n  },\n  {\n    id: 'sulzer',\n    name: 'S-Theme',\n    description: 'Alternative color scheme',\n  },\n];\n\nexport const THEMES: ThemeInfo[] = [\n  {\n    id: 'dark',\n    name: 'Default Dark',\n    description: 'Original Milestone dark theme',\n    family: 'default',\n    mode: 'dark',\n  },\n  {\n    id: 'light',\n    name: 'Default Light',\n    description: 'Original Milestone light theme',\n    family: 'default',\n    mode: 'light',\n  },\n  {\n    id: 'sulzer-dark',\n    name: 'S-Theme Dark',\n    description: 'Alternative dark theme',\n    family: 'sulzer',\n    mode: 'dark',\n  },\n  {\n    id: 'sulzer-light',\n    name: 'S-Theme Light',\n    description: 'Alternative light theme',\n    family: 'sulzer',\n    mode: 'light',\n  },\n];\n\n/**\n * Get the current theme preference\n */\nexport function getTheme(): Theme {\n  const stored = localStorage.getItem(STORAGE_KEYS.PREF_THEME);\n  if (stored === 'light' || stored === 'dark' || stored === 'sulzer-dark' || stored === 'sulzer-light') {\n    return stored;\n  }\n  // Default to dark theme\n  return 'dark';\n}\n\n/**\n * Get theme info by ID\n */\nexport function getThemeInfo(theme: Theme): ThemeInfo {\n  return THEMES.find(t => t.id === theme) || THEMES[0];\n}\n\n/**\n * Get all themes in a specific family\n */\nexport function getThemesByFamily(family: 'default' | 'sulzer'): ThemeInfo[] {\n  return THEMES.filter(t => t.family === family);\n}\n\n/**\n * Check if theme is a dark mode theme\n */\nexport function isDarkTheme(theme: Theme): boolean {\n  const info = getThemeInfo(theme);\n  return info.mode === 'dark';\n}\n\n/**\n * Set the theme preference\n */\nexport function setTheme(theme: Theme): void {\n  localStorage.setItem(STORAGE_KEYS.PREF_THEME, theme);\n  document.documentElement.setAttribute('data-theme', theme);\n}\n\n/**\n * Toggle between light and dark mode within the same theme family\n */\nexport function toggleThemeMode(): Theme {\n  const current = getTheme();\n  const currentInfo = getThemeInfo(current);\n  \n  // Find the opposite mode theme in the same family\n  const newTheme = THEMES.find(\n    t => t.family === currentInfo.family && t.mode !== currentInfo.mode\n  );\n  \n  if (newTheme) {\n    setTheme(newTheme.id);\n    return newTheme.id;\n  }\n  \n  // Fallback to simple toggle\n  const fallback = current === 'dark' ? 'light' : 'dark';\n  setTheme(fallback);\n  return fallback;\n}\n\n/**\n * Legacy toggle function for backward compatibility\n * @deprecated Use toggleThemeMode() instead\n */\nexport function toggleTheme(): Theme {\n  return toggleThemeMode();\n}\n\n/**\n * Get current theme family\n */\nexport function getThemeFamily(): ThemeFamily {\n  const theme = getTheme();\n  const info = getThemeInfo(theme);\n  return info.family;\n}\n\n/**\n * Set theme family (switches to the same mode in the new family)\n */\nexport function setThemeFamily(family: ThemeFamily): Theme {\n  const current = getTheme();\n  const currentInfo = getThemeInfo(current);\n  \n  // Find the theme in the new family with the same mode\n  const newTheme = THEMES.find(\n    t => t.family === family && t.mode === currentInfo.mode\n  );\n  \n  if (newTheme) {\n    setTheme(newTheme.id);\n    return newTheme.id;\n  }\n  \n  // Fallback to dark theme in the family\n  const fallback = THEMES.find(t => t.family === family && t.mode === 'dark');\n  if (fallback) {\n    setTheme(fallback.id);\n    return fallback.id;\n  }\n  \n  return current;\n}\n\n/**\n * Initialize theme from storage\n * Call this on app startup\n */\nexport function initTheme(): void {\n  const theme = getTheme();\n  document.documentElement.setAttribute('data-theme', theme);\n}\n","/**\n * Login Screen\n * Authentication form with SSO support\n */\n\nimport { useState, FormEvent, useEffect } from 'react';\nimport { useAuth } from '@/hooks/useAuth';\nimport { checkSSOEnabled, getSSOLoginUrl } from '@/api';\nimport { getTheme, isDarkTheme, type Theme } from '@/utils/storage';\nimport styles from './LoginScreen.module.css';\n\nexport function LoginScreen() {\n  const { login } = useAuth();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [ssoEnabled, setSsoEnabled] = useState(false);\n  const [theme, setThemeState] = useState<Theme>(() => getTheme());\n\n  // Check if SSO is enabled\n  useEffect(() => {\n    const checkSSO = async () => {\n      try {\n        const { enabled } = await checkSSOEnabled();\n        setSsoEnabled(enabled);\n      } catch {\n        // SSO not available\n      }\n    };\n    checkSSO();\n  }, []);\n\n  // Watch for theme changes\n  useEffect(() => {\n    const observer = new MutationObserver(() => {\n      const currentTheme = document.documentElement.dataset.theme as Theme;\n      if (currentTheme && currentTheme !== theme) {\n        setThemeState(currentTheme);\n      }\n    });\n\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: ['data-theme'],\n    });\n\n    return () => observer.disconnect();\n  }, [theme]);\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setIsSubmitting(true);\n\n    try {\n      await login(email, password);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Invalid email or password');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleSSOLogin = async () => {\n    try {\n      const response = await getSSOLoginUrl();\n      console.log('SSO Login response:', response);\n      if (response.url) {\n        window.location.href = response.url;\n      } else {\n        console.error('No URL in SSO response:', response);\n        setError('SSO login URL not received');\n      }\n    } catch (err) {\n      console.error('SSO login error:', err);\n      setError('Failed to initiate SSO login');\n    }\n  };\n\n  const logoSrc = isDarkTheme(theme) \n    ? '/img/milestone_logo_dark_theme.svg'\n    : '/img/milestone_logo_light_theme.svg';\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.card}>\n        <div className={styles.header}>\n          <img\n            src={logoSrc}\n            alt=\"Milestone\"\n            className={styles.logo}\n          />\n          <p className={styles.subtitle}>Sign in to continue</p>\n        </div>\n\n        {ssoEnabled && (\n          <>\n            <button\n              type=\"button\"\n              className={styles.ssoButton}\n              onClick={handleSSOLogin}\n            >\n              <svg\n                width=\"20\"\n                height=\"20\"\n                viewBox=\"0 0 23 23\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path fill=\"#f35325\" d=\"M1 1h10v10H1z\" />\n                <path fill=\"#81bc06\" d=\"M12 1h10v10H12z\" />\n                <path fill=\"#05a6f0\" d=\"M1 12h10v10H1z\" />\n                <path fill=\"#ffba08\" d=\"M12 12h10v10H12z\" />\n              </svg>\n              Sign in with Microsoft\n            </button>\n            <div className={styles.divider}>\n              <span>or sign in with email</span>\n            </div>\n          </>\n        )}\n\n        <form onSubmit={handleSubmit} className={styles.form}>\n          <div className={styles.formGroup}>\n            <label htmlFor=\"email\" className={styles.label}>\n              Email\n            </label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              className={styles.input}\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              placeholder=\"your@email.com\"\n              required\n              autoFocus\n              disabled={isSubmitting}\n            />\n          </div>\n\n          <div className={styles.formGroup}>\n            <label htmlFor=\"password\" className={styles.label}>\n              Password\n            </label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              className={styles.input}\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              placeholder=\"\"\n              required\n              disabled={isSubmitting}\n            />\n          </div>\n\n          {error && <div className={styles.error}>{error}</div>}\n\n          <button\n            type=\"submit\"\n            className={styles.submitButton}\n            disabled={isSubmitting}\n          >\n            {isSubmitting ? 'Signing in...' : 'Sign In'}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n","/**\n * UI Store\n * Manages transient UI state like modals, tooltips, and editing states\n * This state is NOT persisted - it resets on page refresh\n */\n\nimport { create } from 'zustand';\nimport type { \n  Project, \n  Phase, \n  Subphase, \n  StaffAssignment, \n  EquipmentAssignment,\n  Vacation,\n  Staff,\n  Equipment,\n  User,\n  Site,\n} from '@/types';\n\n// =============================================================================\n// MODAL TYPES\n// =============================================================================\n\ntype ModalType = \n  | 'project'\n  | 'phase'\n  | 'subphase'\n  | 'staffAssignment'\n  | 'equipmentAssignment'\n  | 'vacation'\n  | 'site'\n  | 'siteManagement'\n  | 'manageSites'\n  | 'userManagement'\n  | 'ssoConfig'\n  | 'manageEquipment'\n  | 'predefinedPhases'\n  | 'importProject'\n  | 'settings'\n  | 'instanceTitle'\n  | 'addStaff'\n  | 'editStaff'\n  | 'addEquipment'\n  | 'editEquipment'\n  | 'bankHoliday'\n  | 'customHoliday'\n  | 'companyEvent';\n\n// =============================================================================\n// STATE INTERFACE\n// =============================================================================\n\ninterface UIState {\n  // ---------------------------------------------\n  // MODAL STATE\n  // ---------------------------------------------\n  activeModal: ModalType | null;\n  \n  // Editing context for modals\n  editingProject: Project | null;\n  editingPhase: Phase | null;\n  editingSubphase: Subphase | null;\n  editingStaffAssignment: StaffAssignment | null;\n  editingEquipmentAssignment: EquipmentAssignment | null;\n  editingVacation: Vacation | null;\n  editingStaff: Staff | null;\n  editingEquipment: Equipment | null;\n  editingUser: User | null;\n  editingSite: Site | null;\n  \n  // Context for creating new items\n  modalContext: {\n    projectId?: number;\n    phaseId?: number;\n    subphaseId?: number;\n    staffId?: number;\n    equipmentId?: number;\n    siteId?: number;\n    // Phantom sibling presets\n    phantomPreset?: {\n      startDate: string;\n      endDate: string;\n      predecessorId: number;\n      dependencyType: 'SS' | 'FS';\n      parentId?: number | null;\n      parentType?: 'phase' | 'subphase';\n    };\n  };\n  \n  // ---------------------------------------------\n  // TOOLTIP STATE\n  // ---------------------------------------------\n  tooltip: {\n    visible: boolean;\n    content: string;\n    x: number;\n    y: number;\n  };\n  \n  // ---------------------------------------------\n  // DRAG & DROP STATE\n  // ---------------------------------------------\n  isDragging: boolean;\n  dragType: 'project' | 'phase' | 'subphase' | 'staffAssignment' | 'equipmentAssignment' | null;\n  dragItemId: number | null;\n  \n  // ---------------------------------------------\n  // RESIZE STATE\n  // ---------------------------------------------\n  isResizing: boolean;\n  resizeEdge: 'left' | 'right' | null;\n  resizeItemId: number | null;\n  resizeItemType: 'phase' | 'subphase' | 'staffAssignment' | 'equipmentAssignment' | null;\n  \n  // ---------------------------------------------\n  // DRAG/RESIZE INDICATOR STATE\n  // ---------------------------------------------\n  dragIndicator: {\n    visible: boolean;\n    left: number;      // Position from left of timeline body\n    top: number;       // Position from top of timeline body\n    type: 'drag' | 'resize';\n    lagDays?: number;\n    date?: string;\n    duration?: number;\n    edge?: 'left' | 'right';\n  };\n  \n  // ---------------------------------------------\n  // DEPENDENCY LINKING STATE\n  // ---------------------------------------------\n  isLinkingDependency: boolean;\n  linkingFrom: { \n    projectId: number; \n    itemId: number;\n    itemType: 'phase' | 'subphase';\n    zone: 'start' | 'end';\n  } | null;\n  \n  // ---------------------------------------------\n  // PHANTOM SIBLING MODE\n  // ---------------------------------------------\n  phantomSiblingMode: {\n    projectId: number;\n    sourceId: number;\n    type: 'phase' | 'subphase';\n    dependencyType: 'SS' | 'FS';\n    phantomStart: string;\n    phantomEnd: string;\n    phantomColor: string;\n    siblingDurationDays: number;\n    sourceIndex: number;\n    // Parent info for subphases\n    parentId?: number | null;\n    parentType?: 'phase' | 'subphase';\n  } | null;\n  \n  // ---------------------------------------------\n  // LOADING STATES\n  // ---------------------------------------------\n  isLoading: boolean;\n  loadingMessage: string;\n  \n  // ---------------------------------------------\n  // CONTEXT MENU STATE\n  // ---------------------------------------------\n  contextMenu: {\n    visible: boolean;\n    x: number;\n    y: number;\n    type: 'project' | 'phase' | 'subphase' | 'staffAssignment' | 'equipmentAssignment' | null;\n    targetId: number | null;\n    projectId?: number;\n    phaseId?: number;\n    subphaseId?: number;\n    // For assignment context - extra data\n    assignmentData?: {\n      staffId?: number;\n      equipmentId?: number;\n      name?: string;\n      allocation?: number;\n      startDate?: string;\n      endDate?: string;\n    };\n  };\n  \n  // ---------------------------------------------\n  // TIMELINE SCROLL STATE\n  // ---------------------------------------------\n  scrollToTodayTrigger: number; // increment to trigger scroll\n  scrollToDateTrigger: { date: string; timestamp: number } | null; // trigger scroll to specific date\n  \n  // Zoom trigger: { direction: 1 for in, -1 for out, newCellWidth }\n  zoomTrigger: { direction: 1 | -1; newCellWidth: number; timestamp: number } | null;\n  \n  // ---------------------------------------------\n  // ACTIONS - Modals\n  // ---------------------------------------------\n  openModal: (type: ModalType, context?: UIState['modalContext']) => void;\n  closeModal: () => void;\n  \n  // Edit mode setters\n  setEditingProject: (project: Project | null) => void;\n  setEditingPhase: (phase: Phase | null) => void;\n  setEditingSubphase: (subphase: Subphase | null) => void;\n  setEditingStaffAssignment: (assignment: StaffAssignment | null) => void;\n  setEditingEquipmentAssignment: (assignment: EquipmentAssignment | null) => void;\n  setEditingVacation: (vacation: Vacation | null) => void;\n  setEditingStaff: (staff: Staff | null) => void;\n  setEditingEquipment: (equipment: Equipment | null) => void;\n  setEditingUser: (user: User | null) => void;\n  setEditingSite: (site: Site | null) => void;\n  \n  // Convenience modal openers\n  openProjectModal: (project?: Project) => void;\n  openPhaseModal: (phase?: Phase, projectId?: number) => void;\n  openSubphaseModal: (subphase?: Subphase, phaseId?: number, projectId?: number, parentSubphaseId?: number) => void;\n  openVacationModal: (vacation?: Vacation, staffId?: number) => void;\n  openBankHolidayModal: () => void;\n  openSiteModal: () => void;\n  setActiveModal: (modal: ModalType | string | null) => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - Tooltip\n  // ---------------------------------------------\n  showTooltip: (content: string, x: number, y: number) => void;\n  hideTooltip: () => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - Drag & Drop\n  // ---------------------------------------------\n  startDrag: (type: 'project' | 'phase' | 'subphase' | 'staffAssignment' | 'equipmentAssignment', itemId: number) => void;\n  endDrag: () => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - Resize\n  // ---------------------------------------------\n  startResize: (\n    itemType: 'phase' | 'subphase' | 'staffAssignment' | 'equipmentAssignment', \n    itemId: number, \n    edge: 'left' | 'right'\n  ) => void;\n  endResize: () => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - Drag/Resize Indicator\n  // ---------------------------------------------\n  showDragIndicator: (left: number, top: number, lagDays: number) => void;\n  showResizeIndicator: (left: number, top: number, date: string, duration: number, edge: 'left' | 'right') => void;\n  hideIndicator: () => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - Dependency Linking\n  // ---------------------------------------------\n  startLinking: (\n    projectId: number, \n    itemId: number, \n    itemType: 'phase' | 'subphase',\n    zone: 'start' | 'end'\n  ) => void;\n  completeLinking: () => void;\n  cancelLinking: () => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - Phantom Sibling\n  // ---------------------------------------------\n  startPhantomSibling: (config: NonNullable<UIState['phantomSiblingMode']>) => void;\n  updatePhantomPosition: (phantomStart: string, phantomEnd: string) => void;\n  endPhantomSibling: () => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - Loading\n  // ---------------------------------------------\n  setLoading: (loading: boolean, message?: string) => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - Context Menu\n  // ---------------------------------------------\n  showContextMenu: (\n    type: 'project' | 'phase' | 'subphase' | 'staffAssignment' | 'equipmentAssignment',\n    targetId: number,\n    x: number,\n    y: number,\n    projectId?: number,\n    phaseId?: number,\n    subphaseId?: number,\n    assignmentData?: {\n      staffId?: number;\n      equipmentId?: number;\n      name?: string;\n      allocation?: number;\n      startDate?: string;\n      endDate?: string;\n    }\n  ) => void;\n  hideContextMenu: () => void;\n  \n  // ---------------------------------------------\n  // ACTIONS - Timeline Scroll\n  // ---------------------------------------------\n  triggerScrollToToday: () => void;\n  triggerScrollToDate: (date: string) => void;\n  clearScrollToDateTrigger: () => void;\n  triggerZoom: (direction: 1 | -1, newCellWidth: number) => void;\n  clearZoomTrigger: () => void;\n  \n  // ---------------------------------------------\n  // RESOURCE DRAG-DROP STATE (from ResourcePanel)\n  // ---------------------------------------------\n  resourceDrag: {\n    active: boolean;\n    type: 'staff' | 'equipment' | null;\n    resourceId: number | null;\n    resourceName: string | null;\n    // Target info while dragging over timeline\n    targetProjectId: number | null;\n    targetPhaseId: number | null;\n    targetSubphaseId: number | null;\n    // Preview bar position\n    previewStart: string | null;\n    previewEnd: string | null;\n  };\n  \n  // ---------------------------------------------\n  // ACTIONS - Resource Drag-Drop\n  // ---------------------------------------------\n  startResourceDrag: (type: 'staff' | 'equipment', resourceId: number, resourceName: string) => void;\n  updateResourceDragTarget: (\n    projectId: number | null, \n    phaseId: number | null, \n    subphaseId: number | null,\n    previewStart: string | null,\n    previewEnd: string | null\n  ) => void;\n  endResourceDrag: () => void;\n}\n\n// =============================================================================\n// INITIAL STATE\n// =============================================================================\n\nconst initialState = {\n  // Modals\n  activeModal: null,\n  editingProject: null,\n  editingPhase: null,\n  editingSubphase: null,\n  editingStaffAssignment: null,\n  editingEquipmentAssignment: null,\n  editingVacation: null,\n  editingStaff: null,\n  editingEquipment: null,\n  editingUser: null,\n  editingSite: null,\n  modalContext: {},\n  \n  // Tooltip\n  tooltip: {\n    visible: false,\n    content: '',\n    x: 0,\n    y: 0,\n  },\n  \n  // Context menu\n  contextMenu: {\n    visible: false,\n    x: 0,\n    y: 0,\n    type: null,\n    targetId: null,\n    projectId: undefined,\n    phaseId: undefined,\n    subphaseId: undefined,\n    assignmentData: undefined,\n  },\n  \n  // Drag & Drop\n  isDragging: false,\n  dragType: null,\n  dragItemId: null,\n  \n  // Resize\n  isResizing: false,\n  resizeEdge: null,\n  resizeItemId: null,\n  resizeItemType: null,\n  \n  // Drag/Resize Indicator\n  dragIndicator: {\n    visible: false,\n    left: 0,\n    top: 0,\n    type: 'drag' as const,\n  },\n  \n  // Dependency Linking\n  isLinkingDependency: false,\n  linkingFrom: null,\n  \n  // Phantom Sibling\n  phantomSiblingMode: null,\n  \n  // Loading\n  isLoading: false,\n  loadingMessage: '',\n  \n  // Timeline scroll\n  scrollToTodayTrigger: 0,\n  scrollToDateTrigger: null,\n  \n  // Zoom trigger\n  zoomTrigger: null,\n  \n  // Resource Drag-Drop\n  resourceDrag: {\n    active: false,\n    type: null,\n    resourceId: null,\n    resourceName: null,\n    targetProjectId: null,\n    targetPhaseId: null,\n    targetSubphaseId: null,\n    previewStart: null,\n    previewEnd: null,\n  },\n};\n\n// =============================================================================\n// STORE CREATION\n// =============================================================================\n\nexport const useUIStore = create<UIState>()((set) => ({\n  ...initialState,\n  \n  // -----------------------------------------\n  // MODAL ACTIONS\n  // -----------------------------------------\n  openModal: (type, context = {}) => set({\n    activeModal: type,\n    modalContext: context,\n  }),\n  \n  closeModal: () => set({\n    activeModal: null,\n    editingProject: null,\n    editingPhase: null,\n    editingSubphase: null,\n    editingStaffAssignment: null,\n    editingEquipmentAssignment: null,\n    editingVacation: null,\n    editingStaff: null,\n    editingEquipment: null,\n    editingUser: null,\n    editingSite: null,\n    modalContext: {},\n  }),\n  \n  setEditingProject: (project) => set({ editingProject: project }),\n  setEditingPhase: (phase) => set({ editingPhase: phase }),\n  setEditingSubphase: (subphase) => set({ editingSubphase: subphase }),\n  setEditingStaffAssignment: (assignment) => set({ editingStaffAssignment: assignment }),\n  setEditingEquipmentAssignment: (assignment) => set({ editingEquipmentAssignment: assignment }),\n  setEditingVacation: (vacation) => set({ editingVacation: vacation }),\n  setEditingStaff: (staff) => set({ editingStaff: staff }),\n  setEditingEquipment: (equipment) => set({ editingEquipment: equipment }),\n  setEditingUser: (user) => set({ editingUser: user }),\n  setEditingSite: (site) => set({ editingSite: site }),\n  \n  // Convenience modal openers\n  openProjectModal: (project) => set({\n    activeModal: 'project',\n    editingProject: project || null,\n  }),\n  \n  openPhaseModal: (phase, projectId) => set({\n    activeModal: 'phase',\n    editingPhase: phase || null,\n    modalContext: projectId ? { projectId } : {},\n  }),\n  \n  openSubphaseModal: (subphase, phaseId, projectId, parentSubphaseId) => set({\n    activeModal: 'subphase',\n    editingSubphase: subphase || null,\n    modalContext: { phaseId, projectId, subphaseId: parentSubphaseId },\n  }),\n  \n  openVacationModal: (vacation, staffId) => set({\n    activeModal: 'vacation',\n    editingVacation: vacation || null,\n    modalContext: staffId ? { staffId } : {},\n  }),\n  \n  openBankHolidayModal: () => set({\n    activeModal: 'bankHoliday',\n  }),\n  \n  openSiteModal: () => set({\n    activeModal: 'site',\n  }),\n  \n  setActiveModal: (modal) => set({\n    activeModal: modal as ModalType | null,\n  }),\n  \n  // -----------------------------------------\n  // TOOLTIP ACTIONS\n  // -----------------------------------------\n  showTooltip: (content, x, y) => set({\n    tooltip: { visible: true, content, x, y },\n  }),\n  \n  hideTooltip: () => set({\n    tooltip: { visible: false, content: '', x: 0, y: 0 },\n  }),\n  \n  // -----------------------------------------\n  // DRAG & DROP ACTIONS\n  // -----------------------------------------\n  startDrag: (type, itemId) => set({\n    isDragging: true,\n    dragType: type,\n    dragItemId: itemId,\n  }),\n  \n  endDrag: () => set({\n    isDragging: false,\n    dragType: null,\n    dragItemId: null,\n  }),\n  \n  // -----------------------------------------\n  // RESIZE ACTIONS\n  // -----------------------------------------\n  startResize: (itemType, itemId, edge) => set({\n    isResizing: true,\n    resizeItemType: itemType,\n    resizeItemId: itemId,\n    resizeEdge: edge,\n  }),\n  \n  endResize: () => set({\n    isResizing: false,\n    resizeItemType: null,\n    resizeItemId: null,\n    resizeEdge: null,\n  }),\n  \n  // -----------------------------------------\n  // DRAG/RESIZE INDICATOR ACTIONS\n  // -----------------------------------------\n  showDragIndicator: (left, top, lagDays) => set({\n    dragIndicator: {\n      visible: true,\n      left,\n      top,\n      type: 'drag',\n      lagDays,\n    },\n  }),\n  \n  showResizeIndicator: (left, top, date, duration, edge) => set({\n    dragIndicator: {\n      visible: true,\n      left,\n      top,\n      type: 'resize',\n      date,\n      duration,\n      edge,\n    },\n  }),\n  \n  hideIndicator: () => set({\n    dragIndicator: {\n      visible: false,\n      left: 0,\n      top: 0,\n      type: 'drag',\n    },\n  }),\n  \n  // -----------------------------------------\n  // DEPENDENCY LINKING ACTIONS\n  // -----------------------------------------\n  startLinking: (projectId, itemId, itemType, zone) => set({\n    isLinkingDependency: true,\n    linkingFrom: { projectId, itemId, itemType, zone },\n  }),\n  \n  completeLinking: () => set({\n    isLinkingDependency: false,\n    linkingFrom: null,\n  }),\n  \n  cancelLinking: () => set({\n    isLinkingDependency: false,\n    linkingFrom: null,\n  }),\n  \n  // -----------------------------------------\n  // PHANTOM SIBLING ACTIONS\n  // -----------------------------------------\n  startPhantomSibling: (config) => set({\n    phantomSiblingMode: config,\n  }),\n  \n  updatePhantomPosition: (phantomStart, phantomEnd) => set((state) => ({\n    phantomSiblingMode: state.phantomSiblingMode \n      ? { ...state.phantomSiblingMode, phantomStart, phantomEnd }\n      : null,\n  })),\n  \n  endPhantomSibling: () => set({\n    phantomSiblingMode: null,\n  }),\n  \n  // -----------------------------------------\n  // LOADING ACTIONS\n  // -----------------------------------------\n  setLoading: (loading, message = '') => set({\n    isLoading: loading,\n    loadingMessage: message,\n  }),\n  \n  // -----------------------------------------\n  // CONTEXT MENU ACTIONS\n  // -----------------------------------------\n  showContextMenu: (type, targetId, x, y, projectId, phaseId, subphaseId, assignmentData) => set({\n    contextMenu: {\n      visible: true,\n      x,\n      y,\n      type,\n      targetId,\n      projectId,\n      phaseId,\n      subphaseId,\n      assignmentData,\n    },\n  }),\n  \n  hideContextMenu: () => set({\n    contextMenu: {\n      visible: false,\n      x: 0,\n      y: 0,\n      type: null,\n      targetId: null,\n      projectId: undefined,\n      phaseId: undefined,\n      subphaseId: undefined,\n      assignmentData: undefined,\n    },\n  }),\n  \n  // -----------------------------------------\n  // TIMELINE SCROLL ACTIONS\n  // -----------------------------------------\n  triggerScrollToToday: () => set((state) => ({\n    scrollToTodayTrigger: state.scrollToTodayTrigger + 1,\n  })),\n  \n  triggerScrollToDate: (date: string) => set({\n    scrollToDateTrigger: { date, timestamp: Date.now() },\n  }),\n  \n  clearScrollToDateTrigger: () => set({ scrollToDateTrigger: null }),\n  \n  triggerZoom: (direction, newCellWidth) => set({\n    zoomTrigger: { direction, newCellWidth, timestamp: Date.now() },\n  }),\n  \n  clearZoomTrigger: () => set({ zoomTrigger: null }),\n  \n  // -----------------------------------------\n  // RESOURCE DRAG-DROP ACTIONS\n  // -----------------------------------------\n  startResourceDrag: (type: 'staff' | 'equipment', resourceId: number, resourceName: string) => set({\n    resourceDrag: {\n      active: true,\n      type,\n      resourceId,\n      resourceName,\n      targetProjectId: null,\n      targetPhaseId: null,\n      targetSubphaseId: null,\n      previewStart: null,\n      previewEnd: null,\n    },\n  }),\n  \n  updateResourceDragTarget: (\n    projectId: number | null,\n    phaseId: number | null,\n    subphaseId: number | null,\n    previewStart: string | null,\n    previewEnd: string | null\n  ) => set((state) => ({\n    resourceDrag: {\n      ...state.resourceDrag,\n      targetProjectId: projectId,\n      targetPhaseId: phaseId,\n      targetSubphaseId: subphaseId,\n      previewStart,\n      previewEnd,\n    },\n  })),\n  \n  endResourceDrag: () => set({\n    resourceDrag: {\n      active: false,\n      type: null,\n      resourceId: null,\n      resourceName: null,\n      targetProjectId: null,\n      targetPhaseId: null,\n      targetSubphaseId: null,\n      previewStart: null,\n      previewEnd: null,\n    },\n  }),\n}));\n","/**\n * Undo/Redo Store\n * Manages undo/redo history for Gantt chart operations\n * Session-level only - not persisted\n */\n\nimport { create } from 'zustand';\nimport type { Project } from '@/types';\n\n// =============================================================================\n// TYPES\n// =============================================================================\n\ninterface HistoryEntry {\n  projects: Project[];\n  description: string;\n  timestamp: number;\n}\n\ninterface UndoState {\n  undoStack: HistoryEntry[];\n  redoStack: HistoryEntry[];\n  \n  // Computed\n  canUndo: boolean;\n  canRedo: boolean;\n  \n  // Actions\n  saveState: (projects: Project[], description: string) => void;\n  undo: () => Project[] | null;\n  redo: () => Project[] | null;\n  clear: () => void;\n}\n\n// =============================================================================\n// CONSTANTS\n// =============================================================================\n\nconst MAX_UNDO_STACK = 50;\n\n// =============================================================================\n// STORE\n// =============================================================================\n\nexport const useUndoStore = create<UndoState>()((set, get) => ({\n  undoStack: [],\n  redoStack: [],\n  canUndo: false,\n  canRedo: false,\n  \n  /**\n   * Save current state to undo stack\n   * Call this BEFORE making changes\n   */\n  saveState: (projects, description) => {\n    set((state) => {\n      const newEntry: HistoryEntry = {\n        projects: structuredClone(projects),\n        description,\n        timestamp: Date.now(),\n      };\n      \n      // Add to stack, keeping within limit\n      const newStack = [...state.undoStack, newEntry].slice(-MAX_UNDO_STACK);\n      \n      return {\n        undoStack: newStack,\n        redoStack: [], // Clear redo stack on new action\n        canUndo: true,\n        canRedo: false,\n      };\n    });\n  },\n  \n  /**\n   * Undo last action\n   * Returns the previous project state to restore\n   */\n  undo: () => {\n    const { undoStack, redoStack } = get();\n    \n    if (undoStack.length === 0) {\n      return null;\n    }\n    \n    // Pop from undo stack\n    const lastEntry = undoStack[undoStack.length - 1];\n    const newUndoStack = undoStack.slice(0, -1);\n    \n    set({\n      undoStack: newUndoStack,\n      redoStack: [...redoStack, lastEntry],\n      canUndo: newUndoStack.length > 0,\n      canRedo: true,\n    });\n    \n    // Return the state to restore (previous entry, or null if this was the first)\n    return newUndoStack.length > 0 \n      ? newUndoStack[newUndoStack.length - 1].projects \n      : null;\n  },\n  \n  /**\n   * Redo last undone action\n   * Returns the project state to restore\n   */\n  redo: () => {\n    const { undoStack, redoStack } = get();\n    \n    if (redoStack.length === 0) {\n      return null;\n    }\n    \n    // Pop from redo stack\n    const nextEntry = redoStack[redoStack.length - 1];\n    const newRedoStack = redoStack.slice(0, -1);\n    \n    set({\n      undoStack: [...undoStack, nextEntry],\n      redoStack: newRedoStack,\n      canUndo: true,\n      canRedo: newRedoStack.length > 0,\n    });\n    \n    return nextEntry.projects;\n  },\n  \n  /**\n   * Clear all history\n   */\n  clear: () => {\n    set({\n      undoStack: [],\n      redoStack: [],\n      canUndo: false,\n      canRedo: false,\n    });\n  },\n}));\n","/**\n * @module constants\n * @summary Useful constants\n * @description\n * Collection of useful date constants.\n *\n * The constants could be imported from `date-fns/constants`:\n *\n * ```ts\n * import { maxTime, minTime } from \"./constants/date-fns/constants\";\n *\n * function isAllowedTime(time) {\n *   return time <= maxTime && time >= minTime;\n * }\n * ```\n */\n\n/**\n * @constant\n * @name daysInWeek\n * @summary Days in 1 week.\n */\nexport const daysInWeek = 7;\n\n/**\n * @constant\n * @name daysInYear\n * @summary Days in 1 year.\n *\n * @description\n * How many days in a year.\n *\n * One years equals 365.2425 days according to the formula:\n *\n * > Leap year occurs every 4 years, except for years that are divisible by 100 and not divisible by 400.\n * > 1 mean year = (365+1/4-1/100+1/400) days = 365.2425 days\n */\nexport const daysInYear = 365.2425;\n\n/**\n * @constant\n * @name maxTime\n * @summary Maximum allowed time.\n *\n * @example\n * import { maxTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = 8640000000000001 <= maxTime;\n * //=> false\n *\n * new Date(8640000000000001);\n * //=> Invalid Date\n */\nexport const maxTime = Math.pow(10, 8) * 24 * 60 * 60 * 1000;\n\n/**\n * @constant\n * @name minTime\n * @summary Minimum allowed time.\n *\n * @example\n * import { minTime } from \"./constants/date-fns/constants\";\n *\n * const isValid = -8640000000000001 >= minTime;\n * //=> false\n *\n * new Date(-8640000000000001)\n * //=> Invalid Date\n */\nexport const minTime = -maxTime;\n\n/**\n * @constant\n * @name millisecondsInWeek\n * @summary Milliseconds in 1 week.\n */\nexport const millisecondsInWeek = 604800000;\n\n/**\n * @constant\n * @name millisecondsInDay\n * @summary Milliseconds in 1 day.\n */\nexport const millisecondsInDay = 86400000;\n\n/**\n * @constant\n * @name millisecondsInMinute\n * @summary Milliseconds in 1 minute\n */\nexport const millisecondsInMinute = 60000;\n\n/**\n * @constant\n * @name millisecondsInHour\n * @summary Milliseconds in 1 hour\n */\nexport const millisecondsInHour = 3600000;\n\n/**\n * @constant\n * @name millisecondsInSecond\n * @summary Milliseconds in 1 second\n */\nexport const millisecondsInSecond = 1000;\n\n/**\n * @constant\n * @name minutesInYear\n * @summary Minutes in 1 year.\n */\nexport const minutesInYear = 525600;\n\n/**\n * @constant\n * @name minutesInMonth\n * @summary Minutes in 1 month.\n */\nexport const minutesInMonth = 43200;\n\n/**\n * @constant\n * @name minutesInDay\n * @summary Minutes in 1 day.\n */\nexport const minutesInDay = 1440;\n\n/**\n * @constant\n * @name minutesInHour\n * @summary Minutes in 1 hour.\n */\nexport const minutesInHour = 60;\n\n/**\n * @constant\n * @name monthsInQuarter\n * @summary Months in 1 quarter.\n */\nexport const monthsInQuarter = 3;\n\n/**\n * @constant\n * @name monthsInYear\n * @summary Months in 1 year.\n */\nexport const monthsInYear = 12;\n\n/**\n * @constant\n * @name quartersInYear\n * @summary Quarters in 1 year\n */\nexport const quartersInYear = 4;\n\n/**\n * @constant\n * @name secondsInHour\n * @summary Seconds in 1 hour.\n */\nexport const secondsInHour = 3600;\n\n/**\n * @constant\n * @name secondsInMinute\n * @summary Seconds in 1 minute.\n */\nexport const secondsInMinute = 60;\n\n/**\n * @constant\n * @name secondsInDay\n * @summary Seconds in 1 day.\n */\nexport const secondsInDay = secondsInHour * 24;\n\n/**\n * @constant\n * @name secondsInWeek\n * @summary Seconds in 1 week.\n */\nexport const secondsInWeek = secondsInDay * 7;\n\n/**\n * @constant\n * @name secondsInYear\n * @summary Seconds in 1 year.\n */\nexport const secondsInYear = secondsInDay * daysInYear;\n\n/**\n * @constant\n * @name secondsInMonth\n * @summary Seconds in 1 month\n */\nexport const secondsInMonth = secondsInYear / 12;\n\n/**\n * @constant\n * @name secondsInQuarter\n * @summary Seconds in 1 quarter.\n */\nexport const secondsInQuarter = secondsInMonth * 3;\n\n/**\n * @constant\n * @name constructFromSymbol\n * @summary Symbol enabling Date extensions to inherit properties from the reference date.\n *\n * The symbol is used to enable the `constructFrom` function to construct a date\n * using a reference date and a value. It allows to transfer extra properties\n * from the reference date to the new date. It's useful for extensions like\n * [`TZDate`](https://github.com/date-fns/tz) that accept a time zone as\n * a constructor argument.\n */\nexport const constructFromSymbol = Symbol.for(\"constructDateFrom\");\n","import { constructFromSymbol } from \"./constants.js\";\n\n/**\n * @name constructFrom\n * @category Generic Helpers\n * @summary Constructs a date using the reference date and the value\n *\n * @description\n * The function constructs a new date using the constructor from the reference\n * date and the given value. It helps to build generic functions that accept\n * date extensions.\n *\n * It defaults to `Date` if the passed reference date is a number or a string.\n *\n * Starting from v3.7.0, it allows to construct a date using `[Symbol.for(\"constructDateFrom\")]`\n * enabling to transfer extra properties from the reference date to the new date.\n * It's useful for extensions like [`TZDate`](https://github.com/date-fns/tz)\n * that accept a time zone as a constructor argument.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n *\n * @param date - The reference date to take constructor from\n * @param value - The value to create the date\n *\n * @returns Date initialized using the given date and value\n *\n * @example\n * import { constructFrom } from \"./constructFrom/date-fns\";\n *\n * // A function that clones a date preserving the original type\n * function cloneDate<DateType extends Date>(date: DateType): DateType {\n *   return constructFrom(\n *     date, // Use constructor from the given date\n *     date.getTime() // Use the date value to create a new date\n *   );\n * }\n */\nexport function constructFrom(date, value) {\n  if (typeof date === \"function\") return date(value);\n\n  if (date && typeof date === \"object\" && constructFromSymbol in date)\n    return date[constructFromSymbol](value);\n\n  if (date instanceof Date) return new date.constructor(value);\n\n  return new Date(value);\n}\n\n// Fallback for modularized imports:\nexport default constructFrom;\n","import { constructFrom } from \"./constructFrom.js\";\n\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * Starting from v3.7.0, it clones a date using `[Symbol.for(\"constructDateFrom\")]`\n * enabling to transfer extra properties from the reference date to the new date.\n * It's useful for extensions like [`TZDate`](https://github.com/date-fns/tz)\n * that accept a time zone as a constructor argument.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param argument - The value to convert\n *\n * @returns The parsed date in the local time zone\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\nexport function toDate(argument, context) {\n  // [TODO] Get rid of `toDate` or `constructFrom`?\n  return constructFrom(context || argument, argument);\n}\n\n// Fallback for modularized imports:\nexport default toDate;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link addDays} function options.\n */\n\n/**\n * @name addDays\n * @category Day Helpers\n * @summary Add the specified number of days to the given date.\n *\n * @description\n * Add the specified number of days to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of days to be added.\n * @param options - An object with options\n *\n * @returns The new date with the days added\n *\n * @example\n * // Add 10 days to 1 September 2014:\n * const result = addDays(new Date(2014, 8, 1), 10)\n * //=> Thu Sep 11 2014 00:00:00\n */\nexport function addDays(date, amount, options) {\n  const _date = toDate(date, options?.in);\n  if (isNaN(amount)) return constructFrom(options?.in || date, NaN);\n\n  // If 0 days, no-op to avoid changing times in the hour before end of DST\n  if (!amount) return _date;\n\n  _date.setDate(_date.getDate() + amount);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default addDays;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link addMonths} function options.\n */\n\n/**\n * @name addMonths\n * @category Month Helpers\n * @summary Add the specified number of months to the given date.\n *\n * @description\n * Add the specified number of months to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of months to be added.\n * @param options - The options object\n *\n * @returns The new date with the months added\n *\n * @example\n * // Add 5 months to 1 September 2014:\n * const result = addMonths(new Date(2014, 8, 1), 5)\n * //=> Sun Feb 01 2015 00:00:00\n *\n * // Add one month to 30 January 2023:\n * const result = addMonths(new Date(2023, 0, 30), 1)\n * //=> Tue Feb 28 2023 00:00:00\n */\nexport function addMonths(date, amount, options) {\n  const _date = toDate(date, options?.in);\n  if (isNaN(amount)) return constructFrom(options?.in || date, NaN);\n  if (!amount) {\n    // If 0 months, no-op to avoid changing times in the hour before end of DST\n    return _date;\n  }\n  const dayOfMonth = _date.getDate();\n\n  // The JS Date object supports date math by accepting out-of-bounds values for\n  // month, day, etc. For example, new Date(2020, 0, 0) returns 31 Dec 2019 and\n  // new Date(2020, 13, 1) returns 1 Feb 2021.  This is *almost* the behavior we\n  // want except that dates will wrap around the end of a month, meaning that\n  // new Date(2020, 13, 31) will return 3 Mar 2021 not 28 Feb 2021 as desired. So\n  // we'll default to the end of the desired month by adding 1 to the desired\n  // month and using a date of 0 to back up one day to the end of the desired\n  // month.\n  const endOfDesiredMonth = constructFrom(options?.in || date, _date.getTime());\n  endOfDesiredMonth.setMonth(_date.getMonth() + amount + 1, 0);\n  const daysInMonth = endOfDesiredMonth.getDate();\n  if (dayOfMonth >= daysInMonth) {\n    // If we're already at the end of the month, then this is the correct date\n    // and we're done.\n    return endOfDesiredMonth;\n  } else {\n    // Otherwise, we now know that setting the original day-of-month value won't\n    // cause an overflow, so set the desired day-of-month. Note that we can't\n    // just set the date of `endOfDesiredMonth` because that object may have had\n    // its time changed in the unusual case where where a DST transition was on\n    // the last day of the month and its local time was in the hour skipped or\n    // repeated next to a DST transition.  So we use `date` instead which is\n    // guaranteed to still have the original time.\n    _date.setFullYear(\n      endOfDesiredMonth.getFullYear(),\n      endOfDesiredMonth.getMonth(),\n      dayOfMonth,\n    );\n    return _date;\n  }\n}\n\n// Fallback for modularized imports:\nexport default addMonths;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link isWeekend} function options.\n */\n\n/**\n * @name isWeekend\n * @category Weekday Helpers\n * @summary Does the given date fall on a weekend?\n *\n * @description\n * Does the given date fall on a weekend? A weekend is either Saturday (`6`) or Sunday (`0`).\n *\n * @param date - The date to check\n * @param options - An object with options\n *\n * @returns The date falls on a weekend\n *\n * @example\n * // Does 5 October 2014 fall on a weekend?\n * const result = isWeekend(new Date(2014, 9, 5))\n * //=> true\n */\nexport function isWeekend(date, options) {\n  const day = toDate(date, options?.in).getDay();\n  return day === 0 || day === 6;\n}\n\n// Fallback for modularized imports:\nexport default isWeekend;\n","let defaultOptions = {};\n\nexport function getDefaultOptions() {\n  return defaultOptions;\n}\n\nexport function setDefaultOptions(newOptions) {\n  defaultOptions = newOptions;\n}\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfWeek} function options.\n */\n\n/**\n * @name startOfWeek\n * @category Week Helpers\n * @summary Return the start of a week for the given date.\n *\n * @description\n * Return the start of a week for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week\n *\n * @example\n * // The start of a week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Sun Aug 31 2014 00:00:00\n *\n * @example\n * // If the week starts on Monday, the start of the week for 2 September 2014 11:55:00:\n * const result = startOfWeek(new Date(2014, 8, 2, 11, 55, 0), { weekStartsOn: 1 })\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfWeek(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const weekStartsOn =\n    options?.weekStartsOn ??\n    options?.locale?.options?.weekStartsOn ??\n    defaultOptions.weekStartsOn ??\n    defaultOptions.locale?.options?.weekStartsOn ??\n    0;\n\n  const _date = toDate(date, options?.in);\n  const day = _date.getDay();\n  const diff = (day < weekStartsOn ? 7 : 0) + day - weekStartsOn;\n\n  _date.setDate(_date.getDate() - diff);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeek;\n","import { startOfWeek } from \"./startOfWeek.js\";\n\n/**\n * The {@link startOfISOWeek} function options.\n */\n\n/**\n * @name startOfISOWeek\n * @category ISO Week Helpers\n * @summary Return the start of an ISO week for the given date.\n *\n * @description\n * Return the start of an ISO week for the given date.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of an ISO week\n *\n * @example\n * // The start of an ISO week for 2 September 2014 11:55:00:\n * const result = startOfISOWeek(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfISOWeek(date, options) {\n  return startOfWeek(date, { ...options, weekStartsOn: 1 });\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeek;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getISOWeekYear} function options.\n */\n\n/**\n * @name getISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Get the ISO week-numbering year of the given date.\n *\n * @description\n * Get the ISO week-numbering year of the given date,\n * which always starts 3 days before the year's first Thursday.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param date - The given date\n *\n * @returns The ISO week-numbering year\n *\n * @example\n * // Which ISO-week numbering year is 2 January 2005?\n * const result = getISOWeekYear(new Date(2005, 0, 2))\n * //=> 2004\n */\nexport function getISOWeekYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n\n  const fourthOfJanuaryOfNextYear = constructFrom(_date, 0);\n  fourthOfJanuaryOfNextYear.setFullYear(year + 1, 0, 4);\n  fourthOfJanuaryOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfISOWeek(fourthOfJanuaryOfNextYear);\n\n  const fourthOfJanuaryOfThisYear = constructFrom(_date, 0);\n  fourthOfJanuaryOfThisYear.setFullYear(year, 0, 4);\n  fourthOfJanuaryOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfISOWeek(fourthOfJanuaryOfThisYear);\n\n  if (_date.getTime() >= startOfNextYear.getTime()) {\n    return year + 1;\n  } else if (_date.getTime() >= startOfThisYear.getTime()) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getISOWeekYear;\n","import { toDate } from \"../toDate.js\";\n\n/**\n * Google Chrome as of 67.0.3396.87 introduced timezones with offset that includes seconds.\n * They usually appear for dates that denote time before the timezones were introduced\n * (e.g. for 'Europe/Prague' timezone the offset is GMT+00:57:44 before 1 October 1891\n * and GMT+01:00:00 after that date)\n *\n * Date#getTimezoneOffset returns the offset in minutes and would return 57 for the example above,\n * which would lead to incorrect calculations.\n *\n * This function returns the timezone offset in milliseconds that takes seconds in account.\n */\nexport function getTimezoneOffsetInMilliseconds(date) {\n  const _date = toDate(date);\n  const utcDate = new Date(\n    Date.UTC(\n      _date.getFullYear(),\n      _date.getMonth(),\n      _date.getDate(),\n      _date.getHours(),\n      _date.getMinutes(),\n      _date.getSeconds(),\n      _date.getMilliseconds(),\n    ),\n  );\n  utcDate.setUTCFullYear(_date.getFullYear());\n  return +date - +utcDate;\n}\n","import { constructFrom } from \"../constructFrom.js\";\n\nexport function normalizeDates(context, ...dates) {\n  const normalize = constructFrom.bind(\n    null,\n    context || dates.find((date) => typeof date === \"object\"),\n  );\n  return dates.map(normalize);\n}\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfDay} function options.\n */\n\n/**\n * @name startOfDay\n * @category Day Helpers\n * @summary Return the start of a day for the given date.\n *\n * @description\n * Return the start of a day for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - The options\n *\n * @returns The start of a day\n *\n * @example\n * // The start of a day for 2 September 2014 11:55:00:\n * const result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 00:00:00\n */\nexport function startOfDay(date, options) {\n  const _date = toDate(date, options?.in);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfDay;\n","import { getTimezoneOffsetInMilliseconds } from \"./_lib/getTimezoneOffsetInMilliseconds.js\";\nimport { normalizeDates } from \"./_lib/normalizeDates.js\";\nimport { millisecondsInDay } from \"./constants.js\";\nimport { startOfDay } from \"./startOfDay.js\";\n\n/**\n * The {@link differenceInCalendarDays} function options.\n */\n\n/**\n * @name differenceInCalendarDays\n * @category Day Helpers\n * @summary Get the number of calendar days between the given dates.\n *\n * @description\n * Get the number of calendar days between the given dates. This means that the times are removed\n * from the dates and then the difference in days is calculated.\n *\n * @param laterDate - The later date\n * @param earlierDate - The earlier date\n * @param options - The options object\n *\n * @returns The number of calendar days\n *\n * @example\n * // How many calendar days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * const result = differenceInCalendarDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 366\n * // How many calendar days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * const result = differenceInCalendarDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 1\n */\nexport function differenceInCalendarDays(laterDate, earlierDate, options) {\n  const [laterDate_, earlierDate_] = normalizeDates(\n    options?.in,\n    laterDate,\n    earlierDate,\n  );\n\n  const laterStartOfDay = startOfDay(laterDate_);\n  const earlierStartOfDay = startOfDay(earlierDate_);\n\n  const laterTimestamp =\n    +laterStartOfDay - getTimezoneOffsetInMilliseconds(laterStartOfDay);\n  const earlierTimestamp =\n    +earlierStartOfDay - getTimezoneOffsetInMilliseconds(earlierStartOfDay);\n\n  // Round the number of days to the nearest integer because the number of\n  // milliseconds in a day is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round((laterTimestamp - earlierTimestamp) / millisecondsInDay);\n}\n\n// Fallback for modularized imports:\nexport default differenceInCalendarDays;\n","import { constructFrom } from \"./constructFrom.js\";\nimport { getISOWeekYear } from \"./getISOWeekYear.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\n\n/**\n * The {@link startOfISOWeekYear} function options.\n */\n\n/**\n * @name startOfISOWeekYear\n * @category ISO Week-Numbering Year Helpers\n * @summary Return the start of an ISO week-numbering year for the given date.\n *\n * @description\n * Return the start of an ISO week-numbering year,\n * which always starts 3 days before the year's first Thursday.\n * The result will be in the local timezone.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of an ISO week-numbering year\n *\n * @example\n * // The start of an ISO week-numbering year for 2 July 2005:\n * const result = startOfISOWeekYear(new Date(2005, 6, 2))\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfISOWeekYear(date, options) {\n  const year = getISOWeekYear(date, options);\n  const fourthOfJanuary = constructFrom(options?.in || date, 0);\n  fourthOfJanuary.setFullYear(year, 0, 4);\n  fourthOfJanuary.setHours(0, 0, 0, 0);\n  return startOfISOWeek(fourthOfJanuary);\n}\n\n// Fallback for modularized imports:\nexport default startOfISOWeekYear;\n","import { addDays } from \"./addDays.js\";\n\n/**\n * The {@link addWeeks} function options.\n */\n\n/**\n * @name addWeeks\n * @category Week Helpers\n * @summary Add the specified number of weeks to the given date.\n *\n * @description\n * Add the specified number of weeks to the given date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The date to be changed\n * @param amount - The amount of weeks to be added.\n * @param options - An object with options\n *\n * @returns The new date with the weeks added\n *\n * @example\n * // Add 4 weeks to 1 September 2014:\n * const result = addWeeks(new Date(2014, 8, 1), 4)\n * //=> Mon Sep 29 2014 00:00:00\n */\nexport function addWeeks(date, amount, options) {\n  return addDays(date, amount * 7, options);\n}\n\n// Fallback for modularized imports:\nexport default addWeeks;\n","import { normalizeDates } from \"./_lib/normalizeDates.js\";\nimport { startOfDay } from \"./startOfDay.js\";\n\n/**\n * The {@link isSameDay} function options.\n */\n\n/**\n * @name isSameDay\n * @category Day Helpers\n * @summary Are the given dates in the same day (and year and month)?\n *\n * @description\n * Are the given dates in the same day (and year and month)?\n *\n * @param laterDate - The first date to check\n * @param earlierDate - The second date to check\n * @param options - An object with options\n *\n * @returns The dates are in the same day (and year and month)\n *\n * @example\n * // Are 4 September 06:00:00 and 4 September 18:00:00 in the same day?\n * const result = isSameDay(new Date(2014, 8, 4, 6, 0), new Date(2014, 8, 4, 18, 0))\n * //=> true\n *\n * @example\n * // Are 4 September and 4 October in the same day?\n * const result = isSameDay(new Date(2014, 8, 4), new Date(2014, 9, 4))\n * //=> false\n *\n * @example\n * // Are 4 September, 2014 and 4 September, 2015 in the same day?\n * const result = isSameDay(new Date(2014, 8, 4), new Date(2015, 8, 4))\n * //=> false\n */\nexport function isSameDay(laterDate, earlierDate, options) {\n  const [dateLeft_, dateRight_] = normalizeDates(\n    options?.in,\n    laterDate,\n    earlierDate,\n  );\n  return +startOfDay(dateLeft_) === +startOfDay(dateRight_);\n}\n\n// Fallback for modularized imports:\nexport default isSameDay;\n","/**\n * @name isDate\n * @category Common Helpers\n * @summary Is the given value a date?\n *\n * @description\n * Returns true if the given value is an instance of Date. The function works for dates transferred across iframes.\n *\n * @param value - The value to check\n *\n * @returns True if the given value is a date\n *\n * @example\n * // For a valid date:\n * const result = isDate(new Date())\n * //=> true\n *\n * @example\n * // For an invalid date:\n * const result = isDate(new Date(NaN))\n * //=> true\n *\n * @example\n * // For some value:\n * const result = isDate('2014-02-31')\n * //=> false\n *\n * @example\n * // For an object:\n * const result = isDate({})\n * //=> false\n */\nexport function isDate(value) {\n  return (\n    value instanceof Date ||\n    (typeof value === \"object\" &&\n      Object.prototype.toString.call(value) === \"[object Date]\")\n  );\n}\n\n// Fallback for modularized imports:\nexport default isDate;\n","import { isDate } from \"./isDate.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * @name isValid\n * @category Common Helpers\n * @summary Is the given date valid?\n *\n * @description\n * Returns false if argument is Invalid Date and true otherwise.\n * Argument is converted to Date using `toDate`. See [toDate](https://date-fns.org/docs/toDate)\n * Invalid Date is a Date, whose time value is NaN.\n *\n * Time value of Date: http://es5.github.io/#x15.9.1.1\n *\n * @param date - The date to check\n *\n * @returns The date is valid\n *\n * @example\n * // For the valid date:\n * const result = isValid(new Date(2014, 1, 31))\n * //=> true\n *\n * @example\n * // For the value, convertible into a date:\n * const result = isValid(1393804800000)\n * //=> true\n *\n * @example\n * // For the invalid date:\n * const result = isValid(new Date(''))\n * //=> false\n */\nexport function isValid(date) {\n  return !((!isDate(date) && typeof date !== \"number\") || isNaN(+toDate(date)));\n}\n\n// Fallback for modularized imports:\nexport default isValid;\n","import { normalizeDates } from \"./_lib/normalizeDates.js\";\nimport { differenceInCalendarDays } from \"./differenceInCalendarDays.js\";\n\n/**\n * The {@link differenceInDays} function options.\n */\n\n/**\n * @name differenceInDays\n * @category Day Helpers\n * @summary Get the number of full days between the given dates.\n *\n * @description\n * Get the number of full day periods between two dates. Fractional days are\n * truncated towards zero.\n *\n * One \"full day\" is the distance between a local time in one day to the same\n * local time on the next or previous day. A full day can sometimes be less than\n * or more than 24 hours if a daylight savings change happens between two dates.\n *\n * To ignore DST and only measure exact 24-hour periods, use this instead:\n * `Math.trunc(differenceInHours(dateLeft, dateRight)/24)|0`.\n *\n * @param laterDate - The later date\n * @param earlierDate - The earlier date\n * @param options - An object with options\n *\n * @returns The number of full days according to the local timezone\n *\n * @example\n * // How many full days are between\n * // 2 July 2011 23:00:00 and 2 July 2012 00:00:00?\n * const result = differenceInDays(\n *   new Date(2012, 6, 2, 0, 0),\n *   new Date(2011, 6, 2, 23, 0)\n * )\n * //=> 365\n *\n * @example\n * // How many full days are between\n * // 2 July 2011 23:59:00 and 3 July 2011 00:01:00?\n * const result = differenceInDays(\n *   new Date(2011, 6, 3, 0, 1),\n *   new Date(2011, 6, 2, 23, 59)\n * )\n * //=> 0\n *\n * @example\n * // How many full days are between\n * // 1 March 2020 0:00 and 1 June 2020 0:00 ?\n * // Note: because local time is used, the\n * // result will always be 92 days, even in\n * // time zones where DST starts and the\n * // period has only 92*24-1 hours.\n * const result = differenceInDays(\n *   new Date(2020, 5, 1),\n *   new Date(2020, 2, 1)\n * )\n * //=> 92\n */\nexport function differenceInDays(laterDate, earlierDate, options) {\n  const [laterDate_, earlierDate_] = normalizeDates(\n    options?.in,\n    laterDate,\n    earlierDate,\n  );\n\n  const sign = compareLocalAsc(laterDate_, earlierDate_);\n  const difference = Math.abs(\n    differenceInCalendarDays(laterDate_, earlierDate_),\n  );\n\n  laterDate_.setDate(laterDate_.getDate() - sign * difference);\n\n  // Math.abs(diff in full days - diff in calendar days) === 1 if last calendar day is not full\n  // If so, result must be decreased by 1 in absolute value\n  const isLastDayNotFull = Number(\n    compareLocalAsc(laterDate_, earlierDate_) === -sign,\n  );\n\n  const result = sign * (difference - isLastDayNotFull);\n  // Prevent negative zero\n  return result === 0 ? 0 : result;\n}\n\n// Like `compareAsc` but uses local time not UTC, which is needed\n// for accurate equality comparisons of UTC timestamps that end up\n// having the same representation in local time, e.g. one hour before\n// DST ends vs. the instant that DST ends.\nfunction compareLocalAsc(laterDate, earlierDate) {\n  const diff =\n    laterDate.getFullYear() - earlierDate.getFullYear() ||\n    laterDate.getMonth() - earlierDate.getMonth() ||\n    laterDate.getDate() - earlierDate.getDate() ||\n    laterDate.getHours() - earlierDate.getHours() ||\n    laterDate.getMinutes() - earlierDate.getMinutes() ||\n    laterDate.getSeconds() - earlierDate.getSeconds() ||\n    laterDate.getMilliseconds() - earlierDate.getMilliseconds();\n\n  if (diff < 0) return -1;\n  if (diff > 0) return 1;\n\n  // Return 0 if diff is 0; return NaN if diff is NaN\n  return diff;\n}\n\n// Fallback for modularized imports:\nexport default differenceInDays;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link endOfMonth} function options.\n */\n\n/**\n * @name endOfMonth\n * @category Month Helpers\n * @summary Return the end of a month for the given date.\n *\n * @description\n * Return the end of a month for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The end of a month\n *\n * @example\n * // The end of a month for 2 September 2014 11:55:00:\n * const result = endOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 30 2014 23:59:59.999\n */\nexport function endOfMonth(date, options) {\n  const _date = toDate(date, options?.in);\n  const month = _date.getMonth();\n  _date.setFullYear(_date.getFullYear(), month + 1, 0);\n  _date.setHours(23, 59, 59, 999);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default endOfMonth;\n","import { normalizeDates } from \"./normalizeDates.js\";\n\nexport function normalizeInterval(context, interval) {\n  const [start, end] = normalizeDates(context, interval.start, interval.end);\n  return { start, end };\n}\n","import { normalizeInterval } from \"./_lib/normalizeInterval.js\";\nimport { constructFrom } from \"./constructFrom.js\";\n\n/**\n * The {@link eachDayOfInterval} function options.\n */\n\n/**\n * The {@link eachDayOfInterval} function result type. It resolves the proper data type.\n * It uses the first argument date object type, starting from the date argument,\n * then the start interval date, and finally the end interval date. If\n * a context function is passed, it uses the context function return type.\n */\n\n/**\n * @name eachDayOfInterval\n * @category Interval Helpers\n * @summary Return the array of dates within the specified time interval.\n *\n * @description\n * Return the array of dates within the specified time interval.\n *\n * @typeParam IntervalType - Interval type.\n * @typeParam Options - Options type.\n *\n * @param interval - The interval.\n * @param options - An object with options.\n *\n * @returns The array with starts of days from the day of the interval start to the day of the interval end\n *\n * @example\n * // Each day between 6 October 2014 and 10 October 2014:\n * const result = eachDayOfInterval({\n *   start: new Date(2014, 9, 6),\n *   end: new Date(2014, 9, 10)\n * })\n * //=> [\n * //   Mon Oct 06 2014 00:00:00,\n * //   Tue Oct 07 2014 00:00:00,\n * //   Wed Oct 08 2014 00:00:00,\n * //   Thu Oct 09 2014 00:00:00,\n * //   Fri Oct 10 2014 00:00:00\n * // ]\n */\nexport function eachDayOfInterval(interval, options) {\n  const { start, end } = normalizeInterval(options?.in, interval);\n\n  let reversed = +start > +end;\n  const endTime = reversed ? +start : +end;\n  const date = reversed ? end : start;\n  date.setHours(0, 0, 0, 0);\n\n  let step = options?.step ?? 1;\n  if (!step) return [];\n  if (step < 0) {\n    step = -step;\n    reversed = !reversed;\n  }\n\n  const dates = [];\n\n  while (+date <= endTime) {\n    dates.push(constructFrom(start, date));\n    date.setDate(date.getDate() + step);\n    date.setHours(0, 0, 0, 0);\n  }\n\n  return reversed ? dates.reverse() : dates;\n}\n\n// Fallback for modularized imports:\nexport default eachDayOfInterval;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfQuarter} function options.\n */\n\n/**\n * @name startOfQuarter\n * @category Quarter Helpers\n * @summary Return the start of a year quarter for the given date.\n *\n * @description\n * Return the start of a year quarter for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - The options\n *\n * @returns The start of a quarter\n *\n * @example\n * // The start of a quarter for 2 September 2014 11:55:00:\n * const result = startOfQuarter(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Jul 01 2014 00:00:00\n */\nexport function startOfQuarter(date, options) {\n  const _date = toDate(date, options?.in);\n  const currentMonth = _date.getMonth();\n  const month = currentMonth - (currentMonth % 3);\n  _date.setMonth(month, 1);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfQuarter;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfMonth} function options.\n */\n\n/**\n * @name startOfMonth\n * @category Month Helpers\n * @summary Return the start of a month for the given date.\n *\n * @description\n * Return the start of a month for the given date. The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments.\n * Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed,\n * or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a month\n *\n * @example\n * // The start of a month for 2 September 2014 11:55:00:\n * const result = startOfMonth(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Mon Sep 01 2014 00:00:00\n */\nexport function startOfMonth(date, options) {\n  const _date = toDate(date, options?.in);\n  _date.setDate(1);\n  _date.setHours(0, 0, 0, 0);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfMonth;\n","import { toDate } from \"./toDate.js\";\n\n/**\n * The {@link startOfYear} function options.\n */\n\n/**\n * @name startOfYear\n * @category Year Helpers\n * @summary Return the start of a year for the given date.\n *\n * @description\n * Return the start of a year for the given date.\n * The result will be in the local timezone.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param date - The original date\n * @param options - The options\n *\n * @returns The start of a year\n *\n * @example\n * // The start of a year for 2 September 2014 11:55:00:\n * const result = startOfYear(new Date(2014, 8, 2, 11, 55, 00))\n * //=> Wed Jan 01 2014 00:00:00\n */\nexport function startOfYear(date, options) {\n  const date_ = toDate(date, options?.in);\n  date_.setFullYear(date_.getFullYear(), 0, 1);\n  date_.setHours(0, 0, 0, 0);\n  return date_;\n}\n\n// Fallback for modularized imports:\nexport default startOfYear;\n","const formatDistanceLocale = {\n  lessThanXSeconds: {\n    one: \"less than a second\",\n    other: \"less than {{count}} seconds\",\n  },\n\n  xSeconds: {\n    one: \"1 second\",\n    other: \"{{count}} seconds\",\n  },\n\n  halfAMinute: \"half a minute\",\n\n  lessThanXMinutes: {\n    one: \"less than a minute\",\n    other: \"less than {{count}} minutes\",\n  },\n\n  xMinutes: {\n    one: \"1 minute\",\n    other: \"{{count}} minutes\",\n  },\n\n  aboutXHours: {\n    one: \"about 1 hour\",\n    other: \"about {{count}} hours\",\n  },\n\n  xHours: {\n    one: \"1 hour\",\n    other: \"{{count}} hours\",\n  },\n\n  xDays: {\n    one: \"1 day\",\n    other: \"{{count}} days\",\n  },\n\n  aboutXWeeks: {\n    one: \"about 1 week\",\n    other: \"about {{count}} weeks\",\n  },\n\n  xWeeks: {\n    one: \"1 week\",\n    other: \"{{count}} weeks\",\n  },\n\n  aboutXMonths: {\n    one: \"about 1 month\",\n    other: \"about {{count}} months\",\n  },\n\n  xMonths: {\n    one: \"1 month\",\n    other: \"{{count}} months\",\n  },\n\n  aboutXYears: {\n    one: \"about 1 year\",\n    other: \"about {{count}} years\",\n  },\n\n  xYears: {\n    one: \"1 year\",\n    other: \"{{count}} years\",\n  },\n\n  overXYears: {\n    one: \"over 1 year\",\n    other: \"over {{count}} years\",\n  },\n\n  almostXYears: {\n    one: \"almost 1 year\",\n    other: \"almost {{count}} years\",\n  },\n};\n\nexport const formatDistance = (token, count, options) => {\n  let result;\n\n  const tokenValue = formatDistanceLocale[token];\n  if (typeof tokenValue === \"string\") {\n    result = tokenValue;\n  } else if (count === 1) {\n    result = tokenValue.one;\n  } else {\n    result = tokenValue.other.replace(\"{{count}}\", count.toString());\n  }\n\n  if (options?.addSuffix) {\n    if (options.comparison && options.comparison > 0) {\n      return \"in \" + result;\n    } else {\n      return result + \" ago\";\n    }\n  }\n\n  return result;\n};\n","export function buildFormatLongFn(args) {\n  return (options = {}) => {\n    // TODO: Remove String()\n    const width = options.width ? String(options.width) : args.defaultWidth;\n    const format = args.formats[width] || args.formats[args.defaultWidth];\n    return format;\n  };\n}\n","import { buildFormatLongFn } from \"../../_lib/buildFormatLongFn.js\";\n\nconst dateFormats = {\n  full: \"EEEE, MMMM do, y\",\n  long: \"MMMM do, y\",\n  medium: \"MMM d, y\",\n  short: \"MM/dd/yyyy\",\n};\n\nconst timeFormats = {\n  full: \"h:mm:ss a zzzz\",\n  long: \"h:mm:ss a z\",\n  medium: \"h:mm:ss a\",\n  short: \"h:mm a\",\n};\n\nconst dateTimeFormats = {\n  full: \"{{date}} 'at' {{time}}\",\n  long: \"{{date}} 'at' {{time}}\",\n  medium: \"{{date}}, {{time}}\",\n  short: \"{{date}}, {{time}}\",\n};\n\nexport const formatLong = {\n  date: buildFormatLongFn({\n    formats: dateFormats,\n    defaultWidth: \"full\",\n  }),\n\n  time: buildFormatLongFn({\n    formats: timeFormats,\n    defaultWidth: \"full\",\n  }),\n\n  dateTime: buildFormatLongFn({\n    formats: dateTimeFormats,\n    defaultWidth: \"full\",\n  }),\n};\n","const formatRelativeLocale = {\n  lastWeek: \"'last' eeee 'at' p\",\n  yesterday: \"'yesterday at' p\",\n  today: \"'today at' p\",\n  tomorrow: \"'tomorrow at' p\",\n  nextWeek: \"eeee 'at' p\",\n  other: \"P\",\n};\n\nexport const formatRelative = (token, _date, _baseDate, _options) =>\n  formatRelativeLocale[token];\n","/**\n * The localize function argument callback which allows to convert raw value to\n * the actual type.\n *\n * @param value - The value to convert\n *\n * @returns The converted value\n */\n\n/**\n * The map of localized values for each width.\n */\n\n/**\n * The index type of the locale unit value. It types conversion of units of\n * values that don't start at 0 (i.e. quarters).\n */\n\n/**\n * Converts the unit value to the tuple of values.\n */\n\n/**\n * The tuple of localized era values. The first element represents BC,\n * the second element represents AD.\n */\n\n/**\n * The tuple of localized quarter values. The first element represents Q1.\n */\n\n/**\n * The tuple of localized day values. The first element represents Sunday.\n */\n\n/**\n * The tuple of localized month values. The first element represents January.\n */\n\nexport function buildLocalizeFn(args) {\n  return (value, options) => {\n    const context = options?.context ? String(options.context) : \"standalone\";\n\n    let valuesArray;\n    if (context === \"formatting\" && args.formattingValues) {\n      const defaultWidth = args.defaultFormattingWidth || args.defaultWidth;\n      const width = options?.width ? String(options.width) : defaultWidth;\n\n      valuesArray =\n        args.formattingValues[width] || args.formattingValues[defaultWidth];\n    } else {\n      const defaultWidth = args.defaultWidth;\n      const width = options?.width ? String(options.width) : args.defaultWidth;\n\n      valuesArray = args.values[width] || args.values[defaultWidth];\n    }\n    const index = args.argumentCallback ? args.argumentCallback(value) : value;\n\n    // @ts-expect-error - For some reason TypeScript just don't want to match it, no matter how hard we try. I challenge you to try to remove it!\n    return valuesArray[index];\n  };\n}\n","import { buildLocalizeFn } from \"../../_lib/buildLocalizeFn.js\";\n\nconst eraValues = {\n  narrow: [\"B\", \"A\"],\n  abbreviated: [\"BC\", \"AD\"],\n  wide: [\"Before Christ\", \"Anno Domini\"],\n};\n\nconst quarterValues = {\n  narrow: [\"1\", \"2\", \"3\", \"4\"],\n  abbreviated: [\"Q1\", \"Q2\", \"Q3\", \"Q4\"],\n  wide: [\"1st quarter\", \"2nd quarter\", \"3rd quarter\", \"4th quarter\"],\n};\n\n// Note: in English, the names of days of the week and months are capitalized.\n// If you are making a new locale based on this one, check if the same is true for the language you're working on.\n// Generally, formatted dates should look like they are in the middle of a sentence,\n// e.g. in Spanish language the weekdays and months should be in the lowercase.\nconst monthValues = {\n  narrow: [\"J\", \"F\", \"M\", \"A\", \"M\", \"J\", \"J\", \"A\", \"S\", \"O\", \"N\", \"D\"],\n  abbreviated: [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ],\n\n  wide: [\n    \"January\",\n    \"February\",\n    \"March\",\n    \"April\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"August\",\n    \"September\",\n    \"October\",\n    \"November\",\n    \"December\",\n  ],\n};\n\nconst dayValues = {\n  narrow: [\"S\", \"M\", \"T\", \"W\", \"T\", \"F\", \"S\"],\n  short: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"],\n  abbreviated: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  wide: [\n    \"Sunday\",\n    \"Monday\",\n    \"Tuesday\",\n    \"Wednesday\",\n    \"Thursday\",\n    \"Friday\",\n    \"Saturday\",\n  ],\n};\n\nconst dayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\",\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\",\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"morning\",\n    afternoon: \"afternoon\",\n    evening: \"evening\",\n    night: \"night\",\n  },\n};\n\nconst formattingDayPeriodValues = {\n  narrow: {\n    am: \"a\",\n    pm: \"p\",\n    midnight: \"mi\",\n    noon: \"n\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\",\n  },\n  abbreviated: {\n    am: \"AM\",\n    pm: \"PM\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\",\n  },\n  wide: {\n    am: \"a.m.\",\n    pm: \"p.m.\",\n    midnight: \"midnight\",\n    noon: \"noon\",\n    morning: \"in the morning\",\n    afternoon: \"in the afternoon\",\n    evening: \"in the evening\",\n    night: \"at night\",\n  },\n};\n\nconst ordinalNumber = (dirtyNumber, _options) => {\n  const number = Number(dirtyNumber);\n\n  // If ordinal numbers depend on context, for example,\n  // if they are different for different grammatical genders,\n  // use `options.unit`.\n  //\n  // `unit` can be 'year', 'quarter', 'month', 'week', 'date', 'dayOfYear',\n  // 'day', 'hour', 'minute', 'second'.\n\n  const rem100 = number % 100;\n  if (rem100 > 20 || rem100 < 10) {\n    switch (rem100 % 10) {\n      case 1:\n        return number + \"st\";\n      case 2:\n        return number + \"nd\";\n      case 3:\n        return number + \"rd\";\n    }\n  }\n  return number + \"th\";\n};\n\nexport const localize = {\n  ordinalNumber,\n\n  era: buildLocalizeFn({\n    values: eraValues,\n    defaultWidth: \"wide\",\n  }),\n\n  quarter: buildLocalizeFn({\n    values: quarterValues,\n    defaultWidth: \"wide\",\n    argumentCallback: (quarter) => quarter - 1,\n  }),\n\n  month: buildLocalizeFn({\n    values: monthValues,\n    defaultWidth: \"wide\",\n  }),\n\n  day: buildLocalizeFn({\n    values: dayValues,\n    defaultWidth: \"wide\",\n  }),\n\n  dayPeriod: buildLocalizeFn({\n    values: dayPeriodValues,\n    defaultWidth: \"wide\",\n    formattingValues: formattingDayPeriodValues,\n    defaultFormattingWidth: \"wide\",\n  }),\n};\n","export function buildMatchFn(args) {\n  return (string, options = {}) => {\n    const width = options.width;\n\n    const matchPattern =\n      (width && args.matchPatterns[width]) ||\n      args.matchPatterns[args.defaultMatchWidth];\n    const matchResult = string.match(matchPattern);\n\n    if (!matchResult) {\n      return null;\n    }\n    const matchedString = matchResult[0];\n\n    const parsePatterns =\n      (width && args.parsePatterns[width]) ||\n      args.parsePatterns[args.defaultParseWidth];\n\n    const key = Array.isArray(parsePatterns)\n      ? findIndex(parsePatterns, (pattern) => pattern.test(matchedString))\n      : // [TODO] -- I challenge you to fix the type\n        findKey(parsePatterns, (pattern) => pattern.test(matchedString));\n\n    let value;\n\n    value = args.valueCallback ? args.valueCallback(key) : key;\n    value = options.valueCallback\n      ? // [TODO] -- I challenge you to fix the type\n        options.valueCallback(value)\n      : value;\n\n    const rest = string.slice(matchedString.length);\n\n    return { value, rest };\n  };\n}\n\nfunction findKey(object, predicate) {\n  for (const key in object) {\n    if (\n      Object.prototype.hasOwnProperty.call(object, key) &&\n      predicate(object[key])\n    ) {\n      return key;\n    }\n  }\n  return undefined;\n}\n\nfunction findIndex(array, predicate) {\n  for (let key = 0; key < array.length; key++) {\n    if (predicate(array[key])) {\n      return key;\n    }\n  }\n  return undefined;\n}\n","export function buildMatchPatternFn(args) {\n  return (string, options = {}) => {\n    const matchResult = string.match(args.matchPattern);\n    if (!matchResult) return null;\n    const matchedString = matchResult[0];\n\n    const parseResult = string.match(args.parsePattern);\n    if (!parseResult) return null;\n    let value = args.valueCallback\n      ? args.valueCallback(parseResult[0])\n      : parseResult[0];\n\n    // [TODO] I challenge you to fix the type\n    value = options.valueCallback ? options.valueCallback(value) : value;\n\n    const rest = string.slice(matchedString.length);\n\n    return { value, rest };\n  };\n}\n","import { buildMatchFn } from \"../../_lib/buildMatchFn.js\";\nimport { buildMatchPatternFn } from \"../../_lib/buildMatchPatternFn.js\";\n\nconst matchOrdinalNumberPattern = /^(\\d+)(th|st|nd|rd)?/i;\nconst parseOrdinalNumberPattern = /\\d+/i;\n\nconst matchEraPatterns = {\n  narrow: /^(b|a)/i,\n  abbreviated: /^(b\\.?\\s?c\\.?|b\\.?\\s?c\\.?\\s?e\\.?|a\\.?\\s?d\\.?|c\\.?\\s?e\\.?)/i,\n  wide: /^(before christ|before common era|anno domini|common era)/i,\n};\nconst parseEraPatterns = {\n  any: [/^b/i, /^(a|c)/i],\n};\n\nconst matchQuarterPatterns = {\n  narrow: /^[1234]/i,\n  abbreviated: /^q[1234]/i,\n  wide: /^[1234](th|st|nd|rd)? quarter/i,\n};\nconst parseQuarterPatterns = {\n  any: [/1/i, /2/i, /3/i, /4/i],\n};\n\nconst matchMonthPatterns = {\n  narrow: /^[jfmasond]/i,\n  abbreviated: /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,\n  wide: /^(january|february|march|april|may|june|july|august|september|october|november|december)/i,\n};\nconst parseMonthPatterns = {\n  narrow: [\n    /^j/i,\n    /^f/i,\n    /^m/i,\n    /^a/i,\n    /^m/i,\n    /^j/i,\n    /^j/i,\n    /^a/i,\n    /^s/i,\n    /^o/i,\n    /^n/i,\n    /^d/i,\n  ],\n\n  any: [\n    /^ja/i,\n    /^f/i,\n    /^mar/i,\n    /^ap/i,\n    /^may/i,\n    /^jun/i,\n    /^jul/i,\n    /^au/i,\n    /^s/i,\n    /^o/i,\n    /^n/i,\n    /^d/i,\n  ],\n};\n\nconst matchDayPatterns = {\n  narrow: /^[smtwf]/i,\n  short: /^(su|mo|tu|we|th|fr|sa)/i,\n  abbreviated: /^(sun|mon|tue|wed|thu|fri|sat)/i,\n  wide: /^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i,\n};\nconst parseDayPatterns = {\n  narrow: [/^s/i, /^m/i, /^t/i, /^w/i, /^t/i, /^f/i, /^s/i],\n  any: [/^su/i, /^m/i, /^tu/i, /^w/i, /^th/i, /^f/i, /^sa/i],\n};\n\nconst matchDayPeriodPatterns = {\n  narrow: /^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,\n  any: /^([ap]\\.?\\s?m\\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i,\n};\nconst parseDayPeriodPatterns = {\n  any: {\n    am: /^a/i,\n    pm: /^p/i,\n    midnight: /^mi/i,\n    noon: /^no/i,\n    morning: /morning/i,\n    afternoon: /afternoon/i,\n    evening: /evening/i,\n    night: /night/i,\n  },\n};\n\nexport const match = {\n  ordinalNumber: buildMatchPatternFn({\n    matchPattern: matchOrdinalNumberPattern,\n    parsePattern: parseOrdinalNumberPattern,\n    valueCallback: (value) => parseInt(value, 10),\n  }),\n\n  era: buildMatchFn({\n    matchPatterns: matchEraPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseEraPatterns,\n    defaultParseWidth: \"any\",\n  }),\n\n  quarter: buildMatchFn({\n    matchPatterns: matchQuarterPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseQuarterPatterns,\n    defaultParseWidth: \"any\",\n    valueCallback: (index) => index + 1,\n  }),\n\n  month: buildMatchFn({\n    matchPatterns: matchMonthPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseMonthPatterns,\n    defaultParseWidth: \"any\",\n  }),\n\n  day: buildMatchFn({\n    matchPatterns: matchDayPatterns,\n    defaultMatchWidth: \"wide\",\n    parsePatterns: parseDayPatterns,\n    defaultParseWidth: \"any\",\n  }),\n\n  dayPeriod: buildMatchFn({\n    matchPatterns: matchDayPeriodPatterns,\n    defaultMatchWidth: \"any\",\n    parsePatterns: parseDayPeriodPatterns,\n    defaultParseWidth: \"any\",\n  }),\n};\n","import { formatDistance } from \"./en-US/_lib/formatDistance.js\";\nimport { formatLong } from \"./en-US/_lib/formatLong.js\";\nimport { formatRelative } from \"./en-US/_lib/formatRelative.js\";\nimport { localize } from \"./en-US/_lib/localize.js\";\nimport { match } from \"./en-US/_lib/match.js\";\n\n/**\n * @category Locales\n * @summary English locale (United States).\n * @language English\n * @iso-639-2 eng\n * @author Sasha Koss [@kossnocorp](https://github.com/kossnocorp)\n * @author Lesha Koss [@leshakoss](https://github.com/leshakoss)\n */\nexport const enUS = {\n  code: \"en-US\",\n  formatDistance: formatDistance,\n  formatLong: formatLong,\n  formatRelative: formatRelative,\n  localize: localize,\n  match: match,\n  options: {\n    weekStartsOn: 0 /* Sunday */,\n    firstWeekContainsDate: 1,\n  },\n};\n\n// Fallback for modularized imports:\nexport default enUS;\n","import { differenceInCalendarDays } from \"./differenceInCalendarDays.js\";\nimport { startOfYear } from \"./startOfYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getDayOfYear} function options.\n */\n\n/**\n * @name getDayOfYear\n * @category Day Helpers\n * @summary Get the day of the year of the given date.\n *\n * @description\n * Get the day of the year of the given date.\n *\n * @param date - The given date\n * @param options - The options\n *\n * @returns The day of year\n *\n * @example\n * // Which day of the year is 2 July 2014?\n * const result = getDayOfYear(new Date(2014, 6, 2))\n * //=> 183\n */\nexport function getDayOfYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = differenceInCalendarDays(_date, startOfYear(_date));\n  const dayOfYear = diff + 1;\n  return dayOfYear;\n}\n\n// Fallback for modularized imports:\nexport default getDayOfYear;\n","import { millisecondsInWeek } from \"./constants.js\";\nimport { startOfISOWeek } from \"./startOfISOWeek.js\";\nimport { startOfISOWeekYear } from \"./startOfISOWeekYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getISOWeek} function options.\n */\n\n/**\n * @name getISOWeek\n * @category ISO Week Helpers\n * @summary Get the ISO week of the given date.\n *\n * @description\n * Get the ISO week of the given date.\n *\n * ISO week-numbering year: http://en.wikipedia.org/wiki/ISO_week_date\n *\n * @param date - The given date\n * @param options - The options\n *\n * @returns The ISO week\n *\n * @example\n * // Which week of the ISO-week numbering year is 2 January 2005?\n * const result = getISOWeek(new Date(2005, 0, 2))\n * //=> 53\n */\nexport function getISOWeek(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = +startOfISOWeek(_date) - +startOfISOWeekYear(_date);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getISOWeek;\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { constructFrom } from \"./constructFrom.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getWeekYear} function options.\n */\n\n/**\n * @name getWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Get the local week-numbering year of the given date.\n *\n * @description\n * Get the local week-numbering year of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @param date - The given date\n * @param options - An object with options.\n *\n * @returns The local week-numbering year\n *\n * @example\n * // Which week numbering year is 26 December 2004 with the default settings?\n * const result = getWeekYear(new Date(2004, 11, 26))\n * //=> 2005\n *\n * @example\n * // Which week numbering year is 26 December 2004 if week starts on Saturday?\n * const result = getWeekYear(new Date(2004, 11, 26), { weekStartsOn: 6 })\n * //=> 2004\n *\n * @example\n * // Which week numbering year is 26 December 2004 if the first week contains 4 January?\n * const result = getWeekYear(new Date(2004, 11, 26), { firstWeekContainsDate: 4 })\n * //=> 2004\n */\nexport function getWeekYear(date, options) {\n  const _date = toDate(date, options?.in);\n  const year = _date.getFullYear();\n\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate =\n    options?.firstWeekContainsDate ??\n    options?.locale?.options?.firstWeekContainsDate ??\n    defaultOptions.firstWeekContainsDate ??\n    defaultOptions.locale?.options?.firstWeekContainsDate ??\n    1;\n\n  const firstWeekOfNextYear = constructFrom(options?.in || date, 0);\n  firstWeekOfNextYear.setFullYear(year + 1, 0, firstWeekContainsDate);\n  firstWeekOfNextYear.setHours(0, 0, 0, 0);\n  const startOfNextYear = startOfWeek(firstWeekOfNextYear, options);\n\n  const firstWeekOfThisYear = constructFrom(options?.in || date, 0);\n  firstWeekOfThisYear.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeekOfThisYear.setHours(0, 0, 0, 0);\n  const startOfThisYear = startOfWeek(firstWeekOfThisYear, options);\n\n  if (+_date >= +startOfNextYear) {\n    return year + 1;\n  } else if (+_date >= +startOfThisYear) {\n    return year;\n  } else {\n    return year - 1;\n  }\n}\n\n// Fallback for modularized imports:\nexport default getWeekYear;\n","import { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { constructFrom } from \"./constructFrom.js\";\nimport { getWeekYear } from \"./getWeekYear.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\n\n/**\n * The {@link startOfWeekYear} function options.\n */\n\n/**\n * @name startOfWeekYear\n * @category Week-Numbering Year Helpers\n * @summary Return the start of a local week-numbering year for the given date.\n *\n * @description\n * Return the start of a local week-numbering year.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type.\n *\n * @param date - The original date\n * @param options - An object with options\n *\n * @returns The start of a week-numbering year\n *\n * @example\n * // The start of an a week-numbering year for 2 July 2005 with default settings:\n * const result = startOfWeekYear(new Date(2005, 6, 2))\n * //=> Sun Dec 26 2004 00:00:00\n *\n * @example\n * // The start of a week-numbering year for 2 July 2005\n * // if Monday is the first day of week\n * // and 4 January is always in the first week of the year:\n * const result = startOfWeekYear(new Date(2005, 6, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> Mon Jan 03 2005 00:00:00\n */\nexport function startOfWeekYear(date, options) {\n  const defaultOptions = getDefaultOptions();\n  const firstWeekContainsDate =\n    options?.firstWeekContainsDate ??\n    options?.locale?.options?.firstWeekContainsDate ??\n    defaultOptions.firstWeekContainsDate ??\n    defaultOptions.locale?.options?.firstWeekContainsDate ??\n    1;\n\n  const year = getWeekYear(date, options);\n  const firstWeek = constructFrom(options?.in || date, 0);\n  firstWeek.setFullYear(year, 0, firstWeekContainsDate);\n  firstWeek.setHours(0, 0, 0, 0);\n  const _date = startOfWeek(firstWeek, options);\n  return _date;\n}\n\n// Fallback for modularized imports:\nexport default startOfWeekYear;\n","import { millisecondsInWeek } from \"./constants.js\";\nimport { startOfWeek } from \"./startOfWeek.js\";\nimport { startOfWeekYear } from \"./startOfWeekYear.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link getWeek} function options.\n */\n\n/**\n * @name getWeek\n * @category Week Helpers\n * @summary Get the local week index of the given date.\n *\n * @description\n * Get the local week index of the given date.\n * The exact calculation depends on the values of\n * `options.weekStartsOn` (which is the index of the first day of the week)\n * and `options.firstWeekContainsDate` (which is the day of January, which is always in\n * the first week of the week-numbering year)\n *\n * Week numbering: https://en.wikipedia.org/wiki/Week#The_ISO_week_date_system\n *\n * @param date - The given date\n * @param options - An object with options\n *\n * @returns The week\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005 with default options?\n * const result = getWeek(new Date(2005, 0, 2))\n * //=> 2\n *\n * @example\n * // Which week of the local week numbering year is 2 January 2005,\n * // if Monday is the first day of the week,\n * // and the first week of the year always contains 4 January?\n * const result = getWeek(new Date(2005, 0, 2), {\n *   weekStartsOn: 1,\n *   firstWeekContainsDate: 4\n * })\n * //=> 53\n */\nexport function getWeek(date, options) {\n  const _date = toDate(date, options?.in);\n  const diff = +startOfWeek(_date, options) - +startOfWeekYear(_date, options);\n\n  // Round the number of weeks to the nearest integer because the number of\n  // milliseconds in a week is not constant (e.g. it's different in the week of\n  // the daylight saving time clock shift).\n  return Math.round(diff / millisecondsInWeek) + 1;\n}\n\n// Fallback for modularized imports:\nexport default getWeek;\n","export function addLeadingZeros(number, targetLength) {\n  const sign = number < 0 ? \"-\" : \"\";\n  const output = Math.abs(number).toString().padStart(targetLength, \"0\");\n  return sign + output;\n}\n","import { addLeadingZeros } from \"../addLeadingZeros.js\";\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* |                                |\n * |  d  | Day of month                   |  D  |                                |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  m  | Minute                         |  M  | Month                          |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  y  | Year (abs)                     |  Y  |                                |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n */\n\nexport const lightFormatters = {\n  // Year\n  y(date, token) {\n    // From http://www.unicode.org/reports/tr35/tr35-31/tr35-dates.html#Date_Format_tokens\n    // | Year     |     y | yy |   yyy |  yyyy | yyyyy |\n    // |----------|-------|----|-------|-------|-------|\n    // | AD 1     |     1 | 01 |   001 |  0001 | 00001 |\n    // | AD 12    |    12 | 12 |   012 |  0012 | 00012 |\n    // | AD 123   |   123 | 23 |   123 |  0123 | 00123 |\n    // | AD 1234  |  1234 | 34 |  1234 |  1234 | 01234 |\n    // | AD 12345 | 12345 | 45 | 12345 | 12345 | 12345 |\n\n    const signedYear = date.getFullYear();\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const year = signedYear > 0 ? signedYear : 1 - signedYear;\n    return addLeadingZeros(token === \"yy\" ? year % 100 : year, token.length);\n  },\n\n  // Month\n  M(date, token) {\n    const month = date.getMonth();\n    return token === \"M\" ? String(month + 1) : addLeadingZeros(month + 1, 2);\n  },\n\n  // Day of the month\n  d(date, token) {\n    return addLeadingZeros(date.getDate(), token.length);\n  },\n\n  // AM or PM\n  a(date, token) {\n    const dayPeriodEnumValue = date.getHours() / 12 >= 1 ? \"pm\" : \"am\";\n\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return dayPeriodEnumValue.toUpperCase();\n      case \"aaa\":\n        return dayPeriodEnumValue;\n      case \"aaaaa\":\n        return dayPeriodEnumValue[0];\n      case \"aaaa\":\n      default:\n        return dayPeriodEnumValue === \"am\" ? \"a.m.\" : \"p.m.\";\n    }\n  },\n\n  // Hour [1-12]\n  h(date, token) {\n    return addLeadingZeros(date.getHours() % 12 || 12, token.length);\n  },\n\n  // Hour [0-23]\n  H(date, token) {\n    return addLeadingZeros(date.getHours(), token.length);\n  },\n\n  // Minute\n  m(date, token) {\n    return addLeadingZeros(date.getMinutes(), token.length);\n  },\n\n  // Second\n  s(date, token) {\n    return addLeadingZeros(date.getSeconds(), token.length);\n  },\n\n  // Fraction of second\n  S(date, token) {\n    const numberOfDigits = token.length;\n    const milliseconds = date.getMilliseconds();\n    const fractionalSeconds = Math.trunc(\n      milliseconds * Math.pow(10, numberOfDigits - 3),\n    );\n    return addLeadingZeros(fractionalSeconds, token.length);\n  },\n};\n","import { getDayOfYear } from \"../../getDayOfYear.js\";\nimport { getISOWeek } from \"../../getISOWeek.js\";\nimport { getISOWeekYear } from \"../../getISOWeekYear.js\";\nimport { getWeek } from \"../../getWeek.js\";\nimport { getWeekYear } from \"../../getWeekYear.js\";\n\nimport { addLeadingZeros } from \"../addLeadingZeros.js\";\nimport { lightFormatters } from \"./lightFormatters.js\";\n\nconst dayPeriodEnum = {\n  am: \"am\",\n  pm: \"pm\",\n  midnight: \"midnight\",\n  noon: \"noon\",\n  morning: \"morning\",\n  afternoon: \"afternoon\",\n  evening: \"evening\",\n  night: \"night\",\n};\n\n/*\n * |     | Unit                           |     | Unit                           |\n * |-----|--------------------------------|-----|--------------------------------|\n * |  a  | AM, PM                         |  A* | Milliseconds in day            |\n * |  b  | AM, PM, noon, midnight         |  B  | Flexible day period            |\n * |  c  | Stand-alone local day of week  |  C* | Localized hour w/ day period   |\n * |  d  | Day of month                   |  D  | Day of year                    |\n * |  e  | Local day of week              |  E  | Day of week                    |\n * |  f  |                                |  F* | Day of week in month           |\n * |  g* | Modified Julian day            |  G  | Era                            |\n * |  h  | Hour [1-12]                    |  H  | Hour [0-23]                    |\n * |  i! | ISO day of week                |  I! | ISO week of year               |\n * |  j* | Localized hour w/ day period   |  J* | Localized hour w/o day period  |\n * |  k  | Hour [1-24]                    |  K  | Hour [0-11]                    |\n * |  l* | (deprecated)                   |  L  | Stand-alone month              |\n * |  m  | Minute                         |  M  | Month                          |\n * |  n  |                                |  N  |                                |\n * |  o! | Ordinal number modifier        |  O  | Timezone (GMT)                 |\n * |  p! | Long localized time            |  P! | Long localized date            |\n * |  q  | Stand-alone quarter            |  Q  | Quarter                        |\n * |  r* | Related Gregorian year         |  R! | ISO week-numbering year        |\n * |  s  | Second                         |  S  | Fraction of second             |\n * |  t! | Seconds timestamp              |  T! | Milliseconds timestamp         |\n * |  u  | Extended year                  |  U* | Cyclic year                    |\n * |  v* | Timezone (generic non-locat.)  |  V* | Timezone (location)            |\n * |  w  | Local week of year             |  W* | Week of month                  |\n * |  x  | Timezone (ISO-8601 w/o Z)      |  X  | Timezone (ISO-8601)            |\n * |  y  | Year (abs)                     |  Y  | Local week-numbering year      |\n * |  z  | Timezone (specific non-locat.) |  Z* | Timezone (aliases)             |\n *\n * Letters marked by * are not implemented but reserved by Unicode standard.\n *\n * Letters marked by ! are non-standard, but implemented by date-fns:\n * - `o` modifies the previous token to turn it into an ordinal (see `format` docs)\n * - `i` is ISO day of week. For `i` and `ii` is returns numeric ISO week days,\n *   i.e. 7 for Sunday, 1 for Monday, etc.\n * - `I` is ISO week of year, as opposed to `w` which is local week of year.\n * - `R` is ISO week-numbering year, as opposed to `Y` which is local week-numbering year.\n *   `R` is supposed to be used in conjunction with `I` and `i`\n *   for universal ISO week-numbering date, whereas\n *   `Y` is supposed to be used in conjunction with `w` and `e`\n *   for week-numbering date specific to the locale.\n * - `P` is long localized date format\n * - `p` is long localized time format\n */\n\nexport const formatters = {\n  // Era\n  G: function (date, token, localize) {\n    const era = date.getFullYear() > 0 ? 1 : 0;\n    switch (token) {\n      // AD, BC\n      case \"G\":\n      case \"GG\":\n      case \"GGG\":\n        return localize.era(era, { width: \"abbreviated\" });\n      // A, B\n      case \"GGGGG\":\n        return localize.era(era, { width: \"narrow\" });\n      // Anno Domini, Before Christ\n      case \"GGGG\":\n      default:\n        return localize.era(era, { width: \"wide\" });\n    }\n  },\n\n  // Year\n  y: function (date, token, localize) {\n    // Ordinal number\n    if (token === \"yo\") {\n      const signedYear = date.getFullYear();\n      // Returns 1 for 1 BC (which is year 0 in JavaScript)\n      const year = signedYear > 0 ? signedYear : 1 - signedYear;\n      return localize.ordinalNumber(year, { unit: \"year\" });\n    }\n\n    return lightFormatters.y(date, token);\n  },\n\n  // Local week-numbering year\n  Y: function (date, token, localize, options) {\n    const signedWeekYear = getWeekYear(date, options);\n    // Returns 1 for 1 BC (which is year 0 in JavaScript)\n    const weekYear = signedWeekYear > 0 ? signedWeekYear : 1 - signedWeekYear;\n\n    // Two digit year\n    if (token === \"YY\") {\n      const twoDigitYear = weekYear % 100;\n      return addLeadingZeros(twoDigitYear, 2);\n    }\n\n    // Ordinal number\n    if (token === \"Yo\") {\n      return localize.ordinalNumber(weekYear, { unit: \"year\" });\n    }\n\n    // Padding\n    return addLeadingZeros(weekYear, token.length);\n  },\n\n  // ISO week-numbering year\n  R: function (date, token) {\n    const isoWeekYear = getISOWeekYear(date);\n\n    // Padding\n    return addLeadingZeros(isoWeekYear, token.length);\n  },\n\n  // Extended year. This is a single number designating the year of this calendar system.\n  // The main difference between `y` and `u` localizers are B.C. years:\n  // | Year | `y` | `u` |\n  // |------|-----|-----|\n  // | AC 1 |   1 |   1 |\n  // | BC 1 |   1 |   0 |\n  // | BC 2 |   2 |  -1 |\n  // Also `yy` always returns the last two digits of a year,\n  // while `uu` pads single digit years to 2 characters and returns other years unchanged.\n  u: function (date, token) {\n    const year = date.getFullYear();\n    return addLeadingZeros(year, token.length);\n  },\n\n  // Quarter\n  Q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"Q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"QQ\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"Qo\":\n        return localize.ordinalNumber(quarter, { unit: \"quarter\" });\n      // Q1, Q2, Q3, Q4\n      case \"QQQ\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"QQQQQ\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"QQQQ\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Stand-alone quarter\n  q: function (date, token, localize) {\n    const quarter = Math.ceil((date.getMonth() + 1) / 3);\n    switch (token) {\n      // 1, 2, 3, 4\n      case \"q\":\n        return String(quarter);\n      // 01, 02, 03, 04\n      case \"qq\":\n        return addLeadingZeros(quarter, 2);\n      // 1st, 2nd, 3rd, 4th\n      case \"qo\":\n        return localize.ordinalNumber(quarter, { unit: \"quarter\" });\n      // Q1, Q2, Q3, Q4\n      case \"qqq\":\n        return localize.quarter(quarter, {\n          width: \"abbreviated\",\n          context: \"standalone\",\n        });\n      // 1, 2, 3, 4 (narrow quarter; could be not numerical)\n      case \"qqqqq\":\n        return localize.quarter(quarter, {\n          width: \"narrow\",\n          context: \"standalone\",\n        });\n      // 1st quarter, 2nd quarter, ...\n      case \"qqqq\":\n      default:\n        return localize.quarter(quarter, {\n          width: \"wide\",\n          context: \"standalone\",\n        });\n    }\n  },\n\n  // Month\n  M: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      case \"M\":\n      case \"MM\":\n        return lightFormatters.M(date, token);\n      // 1st, 2nd, ..., 12th\n      case \"Mo\":\n        return localize.ordinalNumber(month + 1, { unit: \"month\" });\n      // Jan, Feb, ..., Dec\n      case \"MMM\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // J, F, ..., D\n      case \"MMMMM\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // January, February, ..., December\n      case \"MMMM\":\n      default:\n        return localize.month(month, { width: \"wide\", context: \"formatting\" });\n    }\n  },\n\n  // Stand-alone month\n  L: function (date, token, localize) {\n    const month = date.getMonth();\n    switch (token) {\n      // 1, 2, ..., 12\n      case \"L\":\n        return String(month + 1);\n      // 01, 02, ..., 12\n      case \"LL\":\n        return addLeadingZeros(month + 1, 2);\n      // 1st, 2nd, ..., 12th\n      case \"Lo\":\n        return localize.ordinalNumber(month + 1, { unit: \"month\" });\n      // Jan, Feb, ..., Dec\n      case \"LLL\":\n        return localize.month(month, {\n          width: \"abbreviated\",\n          context: \"standalone\",\n        });\n      // J, F, ..., D\n      case \"LLLLL\":\n        return localize.month(month, {\n          width: \"narrow\",\n          context: \"standalone\",\n        });\n      // January, February, ..., December\n      case \"LLLL\":\n      default:\n        return localize.month(month, { width: \"wide\", context: \"standalone\" });\n    }\n  },\n\n  // Local week of year\n  w: function (date, token, localize, options) {\n    const week = getWeek(date, options);\n\n    if (token === \"wo\") {\n      return localize.ordinalNumber(week, { unit: \"week\" });\n    }\n\n    return addLeadingZeros(week, token.length);\n  },\n\n  // ISO week of year\n  I: function (date, token, localize) {\n    const isoWeek = getISOWeek(date);\n\n    if (token === \"Io\") {\n      return localize.ordinalNumber(isoWeek, { unit: \"week\" });\n    }\n\n    return addLeadingZeros(isoWeek, token.length);\n  },\n\n  // Day of the month\n  d: function (date, token, localize) {\n    if (token === \"do\") {\n      return localize.ordinalNumber(date.getDate(), { unit: \"date\" });\n    }\n\n    return lightFormatters.d(date, token);\n  },\n\n  // Day of year\n  D: function (date, token, localize) {\n    const dayOfYear = getDayOfYear(date);\n\n    if (token === \"Do\") {\n      return localize.ordinalNumber(dayOfYear, { unit: \"dayOfYear\" });\n    }\n\n    return addLeadingZeros(dayOfYear, token.length);\n  },\n\n  // Day of week\n  E: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    switch (token) {\n      // Tue\n      case \"E\":\n      case \"EE\":\n      case \"EEE\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // T\n      case \"EEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // Tu\n      case \"EEEEEE\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\",\n        });\n      // Tuesday\n      case \"EEEE\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Local day of week\n  e: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (Nth day of week with current locale or weekStartsOn)\n      case \"e\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"ee\":\n        return addLeadingZeros(localDayOfWeek, 2);\n      // 1st, 2nd, ..., 7th\n      case \"eo\":\n        return localize.ordinalNumber(localDayOfWeek, { unit: \"day\" });\n      case \"eee\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // T\n      case \"eeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // Tu\n      case \"eeeeee\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\",\n        });\n      // Tuesday\n      case \"eeee\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Stand-alone local day of week\n  c: function (date, token, localize, options) {\n    const dayOfWeek = date.getDay();\n    const localDayOfWeek = (dayOfWeek - options.weekStartsOn + 8) % 7 || 7;\n    switch (token) {\n      // Numerical value (same as in `e`)\n      case \"c\":\n        return String(localDayOfWeek);\n      // Padded numerical value\n      case \"cc\":\n        return addLeadingZeros(localDayOfWeek, token.length);\n      // 1st, 2nd, ..., 7th\n      case \"co\":\n        return localize.ordinalNumber(localDayOfWeek, { unit: \"day\" });\n      case \"ccc\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"standalone\",\n        });\n      // T\n      case \"ccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"standalone\",\n        });\n      // Tu\n      case \"cccccc\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"standalone\",\n        });\n      // Tuesday\n      case \"cccc\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"standalone\",\n        });\n    }\n  },\n\n  // ISO day of week\n  i: function (date, token, localize) {\n    const dayOfWeek = date.getDay();\n    const isoDayOfWeek = dayOfWeek === 0 ? 7 : dayOfWeek;\n    switch (token) {\n      // 2\n      case \"i\":\n        return String(isoDayOfWeek);\n      // 02\n      case \"ii\":\n        return addLeadingZeros(isoDayOfWeek, token.length);\n      // 2nd\n      case \"io\":\n        return localize.ordinalNumber(isoDayOfWeek, { unit: \"day\" });\n      // Tue\n      case \"iii\":\n        return localize.day(dayOfWeek, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      // T\n      case \"iiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      // Tu\n      case \"iiiiii\":\n        return localize.day(dayOfWeek, {\n          width: \"short\",\n          context: \"formatting\",\n        });\n      // Tuesday\n      case \"iiii\":\n      default:\n        return localize.day(dayOfWeek, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // AM or PM\n  a: function (date, token, localize) {\n    const hours = date.getHours();\n    const dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n\n    switch (token) {\n      case \"a\":\n      case \"aa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      case \"aaa\":\n        return localize\n          .dayPeriod(dayPeriodEnumValue, {\n            width: \"abbreviated\",\n            context: \"formatting\",\n          })\n          .toLowerCase();\n      case \"aaaaa\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      case \"aaaa\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // AM, PM, midnight, noon\n  b: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours === 12) {\n      dayPeriodEnumValue = dayPeriodEnum.noon;\n    } else if (hours === 0) {\n      dayPeriodEnumValue = dayPeriodEnum.midnight;\n    } else {\n      dayPeriodEnumValue = hours / 12 >= 1 ? \"pm\" : \"am\";\n    }\n\n    switch (token) {\n      case \"b\":\n      case \"bb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      case \"bbb\":\n        return localize\n          .dayPeriod(dayPeriodEnumValue, {\n            width: \"abbreviated\",\n            context: \"formatting\",\n          })\n          .toLowerCase();\n      case \"bbbbb\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      case \"bbbb\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // in the morning, in the afternoon, in the evening, at night\n  B: function (date, token, localize) {\n    const hours = date.getHours();\n    let dayPeriodEnumValue;\n    if (hours >= 17) {\n      dayPeriodEnumValue = dayPeriodEnum.evening;\n    } else if (hours >= 12) {\n      dayPeriodEnumValue = dayPeriodEnum.afternoon;\n    } else if (hours >= 4) {\n      dayPeriodEnumValue = dayPeriodEnum.morning;\n    } else {\n      dayPeriodEnumValue = dayPeriodEnum.night;\n    }\n\n    switch (token) {\n      case \"B\":\n      case \"BB\":\n      case \"BBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"abbreviated\",\n          context: \"formatting\",\n        });\n      case \"BBBBB\":\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"narrow\",\n          context: \"formatting\",\n        });\n      case \"BBBB\":\n      default:\n        return localize.dayPeriod(dayPeriodEnumValue, {\n          width: \"wide\",\n          context: \"formatting\",\n        });\n    }\n  },\n\n  // Hour [1-12]\n  h: function (date, token, localize) {\n    if (token === \"ho\") {\n      let hours = date.getHours() % 12;\n      if (hours === 0) hours = 12;\n      return localize.ordinalNumber(hours, { unit: \"hour\" });\n    }\n\n    return lightFormatters.h(date, token);\n  },\n\n  // Hour [0-23]\n  H: function (date, token, localize) {\n    if (token === \"Ho\") {\n      return localize.ordinalNumber(date.getHours(), { unit: \"hour\" });\n    }\n\n    return lightFormatters.H(date, token);\n  },\n\n  // Hour [0-11]\n  K: function (date, token, localize) {\n    const hours = date.getHours() % 12;\n\n    if (token === \"Ko\") {\n      return localize.ordinalNumber(hours, { unit: \"hour\" });\n    }\n\n    return addLeadingZeros(hours, token.length);\n  },\n\n  // Hour [1-24]\n  k: function (date, token, localize) {\n    let hours = date.getHours();\n    if (hours === 0) hours = 24;\n\n    if (token === \"ko\") {\n      return localize.ordinalNumber(hours, { unit: \"hour\" });\n    }\n\n    return addLeadingZeros(hours, token.length);\n  },\n\n  // Minute\n  m: function (date, token, localize) {\n    if (token === \"mo\") {\n      return localize.ordinalNumber(date.getMinutes(), { unit: \"minute\" });\n    }\n\n    return lightFormatters.m(date, token);\n  },\n\n  // Second\n  s: function (date, token, localize) {\n    if (token === \"so\") {\n      return localize.ordinalNumber(date.getSeconds(), { unit: \"second\" });\n    }\n\n    return lightFormatters.s(date, token);\n  },\n\n  // Fraction of second\n  S: function (date, token) {\n    return lightFormatters.S(date, token);\n  },\n\n  // Timezone (ISO-8601. If offset is 0, output is always `'Z'`)\n  X: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    if (timezoneOffset === 0) {\n      return \"Z\";\n    }\n\n    switch (token) {\n      // Hours and optional minutes\n      case \"X\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XX`\n      case \"XXXX\":\n      case \"XX\": // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `XXX`\n      case \"XXXXX\":\n      case \"XXX\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Timezone (ISO-8601. If offset is 0, output is `'+00:00'` or equivalent)\n  x: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    switch (token) {\n      // Hours and optional minutes\n      case \"x\":\n        return formatTimezoneWithOptionalMinutes(timezoneOffset);\n\n      // Hours, minutes and optional seconds without `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xx`\n      case \"xxxx\":\n      case \"xx\": // Hours and minutes without `:` delimiter\n        return formatTimezone(timezoneOffset);\n\n      // Hours, minutes and optional seconds with `:` delimiter\n      // Note: neither ISO-8601 nor JavaScript supports seconds in timezone offsets\n      // so this token always has the same output as `xxx`\n      case \"xxxxx\":\n      case \"xxx\": // Hours and minutes with `:` delimiter\n      default:\n        return formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Timezone (GMT)\n  O: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case \"O\":\n      case \"OO\":\n      case \"OOO\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"OOOO\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Timezone (specific non-location)\n  z: function (date, token, _localize) {\n    const timezoneOffset = date.getTimezoneOffset();\n\n    switch (token) {\n      // Short\n      case \"z\":\n      case \"zz\":\n      case \"zzz\":\n        return \"GMT\" + formatTimezoneShort(timezoneOffset, \":\");\n      // Long\n      case \"zzzz\":\n      default:\n        return \"GMT\" + formatTimezone(timezoneOffset, \":\");\n    }\n  },\n\n  // Seconds timestamp\n  t: function (date, token, _localize) {\n    const timestamp = Math.trunc(+date / 1000);\n    return addLeadingZeros(timestamp, token.length);\n  },\n\n  // Milliseconds timestamp\n  T: function (date, token, _localize) {\n    return addLeadingZeros(+date, token.length);\n  },\n};\n\nfunction formatTimezoneShort(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = Math.trunc(absOffset / 60);\n  const minutes = absOffset % 60;\n  if (minutes === 0) {\n    return sign + String(hours);\n  }\n  return sign + String(hours) + delimiter + addLeadingZeros(minutes, 2);\n}\n\nfunction formatTimezoneWithOptionalMinutes(offset, delimiter) {\n  if (offset % 60 === 0) {\n    const sign = offset > 0 ? \"-\" : \"+\";\n    return sign + addLeadingZeros(Math.abs(offset) / 60, 2);\n  }\n  return formatTimezone(offset, delimiter);\n}\n\nfunction formatTimezone(offset, delimiter = \"\") {\n  const sign = offset > 0 ? \"-\" : \"+\";\n  const absOffset = Math.abs(offset);\n  const hours = addLeadingZeros(Math.trunc(absOffset / 60), 2);\n  const minutes = addLeadingZeros(absOffset % 60, 2);\n  return sign + hours + delimiter + minutes;\n}\n","const dateLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"P\":\n      return formatLong.date({ width: \"short\" });\n    case \"PP\":\n      return formatLong.date({ width: \"medium\" });\n    case \"PPP\":\n      return formatLong.date({ width: \"long\" });\n    case \"PPPP\":\n    default:\n      return formatLong.date({ width: \"full\" });\n  }\n};\n\nconst timeLongFormatter = (pattern, formatLong) => {\n  switch (pattern) {\n    case \"p\":\n      return formatLong.time({ width: \"short\" });\n    case \"pp\":\n      return formatLong.time({ width: \"medium\" });\n    case \"ppp\":\n      return formatLong.time({ width: \"long\" });\n    case \"pppp\":\n    default:\n      return formatLong.time({ width: \"full\" });\n  }\n};\n\nconst dateTimeLongFormatter = (pattern, formatLong) => {\n  const matchResult = pattern.match(/(P+)(p+)?/) || [];\n  const datePattern = matchResult[1];\n  const timePattern = matchResult[2];\n\n  if (!timePattern) {\n    return dateLongFormatter(pattern, formatLong);\n  }\n\n  let dateTimeFormat;\n\n  switch (datePattern) {\n    case \"P\":\n      dateTimeFormat = formatLong.dateTime({ width: \"short\" });\n      break;\n    case \"PP\":\n      dateTimeFormat = formatLong.dateTime({ width: \"medium\" });\n      break;\n    case \"PPP\":\n      dateTimeFormat = formatLong.dateTime({ width: \"long\" });\n      break;\n    case \"PPPP\":\n    default:\n      dateTimeFormat = formatLong.dateTime({ width: \"full\" });\n      break;\n  }\n\n  return dateTimeFormat\n    .replace(\"{{date}}\", dateLongFormatter(datePattern, formatLong))\n    .replace(\"{{time}}\", timeLongFormatter(timePattern, formatLong));\n};\n\nexport const longFormatters = {\n  p: timeLongFormatter,\n  P: dateTimeLongFormatter,\n};\n","const dayOfYearTokenRE = /^D+$/;\nconst weekYearTokenRE = /^Y+$/;\n\nconst throwTokens = [\"D\", \"DD\", \"YY\", \"YYYY\"];\n\nexport function isProtectedDayOfYearToken(token) {\n  return dayOfYearTokenRE.test(token);\n}\n\nexport function isProtectedWeekYearToken(token) {\n  return weekYearTokenRE.test(token);\n}\n\nexport function warnOrThrowProtectedError(token, format, input) {\n  const _message = message(token, format, input);\n  console.warn(_message);\n  if (throwTokens.includes(token)) throw new RangeError(_message);\n}\n\nfunction message(token, format, input) {\n  const subject = token[0] === \"Y\" ? \"years\" : \"days of the month\";\n  return `Use \\`${token.toLowerCase()}\\` instead of \\`${token}\\` (in \\`${format}\\`) for formatting ${subject} to the input \\`${input}\\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`;\n}\n","import { defaultLocale } from \"./_lib/defaultLocale.js\";\nimport { getDefaultOptions } from \"./_lib/defaultOptions.js\";\nimport { formatters } from \"./_lib/format/formatters.js\";\nimport { longFormatters } from \"./_lib/format/longFormatters.js\";\nimport {\n  isProtectedDayOfYearToken,\n  isProtectedWeekYearToken,\n  warnOrThrowProtectedError,\n} from \"./_lib/protectedTokens.js\";\nimport { isValid } from \"./isValid.js\";\nimport { toDate } from \"./toDate.js\";\n\n// Rexports of internal for libraries to use.\n// See: https://github.com/date-fns/date-fns/issues/3638#issuecomment-1877082874\nexport { formatters, longFormatters };\n\n// This RegExp consists of three parts separated by `|`:\n// - [yYQqMLwIdDecihHKkms]o matches any available ordinal number token\n//   (one of the certain letters followed by `o`)\n// - (\\w)\\1* matches any sequences of the same letter\n// - '' matches two quote characters in a row\n// - '(''|[^'])+('|$) matches anything surrounded by two quote characters ('),\n//   except a single quote symbol, which ends the sequence.\n//   Two quote characters do not end the sequence.\n//   If there is no matching single quote\n//   then the sequence will continue until the end of the string.\n// - . matches any single character unmatched by previous parts of the RegExps\nconst formattingTokensRegExp =\n  /[yYQqMLwIdDecihHKkms]o|(\\w)\\1*|''|'(''|[^'])+('|$)|./g;\n\n// This RegExp catches symbols escaped by quotes, and also\n// sequences of symbols P, p, and the combinations like `PPPPPPPppppp`\nconst longFormattingTokensRegExp = /P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;\n\nconst escapedStringRegExp = /^'([^]*?)'?$/;\nconst doubleQuoteRegExp = /''/g;\nconst unescapedLatinCharacterRegExp = /[a-zA-Z]/;\n\nexport { format as formatDate };\n\n/**\n * The {@link format} function options.\n */\n\n/**\n * @name format\n * @alias formatDate\n * @category Common Helpers\n * @summary Format the date.\n *\n * @description\n * Return the formatted date string in the given format. The result may vary by locale.\n *\n * >  Please note that the `format` tokens differ from Moment.js and other libraries.\n * > See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * The characters wrapped between two single quotes characters (') are escaped.\n * Two single quotes in a row, whether inside or outside a quoted sequence, represent a 'real' single quote.\n * (see the last example)\n *\n * Format of the string is based on Unicode Technical Standard #35:\n * https://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table\n * with a few additions (see note 7 below the table).\n *\n * Accepted patterns:\n * | Unit                            | Pattern | Result examples                   | Notes |\n * |---------------------------------|---------|-----------------------------------|-------|\n * | Era                             | G..GGG  | AD, BC                            |       |\n * |                                 | GGGG    | Anno Domini, Before Christ        | 2     |\n * |                                 | GGGGG   | A, B                              |       |\n * | Calendar year                   | y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | yo      | 44th, 1st, 0th, 17th              | 5,7   |\n * |                                 | yy      | 44, 01, 00, 17                    | 5     |\n * |                                 | yyy     | 044, 001, 1900, 2017              | 5     |\n * |                                 | yyyy    | 0044, 0001, 1900, 2017            | 5     |\n * |                                 | yyyyy   | ...                               | 3,5   |\n * | Local week-numbering year       | Y       | 44, 1, 1900, 2017                 | 5     |\n * |                                 | Yo      | 44th, 1st, 1900th, 2017th         | 5,7   |\n * |                                 | YY      | 44, 01, 00, 17                    | 5,8   |\n * |                                 | YYY     | 044, 001, 1900, 2017              | 5     |\n * |                                 | YYYY    | 0044, 0001, 1900, 2017            | 5,8   |\n * |                                 | YYYYY   | ...                               | 3,5   |\n * | ISO week-numbering year         | R       | -43, 0, 1, 1900, 2017             | 5,7   |\n * |                                 | RR      | -43, 00, 01, 1900, 2017           | 5,7   |\n * |                                 | RRR     | -043, 000, 001, 1900, 2017        | 5,7   |\n * |                                 | RRRR    | -0043, 0000, 0001, 1900, 2017     | 5,7   |\n * |                                 | RRRRR   | ...                               | 3,5,7 |\n * | Extended year                   | u       | -43, 0, 1, 1900, 2017             | 5     |\n * |                                 | uu      | -43, 01, 1900, 2017               | 5     |\n * |                                 | uuu     | -043, 001, 1900, 2017             | 5     |\n * |                                 | uuuu    | -0043, 0001, 1900, 2017           | 5     |\n * |                                 | uuuuu   | ...                               | 3,5   |\n * | Quarter (formatting)            | Q       | 1, 2, 3, 4                        |       |\n * |                                 | Qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | QQ      | 01, 02, 03, 04                    |       |\n * |                                 | QQQ     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | QQQQ    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | QQQQQ   | 1, 2, 3, 4                        | 4     |\n * | Quarter (stand-alone)           | q       | 1, 2, 3, 4                        |       |\n * |                                 | qo      | 1st, 2nd, 3rd, 4th                | 7     |\n * |                                 | qq      | 01, 02, 03, 04                    |       |\n * |                                 | qqq     | Q1, Q2, Q3, Q4                    |       |\n * |                                 | qqqq    | 1st quarter, 2nd quarter, ...     | 2     |\n * |                                 | qqqqq   | 1, 2, 3, 4                        | 4     |\n * | Month (formatting)              | M       | 1, 2, ..., 12                     |       |\n * |                                 | Mo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | MM      | 01, 02, ..., 12                   |       |\n * |                                 | MMM     | Jan, Feb, ..., Dec                |       |\n * |                                 | MMMM    | January, February, ..., December  | 2     |\n * |                                 | MMMMM   | J, F, ..., D                      |       |\n * | Month (stand-alone)             | L       | 1, 2, ..., 12                     |       |\n * |                                 | Lo      | 1st, 2nd, ..., 12th               | 7     |\n * |                                 | LL      | 01, 02, ..., 12                   |       |\n * |                                 | LLL     | Jan, Feb, ..., Dec                |       |\n * |                                 | LLLL    | January, February, ..., December  | 2     |\n * |                                 | LLLLL   | J, F, ..., D                      |       |\n * | Local week of year              | w       | 1, 2, ..., 53                     |       |\n * |                                 | wo      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | ww      | 01, 02, ..., 53                   |       |\n * | ISO week of year                | I       | 1, 2, ..., 53                     | 7     |\n * |                                 | Io      | 1st, 2nd, ..., 53th               | 7     |\n * |                                 | II      | 01, 02, ..., 53                   | 7     |\n * | Day of month                    | d       | 1, 2, ..., 31                     |       |\n * |                                 | do      | 1st, 2nd, ..., 31st               | 7     |\n * |                                 | dd      | 01, 02, ..., 31                   |       |\n * | Day of year                     | D       | 1, 2, ..., 365, 366               | 9     |\n * |                                 | Do      | 1st, 2nd, ..., 365th, 366th       | 7     |\n * |                                 | DD      | 01, 02, ..., 365, 366             | 9     |\n * |                                 | DDD     | 001, 002, ..., 365, 366           |       |\n * |                                 | DDDD    | ...                               | 3     |\n * | Day of week (formatting)        | E..EEE  | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | EEEE    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | EEEEE   | M, T, W, T, F, S, S               |       |\n * |                                 | EEEEEE  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | ISO day of week (formatting)    | i       | 1, 2, 3, ..., 7                   | 7     |\n * |                                 | io      | 1st, 2nd, ..., 7th                | 7     |\n * |                                 | ii      | 01, 02, ..., 07                   | 7     |\n * |                                 | iii     | Mon, Tue, Wed, ..., Sun           | 7     |\n * |                                 | iiii    | Monday, Tuesday, ..., Sunday      | 2,7   |\n * |                                 | iiiii   | M, T, W, T, F, S, S               | 7     |\n * |                                 | iiiiii  | Mo, Tu, We, Th, Fr, Sa, Su        | 7     |\n * | Local day of week (formatting)  | e       | 2, 3, 4, ..., 1                   |       |\n * |                                 | eo      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | ee      | 02, 03, ..., 01                   |       |\n * |                                 | eee     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | eeee    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | eeeee   | M, T, W, T, F, S, S               |       |\n * |                                 | eeeeee  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | Local day of week (stand-alone) | c       | 2, 3, 4, ..., 1                   |       |\n * |                                 | co      | 2nd, 3rd, ..., 1st                | 7     |\n * |                                 | cc      | 02, 03, ..., 01                   |       |\n * |                                 | ccc     | Mon, Tue, Wed, ..., Sun           |       |\n * |                                 | cccc    | Monday, Tuesday, ..., Sunday      | 2     |\n * |                                 | ccccc   | M, T, W, T, F, S, S               |       |\n * |                                 | cccccc  | Mo, Tu, We, Th, Fr, Sa, Su        |       |\n * | AM, PM                          | a..aa   | AM, PM                            |       |\n * |                                 | aaa     | am, pm                            |       |\n * |                                 | aaaa    | a.m., p.m.                        | 2     |\n * |                                 | aaaaa   | a, p                              |       |\n * | AM, PM, noon, midnight          | b..bb   | AM, PM, noon, midnight            |       |\n * |                                 | bbb     | am, pm, noon, midnight            |       |\n * |                                 | bbbb    | a.m., p.m., noon, midnight        | 2     |\n * |                                 | bbbbb   | a, p, n, mi                       |       |\n * | Flexible day period             | B..BBB  | at night, in the morning, ...     |       |\n * |                                 | BBBB    | at night, in the morning, ...     | 2     |\n * |                                 | BBBBB   | at night, in the morning, ...     |       |\n * | Hour [1-12]                     | h       | 1, 2, ..., 11, 12                 |       |\n * |                                 | ho      | 1st, 2nd, ..., 11th, 12th         | 7     |\n * |                                 | hh      | 01, 02, ..., 11, 12               |       |\n * | Hour [0-23]                     | H       | 0, 1, 2, ..., 23                  |       |\n * |                                 | Ho      | 0th, 1st, 2nd, ..., 23rd          | 7     |\n * |                                 | HH      | 00, 01, 02, ..., 23               |       |\n * | Hour [0-11]                     | K       | 1, 2, ..., 11, 0                  |       |\n * |                                 | Ko      | 1st, 2nd, ..., 11th, 0th          | 7     |\n * |                                 | KK      | 01, 02, ..., 11, 00               |       |\n * | Hour [1-24]                     | k       | 24, 1, 2, ..., 23                 |       |\n * |                                 | ko      | 24th, 1st, 2nd, ..., 23rd         | 7     |\n * |                                 | kk      | 24, 01, 02, ..., 23               |       |\n * | Minute                          | m       | 0, 1, ..., 59                     |       |\n * |                                 | mo      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | mm      | 00, 01, ..., 59                   |       |\n * | Second                          | s       | 0, 1, ..., 59                     |       |\n * |                                 | so      | 0th, 1st, ..., 59th               | 7     |\n * |                                 | ss      | 00, 01, ..., 59                   |       |\n * | Fraction of second              | S       | 0, 1, ..., 9                      |       |\n * |                                 | SS      | 00, 01, ..., 99                   |       |\n * |                                 | SSS     | 000, 001, ..., 999                |       |\n * |                                 | SSSS    | ...                               | 3     |\n * | Timezone (ISO-8601 w/ Z)        | X       | -08, +0530, Z                     |       |\n * |                                 | XX      | -0800, +0530, Z                   |       |\n * |                                 | XXX     | -08:00, +05:30, Z                 |       |\n * |                                 | XXXX    | -0800, +0530, Z, +123456          | 2     |\n * |                                 | XXXXX   | -08:00, +05:30, Z, +12:34:56      |       |\n * | Timezone (ISO-8601 w/o Z)       | x       | -08, +0530, +00                   |       |\n * |                                 | xx      | -0800, +0530, +0000               |       |\n * |                                 | xxx     | -08:00, +05:30, +00:00            | 2     |\n * |                                 | xxxx    | -0800, +0530, +0000, +123456      |       |\n * |                                 | xxxxx   | -08:00, +05:30, +00:00, +12:34:56 |       |\n * | Timezone (GMT)                  | O...OOO | GMT-8, GMT+5:30, GMT+0            |       |\n * |                                 | OOOO    | GMT-08:00, GMT+05:30, GMT+00:00   | 2     |\n * | Timezone (specific non-locat.)  | z...zzz | GMT-8, GMT+5:30, GMT+0            | 6     |\n * |                                 | zzzz    | GMT-08:00, GMT+05:30, GMT+00:00   | 2,6   |\n * | Seconds timestamp               | t       | 512969520                         | 7     |\n * |                                 | tt      | ...                               | 3,7   |\n * | Milliseconds timestamp          | T       | 512969520900                      | 7     |\n * |                                 | TT      | ...                               | 3,7   |\n * | Long localized date             | P       | 04/29/1453                        | 7     |\n * |                                 | PP      | Apr 29, 1453                      | 7     |\n * |                                 | PPP     | April 29th, 1453                  | 7     |\n * |                                 | PPPP    | Friday, April 29th, 1453          | 2,7   |\n * | Long localized time             | p       | 12:00 AM                          | 7     |\n * |                                 | pp      | 12:00:00 AM                       | 7     |\n * |                                 | ppp     | 12:00:00 AM GMT+2                 | 7     |\n * |                                 | pppp    | 12:00:00 AM GMT+02:00             | 2,7   |\n * | Combination of date and time    | Pp      | 04/29/1453, 12:00 AM              | 7     |\n * |                                 | PPpp    | Apr 29, 1453, 12:00:00 AM         | 7     |\n * |                                 | PPPppp  | April 29th, 1453 at ...           | 7     |\n * |                                 | PPPPpppp| Friday, April 29th, 1453 at ...   | 2,7   |\n * Notes:\n * 1. \"Formatting\" units (e.g. formatting quarter) in the default en-US locale\n *    are the same as \"stand-alone\" units, but are different in some languages.\n *    \"Formatting\" units are declined according to the rules of the language\n *    in the context of a date. \"Stand-alone\" units are always nominative singular:\n *\n *    `format(new Date(2017, 10, 6), 'do LLLL', {locale: cs}) //=> '6. listopad'`\n *\n *    `format(new Date(2017, 10, 6), 'do MMMM', {locale: cs}) //=> '6. listopadu'`\n *\n * 2. Any sequence of the identical letters is a pattern, unless it is escaped by\n *    the single quote characters (see below).\n *    If the sequence is longer than listed in table (e.g. `EEEEEEEEEEE`)\n *    the output will be the same as default pattern for this unit, usually\n *    the longest one (in case of ISO weekdays, `EEEE`). Default patterns for units\n *    are marked with \"2\" in the last column of the table.\n *\n *    `format(new Date(2017, 10, 6), 'MMM') //=> 'Nov'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMM') //=> 'N'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMM') //=> 'November'`\n *\n *    `format(new Date(2017, 10, 6), 'MMMMMMM') //=> 'November'`\n *\n * 3. Some patterns could be unlimited length (such as `yyyyyyyy`).\n *    The output will be padded with zeros to match the length of the pattern.\n *\n *    `format(new Date(2017, 10, 6), 'yyyyyyyy') //=> '00002017'`\n *\n * 4. `QQQQQ` and `qqqqq` could be not strictly numerical in some locales.\n *    These tokens represent the shortest form of the quarter.\n *\n * 5. The main difference between `y` and `u` patterns are B.C. years:\n *\n *    | Year | `y` | `u` |\n *    |------|-----|-----|\n *    | AC 1 |   1 |   1 |\n *    | BC 1 |   1 |   0 |\n *    | BC 2 |   2 |  -1 |\n *\n *    Also `yy` always returns the last two digits of a year,\n *    while `uu` pads single digit years to 2 characters and returns other years unchanged:\n *\n *    | Year | `yy` | `uu` |\n *    |------|------|------|\n *    | 1    |   01 |   01 |\n *    | 14   |   14 |   14 |\n *    | 376  |   76 |  376 |\n *    | 1453 |   53 | 1453 |\n *\n *    The same difference is true for local and ISO week-numbering years (`Y` and `R`),\n *    except local week-numbering years are dependent on `options.weekStartsOn`\n *    and `options.firstWeekContainsDate` (compare [getISOWeekYear](https://date-fns.org/docs/getISOWeekYear)\n *    and [getWeekYear](https://date-fns.org/docs/getWeekYear)).\n *\n * 6. Specific non-location timezones are currently unavailable in `date-fns`,\n *    so right now these tokens fall back to GMT timezones.\n *\n * 7. These patterns are not in the Unicode Technical Standard #35:\n *    - `i`: ISO day of week\n *    - `I`: ISO week of year\n *    - `R`: ISO week-numbering year\n *    - `t`: seconds timestamp\n *    - `T`: milliseconds timestamp\n *    - `o`: ordinal number modifier\n *    - `P`: long localized date\n *    - `p`: long localized time\n *\n * 8. `YY` and `YYYY` tokens represent week-numbering years but they are often confused with years.\n *    You should enable `options.useAdditionalWeekYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * 9. `D` and `DD` tokens represent days of the year but they are often confused with days of the month.\n *    You should enable `options.useAdditionalDayOfYearTokens` to use them. See: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n *\n * @param date - The original date\n * @param format - The string of tokens\n * @param options - An object with options\n *\n * @returns The formatted date string\n *\n * @throws `date` must not be Invalid Date\n * @throws `options.locale` must contain `localize` property\n * @throws `options.locale` must contain `formatLong` property\n * @throws use `yyyy` instead of `YYYY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `yy` instead of `YY` for formatting years using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `d` instead of `D` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws use `dd` instead of `DD` for formatting days of the month using [format provided] to the input [input provided]; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md\n * @throws format string contains an unescaped latin alphabet character\n *\n * @example\n * // Represent 11 February 2014 in middle-endian format:\n * const result = format(new Date(2014, 1, 11), 'MM/dd/yyyy')\n * //=> '02/11/2014'\n *\n * @example\n * // Represent 2 July 2014 in Esperanto:\n * import { eoLocale } from 'date-fns/locale/eo'\n * const result = format(new Date(2014, 6, 2), \"do 'de' MMMM yyyy\", {\n *   locale: eoLocale\n * })\n * //=> '2-a de julio 2014'\n *\n * @example\n * // Escape string by single quote characters:\n * const result = format(new Date(2014, 6, 2, 15), \"h 'o''clock'\")\n * //=> \"3 o'clock\"\n */\nexport function format(date, formatStr, options) {\n  const defaultOptions = getDefaultOptions();\n  const locale = options?.locale ?? defaultOptions.locale ?? defaultLocale;\n\n  const firstWeekContainsDate =\n    options?.firstWeekContainsDate ??\n    options?.locale?.options?.firstWeekContainsDate ??\n    defaultOptions.firstWeekContainsDate ??\n    defaultOptions.locale?.options?.firstWeekContainsDate ??\n    1;\n\n  const weekStartsOn =\n    options?.weekStartsOn ??\n    options?.locale?.options?.weekStartsOn ??\n    defaultOptions.weekStartsOn ??\n    defaultOptions.locale?.options?.weekStartsOn ??\n    0;\n\n  const originalDate = toDate(date, options?.in);\n\n  if (!isValid(originalDate)) {\n    throw new RangeError(\"Invalid time value\");\n  }\n\n  let parts = formatStr\n    .match(longFormattingTokensRegExp)\n    .map((substring) => {\n      const firstCharacter = substring[0];\n      if (firstCharacter === \"p\" || firstCharacter === \"P\") {\n        const longFormatter = longFormatters[firstCharacter];\n        return longFormatter(substring, locale.formatLong);\n      }\n      return substring;\n    })\n    .join(\"\")\n    .match(formattingTokensRegExp)\n    .map((substring) => {\n      // Replace two single quote characters with one single quote character\n      if (substring === \"''\") {\n        return { isToken: false, value: \"'\" };\n      }\n\n      const firstCharacter = substring[0];\n      if (firstCharacter === \"'\") {\n        return { isToken: false, value: cleanEscapedString(substring) };\n      }\n\n      if (formatters[firstCharacter]) {\n        return { isToken: true, value: substring };\n      }\n\n      if (firstCharacter.match(unescapedLatinCharacterRegExp)) {\n        throw new RangeError(\n          \"Format string contains an unescaped latin alphabet character `\" +\n            firstCharacter +\n            \"`\",\n        );\n      }\n\n      return { isToken: false, value: substring };\n    });\n\n  // invoke localize preprocessor (only for french locales at the moment)\n  if (locale.localize.preprocessor) {\n    parts = locale.localize.preprocessor(originalDate, parts);\n  }\n\n  const formatterOptions = {\n    firstWeekContainsDate,\n    weekStartsOn,\n    locale,\n  };\n\n  return parts\n    .map((part) => {\n      if (!part.isToken) return part.value;\n\n      const token = part.value;\n\n      if (\n        (!options?.useAdditionalWeekYearTokens &&\n          isProtectedWeekYearToken(token)) ||\n        (!options?.useAdditionalDayOfYearTokens &&\n          isProtectedDayOfYearToken(token))\n      ) {\n        warnOrThrowProtectedError(token, formatStr, String(date));\n      }\n\n      const formatter = formatters[token[0]];\n      return formatter(originalDate, token, locale.localize, formatterOptions);\n    })\n    .join(\"\");\n}\n\nfunction cleanEscapedString(input) {\n  const matched = input.match(escapedStringRegExp);\n\n  if (!matched) {\n    return input;\n  }\n\n  return matched[1].replace(doubleQuoteRegExp, \"'\");\n}\n\n// Fallback for modularized imports:\nexport default format;\n","import {\n  millisecondsInHour,\n  millisecondsInMinute,\n} from \"./constants.js\";\nimport { constructFrom } from \"./constructFrom.js\";\nimport { toDate } from \"./toDate.js\";\n\n/**\n * The {@link parseISO} function options.\n */\n\n/**\n * @name parseISO\n * @category Common Helpers\n * @summary Parse ISO string\n *\n * @description\n * Parse the given string in ISO 8601 format and return an instance of Date.\n *\n * Function accepts complete ISO 8601 formats as well as partial implementations.\n * ISO 8601: http://en.wikipedia.org/wiki/ISO_8601\n *\n * If the argument isn't a string, the function cannot parse the string or\n * the values are invalid, it returns Invalid Date.\n *\n * @typeParam DateType - The `Date` type, the function operates on. Gets inferred from passed arguments. Allows to use extensions like [`UTCDate`](https://github.com/date-fns/utc).\n * @typeParam ResultDate - The result `Date` type, it is the type returned from the context function if it is passed, or inferred from the arguments.\n *\n * @param argument - The value to convert\n * @param options - An object with options\n *\n * @returns The parsed date in the local time zone\n *\n * @example\n * // Convert string '2014-02-11T11:30:30' to date:\n * const result = parseISO('2014-02-11T11:30:30')\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert string '+02014101' to date,\n * // if the additional number of digits in the extended year format is 1:\n * const result = parseISO('+02014101', { additionalDigits: 1 })\n * //=> Fri Apr 11 2014 00:00:00\n */\nexport function parseISO(argument, options) {\n  const invalidDate = () => constructFrom(options?.in, NaN);\n\n  const additionalDigits = options?.additionalDigits ?? 2;\n  const dateStrings = splitDateString(argument);\n\n  let date;\n  if (dateStrings.date) {\n    const parseYearResult = parseYear(dateStrings.date, additionalDigits);\n    date = parseDate(parseYearResult.restDateString, parseYearResult.year);\n  }\n\n  if (!date || isNaN(+date)) return invalidDate();\n\n  const timestamp = +date;\n  let time = 0;\n  let offset;\n\n  if (dateStrings.time) {\n    time = parseTime(dateStrings.time);\n    if (isNaN(time)) return invalidDate();\n  }\n\n  if (dateStrings.timezone) {\n    offset = parseTimezone(dateStrings.timezone);\n    if (isNaN(offset)) return invalidDate();\n  } else {\n    const tmpDate = new Date(timestamp + time);\n    const result = toDate(0, options?.in);\n    result.setFullYear(\n      tmpDate.getUTCFullYear(),\n      tmpDate.getUTCMonth(),\n      tmpDate.getUTCDate(),\n    );\n    result.setHours(\n      tmpDate.getUTCHours(),\n      tmpDate.getUTCMinutes(),\n      tmpDate.getUTCSeconds(),\n      tmpDate.getUTCMilliseconds(),\n    );\n    return result;\n  }\n\n  return toDate(timestamp + time + offset, options?.in);\n}\n\nconst patterns = {\n  dateTimeDelimiter: /[T ]/,\n  timeZoneDelimiter: /[Z ]/i,\n  timezone: /([Z+-].*)$/,\n};\n\nconst dateRegex =\n  /^-?(?:(\\d{3})|(\\d{2})(?:-?(\\d{2}))?|W(\\d{2})(?:-?(\\d{1}))?|)$/;\nconst timeRegex =\n  /^(\\d{2}(?:[.,]\\d*)?)(?::?(\\d{2}(?:[.,]\\d*)?))?(?::?(\\d{2}(?:[.,]\\d*)?))?$/;\nconst timezoneRegex = /^([+-])(\\d{2})(?::?(\\d{2}))?$/;\n\nfunction splitDateString(dateString) {\n  const dateStrings = {};\n  const array = dateString.split(patterns.dateTimeDelimiter);\n  let timeString;\n\n  // The regex match should only return at maximum two array elements.\n  // [date], [time], or [date, time].\n  if (array.length > 2) {\n    return dateStrings;\n  }\n\n  if (/:/.test(array[0])) {\n    timeString = array[0];\n  } else {\n    dateStrings.date = array[0];\n    timeString = array[1];\n    if (patterns.timeZoneDelimiter.test(dateStrings.date)) {\n      dateStrings.date = dateString.split(patterns.timeZoneDelimiter)[0];\n      timeString = dateString.substr(\n        dateStrings.date.length,\n        dateString.length,\n      );\n    }\n  }\n\n  if (timeString) {\n    const token = patterns.timezone.exec(timeString);\n    if (token) {\n      dateStrings.time = timeString.replace(token[1], \"\");\n      dateStrings.timezone = token[1];\n    } else {\n      dateStrings.time = timeString;\n    }\n  }\n\n  return dateStrings;\n}\n\nfunction parseYear(dateString, additionalDigits) {\n  const regex = new RegExp(\n    \"^(?:(\\\\d{4}|[+-]\\\\d{\" +\n      (4 + additionalDigits) +\n      \"})|(\\\\d{2}|[+-]\\\\d{\" +\n      (2 + additionalDigits) +\n      \"})$)\",\n  );\n\n  const captures = dateString.match(regex);\n  // Invalid ISO-formatted year\n  if (!captures) return { year: NaN, restDateString: \"\" };\n\n  const year = captures[1] ? parseInt(captures[1]) : null;\n  const century = captures[2] ? parseInt(captures[2]) : null;\n\n  // either year or century is null, not both\n  return {\n    year: century === null ? year : century * 100,\n    restDateString: dateString.slice((captures[1] || captures[2]).length),\n  };\n}\n\nfunction parseDate(dateString, year) {\n  // Invalid ISO-formatted year\n  if (year === null) return new Date(NaN);\n\n  const captures = dateString.match(dateRegex);\n  // Invalid ISO-formatted string\n  if (!captures) return new Date(NaN);\n\n  const isWeekDate = !!captures[4];\n  const dayOfYear = parseDateUnit(captures[1]);\n  const month = parseDateUnit(captures[2]) - 1;\n  const day = parseDateUnit(captures[3]);\n  const week = parseDateUnit(captures[4]);\n  const dayOfWeek = parseDateUnit(captures[5]) - 1;\n\n  if (isWeekDate) {\n    if (!validateWeekDate(year, week, dayOfWeek)) {\n      return new Date(NaN);\n    }\n    return dayOfISOWeekYear(year, week, dayOfWeek);\n  } else {\n    const date = new Date(0);\n    if (\n      !validateDate(year, month, day) ||\n      !validateDayOfYearDate(year, dayOfYear)\n    ) {\n      return new Date(NaN);\n    }\n    date.setUTCFullYear(year, month, Math.max(dayOfYear, day));\n    return date;\n  }\n}\n\nfunction parseDateUnit(value) {\n  return value ? parseInt(value) : 1;\n}\n\nfunction parseTime(timeString) {\n  const captures = timeString.match(timeRegex);\n  if (!captures) return NaN; // Invalid ISO-formatted time\n\n  const hours = parseTimeUnit(captures[1]);\n  const minutes = parseTimeUnit(captures[2]);\n  const seconds = parseTimeUnit(captures[3]);\n\n  if (!validateTime(hours, minutes, seconds)) {\n    return NaN;\n  }\n\n  return (\n    hours * millisecondsInHour + minutes * millisecondsInMinute + seconds * 1000\n  );\n}\n\nfunction parseTimeUnit(value) {\n  return (value && parseFloat(value.replace(\",\", \".\"))) || 0;\n}\n\nfunction parseTimezone(timezoneString) {\n  if (timezoneString === \"Z\") return 0;\n\n  const captures = timezoneString.match(timezoneRegex);\n  if (!captures) return 0;\n\n  const sign = captures[1] === \"+\" ? -1 : 1;\n  const hours = parseInt(captures[2]);\n  const minutes = (captures[3] && parseInt(captures[3])) || 0;\n\n  if (!validateTimezone(hours, minutes)) {\n    return NaN;\n  }\n\n  return sign * (hours * millisecondsInHour + minutes * millisecondsInMinute);\n}\n\nfunction dayOfISOWeekYear(isoWeekYear, week, day) {\n  const date = new Date(0);\n  date.setUTCFullYear(isoWeekYear, 0, 4);\n  const fourthOfJanuaryDay = date.getUTCDay() || 7;\n  const diff = (week - 1) * 7 + day + 1 - fourthOfJanuaryDay;\n  date.setUTCDate(date.getUTCDate() + diff);\n  return date;\n}\n\n// Validation functions\n\n// February is null to handle the leap year (using ||)\nconst daysInMonths = [31, null, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\nfunction isLeapYearIndex(year) {\n  return year % 400 === 0 || (year % 4 === 0 && year % 100 !== 0);\n}\n\nfunction validateDate(year, month, date) {\n  return (\n    month >= 0 &&\n    month <= 11 &&\n    date >= 1 &&\n    date <= (daysInMonths[month] || (isLeapYearIndex(year) ? 29 : 28))\n  );\n}\n\nfunction validateDayOfYearDate(year, dayOfYear) {\n  return dayOfYear >= 1 && dayOfYear <= (isLeapYearIndex(year) ? 366 : 365);\n}\n\nfunction validateWeekDate(_year, week, day) {\n  return week >= 1 && week <= 53 && day >= 0 && day <= 6;\n}\n\nfunction validateTime(hours, minutes, seconds) {\n  if (hours === 24) {\n    return minutes === 0 && seconds === 0;\n  }\n\n  return (\n    seconds >= 0 &&\n    seconds < 60 &&\n    minutes >= 0 &&\n    minutes < 60 &&\n    hours >= 0 &&\n    hours < 25\n  );\n}\n\nfunction validateTimezone(_hours, minutes) {\n  return minutes >= 0 && minutes <= 59;\n}\n\n// Fallback for modularized imports:\nexport default parseISO;\n","/**\n * Timeline Generation Utilities\n * Generates cells for the Gantt chart timeline based on view mode\n */\n\nimport {\n  format,\n  addDays,\n  addWeeks,\n  addMonths,\n  startOfWeek,\n  startOfMonth,\n  endOfMonth,\n  getWeek,\n  isWeekend,\n  isSameDay,\n  startOfQuarter,\n} from 'date-fns';\nimport type { ViewMode } from '@/types';\n\n// =============================================================================\n// TYPES\n// =============================================================================\n\nexport interface TimelineCell {\n  date: Date;\n  dateStr: string; // ISO format for comparisons\n  dateEnd?: Date; // End date for cells that span multiple days (quarter view weeks)\n  label: string;\n  isToday: boolean;\n  isWeekend: boolean;\n  isBankHoliday: boolean;\n  isCustomHoliday: boolean;\n  bankHolidayName?: string;\n  isCompanyEvent: boolean;\n  companyEventName?: string;\n  dayOfWeek: number;\n  isFirstOfWeek: boolean;\n  isFirstOfMonth: boolean;\n  weekNumber: number;\n  monthLabel: string;\n  yearLabel: string;\n}\n\nexport interface TimelineHeader {\n  label: string;\n  span: number;\n  isCurrentPeriod: boolean;\n}\n\n// =============================================================================\n// CONSTANTS\n// =============================================================================\n\n// Increased buffer sizes for better zoom-out support\nconst PERIODS_CONFIG: Record<ViewMode, { before: number; after: number }> = {\n  week: { before: 26, after: 52 },     // ~6 months before, ~1 year after (daily cells)\n  month: { before: 12, after: 36 },    // 1 year before, 3 years after (daily cells)\n  quarter: { before: 8, after: 16 },   // 2 years before, 4 years after (weekly cells)\n  year: { before: 3, after: 7 },       // 3 years before, 7 years after (monthly cells)\n};\n\n// =============================================================================\n// CELL GENERATORS\n// =============================================================================\n\n/**\n * Generate timeline cells based on view mode\n */\nexport function generateTimelineCells(\n  currentDate: Date,\n  viewMode: ViewMode,\n  bankHolidayDates: Set<string>,\n  bankHolidays: Array<{ date: string; end_date?: string | null; name: string; is_custom?: boolean }>,\n  companyEventDates: Set<string> = new Set(),\n  companyEvents: Array<{ date: string; end_date?: string | null; name: string }> = []\n): TimelineCell[] {\n  const today = new Date();\n  today.setHours(0, 0, 0, 0);\n\n  // Helper to normalize date strings to YYYY-MM-DD (handles ISO strings with time)\n  const normalizeDate = (dateStr: string): string => dateStr.substring(0, 10);\n\n  const getHolidayInfo = (date: Date): { name?: string; isCustom: boolean } => {\n    const dateStr = format(date, 'yyyy-MM-dd');\n    // Find holiday that includes this date (handles multi-day holidays)\n    const holiday = bankHolidays.find((h) => {\n      const startDate = normalizeDate(h.date);\n      const endDate = normalizeDate(h.end_date || h.date);\n      return dateStr >= startDate && dateStr <= endDate;\n    });\n    return {\n      name: holiday?.name,\n      isCustom: holiday?.is_custom ?? false,\n    };\n  };\n  \n  const getEventInfo = (date: Date): { name?: string; isEvent: boolean } => {\n    const dateStr = format(date, 'yyyy-MM-dd');\n    // Find event that includes this date (handles multi-day events)\n    const event = companyEvents.find((e) => {\n      const startDate = normalizeDate(e.date);\n      const endDate = normalizeDate(e.end_date || e.date);\n      return dateStr >= startDate && dateStr <= endDate;\n    });\n    return {\n      name: event?.name,\n      isEvent: companyEventDates.has(dateStr),\n    };\n  };\n\n  switch (viewMode) {\n    case 'week':\n      return generateWeekViewCells(currentDate, today, bankHolidayDates, getHolidayInfo, getEventInfo);\n    case 'month':\n      return generateMonthViewCells(currentDate, today, bankHolidayDates, getHolidayInfo, getEventInfo);\n    case 'quarter':\n      return generateQuarterViewCells(currentDate, today, bankHolidayDates, getHolidayInfo, getEventInfo);\n    case 'year':\n      return generateYearViewCells(currentDate, today, bankHolidayDates, getHolidayInfo, getEventInfo);\n    default:\n      return [];\n  }\n}\n\n/**\n * Week view: Shows individual days, spanning ~8 weeks\n */\nfunction generateWeekViewCells(\n  currentDate: Date,\n  today: Date,\n  bankHolidayDates: Set<string>,\n  getHolidayInfo: (date: Date) => { name?: string; isCustom: boolean },\n  getEventInfo: (date: Date) => { name?: string; isEvent: boolean }\n): TimelineCell[] {\n  const cells: TimelineCell[] = [];\n  const { before, after } = PERIODS_CONFIG.week;\n\n  // Start from beginning of current week, minus 'before' weeks\n  const weekStart = startOfWeek(currentDate, { weekStartsOn: 1 }); // Monday\n  const startDate = addWeeks(weekStart, -before);\n  const totalWeeks = before + after + 1;\n  const totalDays = totalWeeks * 7;\n\n  for (let i = 0; i < totalDays; i++) {\n    const date = addDays(startDate, i);\n    cells.push(createCell(date, today, bankHolidayDates, getHolidayInfo, getEventInfo));\n  }\n\n  return cells;\n}\n\n/**\n * Month view: Shows individual days, spanning ~12 months\n */\nfunction generateMonthViewCells(\n  currentDate: Date,\n  today: Date,\n  bankHolidayDates: Set<string>,\n  getHolidayInfo: (date: Date) => { name?: string; isCustom: boolean },\n  getEventInfo: (date: Date) => { name?: string; isEvent: boolean }\n): TimelineCell[] {\n  const cells: TimelineCell[] = [];\n  const { before, after } = PERIODS_CONFIG.month;\n\n  // Start from beginning of current month, minus 'before' months\n  const monthStart = startOfMonth(currentDate);\n  const startDate = addMonths(monthStart, -before);\n  const endDate = endOfMonth(addMonths(monthStart, after));\n\n  let current = startDate;\n  while (current <= endDate) {\n    cells.push(createCell(current, today, bankHolidayDates, getHolidayInfo, getEventInfo));\n    current = addDays(current, 1);\n  }\n\n  return cells;\n}\n\n/**\n * Quarter view: Shows weeks, spanning ~4 quarters\n */\nfunction generateQuarterViewCells(\n  currentDate: Date,\n  today: Date,\n  bankHolidayDates: Set<string>,\n  getHolidayInfo: (date: Date) => { name?: string; isCustom: boolean },\n  getEventInfo: (date: Date) => { name?: string; isEvent: boolean }\n): TimelineCell[] {\n  const cells: TimelineCell[] = [];\n  const { before, after } = PERIODS_CONFIG.quarter;\n\n  // Start from beginning of current quarter, minus 'before' quarters\n  const quarterStart = startOfQuarter(currentDate);\n  const startDate = addMonths(quarterStart, -before * 3);\n  const endDate = addMonths(quarterStart, (after + 1) * 3);\n\n  // Generate weekly cells\n  let current = startOfWeek(startDate, { weekStartsOn: 1 });\n  while (current < endDate) {\n    const weekEnd = addDays(current, 6);\n    // For quarter view, isToday should be true if today falls within the week\n    const isTodayInWeek = today >= current && today <= weekEnd;\n    \n    const cell = createCell(current, today, bankHolidayDates, getHolidayInfo, getEventInfo);\n    // Add week end date (Sunday) for quarter view\n    cell.dateEnd = weekEnd;\n    // Override isToday to check if today is within this week\n    cell.isToday = isTodayInWeek;\n    cells.push(cell);\n    current = addWeeks(current, 1);\n  }\n\n  return cells;\n}\n\n/**\n * Year view: Shows months, spanning ~3 years\n */\nfunction generateYearViewCells(\n  currentDate: Date,\n  _today: Date,\n  _bankHolidayDates: Set<string>,\n  _getHolidayInfo: (date: Date) => { name?: string; isCustom: boolean },\n  _getEventInfo: (date: Date) => { name?: string; isEvent: boolean }\n): TimelineCell[] {\n  const cells: TimelineCell[] = [];\n  const { before, after } = PERIODS_CONFIG.year;\n\n  // Start from January of current year, minus 'before' years\n  const yearStart = new Date(currentDate.getFullYear(), 0, 1);\n  const startDate = addMonths(yearStart, -before * 12);\n  const totalMonths = (before + after + 1) * 12;\n\n  for (let i = 0; i < totalMonths; i++) {\n    const date = addMonths(startDate, i);\n    // For year view, create cells with month labels\n    cells.push(createYearViewCell(date));\n  }\n\n  return cells;\n}\n\n/**\n * Create a single timeline cell for year view (monthly cells)\n */\nfunction createYearViewCell(\n  date: Date\n): TimelineCell {\n  const dateStr = format(date, 'yyyy-MM-dd');\n  const dayOfWeek = date.getDay();\n  const currentMonth = new Date();\n  currentMonth.setHours(0, 0, 0, 0);\n  const isCurrentMonth = date.getFullYear() === currentMonth.getFullYear() &&\n                         date.getMonth() === currentMonth.getMonth();\n\n  return {\n    date,\n    dateStr,\n    label: format(date, 'MMM'), // Month abbreviation for year view\n    isToday: isCurrentMonth, // Highlight current month\n    isWeekend: false, // Not applicable for month-level cells\n    isBankHoliday: false, // Not applicable for month-level cells\n    isCustomHoliday: false, // Not applicable for month-level cells\n    bankHolidayName: undefined,\n    isCompanyEvent: false, // Not applicable for month-level cells\n    companyEventName: undefined,\n    dayOfWeek,\n    isFirstOfWeek: date.getDate() <= 7 && dayOfWeek === 1,\n    isFirstOfMonth: true, // Every cell is start of month\n    weekNumber: getWeek(date, { weekStartsOn: 1 }),\n    monthLabel: format(date, 'MMM'),\n    yearLabel: format(date, 'yyyy'),\n  };\n}\n\n/**\n * Create a single timeline cell\n */\nfunction createCell(\n  date: Date,\n  today: Date,\n  bankHolidayDates: Set<string>,\n  getHolidayInfo: (date: Date) => { name?: string; isCustom: boolean },\n  getEventInfo: (date: Date) => { name?: string; isEvent: boolean }\n): TimelineCell {\n  const dateStr = format(date, 'yyyy-MM-dd');\n  const dayOfWeek = date.getDay();\n  const holidayInfo = getHolidayInfo(date);\n  const eventInfo = getEventInfo(date);\n\n  return {\n    date,\n    dateStr,\n    label: format(date, 'd'),\n    isToday: isSameDay(date, today),\n    isWeekend: isWeekend(date),\n    isBankHoliday: bankHolidayDates.has(dateStr),\n    isCustomHoliday: holidayInfo.isCustom,\n    bankHolidayName: holidayInfo.name,\n    isCompanyEvent: eventInfo.isEvent,\n    companyEventName: eventInfo.name,\n    dayOfWeek,\n    isFirstOfWeek: dayOfWeek === 1, // Monday\n    isFirstOfMonth: date.getDate() === 1,\n    weekNumber: getWeek(date, { weekStartsOn: 1 }),\n    monthLabel: format(date, 'MMM'),\n    yearLabel: format(date, 'yyyy'),\n  };\n}\n\n// =============================================================================\n// HEADER GENERATORS\n// =============================================================================\n\n/**\n * Generate header rows for the timeline\n */\nexport function generateTimelineHeaders(\n  cells: TimelineCell[],\n  viewMode: ViewMode\n): { primary: TimelineHeader[]; secondary: TimelineHeader[] } {\n  switch (viewMode) {\n    case 'week':\n      return {\n        primary: generateMonthHeaders(cells),\n        secondary: generateDayHeaders(cells),\n      };\n    case 'month':\n      return {\n        primary: generateMonthHeaders(cells),\n        secondary: generateDayHeaders(cells),\n      };\n    case 'quarter':\n      return {\n        primary: generateQuarterHeaders(cells),\n        secondary: generateWeekHeaders(cells),\n      };\n    case 'year':\n      return {\n        primary: generateYearHeaders(cells),\n        secondary: generateMonthOnlyHeaders(cells),\n      };\n    default:\n      return { primary: [], secondary: [] };\n  }\n}\n\nfunction generateMonthHeaders(cells: TimelineCell[]): TimelineHeader[] {\n  const headers: TimelineHeader[] = [];\n  let currentMonth = '';\n  let currentSpan = 0;\n  const today = new Date();\n\n  cells.forEach((cell, index) => {\n    const monthKey = `${cell.yearLabel}-${cell.monthLabel}`;\n    \n    if (monthKey !== currentMonth) {\n      if (currentSpan > 0) {\n        headers.push({\n          label: currentMonth.split('-')[1] + ' ' + currentMonth.split('-')[0],\n          span: currentSpan,\n          isCurrentPeriod: false,\n        });\n      }\n      currentMonth = monthKey;\n      currentSpan = 1;\n    } else {\n      currentSpan++;\n    }\n\n    // Last cell\n    if (index === cells.length - 1) {\n      headers.push({\n        label: currentMonth.split('-')[1] + ' ' + currentMonth.split('-')[0],\n        span: currentSpan,\n        isCurrentPeriod: format(today, 'yyyy-MMM') === currentMonth,\n      });\n    }\n  });\n\n  return headers;\n}\n\nfunction generateDayHeaders(cells: TimelineCell[]): TimelineHeader[] {\n  return cells.map((cell) => ({\n    label: cell.label,\n    span: 1,\n    isCurrentPeriod: cell.isToday,\n  }));\n}\n\nfunction generateQuarterHeaders(cells: TimelineCell[]): TimelineHeader[] {\n  const headers: TimelineHeader[] = [];\n  let currentQuarter = '';\n  let currentSpan = 0;\n\n  cells.forEach((cell, index) => {\n    const quarter = Math.floor(cell.date.getMonth() / 3) + 1;\n    const quarterKey = `Q${quarter} ${cell.yearLabel}`;\n\n    if (quarterKey !== currentQuarter) {\n      if (currentSpan > 0) {\n        headers.push({\n          label: currentQuarter,\n          span: currentSpan,\n          isCurrentPeriod: false,\n        });\n      }\n      currentQuarter = quarterKey;\n      currentSpan = 1;\n    } else {\n      currentSpan++;\n    }\n\n    if (index === cells.length - 1) {\n      headers.push({\n        label: currentQuarter,\n        span: currentSpan,\n        isCurrentPeriod: false,\n      });\n    }\n  });\n\n  return headers;\n}\n\nfunction generateWeekHeaders(cells: TimelineCell[]): TimelineHeader[] {\n  return cells.map((cell) => ({\n    label: `W${cell.weekNumber}`,\n    span: 1,\n    isCurrentPeriod: cell.isToday,\n  }));\n}\n\nfunction generateYearHeaders(cells: TimelineCell[]): TimelineHeader[] {\n  const headers: TimelineHeader[] = [];\n  let currentYear = '';\n  let currentSpan = 0;\n  const thisYear = new Date().getFullYear().toString();\n\n  cells.forEach((cell, index) => {\n    if (cell.yearLabel !== currentYear) {\n      if (currentSpan > 0) {\n        headers.push({\n          label: currentYear,\n          span: currentSpan,\n          isCurrentPeriod: currentYear === thisYear,\n        });\n      }\n      currentYear = cell.yearLabel;\n      currentSpan = 1;\n    } else {\n      currentSpan++;\n    }\n\n    if (index === cells.length - 1) {\n      headers.push({\n        label: currentYear,\n        span: currentSpan,\n        isCurrentPeriod: currentYear === thisYear,\n      });\n    }\n  });\n\n  return headers;\n}\n\nfunction generateMonthOnlyHeaders(cells: TimelineCell[]): TimelineHeader[] {\n  const today = new Date();\n  const currentMonthKey = format(today, 'yyyy-MM');\n\n  return cells.map((cell) => ({\n    label: cell.monthLabel,\n    span: 1,\n    isCurrentPeriod: format(cell.date, 'yyyy-MM') === currentMonthKey,\n  }));\n}\n\n// =============================================================================\n// POSITIONING UTILITIES\n// =============================================================================\n\n/**\n * Calculate the pixel position and width for a bar on the timeline\n * Uses proportional date-to-pixel calculation like vanilla JS\n */\nexport function calculateBarPosition(\n  startDate: string,\n  endDate: string,\n  cells: TimelineCell[],\n  cellWidth: number,\n  viewMode?: ViewMode\n): { left: number; width: number } | null {\n  if (!cells.length || !startDate || !endDate) return null;\n\n  // Parse dates - handle both \"YYYY-MM-DD\" and full ISO timestamps\n  // Extract just the date part if it's a full timestamp\n  const startDateStr = String(startDate).split('T')[0];\n  const endDateStr = String(endDate).split('T')[0];\n  \n  const sd = new Date(startDateStr + 'T00:00:00');\n  const ed = new Date(endDateStr + 'T23:59:59.999'); // End of the end day\n  \n  // Check for invalid dates\n  if (isNaN(sd.getTime()) || isNaN(ed.getTime())) {\n    return null;\n  }\n  \n  // Get first cell date, normalize to start of day\n  const fcd = new Date(cells[0].date);\n  fcd.setHours(0, 0, 0, 0);\n  \n  // Get last cell end date based on view mode\n  let lcd: Date;\n  const lastCell = cells[cells.length - 1];\n  \n  if (viewMode === 'quarter' && lastCell.dateEnd) {\n    // Quarter view uses weekly cells - use the week's end date\n    lcd = new Date(lastCell.dateEnd);\n    lcd.setHours(23, 59, 59, 999);\n  } else if (viewMode === 'year') {\n    // Year view: each cell is a month, so end at last day of month\n    lcd = new Date(lastCell.date);\n    lcd = new Date(lcd.getFullYear(), lcd.getMonth() + 1, 0, 23, 59, 59, 999);\n  } else {\n    // Week/Month view: each cell is a day\n    lcd = new Date(lastCell.date);\n    lcd.setHours(23, 59, 59, 999);\n  }\n  \n  // Check if bar is completely outside visible range\n  if (ed < fcd || sd > lcd) return null;\n  \n  // Calculate total time span in milliseconds\n  const totalMs = lcd.getTime() - fcd.getTime();\n  const tw = cells.length * cellWidth; // total width in pixels\n  \n  // Calculate bar start position - clamp to start of timeline\n  const barStartMs = Math.max(fcd.getTime(), sd.getTime());\n  const left = ((barStartMs - fcd.getTime()) / totalMs) * tw;\n  \n  // Calculate bar end position - clamp to end of timeline\n  const barEndMs = Math.min(lcd.getTime(), ed.getTime());\n  const right = ((barEndMs - fcd.getTime()) / totalMs) * tw;\n  \n  // Calculate width - ensure minimum width for visibility\n  const width = Math.max(20, right - left);\n  \n  return { left, width };\n}\n\n/**\n * Find the cell index for a given date\n */\nexport function findCellIndex(date: Date, cells: TimelineCell[]): number {\n  const dateStr = format(date, 'yyyy-MM-dd');\n  return cells.findIndex((cell) => cell.dateStr === dateStr);\n}\n\n/**\n * Calculate today line position\n */\nexport function calculateTodayPosition(\n  cells: TimelineCell[],\n  cellWidth: number\n): number | null {\n  const todayIndex = cells.findIndex((cell) => cell.isToday);\n  if (todayIndex === -1) return null;\n  return todayIndex * cellWidth + cellWidth / 2;\n}\n\n/**\n * Generate complete timeline data (cells + headers + dimensions)\n * Convenience function that combines generateTimelineCells and generateTimelineHeaders\n */\nexport function generateTimelineData(\n  currentDate: Date,\n  viewMode: ViewMode,\n  cellWidth: number,\n  bankHolidayDates: Set<string>,\n  bankHolidays: Array<{ date: string; name: string }>\n): {\n  cells: TimelineCell[];\n  headers: { primary: TimelineHeader[]; secondary: TimelineHeader[] };\n  totalWidth: number;\n} {\n  const cells = generateTimelineCells(\n    currentDate,\n    viewMode,\n    bankHolidayDates,\n    bankHolidays\n  );\n  \n  const headers = generateTimelineHeaders(cells, viewMode);\n  const totalWidth = cells.length * cellWidth;\n  \n  return { cells, headers, totalWidth };\n}\n","/**\n * Dependency utilities\n * Functions for extracting dependencies and calculating arrow paths\n */\n\nimport type { Project, Phase, Subphase, DependencyLink, DependencyType } from '@/types';\nimport { getPhaseColor } from '@/utils/themeColors';\n\n/**\n * Extract all dependency links from projects\n * Dependencies are stored on each phase/subphase as an array of {id, type} \n * where id is the predecessor's ID\n */\nexport function extractDependencies(projects: Project[]): DependencyLink[] {\n  const links: DependencyLink[] = [];\n\n  projects.forEach((project) => {\n    // Extract from phases\n    (project.phases ?? []).forEach((phase) => {\n      (phase.dependencies ?? []).forEach((dep) => {\n        // Determine if predecessor is phase or subphase\n        const { item: predItem, type: predType } = findPhaseOrSubphase(project, dep.id);\n        if (predItem) {\n          links.push({\n            id: `dep-${predType}-${dep.id}-phase-${phase.id}`,\n            fromId: dep.id,\n            fromType: predType,\n            toId: phase.id,\n            toType: 'phase',\n            type: dep.type || 'FS',\n            lag: dep.lag ?? 0,\n            projectId: project.id,\n          });\n        }\n      });\n\n      // Extract from subphases recursively\n      extractSubphaseDependencies(project, phase.children ?? [], links);\n    });\n  });\n\n  return links;\n}\n\n/**\n * Recursively extract dependencies from subphases\n */\nfunction extractSubphaseDependencies(\n  project: Project,\n  subphases: Subphase[],\n  links: DependencyLink[]\n): void {\n  subphases.forEach((subphase) => {\n    (subphase.dependencies ?? []).forEach((dep) => {\n      const { item: predItem, type: predType } = findPhaseOrSubphase(project, dep.id);\n      if (predItem) {\n        links.push({\n          id: `dep-${predType}-${dep.id}-subphase-${subphase.id}`,\n          fromId: dep.id,\n          fromType: predType,\n          toId: subphase.id,\n          toType: 'subphase',\n          type: dep.type || 'FS',\n          lag: dep.lag ?? 0,\n          projectId: project.id,\n        });\n      }\n    });\n\n    // Recurse into children\n    if (subphase.children?.length) {\n      extractSubphaseDependencies(project, subphase.children, links);\n    }\n  });\n}\n\n/**\n * Find a phase or subphase by ID within a project\n */\nfunction findPhaseOrSubphase(\n  project: Project,\n  id: number\n): { item: Phase | Subphase | null; type: 'phase' | 'subphase' } {\n  // Check phases first\n  const phase = (project.phases ?? []).find((p) => p.id === id);\n  if (phase) {\n    return { item: phase, type: 'phase' };\n  }\n\n  // Check subphases recursively\n  for (const p of project.phases ?? []) {\n    const subphase = findSubphaseById(p.children ?? [], id);\n    if (subphase) {\n      return { item: subphase, type: 'subphase' };\n    }\n  }\n\n  return { item: null, type: 'subphase' };\n}\n\n/**\n * Recursively find a subphase by ID\n */\nfunction findSubphaseById(subphases: Subphase[], id: number): Subphase | null {\n  for (const sp of subphases) {\n    if (sp.id === id) return sp;\n    if (sp.children?.length) {\n      const found = findSubphaseById(sp.children, id);\n      if (found) return found;\n    }\n  }\n  return null;\n}\n\n/**\n * Get the dates for a phase or subphase\n */\nexport function getItemDates(\n  project: Project,\n  id: number,\n  _type: 'phase' | 'subphase'\n): { start_date: string; end_date: string } | null {\n  const { item } = findPhaseOrSubphase(project, id);\n  if (item) {\n    return { start_date: item.start_date, end_date: item.end_date };\n  }\n  return null;\n}\n\n/**\n * Dependency line styles based on type\n */\nexport const DEPENDENCY_STYLES: Record<DependencyType, { dashArray: string; description: string }> = {\n  FS: { dashArray: '', description: 'Finish-to-Start (solid)' },           // Solid line\n  SS: { dashArray: '6,3', description: 'Start-to-Start (long dash)' },     // Long dash\n  FF: { dashArray: '4,2', description: 'Finish-to-Finish (short dash)' },  // Short dash\n  SF: { dashArray: '2,2', description: 'Start-to-Finish (dotted)' },       // Very short dash\n};\n\n// Corner radius for rounded paths\nconst CORNER_RADIUS = 5;\n\n/**\n * Create a rounded corner path segment\n * Takes a corner point and the direction of incoming/outgoing lines\n */\nfunction roundedCorner(\n  cornerX: number,\n  cornerY: number,\n  fromDir: 'left' | 'right' | 'up' | 'down',\n  toDir: 'left' | 'right' | 'up' | 'down',\n  radius: number = CORNER_RADIUS\n): string {\n  // Calculate control points based on directions\n  const r = radius;\n  \n  // Determine the arc sweep direction\n  // fromDir -> toDir determines if we go clockwise or counter-clockwise\n  const turns: Record<string, { dx1: number; dy1: number; dx2: number; dy2: number; sweep: number }> = {\n    'right-down': { dx1: -r, dy1: 0, dx2: 0, dy2: r, sweep: 1 },\n    'right-up':   { dx1: -r, dy1: 0, dx2: 0, dy2: -r, sweep: 0 },\n    'left-down':  { dx1: r, dy1: 0, dx2: 0, dy2: r, sweep: 0 },\n    'left-up':    { dx1: r, dy1: 0, dx2: 0, dy2: -r, sweep: 1 },\n    'down-right': { dx1: 0, dy1: -r, dx2: r, dy2: 0, sweep: 0 },\n    'down-left':  { dx1: 0, dy1: -r, dx2: -r, dy2: 0, sweep: 1 },\n    'up-right':   { dx1: 0, dy1: r, dx2: r, dy2: 0, sweep: 1 },\n    'up-left':    { dx1: 0, dy1: r, dx2: -r, dy2: 0, sweep: 0 },\n  };\n  \n  const key = `${fromDir}-${toDir}`;\n  const turn = turns[key];\n  \n  if (!turn) {\n    // No turn needed (straight line or same direction)\n    return `L ${cornerX} ${cornerY}`;\n  }\n  \n  // Line to start of arc, then arc to end point\n  const arcStartX = cornerX + turn.dx1;\n  const arcStartY = cornerY + turn.dy1;\n  const arcEndX = cornerX + turn.dx2;\n  const arcEndY = cornerY + turn.dy2;\n  \n  return `L ${arcStartX} ${arcStartY} A ${r} ${r} 0 0 ${turn.sweep} ${arcEndX} ${arcEndY}`;\n}\n\n/**\n * Calculate SVG path for a dependency arrow with rounded corners\n * \n * @param fromX - X position of the source (end for FS/FF, start for SS/SF)\n * @param fromY - Y center of the source bar\n * @param toX - X position of the target (start for FS/SS, end for FF/SF)\n * @param toY - Y center of the target bar\n * @param type - Dependency type\n */\nexport function calculateDependencyPath(\n  fromX: number,\n  fromY: number,\n  toX: number,\n  toY: number,\n  type: DependencyType\n): string {\n  const minHorizontal = 15; // Minimum horizontal segment length\n  const r = CORNER_RADIUS;\n  \n  // Helper to determine vertical direction\n  const vDir = toY > fromY ? 'down' : 'up';\n\n  if (type === 'FS') {\n    // Finish-to-Start: most common\n    if (toX > fromX + minHorizontal) {\n      // Target is ahead - simple path with two turns\n      const midX = fromX + (toX - fromX) / 2;\n      if (Math.abs(toY - fromY) < r * 2) {\n        // Not enough vertical space for rounded corners\n        return `M ${fromX} ${fromY} H ${midX} V ${toY} H ${toX}`;\n      }\n      return `M ${fromX} ${fromY} H ${midX - r} ${roundedCorner(midX, fromY, 'right', vDir, r)} V ${toY - (toY > fromY ? r : -r)} ${roundedCorner(midX, toY, vDir, 'right', r)} H ${toX}`;\n    } else {\n      // Target is behind or close - route around with 4 turns\n      const turnY = fromY + (toY > fromY ? 20 : -20);\n      const leftX = Math.min(fromX, toX) - minHorizontal;\n      const exitX = fromX + minHorizontal;\n      \n      if (Math.abs(turnY - fromY) < r * 2 || Math.abs(toY - turnY) < r * 2) {\n        return `M ${fromX} ${fromY} H ${exitX} V ${turnY} H ${leftX} V ${toY} H ${toX}`;\n      }\n      \n      const dir1 = turnY > fromY ? 'down' : 'up';\n      const dir2 = toY > turnY ? 'down' : 'up';\n      \n      return `M ${fromX} ${fromY} H ${exitX - r} ${roundedCorner(exitX, fromY, 'right', dir1, r)} V ${turnY - (turnY > fromY ? r : -r)} ${roundedCorner(exitX, turnY, dir1, 'left', r)} H ${leftX + r} ${roundedCorner(leftX, turnY, 'left', dir2, r)} V ${toY - (toY > turnY ? r : -r)} ${roundedCorner(leftX, toY, dir2, 'right', r)} H ${toX}`;\n    }\n  }\n\n  if (type === 'SS') {\n    // Start-to-Start: both from left edges\n    const leftX = Math.min(fromX, toX) - minHorizontal;\n    if (Math.abs(toY - fromY) < r * 2) {\n      return `M ${fromX} ${fromY} H ${leftX} V ${toY} H ${toX}`;\n    }\n    return `M ${fromX} ${fromY} H ${leftX + r} ${roundedCorner(leftX, fromY, 'left', vDir, r)} V ${toY - (toY > fromY ? r : -r)} ${roundedCorner(leftX, toY, vDir, 'right', r)} H ${toX}`;\n  }\n\n  if (type === 'FF') {\n    // Finish-to-Finish: both from right edges\n    const rightX = Math.max(fromX, toX) + minHorizontal;\n    if (Math.abs(toY - fromY) < r * 2) {\n      return `M ${fromX} ${fromY} H ${rightX} V ${toY} H ${toX}`;\n    }\n    return `M ${fromX} ${fromY} H ${rightX - r} ${roundedCorner(rightX, fromY, 'right', vDir, r)} V ${toY - (toY > fromY ? r : -r)} ${roundedCorner(rightX, toY, vDir, 'left', r)} H ${toX}`;\n  }\n\n  if (type === 'SF') {\n    // Start-to-Finish: from left to right (rare)\n    if (toX < fromX - minHorizontal) {\n      // Target end is to the left of source start\n      const midX = fromX - (fromX - toX) / 2;\n      if (Math.abs(toY - fromY) < r * 2) {\n        return `M ${fromX} ${fromY} H ${midX} V ${toY} H ${toX}`;\n      }\n      return `M ${fromX} ${fromY} H ${midX + r} ${roundedCorner(midX, fromY, 'left', vDir, r)} V ${toY - (toY > fromY ? r : -r)} ${roundedCorner(midX, toY, vDir, 'left', r)} H ${toX}`;\n    } else {\n      // Need to route around\n      const leftX = Math.min(fromX, toX) - minHorizontal;\n      const rightX = Math.max(fromX, toX) + minHorizontal;\n      const turnY = fromY + (toY > fromY ? 20 : -20);\n      return `M ${fromX} ${fromY} H ${leftX} V ${turnY} H ${rightX} V ${toY} H ${toX}`;\n    }\n  }\n\n  // Default fallback\n  return `M ${fromX} ${fromY} L ${toX} ${toY}`;\n}\n\n/**\n * Determine which edge to use for source/target based on dependency type\n */\nexport function getDependencyEdges(type: DependencyType): {\n  sourceEdge: 'start' | 'end';\n  targetEdge: 'start' | 'end';\n} {\n  switch (type) {\n    case 'FS':\n      return { sourceEdge: 'end', targetEdge: 'start' };\n    case 'SS':\n      return { sourceEdge: 'start', targetEdge: 'start' };\n    case 'FF':\n      return { sourceEdge: 'end', targetEdge: 'end' };\n    case 'SF':\n      return { sourceEdge: 'start', targetEdge: 'end' };\n    default:\n      return { sourceEdge: 'end', targetEdge: 'start' };\n  }\n}\n\n/**\n * Get arrow color\n * Violated dependencies are red, normal use source phase color\n */\nexport function getDependencyColor(isViolated: boolean = false, phaseColor?: string): string {\n  if (isViolated) {\n    return '#ef4444'; // Red for violated\n  }\n  return phaseColor || getPhaseColor();\n}\n","/**\n * Row position calculator\n * Calculates the position of each phase/subphase row based on expanded state\n */\n\nimport type { Project, Subphase } from '@/types';\n\n// Row heights - CSS variables\n// --row-height: 44px (project rows)\n// --detail-row-height: 32px (phase, subphase, assignment rows)\n// All rows have border-bottom: 1px with box-sizing: content-box\n// So total occupied space = height + 1px border\n\n// Visual height (for calculating center) - detail rows only since we only track phase/subphase positions\nconst DETAIL_ROW_VISIBLE_HEIGHT = 32;\n\n// Total height including border (for position advancement)\nconst PROJECT_ROW_TOTAL_HEIGHT = 45;  // 44 + 1\nconst DETAIL_ROW_TOTAL_HEIGHT = 33;   // 32 + 1\n\nexport interface RowPosition {\n  top: number;\n  height: number;\n}\n\nexport interface RowPositionsResult {\n  positions: Map<string, RowPosition>;\n  totalHeight: number;\n  phantomRowTop?: number; // Position of phantom row if active\n}\n\nexport interface PhantomRowConfig {\n  projectId: number;\n  sourceId: number;\n  type: 'phase' | 'subphase';\n  parentId?: number | null;\n  parentType?: 'phase' | 'subphase';\n}\n\n// Filter function type - checks if an entity passes filters\nexport type EntityFilterFn = (entityType: 'phase' | 'subphase', entityId: number) => boolean;\n\n// Function to check if any descendants match filters\nexport type DescendantMatchFn = (subphases: Subphase[]) => boolean;\n\n/**\n * Calculate row positions for all visible phases and subphases\n * Optionally includes a phantom row for phantom sibling mode\n */\nexport function calculateRowPositions(\n  projects: Project[],\n  expandedProjects: Set<number>,\n  expandedPhases: Set<number>,\n  expandedSubphases: Set<number>,\n  phantomConfig?: PhantomRowConfig | null,\n  showAssignments: boolean = true,\n  entityPassesFilters?: EntityFilterFn,\n  anyDescendantMatches?: DescendantMatchFn\n): RowPositionsResult {\n  const positions = new Map<string, RowPosition>();\n  let currentTop = 0;\n  let phantomRowTop: number | undefined;\n\n  // Helper to check if phase/subphase should be visible (passes filter or has matching descendants)\n  const isVisible = (type: 'phase' | 'subphase', id: number, children?: Subphase[]): boolean => {\n    if (!entityPassesFilters) return true; // No filter, show all\n    const selfMatches = entityPassesFilters(type, id);\n    const descendantMatches = anyDescendantMatches && children?.length ? anyDescendantMatches(children) : false;\n    return selfMatches || descendantMatches;\n  };\n\n  projects.forEach((project) => {\n    // Project row - record position and advance past it\n    const projectTop = currentTop;\n    positions.set(`project-${project.id}`, { top: projectTop, height: PROJECT_ROW_TOTAL_HEIGHT });\n    currentTop += PROJECT_ROW_TOTAL_HEIGHT;\n\n    // If project is expanded, add phases\n    if (expandedProjects.has(project.id)) {\n      (project.phases ?? []).forEach((phase) => {\n        // Check if phase is visible (passes filter or has matching subphases)\n        if (!isVisible('phase', phase.id, phase.children)) {\n          return; // Skip this phase\n        }\n        \n        // Phase row - record position with visible height for center calculation\n        const phaseTop = currentTop;\n        positions.set(`phase-${phase.id}`, { top: phaseTop, height: DETAIL_ROW_VISIBLE_HEIGHT });\n        currentTop += DETAIL_ROW_TOTAL_HEIGHT;\n\n        // Check if phantom row should be inserted after this phase\n        if (phantomConfig?.type === 'phase' && \n            phantomConfig.projectId === project.id && \n            phantomConfig.sourceId === phase.id) {\n          phantomRowTop = currentTop;\n          positions.set('phantom', { top: currentTop, height: DETAIL_ROW_VISIBLE_HEIGHT });\n          currentTop += DETAIL_ROW_TOTAL_HEIGHT;\n        }\n\n        // If phase is expanded, add subphases and assignments\n        if (expandedPhases.has(phase.id)) {\n          // Add subphases recursively (with phantom support)\n          const subphaseResult = addSubphasePositions(\n            phase.children ?? [],\n            positions,\n            currentTop,\n            expandedSubphases,\n            phantomConfig,\n            project.id,\n            phase.id,\n            undefined,\n            showAssignments,\n            entityPassesFilters,\n            anyDescendantMatches\n          );\n          currentTop = subphaseResult.currentTop;\n          if (subphaseResult.phantomRowTop !== undefined) {\n            phantomRowTop = subphaseResult.phantomRowTop;\n          }\n\n          // Add phase staff assignments (only if showAssignments is true)\n          if (showAssignments) {\n            const phaseStaffCount = phase.staffAssignments?.length ?? 0;\n            currentTop += phaseStaffCount * DETAIL_ROW_TOTAL_HEIGHT;\n\n            // Add phase equipment assignments\n            const phaseEquipCount = phase.equipmentAssignments?.length ?? 0;\n            currentTop += phaseEquipCount * DETAIL_ROW_TOTAL_HEIGHT;\n          }\n        }\n      });\n\n      // Add project-level staff assignments (only if showAssignments is true)\n      if (showAssignments) {\n        const projectStaffCount = project.staffAssignments?.length ?? 0;\n        currentTop += projectStaffCount * DETAIL_ROW_TOTAL_HEIGHT;\n\n        // Add project-level equipment assignments\n        const projectEquipCount = project.equipmentAssignments?.length ?? 0;\n        currentTop += projectEquipCount * DETAIL_ROW_TOTAL_HEIGHT;\n      }\n    }\n  });\n\n  return { positions, totalHeight: currentTop, phantomRowTop };\n}\n\n/**\n * Recursively add subphase positions with phantom row support\n */\nfunction addSubphasePositions(\n  subphases: Subphase[],\n  positions: Map<string, RowPosition>,\n  currentTop: number,\n  expandedSubphases: Set<number>,\n  phantomConfig?: PhantomRowConfig | null,\n  projectId?: number,\n  _parentPhaseId?: number,\n  _parentSubphaseId?: number,\n  showAssignments: boolean = true,\n  entityPassesFilters?: EntityFilterFn,\n  anyDescendantMatches?: DescendantMatchFn\n): { currentTop: number; phantomRowTop?: number } {\n  let phantomRowTop: number | undefined;\n\n  // Helper to check if subphase should be visible\n  const isVisible = (id: number, children?: Subphase[]): boolean => {\n    if (!entityPassesFilters) return true;\n    const selfMatches = entityPassesFilters('subphase', id);\n    const descendantMatches = anyDescendantMatches && children?.length ? anyDescendantMatches(children) : false;\n    return selfMatches || descendantMatches;\n  };\n\n  subphases.forEach((subphase) => {\n    // Check if subphase is visible\n    if (!isVisible(subphase.id, subphase.children)) {\n      return; // Skip this subphase\n    }\n    \n    positions.set(`subphase-${subphase.id}`, { top: currentTop, height: DETAIL_ROW_VISIBLE_HEIGHT });\n    currentTop += DETAIL_ROW_TOTAL_HEIGHT;\n\n    // Check if phantom row should be inserted after this subphase\n    if (phantomConfig?.type === 'subphase' && \n        phantomConfig.projectId === projectId && \n        phantomConfig.sourceId === subphase.id) {\n      phantomRowTop = currentTop;\n      positions.set('phantom', { top: currentTop, height: DETAIL_ROW_VISIBLE_HEIGHT });\n      currentTop += DETAIL_ROW_TOTAL_HEIGHT;\n    }\n\n    // If subphase is expanded, add children and assignments\n    if (expandedSubphases.has(subphase.id)) {\n      // Add nested subphases\n      if (subphase.children?.length) {\n        const nestedResult = addSubphasePositions(\n          subphase.children,\n          positions,\n          currentTop,\n          expandedSubphases,\n          phantomConfig,\n          projectId,\n          _parentPhaseId,\n          subphase.id,\n          showAssignments,\n          entityPassesFilters,\n          anyDescendantMatches\n        );\n        currentTop = nestedResult.currentTop;\n        if (nestedResult.phantomRowTop !== undefined) {\n          phantomRowTop = nestedResult.phantomRowTop;\n        }\n      }\n\n      // Add subphase staff assignments (only if showAssignments is true)\n      if (showAssignments) {\n        const staffCount = subphase.staffAssignments?.length ?? 0;\n        currentTop += staffCount * DETAIL_ROW_TOTAL_HEIGHT;\n\n        // Add subphase equipment assignments  \n        const equipCount = subphase.equipmentAssignments?.length ?? 0;\n        currentTop += equipCount * DETAIL_ROW_TOTAL_HEIGHT;\n      }\n    }\n  });\n\n  return { currentTop, phantomRowTop };\n}\n","/**\n * Auto-Calculation Engine\n * \n * Handles automatic date adjustments for:\n * 1. Dependency cascading - when a predecessor moves, successors adjust\n * 2. Parent expansion - when a child extends beyond parent bounds, parent expands\n * 3. Project date adjustment - project dates encompass all phases\n */\n\nimport type { Project, Phase, Subphase, DependencyType, StaffAssignment, EquipmentAssignment } from '@/types';\nimport { updatePhase, updateSubphase, updateProject, updateStaffAssignment, updateEquipmentAssignment } from '@/api/endpoints/projects';\n\n// Accumulated updates to batch save to server\nexport interface PendingUpdate {\n  type: 'phase' | 'subphase' | 'project' | 'staffAssignment' | 'equipmentAssignment';\n  id: number;\n  start_date: string;\n  end_date: string;\n  // Additional fields for project update\n  name?: string;\n  pm_id?: number | null;\n  customer?: string | null;\n  sales_pm?: string | null;\n  volume?: number | null;\n  confirmed?: boolean;\n  // Additional fields for staff assignment update\n  allocation?: number;\n}\n\n/**\n * Format date as YYYY-MM-DD\n */\nfunction formatDateLocal(date: Date): string {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n\n/**\n * Move staff assignments by offset\n */\nfunction moveStaffAssignmentsByOffset(\n  assignments: StaffAssignment[],\n  dayOffset: number,\n  pendingUpdates: PendingUpdate[]\n): void {\n  for (const assignment of assignments) {\n    // Skip assignments without valid dates\n    if (!assignment.start_date || !assignment.end_date) {\n      console.warn(`[autoCalculation] Skipping staff assignment ${assignment.id} - missing dates`);\n      continue;\n    }\n    \n    const oldStart = new Date(assignment.start_date);\n    const oldEnd = new Date(assignment.end_date);\n    \n    // Skip if dates are invalid\n    if (isNaN(oldStart.getTime()) || isNaN(oldEnd.getTime())) {\n      console.warn(`[autoCalculation] Skipping staff assignment ${assignment.id} - invalid dates`);\n      continue;\n    }\n    \n    const newStart = new Date(oldStart);\n    newStart.setDate(newStart.getDate() + dayOffset);\n    \n    const newEnd = new Date(oldEnd);\n    newEnd.setDate(newEnd.getDate() + dayOffset);\n    \n    assignment.start_date = formatDateLocal(newStart);\n    assignment.end_date = formatDateLocal(newEnd);\n    \n    pendingUpdates.push({\n      type: 'staffAssignment',\n      id: assignment.id,\n      start_date: assignment.start_date,\n      end_date: assignment.end_date,\n      allocation: assignment.allocation ?? 100, // Backend requires allocation\n    });\n  }\n}\n\n/**\n * Move equipment assignments by offset\n */\nfunction moveEquipmentAssignmentsByOffset(\n  assignments: EquipmentAssignment[],\n  dayOffset: number,\n  pendingUpdates: PendingUpdate[]\n): void {\n  for (const assignment of assignments) {\n    // Skip assignments without valid dates\n    if (!assignment.start_date || !assignment.end_date) {\n      console.warn(`[autoCalculation] Skipping equipment assignment ${assignment.id} - missing dates`);\n      continue;\n    }\n    \n    const oldStart = new Date(assignment.start_date);\n    const oldEnd = new Date(assignment.end_date);\n    \n    // Skip if dates are invalid\n    if (isNaN(oldStart.getTime()) || isNaN(oldEnd.getTime())) {\n      console.warn(`[autoCalculation] Skipping equipment assignment ${assignment.id} - invalid dates`);\n      continue;\n    }\n    \n    const newStart = new Date(oldStart);\n    newStart.setDate(newStart.getDate() + dayOffset);\n    \n    const newEnd = new Date(oldEnd);\n    newEnd.setDate(newEnd.getDate() + dayOffset);\n    \n    assignment.start_date = formatDateLocal(newStart);\n    assignment.end_date = formatDateLocal(newEnd);\n    \n    pendingUpdates.push({\n      type: 'equipmentAssignment',\n      id: assignment.id,\n      start_date: assignment.start_date,\n      end_date: assignment.end_date,\n    });\n  }\n}\n\n/**\n * Move all children (subphases) by a given number of days\n * Used when parent is dragged - children should move with it\n * Also moves staff and equipment assignments\n */\nexport function moveChildrenByOffset(\n  children: Subphase[],\n  dayOffset: number,\n  pendingUpdates: PendingUpdate[]\n): void {\n  for (const child of children) {\n    const oldStart = new Date(child.start_date);\n    const oldEnd = new Date(child.end_date);\n    \n    const newStart = new Date(oldStart);\n    newStart.setDate(newStart.getDate() + dayOffset);\n    \n    const newEnd = new Date(oldEnd);\n    newEnd.setDate(newEnd.getDate() + dayOffset);\n    \n    child.start_date = formatDateLocal(newStart);\n    child.end_date = formatDateLocal(newEnd);\n    \n    pendingUpdates.push({\n      type: 'subphase',\n      id: child.id,\n      start_date: child.start_date,\n      end_date: child.end_date,\n    });\n    \n    // Move staff assignments on this subphase\n    if (child.staffAssignments?.length) {\n      moveStaffAssignmentsByOffset(child.staffAssignments, dayOffset, pendingUpdates);\n    }\n    \n    // Move equipment assignments on this subphase\n    if (child.equipmentAssignments?.length) {\n      moveEquipmentAssignmentsByOffset(child.equipmentAssignments, dayOffset, pendingUpdates);\n    }\n    \n    // Recursively move nested children\n    if (child.children?.length) {\n      moveChildrenByOffset(child.children, dayOffset, pendingUpdates);\n    }\n  }\n}\n\n/**\n * Move all phases and their children by a given number of days\n * Used when project is dragged - all phases should move with it\n * Also moves all staff and equipment assignments\n */\nexport function movePhasesWithProject(\n  project: Project,\n  dayOffset: number,\n  pendingUpdates: PendingUpdate[]\n): void {\n  for (const phase of project.phases ?? []) {\n    const oldStart = new Date(phase.start_date);\n    const oldEnd = new Date(phase.end_date);\n    \n    const newStart = new Date(oldStart);\n    newStart.setDate(newStart.getDate() + dayOffset);\n    \n    const newEnd = new Date(oldEnd);\n    newEnd.setDate(newEnd.getDate() + dayOffset);\n    \n    phase.start_date = formatDateLocal(newStart);\n    phase.end_date = formatDateLocal(newEnd);\n    \n    pendingUpdates.push({\n      type: 'phase',\n      id: phase.id,\n      start_date: phase.start_date,\n      end_date: phase.end_date,\n    });\n    \n    // Move staff assignments on this phase\n    if (phase.staffAssignments?.length) {\n      moveStaffAssignmentsByOffset(phase.staffAssignments, dayOffset, pendingUpdates);\n    }\n    \n    // Move equipment assignments on this phase\n    if (phase.equipmentAssignments?.length) {\n      moveEquipmentAssignmentsByOffset(phase.equipmentAssignments, dayOffset, pendingUpdates);\n    }\n    \n    // Move all subphases of this phase\n    if (phase.children?.length) {\n      moveChildrenByOffset(phase.children, dayOffset, pendingUpdates);\n    }\n  }\n  \n  // Move project-level staff assignments\n  if (project.staffAssignments?.length) {\n    moveStaffAssignmentsByOffset(project.staffAssignments, dayOffset, pendingUpdates);\n  }\n  \n  // Move project-level equipment assignments\n  if (project.equipmentAssignments?.length) {\n    moveEquipmentAssignmentsByOffset(project.equipmentAssignments, dayOffset, pendingUpdates);\n  }\n}\n\n/**\n * Calculate new dates for dependent phases/subphases based on dependency type\n */\nfunction calculateDependentDates(\n  predecessorStart: Date,\n  predecessorEnd: Date,\n  successorStart: Date,\n  successorEnd: Date,\n  depType: DependencyType,\n  lag: number = 0\n): { newStart: Date; newEnd: Date } {\n  const duration = Math.round((successorEnd.getTime() - successorStart.getTime()) / 86400000);\n  \n  let newStart: Date;\n  let newEnd: Date;\n  \n  switch (depType) {\n    case 'FS': {\n      // Finish-to-Start: successor starts after predecessor ends\n      newStart = new Date(predecessorEnd);\n      newStart.setDate(newStart.getDate() + 1 + lag);\n      newEnd = new Date(newStart);\n      newEnd.setDate(newEnd.getDate() + duration);\n      break;\n    }\n    case 'SS': {\n      // Start-to-Start: successor starts when/after predecessor starts\n      newStart = new Date(predecessorStart);\n      newStart.setDate(newStart.getDate() + lag);\n      newEnd = new Date(newStart);\n      newEnd.setDate(newEnd.getDate() + duration);\n      break;\n    }\n    case 'FF': {\n      // Finish-to-Finish: successor ends when/after predecessor ends\n      newEnd = new Date(predecessorEnd);\n      newEnd.setDate(newEnd.getDate() + lag);\n      newStart = new Date(newEnd);\n      newStart.setDate(newStart.getDate() - duration);\n      break;\n    }\n    case 'SF': {\n      // Start-to-Finish: successor ends when/after predecessor starts\n      newEnd = new Date(predecessorStart);\n      newEnd.setDate(newEnd.getDate() + lag);\n      newStart = new Date(newEnd);\n      newStart.setDate(newStart.getDate() - duration);\n      break;\n    }\n    default: {\n      // Default to FS\n      newStart = new Date(predecessorEnd);\n      newStart.setDate(newStart.getDate() + 1 + lag);\n      newEnd = new Date(newStart);\n      newEnd.setDate(newEnd.getDate() + duration);\n    }\n  }\n  \n  return { newStart, newEnd };\n}\n\n/**\n * Find a phase by ID in a project\n */\nfunction findPhaseById(project: Project, phaseId: number): Phase | null {\n  return (project.phases ?? []).find(p => p.id === phaseId) ?? null;\n}\n\n/**\n * Find a subphase by ID recursively in a project\n */\nfunction findSubphaseById(project: Project, subphaseId: number): Subphase | null {\n  const searchChildren = (children: Subphase[]): Subphase | null => {\n    for (const child of children) {\n      if (child.id === subphaseId) return child;\n      if (child.children?.length) {\n        const found = searchChildren(child.children);\n        if (found) return found;\n      }\n    }\n    return null;\n  };\n  \n  for (const phase of project.phases ?? []) {\n    if (phase.children?.length) {\n      const found = searchChildren(phase.children);\n      if (found) return found;\n    }\n  }\n  return null;\n}\n\n/**\n * Find the parent of a subphase (could be a phase or another subphase)\n */\nfunction findParentOfSubphase(\n  project: Project, \n  subphaseId: number\n): { parent: Phase | Subphase; type: 'phase' | 'subphase' } | null {\n  for (const phase of project.phases ?? []) {\n    for (const child of phase.children ?? []) {\n      if (child.id === subphaseId) {\n        return { parent: phase, type: 'phase' };\n      }\n      const result = findParentRecursive(child, subphaseId);\n      if (result) return result;\n    }\n  }\n  return null;\n}\n\nfunction findParentRecursive(\n  parent: Subphase, \n  targetId: number\n): { parent: Subphase; type: 'subphase' } | null {\n  for (const child of parent.children ?? []) {\n    if (child.id === targetId) {\n      return { parent, type: 'subphase' };\n    }\n    const result = findParentRecursive(child, targetId);\n    if (result) return result;\n  }\n  return null;\n}\n\n/**\n * Cascade dependency updates to successor phases\n * When a phase/subphase moves, all its dependents need to be adjusted\n */\nexport function cascadeDependentPhases(\n  project: Project,\n  changedPhaseId: number,\n  pendingUpdates: PendingUpdate[]\n): void {\n  const changedPhase = findPhaseById(project, changedPhaseId);\n  if (!changedPhase) return;\n  \n  const predecessorEnd = new Date(changedPhase.end_date);\n  const predecessorStart = new Date(changedPhase.start_date);\n  \n  // Find all phases that depend on the changed phase\n  for (const phase of project.phases ?? []) {\n    const deps = phase.dependencies ?? [];\n    const dep = deps.find(d => d.id === changedPhaseId);\n    \n    if (dep) {\n      const successorStart = new Date(phase.start_date);\n      const successorEnd = new Date(phase.end_date);\n      \n      const { newStart, newEnd } = calculateDependentDates(\n        predecessorStart,\n        predecessorEnd,\n        successorStart,\n        successorEnd,\n        dep.type || 'FS',\n        dep.lag ?? 0\n      );\n      \n      // Check if dates actually changed\n      if (newStart.getTime() !== successorStart.getTime() || \n          newEnd.getTime() !== successorEnd.getTime()) {\n        // Update in memory\n        phase.start_date = formatDateLocal(newStart);\n        phase.end_date = formatDateLocal(newEnd);\n        \n        // Queue for server update\n        pendingUpdates.push({\n          type: 'phase',\n          id: phase.id,\n          start_date: phase.start_date,\n          end_date: phase.end_date,\n        });\n        \n        // Recursively cascade to phases that depend on this one\n        cascadeDependentPhases(project, phase.id, pendingUpdates);\n      }\n    }\n  }\n}\n\n/**\n * Cascade dependency updates to successor subphases within a project\n */\nexport function cascadeDependentSubphases(\n  project: Project,\n  changedSubphaseId: number,\n  pendingUpdates: PendingUpdate[]\n): void {\n  const changedSubphase = findSubphaseById(project, changedSubphaseId);\n  if (!changedSubphase) return;\n  \n  const predecessorEnd = new Date(changedSubphase.end_date);\n  const predecessorStart = new Date(changedSubphase.start_date);\n  \n  // Helper to search for dependent subphases recursively\n  const findDependentSubphases = (children: Subphase[]): void => {\n    for (const subphase of children) {\n      const deps = subphase.dependencies ?? [];\n      const dep = deps.find(d => d.id === changedSubphaseId);\n      \n      if (dep) {\n        const successorStart = new Date(subphase.start_date);\n        const successorEnd = new Date(subphase.end_date);\n        \n        const { newStart, newEnd } = calculateDependentDates(\n          predecessorStart,\n          predecessorEnd,\n          successorStart,\n          successorEnd,\n          dep.type || 'FS',\n          dep.lag ?? 0\n        );\n        \n        // Check if dates actually changed\n        if (newStart.getTime() !== successorStart.getTime() || \n            newEnd.getTime() !== successorEnd.getTime()) {\n          // Update in memory\n          subphase.start_date = formatDateLocal(newStart);\n          subphase.end_date = formatDateLocal(newEnd);\n          \n          // Queue for server update\n          pendingUpdates.push({\n            type: 'subphase',\n            id: subphase.id,\n            start_date: subphase.start_date,\n            end_date: subphase.end_date,\n          });\n          \n          // Recursively cascade to subphases that depend on this one\n          cascadeDependentSubphases(project, subphase.id, pendingUpdates);\n        }\n      }\n      \n      // Search in children\n      if (subphase.children?.length) {\n        findDependentSubphases(subphase.children);\n      }\n    }\n  };\n  \n  // Search all phases' children\n  for (const phase of project.phases ?? []) {\n    if (phase.children?.length) {\n      findDependentSubphases(phase.children);\n    }\n  }\n}\n\n/**\n * Cascade parent dates upward when a child changes\n * - Expands parent if child extends beyond bounds\n * - Contracts parent to match children bounds (parent = union of all children)\n * This walks up the tree from the changed item to the phase level\n */\nexport function cascadeParentDatesUp(\n  project: Project,\n  changedSubphaseId: number,\n  pendingUpdates: PendingUpdate[]\n): void {\n  let currentId = changedSubphaseId;\n  let parentInfo = findParentOfSubphase(project, currentId);\n  \n  while (parentInfo) {\n    const parent = parentInfo.parent;\n    const children = parent.children ?? [];\n    \n    if (children.length === 0) break;\n    \n    // Calculate bounds from all children\n    let earliestStart: Date | null = null;\n    let latestEnd: Date | null = null;\n    \n    for (const child of children) {\n      const start = new Date(child.start_date);\n      const end = new Date(child.end_date);\n      if (!earliestStart || start < earliestStart) earliestStart = start;\n      if (!latestEnd || end > latestEnd) latestEnd = end;\n    }\n    \n    if (!earliestStart || !latestEnd) break;\n    \n    const currentStart = new Date(parent.start_date);\n    const currentEnd = new Date(parent.end_date);\n    \n    let needsUpdate = false;\n    \n    // Update start to match earliest child (expand OR contract)\n    if (earliestStart.getTime() !== currentStart.getTime()) {\n      parent.start_date = formatDateLocal(earliestStart);\n      needsUpdate = true;\n    }\n    \n    // Update end to match latest child (expand OR contract)\n    if (latestEnd.getTime() !== currentEnd.getTime()) {\n      parent.end_date = formatDateLocal(latestEnd);\n      needsUpdate = true;\n    }\n    \n    if (needsUpdate) {\n      pendingUpdates.push({\n        type: parentInfo.type,\n        id: parent.id,\n        start_date: parent.start_date,\n        end_date: parent.end_date,\n      });\n    }\n    \n    // Move up to the next parent\n    if (parentInfo.type === 'phase') {\n      // We've reached a phase, now update project\n      autoAdjustProjectDates(project, pendingUpdates);\n      break;\n    } else {\n      currentId = parent.id;\n      parentInfo = findParentOfSubphase(project, currentId);\n    }\n  }\n}\n\n/**\n * Cascade phase dates to match children (subphases)\n * Parent = union of all children dates\n */\nexport function cascadePhaseDatesFromChildren(\n  project: Project,\n  phaseId: number,\n  pendingUpdates: PendingUpdate[]\n): void {\n  const phase = findPhaseById(project, phaseId);\n  if (!phase || !phase.children?.length) return;\n  \n  let earliestStart: Date | null = null;\n  let latestEnd: Date | null = null;\n  \n  for (const child of phase.children) {\n    const start = new Date(child.start_date);\n    const end = new Date(child.end_date);\n    if (!earliestStart || start < earliestStart) earliestStart = start;\n    if (!latestEnd || end > latestEnd) latestEnd = end;\n  }\n  \n  if (!earliestStart || !latestEnd) return;\n  \n  const currentStart = new Date(phase.start_date);\n  const currentEnd = new Date(phase.end_date);\n  \n  let needsUpdate = false;\n  \n  // Update start to match earliest child\n  if (earliestStart.getTime() !== currentStart.getTime()) {\n    phase.start_date = formatDateLocal(earliestStart);\n    needsUpdate = true;\n  }\n  \n  // Update end to match latest child\n  if (latestEnd.getTime() !== currentEnd.getTime()) {\n    phase.end_date = formatDateLocal(latestEnd);\n    needsUpdate = true;\n  }\n  \n  if (needsUpdate) {\n    pendingUpdates.push({\n      type: 'phase',\n      id: phase.id,\n      start_date: phase.start_date,\n      end_date: phase.end_date,\n    });\n    \n    // Also update project dates\n    autoAdjustProjectDates(project, pendingUpdates);\n  }\n}\n\n/**\n * Auto-adjust project dates based on phase dates\n * Project start = earliest phase start\n * Project end = latest phase end\n */\nexport function autoAdjustProjectDates(\n  project: Project,\n  pendingUpdates: PendingUpdate[]\n): void {\n  const phases = project.phases ?? [];\n  if (phases.length === 0) return;\n  \n  let earliestStart: Date | null = null;\n  let latestEnd: Date | null = null;\n  \n  for (const phase of phases) {\n    const phaseStart = new Date(phase.start_date);\n    const phaseEnd = new Date(phase.end_date);\n    \n    if (!earliestStart || phaseStart < earliestStart) {\n      earliestStart = phaseStart;\n    }\n    if (!latestEnd || phaseEnd > latestEnd) {\n      latestEnd = phaseEnd;\n    }\n  }\n  \n  if (!earliestStart || !latestEnd) return;\n  \n  const newStartDate = formatDateLocal(earliestStart);\n  const newEndDate = formatDateLocal(latestEnd);\n  \n  if (project.start_date !== newStartDate || project.end_date !== newEndDate) {\n    project.start_date = newStartDate;\n    project.end_date = newEndDate;\n    \n    // Check if we already have a project update queued\n    const existingIdx = pendingUpdates.findIndex(\n      u => u.type === 'project' && u.id === project.id\n    );\n    \n    if (existingIdx >= 0) {\n      // Update existing\n      pendingUpdates[existingIdx].start_date = newStartDate;\n      pendingUpdates[existingIdx].end_date = newEndDate;\n    } else {\n      // Add new\n      pendingUpdates.push({\n        type: 'project',\n        id: project.id,\n        start_date: newStartDate,\n        end_date: newEndDate,\n        name: project.name,\n        pm_id: project.pm_id,\n        customer: project.customer,\n        sales_pm: project.sales_pm,\n        volume: project.volume,\n        confirmed: project.confirmed,\n      });\n    }\n  }\n}\n\n/**\n * Save all pending updates to the server\n */\nexport async function savePendingUpdates(pendingUpdates: PendingUpdate[]): Promise<void> {\n  const promises = pendingUpdates.map(update => {\n    if (update.type === 'phase') {\n      return updatePhase(update.id, {\n        start_date: update.start_date,\n        end_date: update.end_date,\n      }).catch(err => console.error(`Failed to save phase ${update.id}:`, err));\n    } else if (update.type === 'subphase') {\n      return updateSubphase(update.id, {\n        start_date: update.start_date,\n        end_date: update.end_date,\n      }).catch(err => console.error(`Failed to save subphase ${update.id}:`, err));\n    } else if (update.type === 'project') {\n      return updateProject(update.id, {\n        name: update.name!,\n        start_date: update.start_date,\n        end_date: update.end_date,\n        pm_id: update.pm_id,\n        customer: update.customer,\n        sales_pm: update.sales_pm,\n        volume: update.volume,\n        confirmed: update.confirmed,\n      }).catch(err => console.error(`Failed to save project ${update.id}:`, err));\n    } else if (update.type === 'staffAssignment') {\n      return updateStaffAssignment(update.id, {\n        start_date: update.start_date,\n        end_date: update.end_date,\n        allocation: update.allocation ?? 100, // Backend requires allocation\n      }).catch(err => console.error(`Failed to save staff assignment ${update.id}:`, err));\n    } else if (update.type === 'equipmentAssignment') {\n      return updateEquipmentAssignment(update.id, {\n        start_date: update.start_date,\n        end_date: update.end_date,\n      }).catch(err => console.error(`Failed to save equipment assignment ${update.id}:`, err));\n    }\n    return Promise.resolve();\n  });\n  \n  await Promise.all(promises);\n}\n\n/**\n * Main entry point: Process all auto-calculations after a phase moves\n * \n * NOTE: We do NOT cascade to dependent phases here. Dependencies only auto-align\n * at creation time. After that, users have full manual control and can position\n * dependent items with any lead/lag they want.\n * \n * We DO update project dates to encompass all phases.\n */\nexport function processPhaseMove(\n  project: Project,\n  _phaseId: number,\n  _oldEndDate: string,\n  _newEndDate: string\n): PendingUpdate[] {\n  const pendingUpdates: PendingUpdate[] = [];\n  \n  // Update project dates to encompass all phases\n  autoAdjustProjectDates(project, pendingUpdates);\n  \n  return pendingUpdates;\n}\n\n/**\n * Main entry point: Process all auto-calculations after a subphase moves\n * \n * NOTE: We do NOT cascade to dependent subphases here. Dependencies only auto-align\n * at creation time. After that, users have full manual control.\n * \n * We DO cascade parent dates upward when a child extends beyond parent bounds.\n */\nexport function processSubphaseMove(\n  project: Project,\n  subphaseId: number,\n  _oldEndDate: string,\n  _newEndDate: string\n): PendingUpdate[] {\n  const pendingUpdates: PendingUpdate[] = [];\n  \n  // Cascade parent dates upward (subphase  parent subphase  phase  project)\n  // This expands parents when children extend beyond their bounds\n  cascadeParentDatesUp(project, subphaseId, pendingUpdates);\n  \n  return pendingUpdates;\n}\n\n/**\n * Deep clone a project to avoid mutations\n */\nexport function cloneProject(project: Project): Project {\n  return JSON.parse(JSON.stringify(project));\n}\n","/**\n * useDragAndDrop - Hook for dragging phases/subphases/assignments on the timeline\n * Handles mouse events and calculates day offsets based on cell width\n */\n\nimport { useCallback, useRef, useEffect } from 'react';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { updatePhase, updateSubphase, updateProject, updateStaffAssignment, updateEquipmentAssignment, loadAllProjects } from '@/api/endpoints/projects';\nimport { useUndoStore } from '@/stores/undoStore';\nimport { \n  processPhaseMove, \n  processSubphaseMove, \n  savePendingUpdates,\n  cloneProject,\n  moveChildrenByOffset,\n  movePhasesWithProject\n} from '@/components/gantt/utils';\nimport type { ViewMode, Subphase, Project } from '@/types';\n\ninterface DragData {\n  id: number;\n  type: 'project' | 'phase' | 'subphase' | 'staffAssignment' | 'equipmentAssignment';\n  projectId: number;\n  phaseId?: number;\n  startX: number;\n  element: HTMLElement | null;\n  originalLeft: number;\n  originalStartDate: string;\n  originalEndDate: string;\n  isMilestone: boolean;\n  // For project drag - track if user confirmed\n  confirmed?: boolean;\n}\n\nexport function useDragAndDrop() {\n  const { isDragging, dragType, dragItemId, startDrag, endDrag, showDragIndicator, hideIndicator } = useUIStore();\n  const { projects, setProjects, cellWidth, currentView, viewMode } = useAppStore();\n  const { saveState } = useUndoStore();\n  \n  const dragDataRef = useRef<DragData | null>(null);\n  const currentXRef = useRef(0);\n  \n  // Format date as YYYY-MM-DD\n  const formatDateLocal = useCallback((date: Date): string => {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }, []);\n  \n  // Get timeline cells from DOM\n  const getTimelineCellsFromDOM = useCallback((): { date: string; dateEnd?: string }[] | null => {\n    const headerCells = document.querySelectorAll('[data-date]');\n    if (headerCells.length === 0) return null;\n    \n    const cells: { date: string; dateEnd?: string }[] = [];\n    headerCells.forEach((cell) => {\n      const dateAttr = cell.getAttribute('data-date');\n      const dateEndAttr = cell.getAttribute('data-date-end');\n      if (dateAttr) {\n        cells.push({ \n          date: dateAttr,\n          dateEnd: dateEndAttr || undefined\n        });\n      }\n    });\n    \n    return cells.length > 0 ? cells : null;\n  }, []);\n  \n  // Calculate date from pixel position\n  const calculateDateFromPosition = useCallback((\n    leftPx: number, \n    cells: { date: string; dateEnd?: string }[], \n    cw: number, \n    vm: ViewMode\n  ): string | null => {\n    if (cells.length === 0) return null;\n    \n    // For week/month view, snap to the nearest cell (day)\n    if (vm === 'week' || vm === 'month') {\n      const cellIndex = Math.round(leftPx / cw);\n      const clampedIndex = Math.max(0, Math.min(cells.length - 1, cellIndex));\n      return cells[clampedIndex].date;\n    }\n    \n    // For quarter/year view, use proportional calculation\n    const fcd = new Date(cells[0].date);\n    fcd.setHours(0, 0, 0, 0);\n    \n    let lcd: Date;\n    const lastCell = cells[cells.length - 1];\n    \n    if (vm === 'quarter' && lastCell.dateEnd) {\n      lcd = new Date(lastCell.dateEnd);\n      lcd.setHours(23, 59, 59, 999);\n    } else if (vm === 'year') {\n      lcd = new Date(lastCell.date);\n      lcd = new Date(lcd.getFullYear(), lcd.getMonth() + 1, 0, 23, 59, 59, 999);\n    } else {\n      lcd = new Date(lastCell.date);\n      lcd.setHours(23, 59, 59, 999);\n    }\n    \n    const totalMs = lcd.getTime() - fcd.getTime();\n    const tw = cells.length * cw;\n    \n    const msOffset = (leftPx / tw) * totalMs;\n    const newDate = new Date(fcd.getTime() + msOffset);\n    \n    return formatDateLocal(newDate);\n  }, [formatDateLocal]);\n  \n  // Calculate lag days for a phase based on dependencies\n  const calculatePhaseLagDays = useCallback((\n    phaseId: number,\n    projectId: number,\n    newStartDate: string\n  ): number | null => {\n    const project = projects.find(p => p.id === projectId);\n    if (!project) return null;\n    \n    const phase = (project.phases ?? []).find(p => p.id === phaseId);\n    if (!phase) return null;\n    \n    const deps = phase.dependencies ?? [];\n    if (deps.length === 0) return null;\n    \n    // Calculate original duration\n    const origStart = new Date(phase.start_date);\n    const origEnd = new Date(phase.end_date);\n    const durationMs = origEnd.getTime() - origStart.getTime();\n    \n    const newStart = new Date(newStartDate);\n    const newEnd = new Date(newStart.getTime() + durationMs);\n    \n    // Track worst lag\n    let worstLagDays: number | null = null;\n    \n    for (const dep of deps) {\n      const depPhase = (project.phases ?? []).find(p => p.id === dep.id);\n      if (!depPhase) continue;\n      \n      const depStart = new Date(depPhase.start_date);\n      const depEnd = new Date(depPhase.end_date);\n      let lagDays: number;\n      \n      if (dep.type === 'SS') {\n        lagDays = Math.round((newStart.getTime() - depStart.getTime()) / 86400000);\n      } else if (dep.type === 'FF') {\n        lagDays = Math.round((newEnd.getTime() - depEnd.getTime()) / 86400000);\n      } else if (dep.type === 'SF') {\n        lagDays = Math.round((newEnd.getTime() - depStart.getTime()) / 86400000);\n      } else {\n        // FS (default): successor start vs predecessor end + 1 day\n        const expectedStart = new Date(depEnd);\n        expectedStart.setDate(expectedStart.getDate() + 1);\n        lagDays = Math.round((newStart.getTime() - expectedStart.getTime()) / 86400000);\n      }\n      \n      if (worstLagDays === null || lagDays < worstLagDays) {\n        worstLagDays = lagDays;\n      }\n    }\n    \n    return worstLagDays;\n  }, [projects]);\n  \n  // Find subphase in project\n  const findSubphaseInProject = useCallback((project: Project, subphaseId: number): Subphase | null => {\n    const searchInChildren = (children: Subphase[]): Subphase | null => {\n      for (const child of children) {\n        if (child.id === subphaseId) return child;\n        if (child.children?.length) {\n          const found = searchInChildren(child.children);\n          if (found) return found;\n        }\n      }\n      return null;\n    };\n    \n    for (const phase of project.phases ?? []) {\n      if (phase.children?.length) {\n        const found = searchInChildren(phase.children);\n        if (found) return found;\n      }\n    }\n    return null;\n  }, []);\n  \n  // Calculate lag days for a subphase based on dependencies\n  const calculateSubphaseLagDays = useCallback((\n    subphaseId: number,\n    projectId: number,\n    newStartDate: string\n  ): number | null => {\n    const project = projects.find(p => p.id === projectId);\n    if (!project) return null;\n    \n    const subphase = findSubphaseInProject(project, subphaseId);\n    if (!subphase) return null;\n    \n    const deps = subphase.dependencies ?? [];\n    if (deps.length === 0) return null;\n    \n    // Calculate original duration\n    const origStart = new Date(subphase.start_date);\n    const origEnd = new Date(subphase.end_date);\n    const durationMs = origEnd.getTime() - origStart.getTime();\n    \n    const newStart = new Date(newStartDate);\n    const newEnd = new Date(newStart.getTime() + durationMs);\n    \n    // Track worst lag\n    let worstLagDays: number | null = null;\n    \n    for (const dep of deps) {\n      // Find predecessor subphase\n      const depSubphase = findSubphaseInProject(project, dep.id);\n      if (!depSubphase) continue;\n      \n      const depStart = new Date(depSubphase.start_date);\n      const depEnd = new Date(depSubphase.end_date);\n      let lagDays: number;\n      \n      if (dep.type === 'SS') {\n        lagDays = Math.round((newStart.getTime() - depStart.getTime()) / 86400000);\n      } else if (dep.type === 'FF') {\n        lagDays = Math.round((newEnd.getTime() - depEnd.getTime()) / 86400000);\n      } else if (dep.type === 'SF') {\n        lagDays = Math.round((newEnd.getTime() - depStart.getTime()) / 86400000);\n      } else {\n        // FS (default)\n        const expectedStart = new Date(depEnd);\n        expectedStart.setDate(expectedStart.getDate() + 1);\n        lagDays = Math.round((newStart.getTime() - expectedStart.getTime()) / 86400000);\n      }\n      \n      if (worstLagDays === null || lagDays < worstLagDays) {\n        worstLagDays = lagDays;\n      }\n    }\n    \n    return worstLagDays;\n  }, [projects, findSubphaseInProject]);\n  \n  // Handle mouse move during drag\n  const handleMouseMove = useCallback((e: MouseEvent) => {\n    if (!dragDataRef.current) return;\n    \n    currentXRef.current = e.clientX;\n    const data = dragDataRef.current;\n    const deltaX = e.clientX - data.startX;\n    let newLeft = data.originalLeft + deltaX;\n    \n    // Snap to cell boundaries in week and month views for cleaner movement\n    if (viewMode === 'week' || viewMode === 'month') {\n      // Round to nearest cell\n      const cellIndex = Math.round(newLeft / cellWidth);\n      newLeft = cellIndex * cellWidth;\n    }\n    \n    // Update element position visually\n    if (data.element) {\n      data.element.style.left = `${newLeft}px`;\n      data.element.style.opacity = '0.8';\n      data.element.style.zIndex = '1000';\n    }\n    \n    // Calculate estimated new start date and show lag indicator\n    const cells = getTimelineCellsFromDOM();\n    if (cells && cells.length > 0 && data.element) {\n      const estimatedStartDate = calculateDateFromPosition(newLeft, cells, cellWidth, viewMode);\n      \n      if (estimatedStartDate) {\n        // Calculate lag days based on item type\n        const lagDays = data.type === 'phase'\n          ? calculatePhaseLagDays(data.id, data.projectId, estimatedStartDate)\n          : calculateSubphaseLagDays(data.id, data.projectId, estimatedStartDate);\n        \n        if (lagDays !== null) {\n          // Calculate position relative to timeline body\n          const row = data.element.closest('[class*=\"row\"]');\n          if (row) {\n            const rowTop = (row as HTMLElement).offsetTop;\n            const barWidth = data.element.offsetWidth;\n            const indicatorLeft = newLeft + barWidth / 2;  // Center of bar\n            const indicatorTop = rowTop - 22;  // Above the row\n            \n            showDragIndicator(indicatorLeft, indicatorTop, lagDays);\n          }\n        } else {\n          hideIndicator();\n        }\n      }\n    }\n  }, [cellWidth, viewMode, getTimelineCellsFromDOM, calculateDateFromPosition, calculatePhaseLagDays, calculateSubphaseLagDays, showDragIndicator, hideIndicator]);\n  \n  // Handle mouse up - commit the drag\n  const handleMouseUp = useCallback(async () => {\n    // Hide indicator first\n    hideIndicator();\n    \n    if (!dragDataRef.current) {\n      endDrag();\n      return;\n    }\n    \n    const data = dragDataRef.current;\n    \n    // Reset element style immediately\n    if (data.element) {\n      data.element.style.opacity = '1';\n      data.element.style.zIndex = '';\n      data.element.classList.remove('dragging');\n    }\n    \n    // Clean up listeners first\n    document.removeEventListener('mousemove', handleMouseMove);\n    document.removeEventListener('mouseup', handleMouseUp);\n    \n    // Get the final position\n    const finalLeft = data.element ? parseFloat(data.element.style.left) || 0 : data.originalLeft;\n    const deltaX = finalLeft - data.originalLeft;\n    \n    if (Math.abs(deltaX) < 2) {\n      // No significant change, just cleanup\n      dragDataRef.current = null;\n      endDrag();\n      return;\n    }\n    \n    // Get timeline cells for inverse calculation\n    const cells = getTimelineCellsFromDOM();\n    \n    if (!cells || cells.length === 0) {\n      console.warn('Could not get timeline cells for date calculation');\n      // Fall back to simple day calculation\n      const daysDelta = Math.round(deltaX / cellWidth);\n      const addDays = (dateStr: string, days: number): string => {\n        const date = new Date(dateStr);\n        date.setDate(date.getDate() + days);\n        return date.toISOString().split('T')[0];\n      };\n      \n      const newStartDate = addDays(data.originalStartDate, daysDelta);\n      const newEndDate = data.isMilestone ? newStartDate : addDays(data.originalEndDate, daysDelta);\n      \n      await commitDragUpdate(data, newStartDate, newEndDate);\n      return;\n    }\n    \n    // Use inverse of calculateBarPosition to get new date\n    const newStartDate = calculateDateFromPosition(finalLeft, cells, cellWidth, viewMode);\n    \n    if (!newStartDate) {\n      console.warn('Could not calculate date from position');\n      dragDataRef.current = null;\n      endDrag();\n      return;\n    }\n    \n    // Preserve original duration when dragging (use exact day difference)\n    const origStart = new Date(data.originalStartDate);\n    const origEnd = new Date(data.originalEndDate);\n    // Normalize to midnight to avoid timezone issues\n    origStart.setHours(0, 0, 0, 0);\n    origEnd.setHours(0, 0, 0, 0);\n    const durationDays = Math.round((origEnd.getTime() - origStart.getTime()) / 86400000);\n    \n    const newStartDateObj = new Date(newStartDate);\n    newStartDateObj.setHours(0, 0, 0, 0);\n    const newEndDateObj = new Date(newStartDateObj);\n    newEndDateObj.setDate(newEndDateObj.getDate() + durationDays);\n    \n    const startDateStr = formatDateLocal(newStartDateObj);\n    const endDateStr = data.isMilestone ? startDateStr : formatDateLocal(newEndDateObj);\n    \n    await commitDragUpdate(data, startDateStr, endDateStr);\n  }, [cellWidth, viewMode, endDrag, handleMouseMove, saveState, setProjects, projects, hideIndicator]);\n  \n  // Helper to commit drag update\n  const commitDragUpdate = useCallback(async (\n    data: DragData, \n    newStartDate: string, \n    newEndDate: string\n  ) => {\n    try {\n      // Find the project\n      const projectIndex = projects.findIndex(p => p.id === data.projectId);\n      if (projectIndex === -1) {\n        console.error('Project not found:', data.projectId);\n        dragDataRef.current = null;\n        endDrag();\n        return;\n      }\n      \n      // Calculate offset for children movement\n      const oldStartMs = new Date(data.originalStartDate).getTime();\n      const newStartMs = new Date(newStartDate).getTime();\n      const dayOffset = Math.round((newStartMs - oldStartMs) / 86400000);\n      \n      // If no movement, just end drag\n      if (dayOffset === 0) {\n        dragDataRef.current = null;\n        endDrag();\n        return;\n      }\n      \n      // For project drag, ask for confirmation\n      if (data.type === 'project') {\n        const project = projects[projectIndex];\n        const phaseCount = project.phases?.length ?? 0;\n        const confirmed = window.confirm(\n          `Move project by ${dayOffset > 0 ? '+' : ''}${dayOffset} days?\\n\\nThis will move all ${phaseCount} phase(s), their subphases, and all staff/equipment assignments.`\n        );\n        \n        if (!confirmed) {\n          // Reset element position\n          if (data.element) {\n            data.element.style.left = `${data.originalLeft}px`;\n            data.element.classList.remove('dragging');\n          }\n          dragDataRef.current = null;\n          endDrag();\n          return;\n        }\n      }\n      \n      // Save undo state\n      saveState(projects, 'drag');\n      \n      // Clone the project for mutations\n      const projectCopy = cloneProject(projects[projectIndex]);\n      \n      // Collect all pending updates (for children that need to be saved)\n      const childUpdates: { type: 'phase' | 'subphase' | 'project' | 'staffAssignment' | 'equipmentAssignment'; id: number; start_date: string; end_date: string }[] = [];\n      \n      if (data.type === 'project') {\n        // Dragging project - update project dates and move all phases with it\n        projectCopy.start_date = newStartDate;\n        projectCopy.end_date = newEndDate;\n        \n        // Move all phases and their children by the same offset\n        if (dayOffset !== 0) {\n          movePhasesWithProject(projectCopy, dayOffset, childUpdates);\n        }\n        \n      } else if (data.type === 'phase') {\n        const phase = (projectCopy.phases ?? []).find(p => p.id === data.id);\n        if (phase) {\n          phase.start_date = newStartDate;\n          phase.end_date = newEndDate;\n          \n          // Move all children (subphases) by the same offset\n          if (phase.children?.length && dayOffset !== 0) {\n            moveChildrenByOffset(phase.children, dayOffset, childUpdates);\n          }\n        }\n      } else {\n        // Subphase - update in tree and move its children\n        const updateInTree = (children: Subphase[]): boolean => {\n          for (const child of children) {\n            if (child.id === data.id) {\n              child.start_date = newStartDate;\n              child.end_date = newEndDate;\n              \n              // Move nested children by the same offset\n              if (child.children?.length && dayOffset !== 0) {\n                moveChildrenByOffset(child.children, dayOffset, childUpdates);\n              }\n              return true;\n            }\n            if (child.children?.length && updateInTree(child.children)) {\n              return true;\n            }\n          }\n          return false;\n        };\n        \n        for (const phase of projectCopy.phases ?? []) {\n          if (phase.children?.length && updateInTree(phase.children)) {\n            break;\n          }\n        }\n      }\n      \n      // Process auto-calculations (parent expansion, project dates) - only for phases/subphases\n      let pendingUpdates: typeof childUpdates = [];\n      if (data.type === 'phase') {\n        pendingUpdates = processPhaseMove(\n          projectCopy, \n          data.id, \n          data.originalEndDate, \n          newEndDate\n        );\n      } else if (data.type === 'subphase') {\n        pendingUpdates = processSubphaseMove(\n          projectCopy, \n          data.id, \n          data.originalEndDate, \n          newEndDate\n        );\n      } else if (data.type === 'staffAssignment') {\n        // Update staff assignment in the project copy\n        const assignment = projectCopy.staffAssignments?.find(a => a.id === data.id);\n        if (assignment) {\n          assignment.start_date = newStartDate;\n          assignment.end_date = newEndDate;\n        }\n      } else if (data.type === 'equipmentAssignment') {\n        // Update equipment assignment in the project copy\n        const assignment = projectCopy.equipmentAssignments?.find(a => a.id === data.id);\n        if (assignment) {\n          assignment.start_date = newStartDate;\n          assignment.end_date = newEndDate;\n        }\n      }\n      // For project drag, we don't need auto-calculations since we're moving everything\n      \n      // Merge child updates into pending updates\n      pendingUpdates.push(...childUpdates);\n      \n      // Update local state with all changes (including moved children)\n      const updatedProjects = projects.map((p, idx) => \n        idx === projectIndex ? projectCopy : p\n      );\n      setProjects(updatedProjects);\n      \n      // Persist the dragged item to server\n      if (data.type === 'project') {\n        await updateProject(data.id, {\n          start_date: newStartDate,\n          end_date: newEndDate,\n        });\n      } else if (data.type === 'phase') {\n        await updatePhase(data.id, {\n          start_date: newStartDate,\n          end_date: newEndDate,\n        });\n      } else if (data.type === 'subphase') {\n        await updateSubphase(data.id, {\n          start_date: newStartDate,\n          end_date: newEndDate,\n        });\n      } else if (data.type === 'staffAssignment') {\n        // Staff assignment requires allocation field\n        const assignment = projectCopy.staffAssignments?.find(a => a.id === data.id);\n        await updateStaffAssignment(data.id, {\n          start_date: newStartDate,\n          end_date: newEndDate,\n          allocation: assignment?.allocation ?? 100,\n        });\n      } else if (data.type === 'equipmentAssignment') {\n        await updateEquipmentAssignment(data.id, {\n          start_date: newStartDate,\n          end_date: newEndDate,\n        });\n      }\n      \n      // Save all cascaded updates (children) to server\n      if (pendingUpdates.length > 0) {\n        console.log(`Saving ${pendingUpdates.length} cascaded updates`);\n        await savePendingUpdates(pendingUpdates);\n      }\n      \n    } catch (err) {\n      console.error('Failed to update item:', err);\n      // On error, reload to get correct state\n      const reloadedProjects = await loadAllProjects();\n      setProjects(reloadedProjects);\n    }\n    \n    dragDataRef.current = null;\n    endDrag();\n  }, [saveState, setProjects, projects, endDrag]);\n  \n  // Helper to recursively update subphase in tree\n  const updateSubphaseInTree = (\n    subphases: Subphase[], \n    targetId: number, \n    newStartDate: string, \n    newEndDate: string\n  ): Subphase[] => {\n    return subphases.map(sp => {\n      if (sp.id === targetId) {\n        return { ...sp, start_date: newStartDate, end_date: newEndDate };\n      }\n      if (sp.children?.length) {\n        return {\n          ...sp,\n          children: updateSubphaseInTree(sp.children, targetId, newStartDate, newEndDate)\n        };\n      }\n      return sp;\n    });\n  };\n  \n  // Start dragging a phase\n  const startPhaseDrag = useCallback((\n    e: React.MouseEvent,\n    phaseId: number,\n    projectId: number,\n    startDate: string,\n    endDate: string,\n    isMilestone: boolean = false,\n    targetElement?: HTMLElement\n  ) => {\n    // Don't drag if clicking resize handle\n    if ((e.target as HTMLElement).classList.contains('resize-handle')) return;\n    \n    // Don't allow dragging in equipment view (read-only)\n    if (currentView === 'equipment') return;\n    \n    // Don't allow dragging projects/phases in staff view\n    if (currentView === 'staff') return;\n    \n    e.preventDefault();\n    e.stopPropagation();\n    \n    // Use provided element or find from event\n    let element = targetElement || (e.currentTarget as HTMLElement);\n    if (!element || (!element.classList?.contains('gantt-bar') && !element.dataset?.phaseId)) {\n      element = (e.target as HTMLElement).closest('[data-phase-id]') as HTMLElement;\n    }\n    \n    if (!element) {\n      console.warn('Could not find element for drag');\n      return;\n    }\n    \n    dragDataRef.current = {\n      id: phaseId,\n      type: 'phase',\n      projectId,\n      startX: e.clientX,\n      element,\n      originalLeft: parseInt(element?.style.left || '0') || 0,\n      originalStartDate: startDate,\n      originalEndDate: endDate,\n      isMilestone,\n    };\n    \n    currentXRef.current = e.clientX;\n    \n    // Add class for styling\n    if (element) {\n      element.classList.add('dragging');\n    }\n    \n    startDrag('phase', phaseId);\n    \n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  }, [currentView, handleMouseMove, handleMouseUp, startDrag]);\n  \n  // Start dragging a subphase\n  const startSubphaseDrag = useCallback((\n    e: React.MouseEvent,\n    subphaseId: number,\n    projectId: number,\n    phaseId: number,\n    startDate: string,\n    endDate: string,\n    isMilestone: boolean = false,\n    targetElement?: HTMLElement\n  ) => {\n    // Don't drag if clicking resize handle\n    if ((e.target as HTMLElement).classList.contains('resize-handle')) return;\n    \n    // Don't allow dragging in equipment view (read-only)\n    if (currentView === 'equipment') return;\n    \n    // Don't allow dragging in staff view\n    if (currentView === 'staff') return;\n    \n    e.preventDefault();\n    e.stopPropagation();\n    \n    // Use provided element or find from event\n    let element = targetElement || (e.currentTarget as HTMLElement);\n    if (!element || (!element.classList?.contains('gantt-bar') && !element.dataset?.subphaseId)) {\n      element = (e.target as HTMLElement).closest('[data-subphase-id]') as HTMLElement;\n    }\n    \n    if (!element) {\n      console.warn('Could not find element for subphase drag');\n      return;\n    }\n    \n    dragDataRef.current = {\n      id: subphaseId,\n      type: 'subphase',\n      projectId,\n      phaseId,\n      startX: e.clientX,\n      element,\n      originalLeft: parseInt(element?.style.left || '0') || 0,\n      originalStartDate: startDate,\n      originalEndDate: endDate,\n      isMilestone,\n    };\n    \n    currentXRef.current = e.clientX;\n    \n    // Add class for styling\n    if (element) {\n      element.classList.add('dragging');\n    }\n    \n    startDrag('subphase', subphaseId);\n    \n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  }, [currentView, handleMouseMove, handleMouseUp, startDrag]);\n  \n  // Start dragging a project\n  const startProjectDrag = useCallback((\n    e: React.MouseEvent,\n    projectId: number,\n    startDate: string,\n    endDate: string,\n    targetElement?: HTMLElement\n  ) => {\n    // Don't drag if clicking resize handle\n    if ((e.target as HTMLElement).classList.contains('resize-handle')) return;\n    \n    // Don't allow dragging in equipment view (read-only)\n    if (currentView === 'equipment') return;\n    \n    // Don't allow dragging in staff view\n    if (currentView === 'staff') return;\n    \n    e.preventDefault();\n    e.stopPropagation();\n    \n    // Use provided element or find from event\n    let element = targetElement || (e.currentTarget as HTMLElement);\n    if (!element || (!element.classList?.contains('gantt-bar') && !element.dataset?.projectId)) {\n      element = (e.target as HTMLElement).closest('[data-project-id]') as HTMLElement;\n    }\n    \n    if (!element) {\n      console.warn('Could not find element for project drag');\n      return;\n    }\n    \n    dragDataRef.current = {\n      id: projectId,\n      type: 'project',\n      projectId,\n      startX: e.clientX,\n      element,\n      originalLeft: parseInt(element?.style.left || '0') || 0,\n      originalStartDate: startDate,\n      originalEndDate: endDate,\n      isMilestone: false,\n    };\n    \n    currentXRef.current = e.clientX;\n    \n    // Add class for styling\n    if (element) {\n      element.classList.add('dragging');\n    }\n    \n    startDrag('project', projectId);\n    \n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  }, [currentView, handleMouseMove, handleMouseUp, startDrag]);\n  \n  // Start dragging a staff assignment\n  const startStaffAssignmentDrag = useCallback((\n    e: React.MouseEvent,\n    assignmentId: number,\n    projectId: number,\n    startDate: string,\n    endDate: string,\n    targetElement?: HTMLElement\n  ) => {\n    // Don't drag if clicking resize handle\n    if ((e.target as HTMLElement).classList.contains('resize-handle')) return;\n    \n    // Don't allow dragging in equipment view (read-only)\n    if (currentView === 'equipment') return;\n    \n    // Don't allow dragging in staff view (read-only)\n    if (currentView === 'staff') return;\n    \n    e.preventDefault();\n    e.stopPropagation();\n    \n    // Use provided element or find from event\n    let element = targetElement || (e.currentTarget as HTMLElement);\n    if (!element || !element.dataset?.assignmentId) {\n      element = (e.target as HTMLElement).closest('[data-assignment-id]') as HTMLElement;\n    }\n    \n    if (!element) {\n      console.warn('Could not find element for staff assignment drag');\n      return;\n    }\n    \n    dragDataRef.current = {\n      id: assignmentId,\n      type: 'staffAssignment',\n      projectId,\n      startX: e.clientX,\n      element,\n      originalLeft: parseInt(element?.style.left || '0') || 0,\n      originalStartDate: startDate,\n      originalEndDate: endDate,\n      isMilestone: false,\n    };\n    \n    currentXRef.current = e.clientX;\n    \n    // Add class for styling\n    if (element) {\n      element.classList.add('dragging');\n    }\n    \n    startDrag('staffAssignment', assignmentId);\n    \n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  }, [currentView, handleMouseMove, handleMouseUp, startDrag]);\n  \n  // Start dragging an equipment assignment\n  const startEquipmentAssignmentDrag = useCallback((\n    e: React.MouseEvent,\n    assignmentId: number,\n    projectId: number,\n    startDate: string,\n    endDate: string,\n    targetElement?: HTMLElement\n  ) => {\n    // Don't drag if clicking resize handle\n    if ((e.target as HTMLElement).classList.contains('resize-handle')) return;\n    \n    // Don't allow dragging in equipment view (read-only)\n    if (currentView === 'equipment') return;\n    \n    // Don't allow dragging in staff view (read-only)\n    if (currentView === 'staff') return;\n    \n    e.preventDefault();\n    e.stopPropagation();\n    \n    // Use provided element or find from event\n    let element = targetElement || (e.currentTarget as HTMLElement);\n    if (!element || !element.dataset?.assignmentId) {\n      element = (e.target as HTMLElement).closest('[data-assignment-id]') as HTMLElement;\n    }\n    \n    if (!element) {\n      console.warn('Could not find element for equipment assignment drag');\n      return;\n    }\n    \n    dragDataRef.current = {\n      id: assignmentId,\n      type: 'equipmentAssignment',\n      projectId,\n      startX: e.clientX,\n      element,\n      originalLeft: parseInt(element?.style.left || '0') || 0,\n      originalStartDate: startDate,\n      originalEndDate: endDate,\n      isMilestone: false,\n    };\n    \n    currentXRef.current = e.clientX;\n    \n    // Add class for styling\n    if (element) {\n      element.classList.add('dragging');\n    }\n    \n    startDrag('equipmentAssignment', assignmentId);\n    \n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  }, [currentView, handleMouseMove, handleMouseUp, startDrag]);\n  \n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [handleMouseMove, handleMouseUp]);\n  \n  return {\n    isDragging,\n    dragType,\n    dragItemId,\n    startProjectDrag,\n    startPhaseDrag,\n    startSubphaseDrag,\n    startStaffAssignmentDrag,\n    startEquipmentAssignmentDrag,\n  };\n}\n","/**\n * useResize - Hook for resizing phases/subphases/assignments on the timeline\n * Handles left/right edge resizing and calculates date changes\n */\n\nimport { useCallback, useRef, useEffect } from 'react';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { updatePhase, updateSubphase, updateStaffAssignment, updateEquipmentAssignment, loadAllProjects } from '@/api/endpoints/projects';\nimport { useUndoStore } from '@/stores/undoStore';\nimport { \n  processPhaseMove, \n  processSubphaseMove, \n  savePendingUpdates,\n  cloneProject \n} from '@/components/gantt/utils';\nimport type { ViewMode, Subphase } from '@/types';\n\ntype ResizeEdge = 'left' | 'right';\n\ninterface ResizeData {\n  id: number;\n  type: 'phase' | 'subphase' | 'staffAssignment' | 'equipmentAssignment';\n  projectId: number;\n  edge: ResizeEdge;\n  startX: number;\n  element: HTMLElement | null;\n  originalLeft: number;\n  originalWidth: number;\n  originalStartDate: string;\n  originalEndDate: string;\n}\n\nexport function useResize() {\n  const { isResizing, resizeEdge, resizeItemId, resizeItemType, startResize, endResize, showResizeIndicator, hideIndicator } = useUIStore();\n  const { projects, setProjects, cellWidth, currentView, viewMode } = useAppStore();\n  const { saveState } = useUndoStore();\n  \n  const resizeDataRef = useRef<ResizeData | null>(null);\n  const currentXRef = useRef(0);\n  \n  // Refs to hold current values - prevents stale closure issues in event handlers\n  const cellWidthRef = useRef(cellWidth);\n  const viewModeRef = useRef(viewMode);\n  \n  // Keep refs in sync with store values\n  useEffect(() => {\n    cellWidthRef.current = cellWidth;\n  }, [cellWidth]);\n  \n  useEffect(() => {\n    viewModeRef.current = viewMode;\n  }, [viewMode]);\n  \n  // Format date as YYYY-MM-DD\n  const formatDateLocal = useCallback((date: Date): string => {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    return `${year}-${month}-${day}`;\n  }, []);\n  \n  // Get timeline cells from DOM\n  const getTimelineCellsFromDOM = useCallback((): { date: string; dateEnd?: string }[] | null => {\n    const headerCells = document.querySelectorAll('[data-date]');\n    if (headerCells.length === 0) return null;\n    \n    const cells: { date: string; dateEnd?: string }[] = [];\n    headerCells.forEach((cell) => {\n      const dateAttr = cell.getAttribute('data-date');\n      const dateEndAttr = cell.getAttribute('data-date-end');\n      if (dateAttr) {\n        cells.push({ \n          date: dateAttr,\n          dateEnd: dateEndAttr || undefined\n        });\n      }\n    });\n    \n    return cells.length > 0 ? cells : null;\n  }, []);\n  \n  // Calculate date from pixel position (inverse of calculateBarPosition)\n  const calculateDateFromPosition = useCallback((\n    leftPx: number, \n    cells: { date: string; dateEnd?: string }[], \n    cw: number, \n    vm: ViewMode\n  ): string | null => {\n    if (cells.length === 0) return null;\n    \n    // For week/month view, snap to the nearest cell (day)\n    if (vm === 'week' || vm === 'month') {\n      const cellIndex = Math.round(leftPx / cw);\n      const clampedIndex = Math.max(0, Math.min(cells.length - 1, cellIndex));\n      return cells[clampedIndex].date;\n    }\n    \n    // For quarter/year view, use proportional calculation\n    const fcd = new Date(cells[0].date);\n    fcd.setHours(0, 0, 0, 0);\n    \n    let lcd: Date;\n    const lastCell = cells[cells.length - 1];\n    \n    if (vm === 'quarter' && lastCell.dateEnd) {\n      lcd = new Date(lastCell.dateEnd);\n      lcd.setHours(23, 59, 59, 999);\n    } else if (vm === 'year') {\n      lcd = new Date(lastCell.date);\n      lcd = new Date(lcd.getFullYear(), lcd.getMonth() + 1, 0, 23, 59, 59, 999);\n    } else {\n      lcd = new Date(lastCell.date);\n      lcd.setHours(23, 59, 59, 999);\n    }\n    \n    const totalMs = lcd.getTime() - fcd.getTime();\n    const tw = cells.length * cw;\n    \n    const msOffset = (leftPx / tw) * totalMs;\n    const newDate = new Date(fcd.getTime() + msOffset);\n    \n    return formatDateLocal(newDate);\n  }, [formatDateLocal]);\n  \n  // Handle mouse move during resize\n  const handleMouseMove = useCallback((e: MouseEvent) => {\n    if (!resizeDataRef.current) return;\n    \n    currentXRef.current = e.clientX;\n    const data = resizeDataRef.current;\n    \n    // Get current values from refs to avoid stale closures\n    const currentCellWidth = cellWidthRef.current;\n    const currentViewMode = viewModeRef.current;\n    \n    let deltaX = e.clientX - data.startX;\n    \n    // For week/month view, snap to day boundaries (cellWidth increments)\n    if (currentViewMode === 'week' || currentViewMode === 'month') {\n      deltaX = Math.round(deltaX / currentCellWidth) * currentCellWidth;\n    }\n    \n    let newLeft = data.originalLeft;\n    let newWidth = data.originalWidth;\n    \n    // Update element size/position visually\n    if (data.element) {\n      if (data.edge === 'left') {\n        // Resizing from left: move left edge, adjust width\n        newLeft = data.originalLeft + deltaX;\n        newWidth = data.originalWidth - deltaX;\n        if (newWidth >= currentCellWidth) { // Minimum 1 cell width\n          data.element.style.left = `${newLeft}px`;\n          data.element.style.width = `${newWidth}px`;\n        }\n      } else {\n        // Resizing from right: just adjust width\n        newWidth = data.originalWidth + deltaX;\n        if (newWidth >= currentCellWidth) { // Minimum 1 cell width\n          data.element.style.width = `${newWidth}px`;\n        }\n      }\n    }\n    \n    // Calculate and show resize indicator\n    const cells = getTimelineCellsFromDOM();\n    if (cells && cells.length > 0 && newWidth >= currentCellWidth && data.element) {\n      const dateStr = data.edge === 'left' \n        ? calculateDateFromPosition(newLeft, cells, currentCellWidth, currentViewMode)\n        : calculateDateFromPosition(newLeft + newWidth, cells, currentCellWidth, currentViewMode);\n      \n      if (dateStr) {\n        // Calculate duration\n        const startDateStr = data.edge === 'left' \n          ? dateStr \n          : calculateDateFromPosition(newLeft, cells, currentCellWidth, currentViewMode) || data.originalStartDate;\n        const endDateStr = data.edge === 'left'\n          ? calculateDateFromPosition(newLeft + newWidth, cells, currentCellWidth, currentViewMode) || data.originalEndDate\n          : dateStr;\n        \n        const startMs = new Date(startDateStr).getTime();\n        const endMs = new Date(endDateStr).getTime();\n        const durationDays = Math.round((endMs - startMs) / 86400000) + 1;\n        \n        // Calculate position relative to timeline body\n        const row = data.element.closest('[class*=\"row\"]');\n        if (row) {\n          const rowTop = (row as HTMLElement).offsetTop;\n          // Position at left or right edge of bar\n          const indicatorLeft = data.edge === 'left' \n            ? newLeft \n            : newLeft + newWidth;\n          const indicatorTop = rowTop - 28;  // Above the row\n          \n          showResizeIndicator(indicatorLeft, indicatorTop, dateStr, durationDays, data.edge);\n        }\n      }\n    }\n  }, [showResizeIndicator, getTimelineCellsFromDOM, calculateDateFromPosition]);\n  \n  // Handle mouse up - commit the resize\n  const handleMouseUp = useCallback(async () => {\n    // Hide indicator first\n    hideIndicator();\n    \n    if (!resizeDataRef.current) {\n      endResize();\n      return;\n    }\n    \n    const data = resizeDataRef.current;\n    \n    // Get current values from refs to avoid stale closures\n    const currentCellWidth = cellWidthRef.current;\n    const currentViewMode = viewModeRef.current;\n    \n    // Clean up listeners first\n    document.removeEventListener('mousemove', handleMouseMove);\n    document.removeEventListener('mouseup', handleMouseUp);\n    \n    // Remove resize cursor\n    document.body.style.cursor = '';\n    \n    // Remove resizing class\n    if (data.element) {\n      data.element.classList.remove('resizing');\n    }\n    \n    // Get current element position/size\n    const finalLeft = data.element ? parseFloat(data.element.style.left) || 0 : data.originalLeft;\n    const finalWidth = data.element ? parseFloat(data.element.style.width) || data.originalWidth : data.originalWidth;\n    \n    // Check if there was any significant change\n    const leftDelta = Math.abs(finalLeft - data.originalLeft);\n    const widthDelta = Math.abs(finalWidth - data.originalWidth);\n    \n    if (leftDelta < 2 && widthDelta < 2) {\n      // No significant change, reset and cleanup\n      if (data.element) {\n        data.element.style.left = `${data.originalLeft}px`;\n        data.element.style.width = `${data.originalWidth}px`;\n      }\n      resizeDataRef.current = null;\n      endResize();\n      return;\n    }\n    \n    // Get timeline cells for inverse calculation\n    const cells = getTimelineCellsFromDOM();\n    \n    let newStartDate = data.originalStartDate;\n    let newEndDate = data.originalEndDate;\n    \n    if (cells && cells.length > 0) {\n      // Use inverse of calculateBarPosition\n      if (data.edge === 'left') {\n        // Left resize: calculate new start date from new left position\n        const calculatedStart = calculateDateFromPosition(finalLeft, cells, currentCellWidth, currentViewMode);\n        if (calculatedStart) {\n          newStartDate = calculatedStart;\n          // Ensure start doesn't go past end\n          if (new Date(newStartDate) >= new Date(newEndDate)) {\n            const endDate = new Date(newEndDate);\n            endDate.setDate(endDate.getDate() - 1);\n            newStartDate = formatDateLocal(endDate);\n          }\n        }\n      } else {\n        // Right resize: calculate new end date from right edge position\n        const rightPosition = finalLeft + finalWidth;\n        const calculatedEnd = calculateDateFromPosition(rightPosition, cells, currentCellWidth, currentViewMode);\n        if (calculatedEnd) {\n          newEndDate = calculatedEnd;\n          // Ensure end doesn't go before start\n          if (new Date(newEndDate) <= new Date(newStartDate)) {\n            const startDate = new Date(newStartDate);\n            startDate.setDate(startDate.getDate() + 1);\n            newEndDate = formatDateLocal(startDate);\n          }\n        }\n      }\n    } else {\n      // Fallback to delta-based calculation\n      const deltaX = currentXRef.current - data.startX;\n      let daysPerCell: number;\n      switch (currentViewMode) {\n        case 'week':\n        case 'month':\n          daysPerCell = 1;\n          break;\n        case 'quarter':\n          daysPerCell = 7;\n          break;\n        case 'year':\n          daysPerCell = 30;\n          break;\n        default:\n          daysPerCell = 1;\n      }\n      \n      const daysDelta = Math.round((deltaX / currentCellWidth) * daysPerCell);\n      \n      const addDays = (dateStr: string, days: number): string => {\n        const date = new Date(dateStr);\n        date.setDate(date.getDate() + days);\n        return date.toISOString().split('T')[0];\n      };\n      \n      if (data.edge === 'left') {\n        newStartDate = addDays(data.originalStartDate, daysDelta);\n        if (new Date(newStartDate) >= new Date(newEndDate)) {\n          newStartDate = addDays(newEndDate, -1);\n        }\n      } else {\n        newEndDate = addDays(data.originalEndDate, daysDelta);\n        if (new Date(newEndDate) <= new Date(newStartDate)) {\n          newEndDate = addDays(newStartDate, 1);\n        }\n      }\n    }\n    \n    try {\n      // Save undo state\n      saveState(projects, 'resize');\n      \n      // Find the project containing this item\n      const projectIndex = projects.findIndex(p => p.id === data.projectId);\n      if (projectIndex === -1) {\n        console.error('Project not found:', data.projectId);\n        resizeDataRef.current = null;\n        endResize();\n        return;\n      }\n      \n      // Clone the project for mutations\n      const projectCopy = cloneProject(projects[projectIndex]);\n      \n      // First, update the resized item itself\n      if (data.type === 'phase') {\n        const phase = (projectCopy.phases ?? []).find(p => p.id === data.id);\n        if (phase) {\n          phase.start_date = newStartDate;\n          phase.end_date = newEndDate;\n        }\n      } else if (data.type === 'subphase') {\n        // Update subphase in tree\n        const updateInTree = (children: Subphase[]): boolean => {\n          for (const child of children) {\n            if (child.id === data.id) {\n              child.start_date = newStartDate;\n              child.end_date = newEndDate;\n              return true;\n            }\n            if (child.children?.length && updateInTree(child.children)) {\n              return true;\n            }\n          }\n          return false;\n        };\n        \n        for (const phase of projectCopy.phases ?? []) {\n          if (phase.children?.length && updateInTree(phase.children)) {\n            break;\n          }\n        }\n      } else if (data.type === 'staffAssignment') {\n        const assignment = projectCopy.staffAssignments?.find(a => a.id === data.id);\n        if (assignment) {\n          assignment.start_date = newStartDate;\n          assignment.end_date = newEndDate;\n        }\n      } else if (data.type === 'equipmentAssignment') {\n        const assignment = projectCopy.equipmentAssignments?.find(a => a.id === data.id);\n        if (assignment) {\n          assignment.start_date = newStartDate;\n          assignment.end_date = newEndDate;\n        }\n      }\n      \n      // Process auto-calculations (cascading) - only for phases/subphases\n      let pendingUpdates: any[] = [];\n      if (data.type === 'phase') {\n        pendingUpdates = processPhaseMove(\n          projectCopy, \n          data.id, \n          data.originalEndDate, \n          newEndDate\n        );\n      } else if (data.type === 'subphase') {\n        pendingUpdates = processSubphaseMove(\n          projectCopy, \n          data.id, \n          data.originalEndDate, \n          newEndDate\n        );\n      }\n      // Assignments don't have auto-calculations\n      \n      // Update local state with all changes (including cascaded)\n      const updatedProjects = projects.map((p, idx) => \n        idx === projectIndex ? projectCopy : p\n      );\n      setProjects(updatedProjects);\n      \n      // Persist the resized item to server\n      if (data.type === 'phase') {\n        await updatePhase(data.id, {\n          start_date: newStartDate,\n          end_date: newEndDate,\n        });\n      } else if (data.type === 'subphase') {\n        await updateSubphase(data.id, {\n          start_date: newStartDate,\n          end_date: newEndDate,\n        });\n      } else if (data.type === 'staffAssignment') {\n        // Staff assignment requires allocation field\n        const assignment = projectCopy.staffAssignments?.find(a => a.id === data.id);\n        await updateStaffAssignment(data.id, {\n          start_date: newStartDate,\n          end_date: newEndDate,\n          allocation: assignment?.allocation ?? 100,\n        });\n      } else if (data.type === 'equipmentAssignment') {\n        await updateEquipmentAssignment(data.id, {\n          start_date: newStartDate,\n          end_date: newEndDate,\n        });\n      }\n      \n      // Save all cascaded updates to server\n      if (pendingUpdates.length > 0) {\n        console.log(`Cascading ${pendingUpdates.length} updates:`, pendingUpdates);\n        await savePendingUpdates(pendingUpdates);\n      }\n    } catch (err) {\n      console.error('Failed to resize item:', err);\n      // On error, reload to get correct state\n      const reloadedProjects = await loadAllProjects();\n      setProjects(reloadedProjects);\n    }\n    \n    resizeDataRef.current = null;\n    endResize();\n  }, [endResize, handleMouseMove, saveState, setProjects, projects, hideIndicator, getTimelineCellsFromDOM, calculateDateFromPosition, formatDateLocal]);\n  \n  // Helper to recursively update subphase in tree\n  const updateSubphaseInTree = (\n    subphases: Subphase[], \n    targetId: number, \n    newStartDate: string, \n    newEndDate: string\n  ): Subphase[] => {\n    return subphases.map(sp => {\n      if (sp.id === targetId) {\n        return { ...sp, start_date: newStartDate, end_date: newEndDate };\n      }\n      if (sp.children?.length) {\n        return {\n          ...sp,\n          children: updateSubphaseInTree(sp.children, targetId, newStartDate, newEndDate)\n        };\n      }\n      return sp;\n    });\n  };\n  \n  // Start resizing a phase\n  const startPhaseResize = useCallback((\n    e: React.MouseEvent,\n    phaseId: number,\n    projectId: number,\n    edge: ResizeEdge,\n    startDate: string,\n    endDate: string,\n    element: HTMLElement\n  ) => {\n    // Don't allow resizing in equipment view (read-only)\n    if (currentView === 'equipment') return;\n    \n    // Don't allow resizing in staff view\n    if (currentView === 'staff') return;\n    \n    e.preventDefault();\n    e.stopPropagation();\n    \n    const rect = element.getBoundingClientRect();\n    const style = window.getComputedStyle(element);\n    \n    resizeDataRef.current = {\n      id: phaseId,\n      type: 'phase',\n      projectId,\n      edge,\n      startX: e.clientX,\n      element,\n      originalLeft: parseFloat(style.left) || 0,\n      originalWidth: rect.width,\n      originalStartDate: startDate,\n      originalEndDate: endDate,\n    };\n    \n    currentXRef.current = e.clientX;\n    \n    // Add resizing class\n    element.classList.add('resizing');\n    \n    // Set cursor for entire document\n    document.body.style.cursor = 'ew-resize';\n    \n    startResize('phase', phaseId, edge);\n    \n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  }, [currentView, handleMouseMove, handleMouseUp, startResize]);\n  \n  // Start resizing a subphase\n  const startSubphaseResize = useCallback((\n    e: React.MouseEvent,\n    subphaseId: number,\n    projectId: number,\n    edge: ResizeEdge,\n    startDate: string,\n    endDate: string,\n    element: HTMLElement\n  ) => {\n    // Don't allow resizing in equipment view (read-only)\n    if (currentView === 'equipment') return;\n    \n    // Don't allow resizing in staff view\n    if (currentView === 'staff') return;\n    \n    e.preventDefault();\n    e.stopPropagation();\n    \n    const rect = element.getBoundingClientRect();\n    const style = window.getComputedStyle(element);\n    \n    resizeDataRef.current = {\n      id: subphaseId,\n      type: 'subphase',\n      projectId,\n      edge,\n      startX: e.clientX,\n      element,\n      originalLeft: parseFloat(style.left) || 0,\n      originalWidth: rect.width,\n      originalStartDate: startDate,\n      originalEndDate: endDate,\n    };\n    \n    currentXRef.current = e.clientX;\n    \n    // Add resizing class\n    element.classList.add('resizing');\n    \n    // Set cursor for entire document\n    document.body.style.cursor = 'ew-resize';\n    \n    startResize('subphase', subphaseId, edge);\n    \n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  }, [currentView, handleMouseMove, handleMouseUp, startResize]);\n  \n  // Start resizing a staff assignment\n  const startStaffAssignmentResize = useCallback((\n    e: React.MouseEvent,\n    assignmentId: number,\n    projectId: number,\n    edge: ResizeEdge,\n    startDate: string,\n    endDate: string,\n    targetElement?: HTMLElement\n  ) => {\n    // Don't allow resizing in equipment view (read-only)\n    if (currentView === 'equipment') return;\n    \n    // Don't allow resizing in staff view (read-only)\n    if (currentView === 'staff') return;\n    \n    e.preventDefault();\n    e.stopPropagation();\n    \n    const element = targetElement || (e.currentTarget as HTMLElement).closest('[data-assignment-id]') as HTMLElement;\n    if (!element) return;\n    \n    resizeDataRef.current = {\n      id: assignmentId,\n      type: 'staffAssignment',\n      projectId,\n      edge,\n      startX: e.clientX,\n      element,\n      originalLeft: parseInt(element.style.left || '0') || 0,\n      originalWidth: parseInt(element.style.width || '0') || element.offsetWidth,\n      originalStartDate: startDate,\n      originalEndDate: endDate,\n    };\n    \n    currentXRef.current = e.clientX;\n    \n    // Add resizing class\n    element.classList.add('resizing');\n    \n    // Set cursor for entire document\n    document.body.style.cursor = 'ew-resize';\n    \n    startResize('staffAssignment', assignmentId, edge);\n    \n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  }, [currentView, handleMouseMove, handleMouseUp, startResize]);\n  \n  // Start resizing an equipment assignment\n  const startEquipmentAssignmentResize = useCallback((\n    e: React.MouseEvent,\n    assignmentId: number,\n    projectId: number,\n    edge: ResizeEdge,\n    startDate: string,\n    endDate: string,\n    targetElement?: HTMLElement\n  ) => {\n    // Don't allow resizing in equipment view (read-only)\n    if (currentView === 'equipment') return;\n    \n    // Don't allow resizing in staff view (read-only)\n    if (currentView === 'staff') return;\n    \n    e.preventDefault();\n    e.stopPropagation();\n    \n    const element = targetElement || (e.currentTarget as HTMLElement).closest('[data-assignment-id]') as HTMLElement;\n    if (!element) return;\n    \n    resizeDataRef.current = {\n      id: assignmentId,\n      type: 'equipmentAssignment',\n      projectId,\n      edge,\n      startX: e.clientX,\n      element,\n      originalLeft: parseInt(element.style.left || '0') || 0,\n      originalWidth: parseInt(element.style.width || '0') || element.offsetWidth,\n      originalStartDate: startDate,\n      originalEndDate: endDate,\n    };\n    \n    currentXRef.current = e.clientX;\n    \n    // Add resizing class\n    element.classList.add('resizing');\n    \n    // Set cursor for entire document\n    document.body.style.cursor = 'ew-resize';\n    \n    startResize('equipmentAssignment', assignmentId, edge);\n    \n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  }, [currentView, handleMouseMove, handleMouseUp, startResize]);\n  \n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      document.body.style.cursor = '';\n    };\n  }, [handleMouseMove, handleMouseUp]);\n  \n  return {\n    isResizing,\n    resizeEdge,\n    resizeItemId,\n    resizeItemType,\n    startPhaseResize,\n    startSubphaseResize,\n    startStaffAssignmentResize,\n    startEquipmentAssignmentResize,\n  };\n}\n","/**\n * useScrollSync Hook\n * Synchronizes vertical scroll position between two elements\n */\n\nimport { useEffect, RefObject } from 'react';\n\nexport function useScrollSync(\n  ref1: RefObject<HTMLElement>,\n  ref2: RefObject<HTMLElement>\n) {\n  useEffect(() => {\n    const el1 = ref1.current;\n    const el2 = ref2.current;\n\n    if (!el1 || !el2) return;\n\n    let isSyncing = false;\n\n    const handleScroll1 = () => {\n      if (isSyncing) return;\n      isSyncing = true;\n      el2.scrollTop = el1.scrollTop;\n      requestAnimationFrame(() => {\n        isSyncing = false;\n      });\n    };\n\n    const handleScroll2 = () => {\n      if (isSyncing) return;\n      isSyncing = true;\n      el1.scrollTop = el2.scrollTop;\n      requestAnimationFrame(() => {\n        isSyncing = false;\n      });\n    };\n\n    el1.addEventListener('scroll', handleScroll1, { passive: true });\n    el2.addEventListener('scroll', handleScroll2, { passive: true });\n\n    return () => {\n      el1.removeEventListener('scroll', handleScroll1);\n      el2.removeEventListener('scroll', handleScroll2);\n    };\n  }, [ref1, ref2]);\n}\n","/**\n * Recurring Vacation Utilities\n * \n * Handles parsing and expanding recurring absence patterns stored in vacation descriptions.\n * \n * Pattern format in description field:\n *   [R:0,2,4] Rest of description\n *   \n * Where 0-6 represent days of week (0=Sunday, 1=Monday, ..., 6=Saturday)\n * \n * Examples:\n *   \"[R:3] Part-time - Childcare\" = Every Wednesday\n *   \"[R:1,3] Home office days\" = Every Monday and Wednesday\n *   \"[R:0,6] Weekend unavailable\" = Every Saturday and Sunday\n */\n\nimport type { Vacation } from '@/types';\n\n// Pattern regex: [R:X] or [R:X,Y,Z] at start of description\nconst RECURRING_PATTERN = /^\\[R:([0-6](?:,[0-6])*)\\]\\s*/;\n\n// Day names for display\nexport const DAY_NAMES = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\nexport const DAY_NAMES_FULL = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n\nexport interface RecurringPattern {\n  /** Days of week (0-6, Sunday=0) */\n  daysOfWeek: number[];\n  /** Clean description without pattern prefix */\n  cleanDescription: string;\n}\n\nexport interface ExpandedVacation extends Vacation {\n  /** Whether this is a recurring vacation */\n  isRecurring: boolean;\n  /** Original vacation ID if this is an expanded occurrence */\n  originalId?: number;\n  /** Days of week if recurring */\n  recurringDays?: number[];\n}\n\n/**\n * Parse recurring pattern from vacation description\n * Returns null if not a recurring vacation\n */\nexport function parseRecurringPattern(description: string | undefined): RecurringPattern | null {\n  if (!description) return null;\n  \n  const match = description.match(RECURRING_PATTERN);\n  if (!match) return null;\n  \n  const daysStr = match[1];\n  const daysOfWeek = daysStr.split(',').map(Number).sort((a, b) => a - b);\n  const cleanDescription = description.replace(RECURRING_PATTERN, '').trim() || 'Recurring absence';\n  \n  return { daysOfWeek, cleanDescription };\n}\n\n/**\n * Check if a vacation is recurring\n */\nexport function isRecurringVacation(vacation: Vacation): boolean {\n  return RECURRING_PATTERN.test(vacation.description || '');\n}\n\n/**\n * Create recurring pattern string for description\n */\nexport function createRecurringPattern(daysOfWeek: number[], description: string): string {\n  if (daysOfWeek.length === 0) return description;\n  const sortedDays = [...daysOfWeek].sort((a, b) => a - b);\n  return `[R:${sortedDays.join(',')}] ${description}`.trim();\n}\n\n/**\n * Get display text for recurring days\n */\nexport function getRecurringDaysDisplay(daysOfWeek: number[]): string {\n  if (daysOfWeek.length === 0) return '';\n  if (daysOfWeek.length === 1) return `Every ${DAY_NAMES_FULL[daysOfWeek[0]]}`;\n  if (daysOfWeek.length === 2) {\n    return `Every ${DAY_NAMES_FULL[daysOfWeek[0]]} & ${DAY_NAMES_FULL[daysOfWeek[1]]}`;\n  }\n  return `Every ${daysOfWeek.map(d => DAY_NAMES[d]).join(', ')}`;\n}\n\n/**\n * Check if a specific date falls on a recurring vacation day\n */\nexport function isDateOnRecurringVacation(\n  dateStr: string,\n  vacation: Vacation,\n  pattern: RecurringPattern\n): boolean {\n  const date = new Date(dateStr);\n  const dayOfWeek = date.getDay();\n  \n  // Check if date is within vacation range\n  const vacStart = vacation.start_date.split('T')[0];\n  const vacEnd = vacation.end_date.split('T')[0];\n  const checkDate = dateStr.split('T')[0];\n  \n  if (checkDate < vacStart || checkDate > vacEnd) return false;\n  \n  // Check if day of week matches\n  return pattern.daysOfWeek.includes(dayOfWeek);\n}\n\n/**\n * Expand recurring vacations into individual day markers for a given date range\n * This is used for workload calculation and visualization\n */\nexport function expandRecurringVacations(\n  vacations: Vacation[],\n  _startDate: string,\n  _endDate: string\n): ExpandedVacation[] {\n  const result: ExpandedVacation[] = [];\n  \n  for (const vacation of vacations) {\n    const pattern = parseRecurringPattern(vacation.description);\n    \n    if (!pattern) {\n      // Regular vacation - pass through\n      result.push({\n        ...vacation,\n        isRecurring: false,\n      });\n    } else {\n      // Recurring vacation - expand within visible range\n      // Also add the original with recurring flag for display purposes\n      result.push({\n        ...vacation,\n        description: pattern.cleanDescription,\n        isRecurring: true,\n        recurringDays: pattern.daysOfWeek,\n      });\n      \n      // Note: We don't need to expand into individual days here\n      // The workload calculation will check each cell against the pattern\n    }\n  }\n  \n  return result;\n}\n\n/**\n * Get all dates within a range that match a recurring pattern\n */\nexport function getRecurringDates(\n  vacation: Vacation,\n  pattern: RecurringPattern,\n  visibleStart: string,\n  visibleEnd: string\n): string[] {\n  const dates: string[] = [];\n  \n  // Determine the effective range (intersection of vacation and visible range)\n  const vacStart = vacation.start_date.split('T')[0];\n  const vacEnd = vacation.end_date.split('T')[0];\n  const rangeStart = visibleStart > vacStart ? visibleStart : vacStart;\n  const rangeEnd = visibleEnd < vacEnd ? visibleEnd : vacEnd;\n  \n  // Iterate through dates\n  const current = new Date(rangeStart);\n  const end = new Date(rangeEnd);\n  \n  while (current <= end) {\n    if (pattern.daysOfWeek.includes(current.getDay())) {\n      dates.push(current.toISOString().split('T')[0]);\n    }\n    current.setDate(current.getDate() + 1);\n  }\n  \n  return dates;\n}\n","/**\n * useWorkloadCalculation Hook\n * \n * Calculates per-cell workload data for Staff View heatmap visualization.\n * For each timeline cell (day/week), determines:\n * - Total allocation percentage from all assignments\n * - Whether staff is on vacation (including recurring patterns)\n * - Contributing assignments for tooltip\n * - Visual state (overloaded, full, partial, vacation, conflict)\n */\n\nimport { useMemo } from 'react';\nimport type { TimelineCell } from '@/components/gantt/utils';\nimport type { Vacation } from '@/types';\nimport { parseRecurringPattern, isDateOnRecurringVacation } from '@/utils/recurringVacation';\n\n// Assignment with context from Staff View\ninterface AssignmentWithDates {\n  id: number;\n  allocation: number;\n  start_date: string;\n  end_date: string;\n  projectName?: string;\n  phaseName?: string;\n}\n\nexport interface WorkloadCell {\n  /** Total allocation percentage for this cell */\n  total: number;\n  /** List of assignments active during this cell */\n  assignments: AssignmentWithDates[];\n  /** Whether staff is on vacation during this cell */\n  isOnVacation: boolean;\n  /** Vacation description if on vacation */\n  vacationDescription?: string;\n  /** Whether this is a recurring vacation day */\n  isRecurringVacation?: boolean;\n  /** Available percentage (100 - total, or 0 if on vacation) */\n  available: number;\n  /** Visual state for styling */\n  state: 'empty' | 'partial' | 'full' | 'overloaded' | 'vacation' | 'conflict';\n}\n\n/**\n * Calculate workload data for each cell in the timeline\n * @param maxCapacity - Staff member's max capacity (default 100, e.g. 80 for part-time)\n */\nexport function useWorkloadCalculation(\n  assignments: AssignmentWithDates[],\n  vacations: Vacation[],\n  cells: TimelineCell[],\n  maxCapacity: number = 100\n): WorkloadCell[] {\n  return useMemo(() => {\n    return cells.map((cell) => {\n      // Use the pre-formatted dateStr from the cell (local timezone, YYYY-MM-DD format)\n      const cellDateStr = cell.dateStr;\n      \n      // Check if on vacation (extract date part for comparison)\n      // Now handles both regular and recurring vacations\n      let activeVacation: Vacation | undefined;\n      let isRecurring = false;\n      \n      for (const v of vacations) {\n        const vStart = v.start_date.split('T')[0];\n        const vEnd = v.end_date.split('T')[0];\n        \n        // Check if within date range first\n        if (cellDateStr >= vStart && cellDateStr <= vEnd) {\n          const pattern = parseRecurringPattern(v.description);\n          \n          if (pattern) {\n            // Recurring vacation - check if this day of week matches\n            if (isDateOnRecurringVacation(cellDateStr, v, pattern)) {\n              activeVacation = { ...v, description: pattern.cleanDescription };\n              isRecurring = true;\n              break;\n            }\n          } else {\n            // Regular vacation - within range means on vacation\n            activeVacation = v;\n            isRecurring = false;\n            break;\n          }\n        }\n      }\n      \n      const isOnVacation = !!activeVacation;\n      \n      // Find all assignments active on this date (extract date part for comparison)\n      const activeAssignments = assignments.filter((a) => {\n        const aStart = a.start_date.split('T')[0];\n        const aEnd = a.end_date.split('T')[0];\n        return cellDateStr >= aStart && cellDateStr <= aEnd;\n      });\n      \n      // Sum allocations\n      const total = activeAssignments.reduce((sum, a) => sum + (a.allocation || 0), 0);\n      \n      // Calculate available and state\n      let available: number;\n      let state: WorkloadCell['state'];\n      \n      if (isOnVacation) {\n        available = 0;\n        if (total > 0) {\n          // Conflict: on vacation but has work assigned\n          state = 'conflict';\n        } else {\n          state = 'vacation';\n        }\n      } else if (total === 0) {\n        available = 100;\n        state = 'empty';\n      } else if (total > maxCapacity) {\n        available = 100 - total; // Will be negative\n        state = 'overloaded';\n      } else if (total === maxCapacity) {\n        available = 0;\n        state = 'full';\n      } else {\n        available = 100 - total;\n        state = 'partial';\n      }\n      \n      return {\n        total,\n        assignments: activeAssignments,\n        isOnVacation,\n        vacationDescription: activeVacation?.description,\n        isRecurringVacation: isRecurring,\n        available,\n        state,\n      };\n    });\n  }, [assignments, vacations, cells, maxCapacity]);\n}\n\n/**\n * Generate tooltip text for a workload cell\n */\nexport function getWorkloadTooltip(workload: WorkloadCell): string {\n  if (workload.isOnVacation) {\n    const vacDesc = workload.vacationDescription || 'Vacation';\n    const recurringNote = workload.isRecurringVacation ? ' (recurring)' : '';\n    if (workload.total > 0) {\n      return `${vacDesc}${recurringNote}\\n Conflict: ${workload.total}% assigned during vacation`;\n    }\n    return `${vacDesc}${recurringNote}`;\n  }\n  \n  if (workload.total === 0) {\n    return 'Available';\n  }\n  \n  let text = `${workload.total}% allocated`;\n  \n  if (workload.assignments.length > 1) {\n    text += ` (${workload.assignments.length} assignments)`;\n  }\n  \n  if (workload.total > 100) {\n    text += `\\n Overloaded by ${workload.total - 100}%`;\n  }\n  \n  return text;\n}\n\n/**\n * Get CSS background style for workload visualization\n */\nexport function getWorkloadBackground(workload: WorkloadCell): React.CSSProperties {\n  switch (workload.state) {\n    case 'vacation':\n      return {\n        background: 'rgba(139, 92, 246, 0.25)', // Purple\n      };\n      \n    case 'conflict':\n      return {\n        background: 'linear-gradient(135deg, rgba(139, 92, 246, 0.3), rgba(239, 68, 68, 0.3))',\n      };\n      \n    case 'overloaded':\n      // Red gradient from bottom, intensity based on overload amount\n      const overloadIntensity = Math.min(100, workload.total - 100);\n      const redOpacity = 0.3 + overloadIntensity / 200;\n      return {\n        background: `linear-gradient(to top, rgba(239, 68, 68, ${redOpacity}) ${Math.min(100, workload.total)}%, transparent ${Math.min(100, workload.total)}%)`,\n      };\n      \n    case 'full':\n      return {\n        background: 'rgba(59, 130, 246, 0.25)', // Blue\n      };\n      \n    case 'partial':\n      // Blue gradient from bottom proportional to allocation\n      return {\n        background: `linear-gradient(to top, rgba(59, 130, 246, 0.2) ${workload.total}%, transparent ${workload.total}%)`,\n      };\n      \n    default:\n      return {};\n  }\n}\n\nexport default useWorkloadCalculation;\n","/**\n * useDependencyLinking - Hook for creating dependencies between phases/subphases\n * Handles the two-click flow: first click selects source, second click selects target\n */\n\nimport { useCallback } from 'react';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { updatePhase, updateSubphase, loadAllProjects } from '@/api/endpoints/projects';\nimport { \n  cascadeParentDatesUp, \n  autoAdjustProjectDates,\n  savePendingUpdates,\n  cloneProject,\n} from '@/components/gantt/utils';\nimport type { DependencyType, Phase, Subphase } from '@/types';\n\ntype LinkZone = 'start' | 'end';\ntype ItemType = 'phase' | 'subphase';\n\n// Determine dependency type based on source and target zones\nfunction determineDependencyType(fromZone: LinkZone, toZone: LinkZone): DependencyType {\n  if (fromZone === 'end' && toZone === 'start') return 'FS';  // Finish-to-Start (most common)\n  if (fromZone === 'start' && toZone === 'start') return 'SS'; // Start-to-Start\n  if (fromZone === 'end' && toZone === 'end') return 'FF';     // Finish-to-Finish\n  if (fromZone === 'start' && toZone === 'end') return 'SF';   // Start-to-Finish (rare)\n  return 'FS'; // Default\n}\n\n// Format date as YYYY-MM-DD\nfunction formatDateLocal(date: Date): string {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n\nexport function useDependencyLinking() {\n  const { \n    isLinkingDependency, \n    linkingFrom,\n    startLinking, \n    completeLinking, \n    cancelLinking \n  } = useUIStore();\n  \n  const { projects, setProjects } = useAppStore();\n\n  // Find a phase by ID across all projects\n  const findPhase = useCallback((phaseId: number): { project: typeof projects[0], phase: Phase } | null => {\n    for (const project of projects) {\n      const phase = (project.phases ?? []).find(p => p.id === phaseId);\n      if (phase) return { project, phase };\n    }\n    return null;\n  }, [projects]);\n\n  // Find a subphase by ID (recursive search)\n  const findSubphase = useCallback((subphaseId: number): { project: typeof projects[0], subphase: Subphase } | null => {\n    const searchSubphases = (subphases: Subphase[]): Subphase | null => {\n      for (const sp of subphases) {\n        if (sp.id === subphaseId) return sp;\n        if (sp.children?.length) {\n          const found = searchSubphases(sp.children);\n          if (found) return found;\n        }\n      }\n      return null;\n    };\n\n    for (const project of projects) {\n      for (const phase of project.phases ?? []) {\n        const subphase = searchSubphases(phase.children ?? []);\n        if (subphase) return { project, subphase };\n      }\n    }\n    return null;\n  }, [projects]);\n\n  // Check for circular dependency\n  const hasCircularDependency = useCallback((\n    projectId: number,\n    startItemId: number, \n    checkItemId: number,\n    itemType: ItemType\n  ): boolean => {\n    const visited = new Set<number>();\n    const toCheck = [startItemId];\n    \n    const project = projects.find(p => p.id === projectId);\n    if (!project) return false;\n\n    while (toCheck.length > 0) {\n      const currentId = toCheck.pop()!;\n      if (currentId === checkItemId) return true;\n      if (visited.has(currentId)) continue;\n      visited.add(currentId);\n      \n      // Find the item and its dependencies\n      let deps: { id: number; type: DependencyType }[] = [];\n      \n      if (itemType === 'phase') {\n        const phase = (project.phases ?? []).find(p => p.id === currentId);\n        if (phase?.dependencies) {\n          deps = phase.dependencies;\n        }\n      } else {\n        // Search subphases\n        const searchDeps = (subphases: Subphase[]): { id: number; type: DependencyType }[] => {\n          for (const sp of subphases) {\n            if (sp.id === currentId && sp.dependencies) {\n              return sp.dependencies;\n            }\n            if (sp.children?.length) {\n              const found = searchDeps(sp.children);\n              if (found.length) return found;\n            }\n          }\n          return [];\n        };\n        \n        for (const phase of project.phases ?? []) {\n          deps = searchDeps(phase.children ?? []);\n          if (deps.length) break;\n        }\n      }\n      \n      deps.forEach(d => toCheck.push(d.id));\n    }\n    \n    return false;\n  }, [projects]);\n\n  // Handle link zone click\n  const handleLinkZoneClick = useCallback((\n    e: React.MouseEvent,\n    projectId: number,\n    itemId: number,\n    itemType: ItemType,\n    zone: LinkZone\n  ) => {\n    e.stopPropagation();\n    e.preventDefault();\n\n    // If already linking, try to complete the dependency\n    if (isLinkingDependency && linkingFrom) {\n      // Must be same project\n      if (linkingFrom.projectId !== projectId) {\n        alert('Dependencies can only be created between items in the same project');\n        cancelLinking();\n        return;\n      }\n\n      // Can't link to self\n      if (linkingFrom.itemId === itemId && linkingFrom.itemType === itemType) {\n        cancelLinking();\n        return;\n      }\n\n      // Check for circular dependency\n      if (hasCircularDependency(projectId, itemId, linkingFrom.itemId, itemType)) {\n        alert('Cannot create circular dependency');\n        cancelLinking();\n        return;\n      }\n\n      // Determine dependency type\n      const depType = determineDependencyType(linkingFrom.zone as LinkZone, zone);\n\n      // Create the dependency\n      createDependency(\n        projectId,\n        linkingFrom.itemId,\n        linkingFrom.itemType as ItemType,\n        itemId,\n        itemType,\n        depType\n      );\n\n      completeLinking();\n      return;\n    }\n\n    // Start new linking\n    startLinking(projectId, itemId, itemType, zone);\n  }, [isLinkingDependency, linkingFrom, startLinking, completeLinking, cancelLinking, hasCircularDependency]);\n\n  // Create dependency and save to server\n  const createDependency = useCallback(async (\n    projectId: number,\n    fromItemId: number,\n    fromItemType: ItemType,\n    toItemId: number,\n    toItemType: ItemType,\n    depType: DependencyType\n  ) => {\n    try {\n      // Find source and target items\n      let fromItem: Phase | Subphase | null = null;\n      let toItem: Phase | Subphase | null = null;\n\n      if (fromItemType === 'phase') {\n        const result = findPhase(fromItemId);\n        if (result) fromItem = result.phase;\n      } else {\n        const result = findSubphase(fromItemId);\n        if (result) fromItem = result.subphase;\n      }\n\n      if (toItemType === 'phase') {\n        const result = findPhase(toItemId);\n        if (result) toItem = result.phase;\n      } else {\n        const result = findSubphase(toItemId);\n        if (result) toItem = result.subphase;\n      }\n\n      if (!fromItem || !toItem) {\n        console.error('Could not find source or target item');\n        return;\n      }\n\n      // Get current dependencies\n      const currentDeps = toItem.dependencies ?? [];\n      \n      // Check if dependency already exists\n      if (currentDeps.some(d => d.id === fromItemId && d.type === depType)) {\n        console.log('Dependency already exists');\n        return;\n      }\n\n      // Create new dependencies array\n      const newDeps = [...currentDeps, { id: fromItemId, type: depType }];\n\n      // Calculate duration in days (use exact day difference to preserve duration)\n      const toStartDate = new Date(toItem.start_date);\n      const toEndDate = new Date(toItem.end_date);\n      toStartDate.setHours(0, 0, 0, 0);\n      toEndDate.setHours(0, 0, 0, 0);\n      const durationDays = Math.round((toEndDate.getTime() - toStartDate.getTime()) / 86400000);\n\n      // Calculate new dates for FS and SS dependencies (auto-align)\n      let newStartDate = toItem.start_date;\n      let newEndDate = toItem.end_date;\n      let dayOffset = 0;\n\n      if (depType === 'FS') {\n        // Finish-to-Start: align target start with source end + 1 day\n        const fromEnd = new Date(fromItem.end_date);\n        fromEnd.setHours(0, 0, 0, 0);\n        const newStart = new Date(fromEnd);\n        newStart.setDate(newStart.getDate() + 1);\n        \n        const newEnd = new Date(newStart);\n        newEnd.setDate(newEnd.getDate() + durationDays);\n        \n        newStartDate = formatDateLocal(newStart);\n        newEndDate = formatDateLocal(newEnd);\n        dayOffset = Math.round((newStart.getTime() - toStartDate.getTime()) / 86400000);\n      } else if (depType === 'SS') {\n        // Start-to-Start: align target start with source start\n        const fromStart = new Date(fromItem.start_date);\n        fromStart.setHours(0, 0, 0, 0);\n        const newStart = new Date(fromStart);\n        \n        const newEnd = new Date(newStart);\n        newEnd.setDate(newEnd.getDate() + durationDays);\n        \n        newStartDate = formatDateLocal(newStart);\n        newEndDate = formatDateLocal(newEnd);\n        dayOffset = Math.round((newStart.getTime() - toStartDate.getTime()) / 86400000);\n      }\n      // FF and SF don't auto-move\n\n      // Collect child updates for cascading\n      const childUpdates: { type: 'subphase'; id: number; start_date: string; end_date: string }[] = [];\n      \n      // Helper to move children by offset\n      const moveChildrenByOffset = (children: Subphase[], offset: number) => {\n        for (const child of children) {\n          const childStart = new Date(child.start_date);\n          const childEnd = new Date(child.end_date);\n          childStart.setDate(childStart.getDate() + offset);\n          childEnd.setDate(childEnd.getDate() + offset);\n          \n          const newChildStart = formatDateLocal(childStart);\n          const newChildEnd = formatDateLocal(childEnd);\n          \n          child.start_date = newChildStart;\n          child.end_date = newChildEnd;\n          \n          childUpdates.push({\n            type: 'subphase',\n            id: child.id,\n            start_date: newChildStart,\n            end_date: newChildEnd,\n          });\n          \n          // Recursively move nested children\n          if (child.children?.length) {\n            moveChildrenByOffset(child.children, offset);\n          }\n        }\n      };\n\n      // Collect parent updates for cascading\n      const parentUpdates: { type: 'phase' | 'subphase' | 'project'; id: number; start_date: string; end_date: string }[] = [];\n\n      // Build updated projects with cascading\n      const updatedProjects = projects.map(project => {\n        if (project.id !== projectId) return project;\n\n        // Clone the project for mutation\n        const projectCopy = cloneProject(project);\n\n        if (toItemType === 'phase') {\n          // Update the phase\n          const phase = (projectCopy.phases ?? []).find(p => p.id === toItemId);\n          if (phase) {\n            phase.dependencies = newDeps;\n            phase.start_date = newStartDate;\n            phase.end_date = newEndDate;\n            \n            // Move children if phase moved\n            if (dayOffset !== 0 && phase.children?.length) {\n              moveChildrenByOffset(phase.children, dayOffset);\n            }\n          }\n          \n          // Cascade phase dates from children (in case it contracted)\n          // Then adjust project dates\n          autoAdjustProjectDates(projectCopy, parentUpdates);\n          \n        } else {\n          // Update subphase recursively\n          const updateSubphaseInTree = (subphases: Subphase[]): boolean => {\n            for (const sp of subphases) {\n              if (sp.id === toItemId) {\n                sp.dependencies = newDeps;\n                sp.start_date = newStartDate;\n                sp.end_date = newEndDate;\n                \n                // Move children if subphase moved\n                if (dayOffset !== 0 && sp.children?.length) {\n                  moveChildrenByOffset(sp.children, dayOffset);\n                }\n                return true;\n              }\n              if (sp.children?.length && updateSubphaseInTree(sp.children)) {\n                return true;\n              }\n            }\n            return false;\n          };\n\n          for (const phase of projectCopy.phases ?? []) {\n            if (phase.children?.length && updateSubphaseInTree(phase.children)) {\n              break;\n            }\n          }\n          \n          // Cascade parent dates upward (subphase  parent subphase  phase  project)\n          if (dayOffset !== 0) {\n            cascadeParentDatesUp(projectCopy, toItemId, parentUpdates);\n          }\n        }\n\n        return projectCopy;\n      });\n\n      setProjects(updatedProjects);\n\n      // Save to server\n      if (toItemType === 'phase') {\n        await updatePhase(toItemId, {\n          start_date: newStartDate,\n          end_date: newEndDate,\n          dependencies: newDeps,\n        });\n      } else {\n        await updateSubphase(toItemId, {\n          start_date: newStartDate,\n          end_date: newEndDate,\n          dependencies: newDeps,\n        });\n      }\n      \n      // Save child updates to server\n      if (childUpdates.length > 0) {\n        console.log(`Saving ${childUpdates.length} child updates from dependency creation`);\n        await savePendingUpdates(childUpdates);\n      }\n      \n      // Save parent updates to server\n      if (parentUpdates.length > 0) {\n        console.log(`Saving ${parentUpdates.length} parent updates from dependency creation`);\n        await savePendingUpdates(parentUpdates);\n      }\n\n    } catch (err) {\n      console.error('Failed to create dependency:', err);\n      // Reload on error\n      const reloadedProjects = await loadAllProjects();\n      setProjects(reloadedProjects);\n    }\n  }, [projects, setProjects, findPhase, findSubphase]);\n\n  // Cancel linking (e.g., on Escape or click outside)\n  const handleCancelLinking = useCallback(() => {\n    if (isLinkingDependency) {\n      cancelLinking();\n    }\n  }, [isLinkingDependency, cancelLinking]);\n\n  return {\n    isLinkingDependency,\n    linkingFrom,\n    handleLinkZoneClick,\n    handleCancelLinking,\n  };\n}\n","/**\n * usePhantomSibling Hook\n * \n * Manages phantom sibling mode for quick sequential phase/subphase creation.\n * Shift+click on a phase/subphase dependency zone to create a new sibling\n * that follows the cursor until clicked to place.\n */\n\nimport { useCallback, useEffect, useRef } from 'react';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { getPhaseColor, getDepthColor } from '@/utils/themeColors';\nimport type { Phase, Subphase, Project } from '@/types';\nimport type { TimelineCell } from '@/components/gantt/utils';\nimport { format, addDays, differenceInDays } from 'date-fns';\n\n// Helper to find subphase depth in hierarchy\nfunction getSubphaseDepth(project: Project, subphaseId: number): number {\n  for (const phase of project.phases || []) {\n    const result = findSubphaseDepthRecursive(phase.children || [], subphaseId, 1);\n    if (result !== null) return result;\n  }\n  return 1;\n}\n\nfunction findSubphaseDepthRecursive(\n  children: Subphase[],\n  targetId: number,\n  currentDepth: number\n): number | null {\n  for (const child of children) {\n    if (child.id === targetId) return currentDepth;\n    if (child.children && child.children.length > 0) {\n      const result = findSubphaseDepthRecursive(child.children, targetId, currentDepth + 1);\n      if (result !== null) return result;\n    }\n  }\n  return null;\n}\n\n// Helper to find a subphase by ID anywhere in the hierarchy\nfunction findSubphaseById(phases: Phase[], subphaseId: number): Subphase | null {\n  for (const phase of phases) {\n    const found = findSubphaseInChildren(phase.children || [], subphaseId);\n    if (found) return found;\n  }\n  return null;\n}\n\nfunction findSubphaseInChildren(children: Subphase[], targetId: number): Subphase | null {\n  for (const child of children) {\n    if (child.id === targetId) return child;\n    if (child.children && child.children.length > 0) {\n      const found = findSubphaseInChildren(child.children, targetId);\n      if (found) return found;\n    }\n  }\n  return null;\n}\n\n// Get index of subphase within its parent's children array\nfunction getSubphaseIndexInParent(project: Project, subphaseId: number): number {\n  const subphase = findSubphaseById(project.phases || [], subphaseId);\n  if (!subphase) return 0;\n\n  // Determine parent from subphase fields\n  const isParentSubphase = !!subphase.parent_subphase_id;\n  const parentId = isParentSubphase ? subphase.parent_subphase_id : subphase.parent_phase_id;\n\n  let siblings: Subphase[] = [];\n  if (!isParentSubphase) {\n    const phase = (project.phases || []).find((p) => p.id === parentId);\n    siblings = phase?.children || [];\n  } else {\n    const parentSubphase = findSubphaseById(project.phases || [], parentId!);\n    siblings = parentSubphase?.children || [];\n  }\n\n  return siblings.findIndex((s) => s.id === subphaseId);\n}\n\n// Format date as YYYY-MM-DD\nfunction formatDate(date: Date): string {\n  return format(date, 'yyyy-MM-dd');\n}\n\n// Parse date string to Date (handling ISO timestamps)\nfunction parseDate(dateStr: string): Date {\n  const cleanDate = dateStr.split('T')[0];\n  return new Date(cleanDate + 'T12:00:00'); // Noon to avoid timezone issues\n}\n\nexport interface PhantomSiblingConfig {\n  projectId: number;\n  sourceId: number;\n  type: 'phase' | 'subphase';\n  zone: 'start' | 'end';\n}\n\nexport function usePhantomSibling() {\n  const projects = useAppStore((s) => s.projects);\n  const phantomSiblingMode = useUIStore((s) => s.phantomSiblingMode);\n  const startPhantomSibling = useUIStore((s) => s.startPhantomSibling);\n  const updatePhantomPosition = useUIStore((s) => s.updatePhantomPosition);\n  const endPhantomSibling = useUIStore((s) => s.endPhantomSibling);\n\n  // Ref to track if we're in phantom mode (for event handlers)\n  const isPhantomModeRef = useRef(false);\n  isPhantomModeRef.current = !!phantomSiblingMode;\n\n  /**\n   * Start phantom sibling mode\n   */\n  const startPhantom = useCallback(\n    (config: PhantomSiblingConfig) => {\n      const { projectId, sourceId, type, zone } = config;\n      const project = projects.find((p) => p.id === projectId);\n      if (!project) return;\n\n      let sourceItem: Phase | Subphase | undefined;\n      let phantomColor: string;\n      let sourceIndex: number;\n      let parentId: number | null = null;\n      let parentType: 'phase' | 'subphase' | undefined;\n\n      // Determine dependency type based on click zone\n      const dependencyType = zone === 'start' ? 'SS' : 'FS';\n\n      if (type === 'phase') {\n        sourceItem = (project.phases || []).find((p) => p.id === sourceId);\n        if (!sourceItem) return;\n\n        sourceIndex = (project.phases || []).findIndex((p) => p.id === sourceId);\n        phantomColor = getPhaseColor();\n        \n        // Collapse this phase's children if expanded\n        const { expandedPhases } = useAppStore.getState();\n        if (expandedPhases.has(sourceId)) {\n          useAppStore.getState().togglePhaseExpanded(sourceId);\n        }\n      } else {\n        sourceItem = findSubphaseById(project.phases || [], sourceId) || undefined;\n        if (!sourceItem) return;\n\n        const subphase = sourceItem as Subphase;\n        sourceIndex = getSubphaseIndexInParent(project, sourceId);\n        // Use the source subphase's actual color (sibling will have same color)\n        phantomColor = subphase.color || getDepthColor(getSubphaseDepth(project, sourceId));\n        // Determine parent info from subphase\n        if (subphase.parent_subphase_id) {\n          parentId = subphase.parent_subphase_id;\n          parentType = 'subphase';\n        } else {\n          parentId = subphase.parent_phase_id;\n          parentType = 'phase';\n        }\n        \n        // Collapse this subphase's children if expanded\n        const { expandedSubphases } = useAppStore.getState();\n        if (expandedSubphases.has(sourceId)) {\n          useAppStore.getState().toggleSubphaseExpanded(sourceId);\n        }\n      }\n\n      // Calculate duration from source item\n      const sourceStart = parseDate(sourceItem.start_date);\n      const sourceEnd = parseDate(sourceItem.end_date);\n      let siblingDurationDays = differenceInDays(sourceEnd, sourceStart) + 1;\n      \n      // If source is a milestone (duration is 0 or 1 day), default to 5 days\n      const isMilestone = 'is_milestone' in sourceItem && sourceItem.is_milestone;\n      if (isMilestone || siblingDurationDays < 2) {\n        siblingDurationDays = 5;\n      }\n\n      // Calculate initial phantom position based on dependency type\n      let phantomStart: Date;\n      if (dependencyType === 'FS') {\n        // Finish-to-Start: phantom starts day after source ends\n        phantomStart = addDays(sourceEnd, 1);\n      } else {\n        // Start-to-Start: phantom starts same day as source\n        phantomStart = new Date(sourceStart);\n      }\n      const phantomEnd = addDays(phantomStart, siblingDurationDays - 1);\n\n      // Start phantom mode\n      startPhantomSibling({\n        projectId,\n        sourceId,\n        type,\n        dependencyType,\n        phantomStart: formatDate(phantomStart),\n        phantomEnd: formatDate(phantomEnd),\n        phantomColor,\n        siblingDurationDays,\n        sourceIndex,\n        parentId,\n        parentType,\n      });\n\n      // Add body class for styling\n      document.body.classList.add('phantom-sibling-mode');\n    },\n    [projects, startPhantomSibling]\n  );\n\n  /**\n   * Update phantom position based on mouse X position\n   */\n  const updatePhantom = useCallback(\n    (mouseX: number, timelineRect: DOMRect, scrollLeft: number, cells: TimelineCell[], cellWidth: number) => {\n      if (!phantomSiblingMode) return;\n\n      const { siblingDurationDays } = phantomSiblingMode;\n\n      // Calculate position relative to timeline content\n      const relativeX = mouseX - timelineRect.left + scrollLeft;\n\n      if (cells.length === 0) return;\n\n      // Get timeline date range\n      const firstCellDate = new Date(cells[0].date);\n      firstCellDate.setHours(0, 0, 0, 0);\n\n      const lastCell = cells[cells.length - 1];\n      const lastCellDate = new Date(lastCell.date);\n      lastCellDate.setHours(23, 59, 59, 999);\n\n      const totalWidth = cells.length * cellWidth;\n      const totalMs = lastCellDate.getTime() - firstCellDate.getTime();\n      const msPerPixel = totalMs / totalWidth;\n\n      // Calculate duration in pixels\n      const durationMs = (siblingDurationDays - 1) * 24 * 60 * 60 * 1000;\n      const halfDurationPx = durationMs / msPerPixel / 2;\n\n      // Calculate bar left position (centered on cursor)\n      const barLeftPx = relativeX - halfDurationPx;\n      const clampedBarLeft = Math.max(0, Math.min(barLeftPx, totalWidth - (durationMs / msPerPixel)));\n\n      // Calculate start date from pixel position\n      const startMs = firstCellDate.getTime() + clampedBarLeft * msPerPixel;\n      const startDate = new Date(startMs);\n      startDate.setHours(0, 0, 0, 0);\n\n      const endDate = addDays(startDate, siblingDurationDays - 1);\n\n      // Update state\n      updatePhantomPosition(formatDate(startDate), formatDate(endDate));\n    },\n    [phantomSiblingMode, updatePhantomPosition]\n  );\n\n  /**\n   * Cancel phantom sibling mode\n   */\n  const cancelPhantom = useCallback(() => {\n    document.body.classList.remove('phantom-sibling-mode');\n    endPhantomSibling();\n  }, [endPhantomSibling]);\n\n  /**\n   * Complete phantom sibling - create the actual phase/subphase\n   */\n  const completePhantom = useCallback(() => {\n    if (!phantomSiblingMode) return;\n\n    const {\n      projectId,\n      sourceId,\n      type,\n      phantomStart,\n      phantomEnd,\n      dependencyType,\n      parentId,\n      parentType,\n    } = phantomSiblingMode;\n\n    // Store preset data for modal\n    const phantomPreset = {\n      startDate: phantomStart,\n      endDate: phantomEnd,\n      predecessorId: sourceId,\n      dependencyType,\n      parentId,\n      parentType,\n    };\n\n    // End phantom mode\n    cancelPhantom();\n\n    // Open the appropriate modal with phantom preset context\n    // IMPORTANT: Set everything in one call to avoid race conditions\n    setTimeout(() => {\n      if (type === 'phase') {\n        // Open phase modal with phantomPreset included in modalContext\n        useUIStore.setState({\n          activeModal: 'phase',\n          editingPhase: null,\n          modalContext: {\n            projectId,\n            phantomPreset,\n          },\n        });\n      } else {\n        // Open subphase modal - need to determine which phase to attach to\n        // For nested subphases, we need both the parent subphase ID AND the root phase ID\n        const project = projects.find(p => p.id === projectId);\n        \n        let rootPhaseId: number | undefined;\n        let parentSubphaseId: number | undefined;\n        \n        if (parentType === 'phase') {\n          // Direct child of a phase\n          rootPhaseId = parentId ?? undefined;\n          parentSubphaseId = undefined;\n        } else if (parentType === 'subphase' && parentId && project) {\n          // Nested subphase - need to find the root phase\n          parentSubphaseId = parentId;\n          \n          // Find which phase contains this subphase chain\n          for (const phase of project.phases || []) {\n            const found = findSubphaseInChildren(phase.children || [], parentId);\n            if (found) {\n              rootPhaseId = phase.id;\n              break;\n            }\n          }\n        }\n        \n        useUIStore.setState({\n          activeModal: 'subphase',\n          editingSubphase: null,\n          modalContext: {\n            phaseId: rootPhaseId,\n            projectId,\n            subphaseId: parentSubphaseId,\n            phantomPreset,\n          },\n        });\n      }\n    }, 50);\n  }, [phantomSiblingMode, cancelPhantom, projects]);\n\n  // Handle Escape key to cancel\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && isPhantomModeRef.current) {\n        cancelPhantom();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [cancelPhantom]);\n\n  /**\n   * Calculate lag days between source and phantom\n   */\n  const calculateLag = useCallback(() => {\n    if (!phantomSiblingMode) return { lagDays: 0, dependencyType: 'FS' as const };\n\n    const { phantomStart, dependencyType, sourceId, type } = phantomSiblingMode;\n    const project = projects.find((p) => p.id === phantomSiblingMode.projectId);\n    if (!project) return { lagDays: 0, dependencyType };\n\n    let sourceItem: Phase | Subphase | undefined;\n    if (type === 'phase') {\n      sourceItem = (project.phases || []).find((p) => p.id === sourceId);\n    } else {\n      sourceItem = findSubphaseById(project.phases || [], sourceId) || undefined;\n    }\n\n    if (!sourceItem) return { lagDays: 0, dependencyType };\n\n    const newStart = parseDate(phantomStart);\n    const sourceStart = parseDate(sourceItem.start_date);\n    const sourceEnd = parseDate(sourceItem.end_date);\n\n    let lagDays: number;\n    if (dependencyType === 'SS') {\n      // Start-to-Start: compare start dates\n      lagDays = differenceInDays(newStart, sourceStart);\n    } else {\n      // Finish-to-Start: successor start vs predecessor end + 1 day\n      const expectedStart = addDays(sourceEnd, 1);\n      lagDays = differenceInDays(newStart, expectedStart);\n    }\n\n    return { lagDays, dependencyType };\n  }, [phantomSiblingMode, projects]);\n\n  return {\n    phantomSiblingMode,\n    isPhantomMode: !!phantomSiblingMode,\n    startPhantom,\n    updatePhantom,\n    completePhantom,\n    cancelPhantom,\n    calculateLag,\n  };\n}\n\nexport default usePhantomSibling;\n","/**\n * useCtrlScrollZoom Hook\n * \n * Enables Ctrl+Scroll to zoom in/out on the timeline by adjusting cellWidth.\n * Maintains scroll position around the cursor so the same date stays under the mouse.\n */\n\nimport { useEffect, useRef, useCallback } from 'react';\nimport { useAppStore } from '@/stores/appStore';\n\n// Zoom limits\nconst MIN_CELL_WIDTH = 12;\nconst MAX_CELL_WIDTH = 120;\nconst ZOOM_STEP = 4;\n\ninterface UseCtrlScrollZoomOptions {\n  /** Ref to the scrollable timeline container */\n  containerRef: React.RefObject<HTMLElement>;\n  /** Current cell width */\n  cellWidth: number;\n  /** Whether zoom is enabled (default: true) */\n  enabled?: boolean;\n}\n\nexport function useCtrlScrollZoom({ containerRef, cellWidth, enabled = true }: UseCtrlScrollZoomOptions) {\n  const setCellWidth = useAppStore((s) => s.setCellWidth);\n  const isZoomingRef = useRef(false);\n\n  const handleWheel = useCallback((e: WheelEvent) => {\n    // Only zoom if Ctrl is held and zoom is enabled\n    if (!e.ctrlKey || !enabled) return;\n    \n    // Prevent default browser zoom\n    e.preventDefault();\n    \n    const container = containerRef.current;\n    if (!container) return;\n    \n    // Avoid rapid-fire zoom events\n    if (isZoomingRef.current) return;\n    isZoomingRef.current = true;\n    \n    // Determine zoom direction (scroll up = zoom in, scroll down = zoom out)\n    const zoomIn = e.deltaY < 0;\n    const newCellWidth = zoomIn\n      ? Math.min(cellWidth + ZOOM_STEP, MAX_CELL_WIDTH)\n      : Math.max(cellWidth - ZOOM_STEP, MIN_CELL_WIDTH);\n    \n    // If at limits, don't do anything\n    if (newCellWidth === cellWidth) {\n      isZoomingRef.current = false;\n      return;\n    }\n    \n    // Calculate the date position under the cursor to maintain scroll position\n    const containerRect = container.getBoundingClientRect();\n    const mouseXInContainer = e.clientX - containerRect.left + container.scrollLeft;\n    \n    // Current cell index under cursor\n    const currentCellIndex = mouseXInContainer / cellWidth;\n    \n    // Apply new cell width\n    setCellWidth(newCellWidth);\n    \n    // Calculate new scroll position to keep the same date under cursor\n    // Use requestAnimationFrame to apply after DOM updates\n    requestAnimationFrame(() => {\n      const newScrollLeft = currentCellIndex * newCellWidth - (e.clientX - containerRect.left);\n      container.scrollLeft = Math.max(0, newScrollLeft);\n      isZoomingRef.current = false;\n    });\n  }, [cellWidth, containerRef, setCellWidth, enabled]);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container || !enabled) return;\n\n    // Add listener with passive: false to allow preventDefault\n    container.addEventListener('wheel', handleWheel, { passive: false });\n    \n    return () => {\n      container.removeEventListener('wheel', handleWheel);\n    };\n  }, [handleWheel, containerRef, enabled]);\n\n  return {\n    minCellWidth: MIN_CELL_WIDTH,\n    maxCellWidth: MAX_CELL_WIDTH,\n    zoomStep: ZOOM_STEP,\n  };\n}\n","/**\n * useKeyboardShortcuts Hook\n * \n * Global keyboard shortcuts for common operations.\n * \n * Shortcuts:\n * - Escape: Cancel current operation (phantom mode, dependency linking)\n * - Ctrl+Z: Undo (future)\n * - Ctrl+Y / Ctrl+Shift+Z: Redo (future)\n * - Home: Jump to today\n * - +/-: Zoom in/out\n */\n\nimport { useEffect, useCallback } from 'react';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\n\n// Zoom limits (same as useCtrlScrollZoom)\nconst MIN_CELL_WIDTH = 12;\nconst MAX_CELL_WIDTH = 120;\nconst ZOOM_STEP = 4;\n\nexport function useKeyboardShortcuts() {\n  const triggerScrollToToday = useUIStore((s) => s.triggerScrollToToday);\n  const triggerZoom = useUIStore((s) => s.triggerZoom);\n  const endPhantomSibling = useUIStore((s) => s.endPhantomSibling);\n  const phantomSiblingMode = useUIStore((s) => s.phantomSiblingMode);\n  const cancelLinking = useUIStore((s) => s.cancelLinking);\n  const isLinkingDependency = useUIStore((s) => s.isLinkingDependency);\n  const closeModal = useUIStore((s) => s.closeModal);\n  const activeModal = useUIStore((s) => s.activeModal);\n  \n  const cellWidth = useAppStore((s) => s.cellWidth);\n  const setCellWidth = useAppStore((s) => s.setCellWidth);\n\n  const handleKeyDown = useCallback((e: KeyboardEvent) => {\n    // Don't handle shortcuts when focused on input elements\n    const target = e.target as HTMLElement;\n    if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n      return;\n    }\n\n    // Escape - Cancel current operation\n    if (e.key === 'Escape') {\n      // Priority: Modal > Dependency Linking > Phantom Mode\n      if (activeModal) {\n        closeModal();\n        e.preventDefault();\n        return;\n      }\n      if (isLinkingDependency) {\n        cancelLinking();\n        e.preventDefault();\n        return;\n      }\n      if (phantomSiblingMode) {\n        document.body.classList.remove('phantom-sibling-mode');\n        endPhantomSibling();\n        e.preventDefault();\n        return;\n      }\n    }\n\n    // Home - Jump to today\n    if (e.key === 'Home' && !e.ctrlKey && !e.shiftKey && !e.altKey) {\n      triggerScrollToToday();\n      e.preventDefault();\n      return;\n    }\n\n    // + or = - Zoom in (centered)\n    if ((e.key === '+' || e.key === '=') && !e.ctrlKey) {\n      const newWidth = Math.min(cellWidth + ZOOM_STEP, MAX_CELL_WIDTH);\n      if (newWidth !== cellWidth) {\n        triggerZoom(1, newWidth);\n        setCellWidth(newWidth);\n      }\n      e.preventDefault();\n      return;\n    }\n\n    // - Zoom out (centered)\n    if (e.key === '-' && !e.ctrlKey) {\n      const newWidth = Math.max(cellWidth - ZOOM_STEP, MIN_CELL_WIDTH);\n      if (newWidth !== cellWidth) {\n        triggerZoom(-1, newWidth);\n        setCellWidth(newWidth);\n      }\n      e.preventDefault();\n      return;\n    }\n\n    // Future: Ctrl+Z for Undo\n    // if (e.key === 'z' && e.ctrlKey && !e.shiftKey) {\n    //   // TODO: Implement undo\n    //   e.preventDefault();\n    //   return;\n    // }\n\n    // Future: Ctrl+Y or Ctrl+Shift+Z for Redo\n    // if ((e.key === 'y' && e.ctrlKey) || (e.key === 'z' && e.ctrlKey && e.shiftKey)) {\n    //   // TODO: Implement redo\n    //   e.preventDefault();\n    //   return;\n    // }\n  }, [\n    activeModal, \n    closeModal, \n    isLinkingDependency, \n    cancelLinking, \n    phantomSiblingMode, \n    endPhantomSibling,\n    triggerScrollToToday,\n    triggerZoom,\n    cellWidth,\n    setCellWidth,\n  ]);\n\n  useEffect(() => {\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [handleKeyDown]);\n}\n","/**\n * useResourceDragDrop\n * \n * Hook for handling drag-drop of staff/equipment from ResourcePanel\n * onto projects/phases/subphases in the Gantt chart.\n * Creates assignments with a default 5-day duration.\n * Staff assignments use the staff member's max_capacity as default allocation.\n */\n\nimport { useCallback } from 'react';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { createStaffAssignment, createEquipmentAssignment, loadAllProjects } from '@/api/endpoints/projects';\nimport { format, addDays } from 'date-fns';\n\nconst DEFAULT_DURATION_DAYS = 5;\n\nexport function useResourceDragDrop() {\n  const resourceDrag = useUIStore((s) => s.resourceDrag);\n  const startResourceDrag = useUIStore((s) => s.startResourceDrag);\n  const updateResourceDragTarget = useUIStore((s) => s.updateResourceDragTarget);\n  const endResourceDrag = useUIStore((s) => s.endResourceDrag);\n  const setProjects = useAppStore((s) => s.setProjects);\n  const currentUser = useAppStore((s) => s.currentUser);\n  const staff = useAppStore((s) => s.staff);\n\n  /**\n   * Get the default allocation for a staff member (their max_capacity or 100)\n   */\n  const getStaffDefaultAllocation = useCallback((staffId: number): number => {\n    const staffMember = staff.find(s => s.id === staffId);\n    return staffMember?.max_capacity ?? 100;\n  }, [staff]);\n\n  /**\n   * Start dragging a resource\n   */\n  const handleDragStart = useCallback((\n    e: React.DragEvent,\n    type: 'staff' | 'equipment',\n    resourceId: number,\n    resourceName: string\n  ) => {\n    // Only allow superusers/admins to drag\n    if (!currentUser || (currentUser.role !== 'superuser' && currentUser.role !== 'admin')) {\n      e.preventDefault();\n      return;\n    }\n\n    // Set drag data\n    e.dataTransfer.setData('application/json', JSON.stringify({\n      type,\n      resourceId,\n      resourceName,\n    }));\n    e.dataTransfer.effectAllowed = 'copy';\n\n    // Start drag in store\n    startResourceDrag(type, resourceId, resourceName);\n\n    // Add body class for styling\n    document.body.classList.add('resource-dragging');\n  }, [currentUser, startResourceDrag]);\n\n  /**\n   * Handle drag over a drop target (project/phase/subphase row)\n   */\n  const handleDragOver = useCallback((\n    e: React.DragEvent,\n    projectId: number,\n    phaseId: number | null,\n    subphaseId: number | null,\n    dateFromPosition?: string // Optional: date calculated from mouse position\n  ) => {\n    if (!resourceDrag.active) return;\n\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'copy';\n\n    // Calculate preview dates\n    let previewStart = dateFromPosition || format(new Date(), 'yyyy-MM-dd');\n    let previewEnd = format(addDays(new Date(previewStart), DEFAULT_DURATION_DAYS - 1), 'yyyy-MM-dd');\n\n    // Update target in store\n    updateResourceDragTarget(projectId, phaseId, subphaseId, previewStart, previewEnd);\n  }, [resourceDrag.active, updateResourceDragTarget]);\n\n  /**\n   * Handle drag leave\n   */\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    // Only clear if leaving the actual target (not entering a child)\n    const relatedTarget = e.relatedTarget as HTMLElement;\n    if (relatedTarget && (e.currentTarget as HTMLElement).contains(relatedTarget)) {\n      return;\n    }\n    \n    // Clear target but keep drag active\n    updateResourceDragTarget(null, null, null, null, null);\n  }, [updateResourceDragTarget]);\n\n  /**\n   * Handle drop - create the assignment\n   */\n  const handleDrop = useCallback(async (\n    e: React.DragEvent,\n    projectId: number,\n    phaseId: number | null,\n    subphaseId: number | null,\n    startDate: string,\n    endDate: string\n  ) => {\n    e.preventDefault();\n\n    if (!resourceDrag.active || !resourceDrag.resourceId) {\n      endResourceDrag();\n      return;\n    }\n\n    const { type, resourceId } = resourceDrag;\n\n    try {\n      if (type === 'staff') {\n        // Use staff's max_capacity as default allocation\n        const defaultAllocation = getStaffDefaultAllocation(resourceId);\n        await createStaffAssignment({\n          staff_id: resourceId,\n          allocation: defaultAllocation,\n          start_date: startDate,\n          end_date: endDate,\n          project_id: subphaseId ? undefined : (phaseId ? undefined : projectId),\n          phase_id: subphaseId ? undefined : (phaseId || undefined),\n          subphase_id: subphaseId || undefined,\n        });\n      } else if (type === 'equipment') {\n        await createEquipmentAssignment({\n          equipment_id: resourceId,\n          start_date: startDate,\n          end_date: endDate,\n          project_id: subphaseId ? undefined : (phaseId ? undefined : projectId),\n          phase_id: subphaseId ? undefined : (phaseId || undefined),\n          subphase_id: subphaseId || undefined,\n        });\n      }\n\n      // Reload projects to show new assignment\n      const updatedProjects = await loadAllProjects();\n      setProjects(updatedProjects);\n    } catch (error) {\n      console.error('Failed to create assignment:', error);\n    } finally {\n      endResourceDrag();\n      document.body.classList.remove('resource-dragging');\n    }\n  }, [resourceDrag, endResourceDrag, setProjects, getStaffDefaultAllocation]);\n\n  /**\n   * Handle drag end (cleanup)\n   */\n  const handleDragEnd = useCallback(() => {\n    endResourceDrag();\n    document.body.classList.remove('resource-dragging');\n  }, [endResourceDrag]);\n\n  /**\n   * Calculate date from mouse position on timeline\n   */\n  const calculateDateFromPosition = useCallback((\n    clientX: number,\n    timelineRect: DOMRect,\n    scrollLeft: number,\n    cellWidth: number,\n    cells: Array<{ date: Date; dateStr: string }>\n  ): string | null => {\n    if (cells.length === 0) return null;\n\n    const relativeX = clientX - timelineRect.left + scrollLeft;\n    const cellIndex = Math.floor(relativeX / cellWidth);\n    const clampedIndex = Math.max(0, Math.min(cellIndex, cells.length - 1));\n    \n    return cells[clampedIndex]?.dateStr || null;\n  }, []);\n\n  return {\n    // State\n    resourceDrag,\n    isActive: resourceDrag.active,\n    \n    // Actions\n    handleDragStart,\n    handleDragOver,\n    handleDragLeave,\n    handleDrop,\n    handleDragEnd,\n    calculateDateFromPosition,\n    getStaffDefaultAllocation,\n    \n    // Constants\n    DEFAULT_DURATION_DAYS,\n  };\n}\n","import { useAppStore } from '@/stores/appStore';\nimport { getBankHolidays, buildHolidayDateSet, getCustomColumnsWithValues, getCompanyEvents, buildEventDateSet } from '@/api';\nimport styles from './SiteSelector.module.css';\n\nexport function SiteSelector() {\n  const sites = useAppStore((s) => s.sites);\n  const currentSite = useAppStore((s) => s.currentSite);\n  const setCurrentSite = useAppStore((s) => s.setCurrentSite);\n  const setBankHolidays = useAppStore((s) => s.setBankHolidays);\n  const setCompanyEvents = useAppStore((s) => s.setCompanyEvents);\n  const setCustomColumns = useAppStore((s) => s.setCustomColumns);\n  const setCustomColumnValues = useAppStore((s) => s.setCustomColumnValues);\n  const clearAllCustomColumnFilters = useAppStore((s) => s.clearAllCustomColumnFilters);\n  const currentUser = useAppStore((s) => s.currentUser);\n\n  // Filter sites based on user's assigned sites (if not admin)\n  const availableSites =\n    currentUser?.role === 'admin'\n      ? sites\n      : sites.filter((site) => currentUser?.site_ids?.includes(site.id));\n\n  const handleChange = async (e: React.ChangeEvent<HTMLSelectElement>) => {\n    const siteId = parseInt(e.target.value, 10);\n    const site = sites.find((s) => s.id === siteId);\n    if (site) {\n      setCurrentSite(site);\n      \n      // Clear any active filters when switching sites\n      clearAllCustomColumnFilters();\n      \n      // Reload bank holidays for the new site\n      try {\n        const holidays = await getBankHolidays(site.id);\n        const holidayDates = buildHolidayDateSet(holidays);\n        setBankHolidays(holidays, holidayDates);\n      } catch (err) {\n        console.error('[SiteSelector] Failed to load bank holidays:', err);\n      }\n      \n      // Reload company events for the new site\n      try {\n        const events = await getCompanyEvents(site.id);\n        const eventDates = buildEventDateSet(events);\n        setCompanyEvents(events, eventDates);\n      } catch (err) {\n        console.error('[SiteSelector] Failed to load company events:', err);\n      }\n      \n      // Reload custom columns for the new site\n      try {\n        const customColumnsData = await getCustomColumnsWithValues(site.id);\n        setCustomColumns(customColumnsData.columns);\n        setCustomColumnValues(customColumnsData.values);\n        console.log('[SiteSelector] Loaded custom columns for site:', site.name, customColumnsData.columns.length);\n      } catch (err) {\n        console.error('[SiteSelector] Failed to load custom columns:', err);\n      }\n    }\n  };\n\n  if (availableSites.length <= 1) {\n    // Don't show selector if user only has access to one site\n    return currentSite ? (\n      <div className={styles.container}>\n        <div className={styles.singleSite}>\n          <svg\n            width=\"16\"\n            height=\"16\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            strokeWidth=\"2\"\n          >\n            <path d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\" />\n            <circle cx=\"12\" cy=\"10\" r=\"3\" />\n          </svg>\n          <span>{currentSite.name}</span>\n        </div>\n      </div>\n    ) : null;\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.wrapper}>\n        <svg\n          className={styles.icon}\n          width=\"16\"\n          height=\"16\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n        >\n          <path d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\" />\n          <circle cx=\"12\" cy=\"10\" r=\"3\" />\n        </svg>\n        <select\n          className={styles.select}\n          value={currentSite?.id || ''}\n          onChange={handleChange}\n        >\n          {availableSites.map((site) => (\n            <option key={site.id} value={site.id}>\n              {site.name}\n            </option>\n          ))}\n        </select>\n        <svg\n          className={styles.chevron}\n          width=\"12\"\n          height=\"12\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n        >\n          <polyline points=\"6 9 12 15 18 9\" />\n        </svg>\n      </div>\n    </div>\n  );\n}\n","/**\n * DateNavigation\n * Controls for navigating the timeline (prev/next/today)\n */\n\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { addWeeks, addMonths, startOfWeek, startOfQuarter } from 'date-fns';\nimport styles from './DateNavigation.module.css';\n\nexport function DateNavigation() {\n  const viewMode = useAppStore((s) => s.viewMode);\n  const currentDate = useAppStore((s) => s.currentDate);\n  const setCurrentDate = useAppStore((s) => s.setCurrentDate);\n  const triggerScrollToToday = useUIStore((s) => s.triggerScrollToToday);\n\n  // Navigate to previous/next period\n  const navigate = (direction: -1 | 1) => {\n    let newDate: Date;\n    \n    switch (viewMode) {\n      case 'week':\n        newDate = addWeeks(currentDate, direction);\n        break;\n      case 'month':\n        newDate = addMonths(currentDate, direction);\n        break;\n      case 'quarter':\n        newDate = addMonths(currentDate, direction * 3);\n        break;\n      case 'year':\n        newDate = addMonths(currentDate, direction * 12);\n        break;\n      default:\n        newDate = addMonths(currentDate, direction);\n    }\n    \n    setCurrentDate(newDate);\n  };\n\n  // Go to today - also triggers timeline scroll\n  const goToToday = () => {\n    setCurrentDate(new Date());\n    // Trigger scroll to today marker in timeline\n    triggerScrollToToday();\n  };\n\n  // Format the current period label using browser locale\n  const getPeriodLabel = (): string => {\n    const monthYearFormatter = new Intl.DateTimeFormat(undefined, { month: 'long', year: 'numeric' });\n    const dateFormatter = new Intl.DateTimeFormat(undefined, { month: 'short', day: 'numeric', year: 'numeric' });\n    const yearFormatter = new Intl.DateTimeFormat(undefined, { year: 'numeric' });\n    \n    switch (viewMode) {\n      case 'week': {\n        const weekStart = startOfWeek(currentDate, { weekStartsOn: 1 });\n        return dateFormatter.format(weekStart);\n      }\n      case 'month':\n        return monthYearFormatter.format(currentDate);\n      case 'quarter': {\n        const qStart = startOfQuarter(currentDate);\n        const quarter = Math.floor(qStart.getMonth() / 3) + 1;\n        return `Q${quarter} ${yearFormatter.format(qStart)}`;\n      }\n      case 'year':\n        return yearFormatter.format(currentDate);\n      default:\n        return monthYearFormatter.format(currentDate);\n    }\n  };\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={styles.navigation}>\n        <button\n          className={styles.navButton}\n          onClick={() => navigate(-1)}\n          title=\"Previous period\"\n        >\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <polyline points=\"15 18 9 12 15 6\" />\n          </svg>\n        </button>\n        \n        <span className={styles.periodLabel}>{getPeriodLabel()}</span>\n        \n        <button\n          className={styles.navButton}\n          onClick={() => navigate(1)}\n          title=\"Next period\"\n        >\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <polyline points=\"9 18 15 12 9 6\" />\n          </svg>\n        </button>\n      </div>\n      \n      <button\n        className={styles.todayButton}\n        onClick={goToToday}\n        title=\"Go to today\"\n      >\n        Today\n      </button>\n    </div>\n  );\n}\n","import { useState, useRef, useEffect } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { logout } from '@/api/endpoints/auth';\nimport styles from './UserMenu.module.css';\n\nexport function UserMenu() {\n  const [isOpen, setIsOpen] = useState(false);\n  const menuRef = useRef<HTMLDivElement>(null);\n  const currentUser = useAppStore((s) => s.currentUser);\n  const setCurrentUser = useAppStore((s) => s.setCurrentUser);\n\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen]);\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      setCurrentUser(null);\n      // Reload to reset app state\n      window.location.reload();\n    } catch (error) {\n      console.error('Logout failed:', error);\n    }\n  };\n\n  if (!currentUser) return null;\n\n  const initials = `${currentUser.first_name?.[0] || ''}${currentUser.last_name?.[0] || ''}`.toUpperCase() || '?';\n\n  return (\n    <div ref={menuRef} className={styles.wrapper}>\n      <button\n        className={styles.trigger}\n        onClick={() => setIsOpen(!isOpen)}\n        aria-expanded={isOpen}\n        aria-haspopup=\"true\"\n      >\n        <span className={styles.avatar}>{initials}</span>\n        <svg\n          className={`${styles.chevron} ${isOpen ? styles.open : ''}`}\n          width=\"12\"\n          height=\"12\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n        >\n          <polyline points=\"6 9 12 15 18 9\" />\n        </svg>\n      </button>\n\n      {isOpen && (\n        <div className={styles.menu}>\n          <div className={styles.userInfo}>\n            <span className={styles.name}>{currentUser.name}</span>\n            <span className={styles.email}>{currentUser.email}</span>\n            <span className={styles.role}>{currentUser.role}</span>\n          </div>\n          <div className={styles.divider} />\n          <button className={styles.menuItem} onClick={handleLogout}>\n            <svg\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n            >\n              <path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\" />\n              <polyline points=\"16 17 21 12 16 7\" />\n              <line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\" />\n            </svg>\n            <span>Log out</span>\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { getTheme, toggleThemeMode, isDarkTheme, type Theme } from '@/utils/storage';\nimport styles from './ThemeToggle.module.css';\n\nexport function ThemeToggle() {\n  const [theme, setTheme] = useState<Theme>(() => getTheme());\n\n  useEffect(() => {\n    // Watch for external theme changes\n    const observer = new MutationObserver(() => {\n      const currentTheme = document.documentElement.dataset.theme as Theme;\n      if (currentTheme && currentTheme !== theme) {\n        setTheme(currentTheme);\n      }\n    });\n\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: ['data-theme'],\n    });\n\n    return () => observer.disconnect();\n  }, [theme]);\n\n  const handleToggle = () => {\n    const newTheme = toggleThemeMode();\n    setTheme(newTheme);\n  };\n\n  const isDark = isDarkTheme(theme);\n\n  return (\n    <button\n      className={styles.button}\n      onClick={handleToggle}\n      title={`Switch to ${isDark ? 'light' : 'dark'} mode`}\n      aria-label={`Switch to ${isDark ? 'light' : 'dark'} mode`}\n    >\n      {isDark ? (\n        <svg\n          width=\"18\"\n          height=\"18\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n        >\n          <circle cx=\"12\" cy=\"12\" r=\"5\" />\n          <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"3\" />\n          <line x1=\"12\" y1=\"21\" x2=\"12\" y2=\"23\" />\n          <line x1=\"4.22\" y1=\"4.22\" x2=\"5.64\" y2=\"5.64\" />\n          <line x1=\"18.36\" y1=\"18.36\" x2=\"19.78\" y2=\"19.78\" />\n          <line x1=\"1\" y1=\"12\" x2=\"3\" y2=\"12\" />\n          <line x1=\"21\" y1=\"12\" x2=\"23\" y2=\"12\" />\n          <line x1=\"4.22\" y1=\"19.78\" x2=\"5.64\" y2=\"18.36\" />\n          <line x1=\"18.36\" y1=\"5.64\" x2=\"19.78\" y2=\"4.22\" />\n        </svg>\n      ) : (\n        <svg\n          width=\"18\"\n          height=\"18\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n        >\n          <path d=\"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z\" />\n        </svg>\n      )}\n    </button>\n  );\n}\n","import { useState } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport styles from './WhatIfToggle.module.css';\n\nexport function WhatIfToggle() {\n  const whatIfMode = useAppStore((s) => s.whatIfMode);\n  const whatIfPendingOperations = useAppStore((s) => s.whatIfPendingOperations);\n  const enterWhatIfMode = useAppStore((s) => s.enterWhatIfMode);\n  const exitWhatIfMode = useAppStore((s) => s.exitWhatIfMode);\n  const [isApplying, setIsApplying] = useState(false);\n\n  const pendingCount = whatIfPendingOperations.length;\n\n  const handleEnter = () => {\n    enterWhatIfMode();\n  };\n\n  const handleDiscard = () => {\n    const confirmed = window.confirm(\n      pendingCount > 0\n        ? `Discard ${pendingCount} pending change${pendingCount !== 1 ? 's' : ''}? This cannot be undone.`\n        : 'Exit What If mode?'\n    );\n    if (confirmed) {\n      exitWhatIfMode(false);\n    }\n  };\n\n  const handleApply = async () => {\n    if (pendingCount === 0) {\n      exitWhatIfMode(false);\n      return;\n    }\n    \n    const confirmed = window.confirm(\n      `Apply ${pendingCount} change${pendingCount !== 1 ? 's' : ''} to the database?`\n    );\n    if (confirmed) {\n      setIsApplying(true);\n      try {\n        await exitWhatIfMode(true);\n      } finally {\n        setIsApplying(false);\n      }\n    }\n  };\n\n  if (!whatIfMode) {\n    return (\n      <button\n        className={styles.button}\n        onClick={handleEnter}\n        title=\"Enter What If mode to test changes without saving\"\n      >\n        <svg\n          width=\"18\"\n          height=\"18\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        >\n          <circle cx=\"12\" cy=\"12\" r=\"10\" />\n          <path d=\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\" />\n          <circle cx=\"12\" cy=\"17\" r=\"0.5\" fill=\"currentColor\" />\n        </svg>\n        <span className={styles.label}>What If</span>\n      </button>\n    );\n  }\n\n  return (\n    <div className={styles.activeContainer}>\n      <div className={styles.indicator}>\n        <svg\n          width=\"16\"\n          height=\"16\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n          strokeLinecap=\"round\"\n          strokeLinejoin=\"round\"\n        >\n          <circle cx=\"12\" cy=\"12\" r=\"10\" />\n          <path d=\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\" />\n          <circle cx=\"12\" cy=\"17\" r=\"0.5\" fill=\"currentColor\" />\n        </svg>\n        <span>What If</span>\n        {pendingCount > 0 && (\n          <span className={styles.pendingBadge}>{pendingCount}</span>\n        )}\n      </div>\n      \n      <button\n        className={styles.discardButton}\n        onClick={handleDiscard}\n        disabled={isApplying}\n        title=\"Discard all changes\"\n      >\n        Discard\n      </button>\n      \n      <button\n        className={styles.applyButton}\n        onClick={handleApply}\n        disabled={isApplying}\n        title={pendingCount > 0 ? `Apply ${pendingCount} change${pendingCount !== 1 ? 's' : ''}` : 'Exit What If mode'}\n      >\n        {isApplying ? 'Applying...' : pendingCount > 0 ? 'Apply' : 'Exit'}\n      </button>\n    </div>\n  );\n}\n","import { useAppStore } from '@/stores/appStore';\nimport styles from './InstanceTitle.module.css';\n\nexport function InstanceTitle() {\n  const instanceSettings = useAppStore((s) => s.instanceSettings);\n\n  const title = instanceSettings?.instance_title || instanceSettings?.instance_name;\n\n  // Don't render if no custom title is set\n  if (!title || title === 'Milestone') {\n    return null;\n  }\n\n  return (\n    <div className={styles.container}>\n      <span className={styles.separator}>|</span>\n      <span className={styles.title}>{title}</span>\n    </div>\n  );\n}\n","/**\n * useWebSocket Hook\n * \n * Manages WebSocket connection for real-time collaboration.\n * Handles:\n * - Auto-connect when authenticated\n * - Reconnection with exponential backoff\n * - Ping/pong keepalive\n * - Message dispatching\n */\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { getTenantPrefix } from '@/api/client';\n\n// Feature flag to disable WebSocket (set to true to disable until proxy/IIS is properly configured)\nconst WEBSOCKET_DISABLED = true;\n\n// Message types from server\nexport interface PresenceUser {\n  user_id: number;\n  first_name: string;\n  last_name: string;\n  connected_at: string;\n}\n\nexport interface ChangePayload {\n  user_id: number;\n  user_name: string;\n  entity_type: 'phase' | 'subphase' | 'project' | 'assignment';\n  entity_id: number;\n  project_id: number;\n  action: 'create' | 'update' | 'delete' | 'move';\n  summary?: string;\n  timestamp?: string;  // Added when received\n}\n\nexport interface ServerMessage {\n  type: string;\n  payload: unknown;\n  timestamp: string;\n}\n\nexport type ConnectionState = 'connecting' | 'connected' | 'disconnected' | 'error';\n\ninterface UseWebSocketOptions {\n  /** Called when online users list changes */\n  onPresenceChange?: (users: PresenceUser[]) => void;\n  /** Called when another user makes a change */\n  onChangeReceived?: (change: ChangePayload) => void;\n  /** Enable auto-connect (default: true) */\n  autoConnect?: boolean;\n}\n\ninterface UseWebSocketReturn {\n  /** Current connection state */\n  connectionState: ConnectionState;\n  /** Whether currently connected */\n  isConnected: boolean;\n  /** List of online users */\n  onlineUsers: PresenceUser[];\n  /** Recent changes from other users (last 30 seconds) */\n  recentChanges: ChangePayload[];\n  /** Manually connect */\n  connect: () => void;\n  /** Manually disconnect */\n  disconnect: () => void;\n  /** Check if an entity was recently changed */\n  isChangeRecent: (entityType: string, entityId: number) => boolean;\n  /** Get change info for an entity */\n  getChangeInfo: (entityType: string, entityId: number) => ChangePayload | undefined;\n}\n\n// Constants\nconst RECONNECT_BASE_DELAY = 2000;  // 2 seconds (was 1)\nconst RECONNECT_MAX_DELAY = 60000;  // 60 seconds (was 30)\nconst RECONNECT_MAX_ATTEMPTS = 5;   // Stop after 5 attempts\nconst PING_INTERVAL = 25000;        // 25 seconds\nconst CHANGE_EXPIRY = 5000;         // Show changes for 5 seconds\n\n/**\n * Build WebSocket URL based on current location\n */\nfunction getWebSocketUrl(): string {\n  const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n  const host = window.location.host;\n  const tenantPrefix = getTenantPrefix();\n  \n  // In development, connect to backend port\n  const wsHost = window.location.port === '3333' \n    ? `${window.location.hostname}:8485`\n    : host;\n  \n  return `${protocol}//${wsHost}${tenantPrefix}/ws`;\n}\n\nexport function useWebSocket(options: UseWebSocketOptions = {}): UseWebSocketReturn {\n  const { \n    onPresenceChange, \n    onChangeReceived,\n    autoConnect = true,\n  } = options;\n\n  const [connectionState, setConnectionState] = useState<ConnectionState>('disconnected');\n  const [onlineUsers, setOnlineUsers] = useState<PresenceUser[]>([]);\n  const [recentChanges, setRecentChanges] = useState<ChangePayload[]>([]);\n  \n  const wsRef = useRef<WebSocket | null>(null);\n  const reconnectAttemptRef = useRef(0);\n  const reconnectTimeoutRef = useRef<number | null>(null);\n  const pingIntervalRef = useRef<number | null>(null);\n  const mountedRef = useRef(true);\n  const connectingRef = useRef(false);  // Lock to prevent multiple connection attempts\n  \n  // Store callbacks in refs to avoid reconnection loops when they change\n  const onPresenceChangeRef = useRef(onPresenceChange);\n  const onChangeReceivedRef = useRef(onChangeReceived);\n  \n  // Keep refs updated\n  useEffect(() => {\n    onPresenceChangeRef.current = onPresenceChange;\n  }, [onPresenceChange]);\n  \n  useEffect(() => {\n    onChangeReceivedRef.current = onChangeReceived;\n  }, [onChangeReceived]);\n\n  // If WebSocket is disabled, return stub functions\n  if (WEBSOCKET_DISABLED) {\n    return {\n      connectionState: 'disconnected',\n      isConnected: false,\n      onlineUsers: [],\n      recentChanges: [],\n      connect: () => {},\n      disconnect: () => {},\n      isChangeRecent: () => false,\n      getChangeInfo: () => undefined,\n    };\n  }\n\n  // Clear expired changes\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setRecentChanges(prev => {\n        const now = Date.now();\n        return prev.filter(c => {\n          const changeTime = new Date(c.timestamp || '').getTime();\n          return now - changeTime < CHANGE_EXPIRY;\n        });\n      });\n    }, 1000);\n    \n    return () => clearInterval(interval);\n  }, []);\n\n  // Handle incoming messages\n  const handleMessage = useCallback((event: MessageEvent) => {\n    try {\n      const message: ServerMessage = JSON.parse(event.data);\n      console.log('[WebSocket] Received:', message.type, message.payload);\n      \n      switch (message.type) {\n        case 'pong':\n          // Keepalive acknowledged\n          break;\n          \n        case 'presence:list':\n          const listPayload = message.payload as { users: PresenceUser[] };\n          console.log('[WebSocket] Presence list:', listPayload.users);\n          setOnlineUsers(listPayload.users);\n          onPresenceChangeRef.current?.(listPayload.users);\n          break;\n          \n        case 'presence:join':\n          const joinUser = message.payload as PresenceUser;\n          console.log('[WebSocket] User joined:', joinUser);\n          setOnlineUsers(prev => {\n            // Avoid duplicates\n            const filtered = prev.filter(u => u.user_id !== joinUser.user_id);\n            const updated = [...filtered, joinUser];\n            onPresenceChangeRef.current?.(updated);\n            return updated;\n          });\n          break;\n          \n        case 'presence:leave':\n          const leavePayload = message.payload as { user_id: number };\n          console.log('[WebSocket] User left:', leavePayload.user_id);\n          setOnlineUsers(prev => {\n            const updated = prev.filter(u => u.user_id !== leavePayload.user_id);\n            onPresenceChangeRef.current?.(updated);\n            return updated;\n          });\n          break;\n          \n        case 'change:phase':\n        case 'change:subphase':\n        case 'change:project':\n        case 'change:assignment':\n          const change = message.payload as ChangePayload;\n          console.log('[WebSocket] Change received:', change);\n          // Add timestamp for expiry tracking\n          change.timestamp = message.timestamp;\n          setRecentChanges(prev => [...prev, change]);\n          onChangeReceivedRef.current?.(change);\n          break;\n          \n        default:\n          console.log('[WebSocket] Unknown message type:', message.type);\n      }\n    } catch (error) {\n      console.warn('Failed to parse WebSocket message:', error);\n    }\n  }, []); // No dependencies - uses refs instead\n\n  // Connect to WebSocket\n  const connect = useCallback(() => {\n    // Don't connect if already connected or connecting\n    if (wsRef.current) {\n      const state = wsRef.current.readyState;\n      if (state === WebSocket.OPEN || state === WebSocket.CONNECTING) {\n        console.log('[WebSocket] Already connected or connecting, skipping');\n        return;\n      }\n    }\n    \n    // Use a lock to prevent multiple simultaneous connection attempts\n    if (connectingRef.current) {\n      console.log('[WebSocket] Connection already in progress, skipping');\n      return;\n    }\n    connectingRef.current = true;\n\n    const url = getWebSocketUrl();\n    console.log('[WebSocket] Connecting to:', url);\n    setConnectionState('connecting');\n    \n    try {\n      const ws = new WebSocket(url);\n      wsRef.current = ws;\n      \n      ws.onopen = () => {\n        connectingRef.current = false;\n        if (!mountedRef.current) return;\n        console.log('[WebSocket] Connected successfully');\n        setConnectionState('connected');\n        reconnectAttemptRef.current = 0;\n        \n        // Start ping interval\n        pingIntervalRef.current = window.setInterval(() => {\n          if (ws.readyState === WebSocket.OPEN) {\n            ws.send(JSON.stringify({ type: 'ping' }));\n          }\n        }, PING_INTERVAL);\n      };\n      \n      ws.onmessage = handleMessage;\n      \n      ws.onclose = (event) => {\n        connectingRef.current = false;\n        if (!mountedRef.current) return;\n        \n        console.log(`[WebSocket] Connection closed: code=${event.code}, reason=${event.reason}`);\n        \n        // Clear ping interval\n        if (pingIntervalRef.current) {\n          clearInterval(pingIntervalRef.current);\n          pingIntervalRef.current = null;\n        }\n        \n        setConnectionState('disconnected');\n        setOnlineUsers([]);\n        \n        // Don't reconnect if:\n        // - closed normally (1000)\n        // - going away (1001) - browser navigating away\n        // - replaced by new connection (4000) \n        // - no session (4001)\n        // - auth error (4002)\n        // - user disabled (4003)\n        // - component unmounted\n        const noReconnectCodes = [1000, 1001, 4000, 4001, 4002, 4003, 4004, 4005, 4006];\n        if (noReconnectCodes.includes(event.code) || !mountedRef.current) {\n          console.log(`[WebSocket] Closed with code ${event.code}, not reconnecting`);\n          return;\n        }\n        \n        // Stop after max attempts\n        if (reconnectAttemptRef.current >= RECONNECT_MAX_ATTEMPTS) {\n          console.log(`[WebSocket] Max reconnection attempts (${RECONNECT_MAX_ATTEMPTS}) reached, giving up`);\n          return;\n        }\n        \n        // Exponential backoff reconnect\n        const delay = Math.min(\n          RECONNECT_BASE_DELAY * Math.pow(2, reconnectAttemptRef.current),\n          RECONNECT_MAX_DELAY\n        );\n        reconnectAttemptRef.current++;\n        \n        console.log(`[WebSocket] Closed with code ${event.code}, reconnecting in ${delay}ms...`);\n        reconnectTimeoutRef.current = window.setTimeout(() => {\n          if (mountedRef.current) {\n            connect();\n          }\n        }, delay);\n      };\n      \n      ws.onerror = (error) => {\n        connectingRef.current = false;\n        if (!mountedRef.current) return;\n        console.error('[WebSocket] Error:', error);\n        setConnectionState('error');\n      };\n      \n    } catch (error) {\n      connectingRef.current = false;\n      console.error('[WebSocket] Failed to create WebSocket:', error);\n      setConnectionState('error');\n    }\n  }, [handleMessage]);\n\n  // Disconnect from WebSocket\n  const disconnect = useCallback(() => {\n    if (reconnectTimeoutRef.current) {\n      clearTimeout(reconnectTimeoutRef.current);\n      reconnectTimeoutRef.current = null;\n    }\n    \n    if (pingIntervalRef.current) {\n      clearInterval(pingIntervalRef.current);\n      pingIntervalRef.current = null;\n    }\n    \n    if (wsRef.current) {\n      wsRef.current.close(1000, 'Client disconnect');\n      wsRef.current = null;\n    }\n    \n    setConnectionState('disconnected');\n    setOnlineUsers([]);\n  }, []);\n\n  // Store connect in a ref to avoid re-running the effect\n  const connectRef = useRef(connect);\n  useEffect(() => {\n    connectRef.current = connect;\n  }, [connect]);\n\n  // Auto-connect on mount (only once)\n  useEffect(() => {\n    mountedRef.current = true;\n    \n    if (autoConnect) {\n      // Small delay to ensure cookies are available\n      const timeout = setTimeout(() => {\n        connectRef.current();\n      }, 100);\n      return () => clearTimeout(timeout);\n    }\n  }, [autoConnect]); // Note: connect removed from deps - uses ref instead\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      mountedRef.current = false;\n      disconnect();\n    };\n  }, [disconnect]);\n\n  // Helper: check if an entity was recently changed\n  const isChangeRecent = useCallback((entityType: string, entityId: number): boolean => {\n    return recentChanges.some(c => c.entity_type === entityType && c.entity_id === entityId);\n  }, [recentChanges]);\n\n  // Helper: get change info for an entity\n  const getChangeInfo = useCallback((entityType: string, entityId: number): ChangePayload | undefined => {\n    return recentChanges.find(c => c.entity_type === entityType && c.entity_id === entityId);\n  }, [recentChanges]);\n\n  return {\n    connectionState,\n    isConnected: connectionState === 'connected',\n    onlineUsers,\n    recentChanges,\n    connect,\n    disconnect,\n    isChangeRecent,\n    getChangeInfo,\n  };\n}\n","/**\n * WebSocket Context Provider\n * \n * Provides WebSocket connection state and real-time data\n * to the entire application.\n */\n\nimport React, { createContext, useContext, useCallback, useMemo, useEffect, useRef } from 'react';\nimport { useWebSocket, ConnectionState } from '@/hooks/useWebSocket';\nimport type { PresenceUser, ChangePayload } from '@/hooks/useWebSocket';\nimport { loadAllProjects } from '@/api/endpoints/projects';\nimport { useAppStore } from '@/stores/appStore';\n\n// Re-export types for convenience\nexport type { PresenceUser, ChangePayload } from '@/hooks/useWebSocket';\n\ninterface WebSocketContextValue {\n  /** Current connection state */\n  connectionState: ConnectionState;\n  /** Whether connected to WebSocket */\n  isConnected: boolean;\n  /** List of online users (excluding self) */\n  onlineUsers: PresenceUser[];\n  /** Recent changes from other users */\n  recentChanges: ChangePayload[];\n  /** Get changes for a specific entity */\n  getChangesForEntity: (entityType: string, entityId: number) => ChangePayload[];\n  /** Check if an entity was recently changed by another user */\n  isRecentlyChanged: (entityType: string, entityId: number) => boolean;\n  /** Manually reconnect */\n  reconnect: () => void;\n}\n\nconst WebSocketContext = createContext<WebSocketContextValue | null>(null);\n\ninterface WebSocketProviderProps {\n  children: React.ReactNode;\n}\n\nexport function WebSocketProvider({ children }: WebSocketProviderProps) {\n  const setProjects = useAppStore((s) => s.setProjects);\n  \n  // Debounce refresh to avoid multiple rapid requests\n  const refreshTimeoutRef = useRef<number | null>(null);\n  const pendingRefreshRef = useRef(false);\n  \n  // Refresh projects data from server\n  const refreshProjects = useCallback(async () => {\n    if (pendingRefreshRef.current) return;\n    pendingRefreshRef.current = true;\n    \n    try {\n      console.log('[WebSocket] Refreshing projects due to remote change...');\n      const projects = await loadAllProjects();\n      setProjects(projects);\n      console.log('[WebSocket] Projects refreshed:', projects.length);\n    } catch (err) {\n      console.error('[WebSocket] Failed to refresh projects:', err);\n    } finally {\n      pendingRefreshRef.current = false;\n    }\n  }, [setProjects]);\n  \n  // Handle incoming changes - debounced refresh\n  const handleChangeReceived = useCallback((change: ChangePayload) => {\n    console.log('[WebSocket] Change received, scheduling refresh:', change.entity_type, change.entity_id);\n    \n    // Clear any pending refresh\n    if (refreshTimeoutRef.current) {\n      clearTimeout(refreshTimeoutRef.current);\n    }\n    \n    // Debounce: wait 500ms before refreshing (in case multiple changes come quickly)\n    refreshTimeoutRef.current = window.setTimeout(() => {\n      refreshProjects();\n    }, 500);\n  }, [refreshProjects]);\n  \n  const {\n    connectionState,\n    onlineUsers,\n    recentChanges,\n    connect,\n    disconnect,\n  } = useWebSocket({\n    autoConnect: true,\n    onChangeReceived: handleChangeReceived,\n  });\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      if (refreshTimeoutRef.current) {\n        clearTimeout(refreshTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const isConnected = connectionState === 'connected';\n\n  const getChangesForEntity = useCallback(\n    (entityType: string, entityId: number): ChangePayload[] => {\n      return recentChanges.filter(\n        c => c.entity_type === entityType && c.entity_id === entityId\n      );\n    },\n    [recentChanges]\n  );\n\n  const isRecentlyChanged = useCallback(\n    (entityType: string, entityId: number): boolean => {\n      return recentChanges.some(\n        c => c.entity_type === entityType && c.entity_id === entityId\n      );\n    },\n    [recentChanges]\n  );\n\n  const reconnect = useCallback(() => {\n    disconnect();\n    setTimeout(connect, 100);\n  }, [connect, disconnect]);\n\n  const value = useMemo<WebSocketContextValue>(\n    () => ({\n      connectionState,\n      isConnected,\n      onlineUsers,\n      recentChanges,\n      getChangesForEntity,\n      isRecentlyChanged,\n      reconnect,\n    }),\n    [\n      connectionState,\n      isConnected,\n      onlineUsers,\n      recentChanges,\n      getChangesForEntity,\n      isRecentlyChanged,\n      reconnect,\n    ]\n  );\n\n  return (\n    <WebSocketContext.Provider value={value}>\n      {children}\n    </WebSocketContext.Provider>\n  );\n}\n\n/**\n * Hook to access WebSocket context\n */\nexport function useWebSocketContext(): WebSocketContextValue {\n  const context = useContext(WebSocketContext);\n  if (!context) {\n    throw new Error('useWebSocketContext must be used within a WebSocketProvider');\n  }\n  return context;\n}\n\n/**\n * Hook to get online users (convenience wrapper)\n */\nexport function useOnlineUsers(): PresenceUser[] {\n  const { onlineUsers } = useWebSocketContext();\n  return onlineUsers;\n}\n\n/**\n * Hook to check if entity was recently changed\n */\nexport function useEntityChangeIndicator(entityType: string, entityId: number): {\n  isChanged: boolean;\n  changedBy: string | null;\n} {\n  const { recentChanges } = useWebSocketContext();\n  \n  const change = recentChanges.find(\n    c => c.entity_type === entityType && c.entity_id === entityId\n  );\n  \n  return {\n    isChanged: !!change,\n    changedBy: change?.user_name ?? null,\n  };\n}\n","/**\n * OnlineUsers Component\n * \n * Shows avatars of currently online users in the header.\n * Non-intrusive indicator of who else is using the system.\n */\n\nimport { memo, useState } from 'react';\nimport { useWebSocketContext, PresenceUser } from '@/contexts/WebSocketContext';\nimport styles from './OnlineUsers.module.css';\n\n/**\n * Get initials from name\n */\nfunction getInitials(firstName: string, lastName: string): string {\n  return `${firstName.charAt(0)}${lastName.charAt(0)}`.toUpperCase();\n}\n\n/**\n * Get consistent color for user based on ID\n */\nfunction getAvatarColor(userId: number): string {\n  const colors = [\n    '#3b82f6', // blue\n    '#8b5cf6', // purple\n    '#ec4899', // pink\n    '#f97316', // orange\n    '#10b981', // green\n    '#06b6d4', // cyan\n    '#f59e0b', // amber\n    '#ef4444', // red\n  ];\n  return colors[userId % colors.length];\n}\n\ninterface UserAvatarProps {\n  user: PresenceUser;\n  size?: 'small' | 'medium';\n}\n\nconst UserAvatar = memo(function UserAvatar({ user, size = 'small' }: UserAvatarProps) {\n  return (\n    <div\n      className={`${styles.avatar} ${styles[size]}`}\n      style={{ backgroundColor: getAvatarColor(user.user_id) }}\n      title={`${user.first_name} ${user.last_name}`}\n    >\n      {getInitials(user.first_name, user.last_name)}\n    </div>\n  );\n});\n\nexport const OnlineUsers = memo(function OnlineUsers() {\n  const { connectionState, onlineUsers, isConnected } = useWebSocketContext();\n  const [showDropdown, setShowDropdown] = useState(false);\n\n  // Debug logging\n  console.log('[OnlineUsers] connectionState:', connectionState, 'isConnected:', isConnected, 'users:', onlineUsers.length);\n\n  // Don't show anything if not connected or no other users\n  if (!isConnected && connectionState !== 'connecting') {\n    return null;\n  }\n\n  const maxVisible = 3;\n  const visibleUsers = onlineUsers.slice(0, maxVisible);\n  const remainingCount = onlineUsers.length - maxVisible;\n\n  return (\n    <div \n      className={styles.container}\n      onMouseEnter={() => setShowDropdown(true)}\n      onMouseLeave={() => setShowDropdown(false)}\n    >\n      {/* Connection indicator */}\n      <div className={`${styles.statusDot} ${styles[connectionState]}`} />\n      \n      {/* User avatars */}\n      <div className={styles.avatars}>\n        {visibleUsers.map((user) => (\n          <UserAvatar key={user.user_id} user={user} />\n        ))}\n        {remainingCount > 0 && (\n          <div className={styles.moreCount}>+{remainingCount}</div>\n        )}\n      </div>\n\n      {/* Dropdown with full list */}\n      {showDropdown && onlineUsers.length > 0 && (\n        <div className={styles.dropdown}>\n          <div className={styles.dropdownHeader}>\n            Online Users ({onlineUsers.length})\n          </div>\n          <div className={styles.dropdownList}>\n            {onlineUsers.map((user) => (\n              <div key={user.user_id} className={styles.dropdownItem}>\n                <UserAvatar user={user} size=\"medium\" />\n                <span className={styles.userName}>\n                  {user.first_name} {user.last_name}\n                </span>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n});\n\nexport default OnlineUsers;\n","import { useState, useEffect, useMemo, useRef } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { SiteSelector } from './SiteSelector';\nimport { DateNavigation } from './DateNavigation';\nimport { UserMenu } from './UserMenu';\nimport { ThemeToggle } from './ThemeToggle';\nimport { WhatIfToggle } from './WhatIfToggle';\nimport { InstanceTitle } from './InstanceTitle';\nimport { OnlineUsers } from '@/components/common/OnlineUsers';\nimport { getTheme, isDarkTheme, type Theme } from '@/utils/storage';\nimport { getSetting } from '@/api/endpoints/settings';\nimport type { ViewMode } from '@/types';\nimport styles from './Header.module.css';\n\n// View mode options\nconst VIEW_MODES: { value: ViewMode; label: string; title: string }[] = [\n  { value: 'week', label: 'W', title: 'Week view' },\n  { value: 'month', label: 'M', title: 'Month view' },\n  { value: 'quarter', label: 'Q', title: 'Quarter view' },\n  { value: 'year', label: 'Y', title: 'Year view' },\n];\n\n// Zoom constants\nconst MIN_CELL_WIDTH = 12;\nconst MAX_CELL_WIDTH = 120;\nconst ZOOM_STEP = 4;\nconst DEFAULT_CELL_WIDTH = 36;\n\nexport function Header() {\n  const currentUser = useAppStore((s) => s.currentUser);\n  const whatIfMode = useAppStore((s) => s.whatIfMode);\n  const currentView = useAppStore((s) => s.currentView);\n  const viewMode = useAppStore((s) => s.viewMode);\n  const setViewMode = useAppStore((s) => s.setViewMode);\n  const cellWidth = useAppStore((s) => s.cellWidth);\n  const setCellWidth = useAppStore((s) => s.setCellWidth);\n  const showStaffOverview = useAppStore((s) => s.showStaffOverview);\n  const showEquipmentOverview = useAppStore((s) => s.showEquipmentOverview);\n  const toggleShowStaffOverview = useAppStore((s) => s.toggleShowStaffOverview);\n  const toggleShowEquipmentOverview = useAppStore((s) => s.toggleShowEquipmentOverview);\n  \n  const [theme, setThemeState] = useState<Theme>(() => getTheme());\n  const [customLogoDark, setCustomLogoDark] = useState<string>('');\n  const [customLogoLight, setCustomLogoLight] = useState<string>('');\n  const [showPanelsDropdown, setShowPanelsDropdown] = useState(false);\n  const panelsDropdownRef = useRef<HTMLDivElement>(null);\n\n  // Load custom logos\n  useEffect(() => {\n    const loadCustomLogos = async () => {\n      try {\n        const [darkResult, lightResult] = await Promise.all([\n          getSetting('header_logo_dark').catch(() => ({ value: null })),\n          getSetting('header_logo_light').catch(() => ({ value: null })),\n        ]);\n        if (darkResult.value) setCustomLogoDark(darkResult.value);\n        if (lightResult.value) setCustomLogoLight(lightResult.value);\n      } catch (err) {\n        // Use default logos on error\n      }\n    };\n    loadCustomLogos();\n  }, []);\n\n  // Watch for theme changes\n  useEffect(() => {\n    const observer = new MutationObserver(() => {\n      const currentTheme = document.documentElement.dataset.theme as Theme;\n      if (currentTheme && currentTheme !== theme) {\n        setThemeState(currentTheme);\n      }\n    });\n\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: ['data-theme'],\n    });\n\n    return () => observer.disconnect();\n  }, [theme]);\n\n  // Close panels dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (panelsDropdownRef.current && !panelsDropdownRef.current.contains(e.target as Node)) {\n        setShowPanelsDropdown(false);\n      }\n    };\n    if (showPanelsDropdown) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [showPanelsDropdown]);\n\n  const canUseWhatIf = currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n  const canShowPanels = currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n  const isGanttView = currentView === 'gantt';\n\n  // Zoom calculations\n  const zoomPercent = Math.round((cellWidth / DEFAULT_CELL_WIDTH) * 100);\n  const canZoomIn = cellWidth < MAX_CELL_WIDTH;\n  const canZoomOut = cellWidth > MIN_CELL_WIDTH;\n\n  const handleZoomIn = () => {\n    const newWidth = Math.min(cellWidth + ZOOM_STEP, MAX_CELL_WIDTH);\n    if (newWidth !== cellWidth) setCellWidth(newWidth);\n  };\n\n  const handleZoomOut = () => {\n    const newWidth = Math.max(cellWidth - ZOOM_STEP, MIN_CELL_WIDTH);\n    if (newWidth !== cellWidth) setCellWidth(newWidth);\n  };\n\n  const handleResetZoom = () => {\n    if (cellWidth !== DEFAULT_CELL_WIDTH) setCellWidth(DEFAULT_CELL_WIDTH);\n  };\n\n  // Determine logo source\n  const logoSrc = useMemo(() => {\n    if (isDarkTheme(theme)) {\n      return customLogoDark || '/img/milestone_logo_dark_theme.svg';\n    } else {\n      return customLogoLight || '/img/milestone_logo_light_theme.svg';\n    }\n  }, [theme, customLogoDark, customLogoLight]);\n\n  // Count active panels\n  const activePanelCount = (showStaffOverview ? 1 : 0) + (showEquipmentOverview ? 1 : 0);\n\n  return (\n    <header className={`${styles.header} ${whatIfMode ? styles.whatIfActive : ''}`}>\n      {/* LEFT: Branding & Context */}\n      <div className={styles.left}>\n        <div className={styles.logo}>\n          <img src={logoSrc} alt=\"Milestone\" className={styles.logoImg} />\n        </div>\n        <InstanceTitle />\n        <div className={styles.divider} />\n        <SiteSelector />\n      </div>\n\n      {/* CENTER: Timeline Controls */}\n      <div className={styles.center}>\n        <DateNavigation />\n        \n        <div className={styles.divider} />\n        \n        {/* View Mode Switcher */}\n        <div className={styles.viewModes}>\n          {VIEW_MODES.map((mode) => (\n            <button\n              key={mode.value}\n              className={`${styles.viewModeBtn} ${viewMode === mode.value ? styles.active : ''}`}\n              onClick={() => setViewMode(mode.value)}\n              title={mode.title}\n            >\n              {mode.label}\n            </button>\n          ))}\n        </div>\n        \n        <div className={styles.divider} />\n        \n        {/* Zoom Controls */}\n        <div className={styles.zoomControls}>\n          <button\n            className={styles.zoomBtn}\n            onClick={handleZoomOut}\n            disabled={!canZoomOut}\n            title=\"Zoom out\"\n          >\n            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M19 13H5v-2h14v2z\" />\n            </svg>\n          </button>\n          <button\n            className={styles.zoomLevel}\n            onClick={handleResetZoom}\n            title=\"Reset zoom to 100%\"\n          >\n            {zoomPercent}%\n          </button>\n          <button\n            className={styles.zoomBtn}\n            onClick={handleZoomIn}\n            disabled={!canZoomIn}\n            title=\"Zoom in\"\n          >\n            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" />\n            </svg>\n          </button>\n        </div>\n      </div>\n\n      {/* RIGHT: Actions & User */}\n      <div className={styles.right}>\n        {/* Panels Toggle (Staff/Equipment) - only for admins in Gantt view */}\n        {canShowPanels && isGanttView && (\n          <div ref={panelsDropdownRef} className={styles.panelsWrapper}>\n            <button\n              className={`${styles.panelsBtn} ${activePanelCount > 0 ? styles.hasActive : ''}`}\n              onClick={() => setShowPanelsDropdown(!showPanelsDropdown)}\n              title=\"Toggle overview panels\"\n            >\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" />\n                <line x1=\"3\" y1=\"15\" x2=\"21\" y2=\"15\" />\n              </svg>\n              <span>Panels</span>\n              {activePanelCount > 0 && (\n                <span className={styles.panelsBadge}>{activePanelCount}</span>\n              )}\n            </button>\n            \n            {showPanelsDropdown && (\n              <div className={styles.panelsDropdown}>\n                <div className={styles.panelsDropdownHeader}>Overview Panels</div>\n                <div className={styles.panelButtons}>\n                  <button\n                    className={`${styles.panelToggleBtn} ${showStaffOverview ? styles.active : ''}`}\n                    onClick={() => {\n                      toggleShowStaffOverview();\n                      setShowPanelsDropdown(false);\n                    }}\n                  >\n                    <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                      <path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\" />\n                      <circle cx=\"9\" cy=\"7\" r=\"4\" />\n                      <path d=\"M23 21v-2a4 4 0 0 0-3-3.87\" />\n                      <path d=\"M16 3.13a4 4 0 0 1 0 7.75\" />\n                    </svg>\n                    <span>Staff</span>\n                  </button>\n                  <button\n                    className={`${styles.panelToggleBtn} ${styles.equipment} ${showEquipmentOverview ? styles.active : ''}`}\n                    onClick={() => {\n                      toggleShowEquipmentOverview();\n                      setShowPanelsDropdown(false);\n                    }}\n                  >\n                    <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                      <rect x=\"2\" y=\"7\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\" />\n                      <path d=\"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16\" />\n                    </svg>\n                    <span>Equipment</span>\n                  </button>\n                </div>\n                <div className={styles.panelsHint}>\n                  Click to toggle  Drag staff/equipment to assign\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n        \n        {/* What-If Toggle */}\n        {canUseWhatIf && <WhatIfToggle />}\n        \n        <div className={styles.divider} />\n        \n        {/* Theme Toggle */}\n        <ThemeToggle />\n        \n        {/* Online Users */}\n        <OnlineUsers />\n        \n        {/* User Menu */}\n        <UserMenu />\n      </div>\n    </header>\n  );\n}\n","import { useAppStore } from '@/stores/appStore';\nimport type { CurrentView } from '@/types';\nimport styles from './Navigation.module.css';\n\ninterface NavItem {\n  view: CurrentView;\n  label: string;\n  icon: React.ReactNode;\n}\n\ninterface NavigationProps {\n  collapsed?: boolean;\n}\n\nconst NAV_ITEMS: NavItem[] = [\n  {\n    view: 'gantt',\n    label: 'Gantt Chart',\n    icon: (\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n        <line x1=\"4\" y1=\"9\" x2=\"20\" y2=\"9\" />\n        <line x1=\"4\" y1=\"15\" x2=\"12\" y2=\"15\" />\n        <line x1=\"4\" y1=\"21\" x2=\"16\" y2=\"21\" />\n        <rect x=\"4\" y=\"3\" width=\"16\" height=\"2\" rx=\"1\" />\n      </svg>\n    ),\n  },\n  {\n    view: 'staff',\n    label: 'Staff Overview',\n    icon: (\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n        <path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\" />\n        <circle cx=\"9\" cy=\"7\" r=\"4\" />\n        <path d=\"M23 21v-2a4 4 0 0 0-3-3.87\" />\n        <path d=\"M16 3.13a4 4 0 0 1 0 7.75\" />\n      </svg>\n    ),\n  },\n  {\n    view: 'equipment',\n    label: 'Equipment',\n    icon: (\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n        <circle cx=\"12\" cy=\"12\" r=\"3\" />\n        <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\" />\n      </svg>\n    ),\n  },\n  {\n    view: 'crosssite',\n    label: 'Cross-Site',\n    icon: (\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n        <circle cx=\"12\" cy=\"12\" r=\"10\" />\n        <line x1=\"2\" y1=\"12\" x2=\"22\" y2=\"12\" />\n        <path d=\"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z\" />\n      </svg>\n    ),\n  },\n  {\n    view: 'archived',\n    label: 'Archived',\n    icon: (\n      <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n        <polyline points=\"21 8 21 21 3 21 3 8\" />\n        <rect x=\"1\" y=\"3\" width=\"22\" height=\"5\" />\n        <line x1=\"10\" y1=\"12\" x2=\"14\" y2=\"12\" />\n      </svg>\n    ),\n  },\n];\n\nexport function Navigation({ collapsed = false }: NavigationProps) {\n  const currentView = useAppStore((s) => s.currentView);\n  const setCurrentView = useAppStore((s) => s.setCurrentView);\n\n  return (\n    <nav className={`${styles.nav} ${collapsed ? styles.collapsed : ''}`}>\n      {NAV_ITEMS.map((item) => (\n        <button\n          key={item.view}\n          className={`${styles.navItem} ${currentView === item.view ? styles.active : ''}`}\n          onClick={() => setCurrentView(item.view)}\n          title={collapsed ? item.label : undefined}\n        >\n          <span className={styles.icon}>{item.icon}</span>\n          {!collapsed && <span className={styles.label}>{item.label}</span>}\n        </button>\n      ))}\n    </nav>\n  );\n}\n","import { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport styles from './AdminSection.module.css';\n\ninterface AdminItem {\n  id: string;\n  label: string;\n  icon: React.ReactNode;\n  modal: string;\n  adminOnly?: boolean;\n}\n\ninterface AdminSectionProps {\n  collapsed?: boolean;\n}\n\nconst ADMIN_ITEMS: AdminItem[] = [\n  {\n    id: 'users',\n    label: 'Manage Users',\n    modal: 'userManagement',\n    icon: (\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n        <path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\" />\n        <circle cx=\"9\" cy=\"7\" r=\"4\" />\n        <line x1=\"19\" y1=\"8\" x2=\"19\" y2=\"14\" />\n        <line x1=\"22\" y1=\"11\" x2=\"16\" y2=\"11\" />\n      </svg>\n    ),\n  },\n  {\n    id: 'equipment',\n    label: 'Manage Equipment',\n    modal: 'manageEquipment',\n    icon: (\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n        <rect x=\"2\" y=\"7\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\" />\n        <path d=\"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16\" />\n      </svg>\n    ),\n  },\n  {\n    id: 'sites',\n    label: 'Manage Sites',\n    modal: 'manageSites',\n    icon: (\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n        <path d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z\" />\n        <circle cx=\"12\" cy=\"10\" r=\"3\" />\n      </svg>\n    ),\n  },\n  {\n    id: 'phases',\n    label: 'Predefined Phases',\n    modal: 'predefinedPhases',\n    icon: (\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n        <line x1=\"8\" y1=\"6\" x2=\"21\" y2=\"6\" />\n        <line x1=\"8\" y1=\"12\" x2=\"21\" y2=\"12\" />\n        <line x1=\"8\" y1=\"18\" x2=\"21\" y2=\"18\" />\n        <line x1=\"3\" y1=\"6\" x2=\"3.01\" y2=\"6\" />\n        <line x1=\"3\" y1=\"12\" x2=\"3.01\" y2=\"12\" />\n        <line x1=\"3\" y1=\"18\" x2=\"3.01\" y2=\"18\" />\n      </svg>\n    ),\n  },\n  {\n    id: 'sso',\n    label: 'SSO Configuration',\n    modal: 'ssoConfig',\n    adminOnly: true,\n    icon: (\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n        <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\" />\n        <path d=\"M7 11V7a5 5 0 0 1 10 0v4\" />\n      </svg>\n    ),\n  },\n  {\n    id: 'settings',\n    label: 'Settings',\n    modal: 'settings',\n    icon: (\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n        <circle cx=\"12\" cy=\"12\" r=\"3\" />\n        <path d=\"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42\" />\n      </svg>\n    ),\n  },\n];\n\nexport function AdminSection({ collapsed = false }: AdminSectionProps) {\n  const setActiveModal = useUIStore((s) => s.setActiveModal);\n  const currentUser = useAppStore((s) => s.currentUser);\n  \n  const isAdmin = currentUser?.role === 'admin';\n\n  const handleClick = (modal: string) => {\n    setActiveModal(modal);\n  };\n  \n  // Filter items based on user role\n  const visibleItems = ADMIN_ITEMS.filter(item => !item.adminOnly || isAdmin);\n\n  return (\n    <div className={`${styles.section} ${collapsed ? styles.collapsed : ''}`}>\n      {visibleItems.map((item) => (\n        <button\n          key={item.id}\n          className={styles.item}\n          onClick={() => handleClick(item.modal)}\n          title={collapsed ? item.label : undefined}\n        >\n          <span className={styles.icon}>{item.icon}</span>\n          {!collapsed && <span className={styles.label}>{item.label}</span>}\n        </button>\n      ))}\n    </div>\n  );\n}\n","import { useAppStore } from '@/stores/appStore';\nimport styles from './QuickStats.module.css';\n\nexport function QuickStats() {\n  const projects = useAppStore((s) => s.projects);\n  const staff = useAppStore((s) => s.staff);\n  const equipment = useAppStore((s) => s.equipment);\n  const currentSite = useAppStore((s) => s.currentSite);\n\n  // Filter by current site\n  const siteProjects = currentSite\n    ? projects.filter((p) => p.site_id === currentSite.id && !p.archived)\n    : projects.filter((p) => !p.archived);\n\n  const siteStaff = currentSite\n    ? staff.filter((s) => s.site_id === currentSite.id && s.active)\n    : staff.filter((s) => s.active);\n\n  const siteEquipment = currentSite\n    ? equipment.filter((e) => e.site_id === currentSite.id && e.active)\n    : equipment.filter((e) => e.active);\n\n  const confirmedProjects = siteProjects.filter((p) => p.confirmed).length;\n  const unconfirmedProjects = siteProjects.filter((p) => !p.confirmed).length;\n\n  return (\n    <div className={styles.stats}>\n      <div className={styles.stat}>\n        <span className={styles.value}>{siteProjects.length}</span>\n        <span className={styles.label}>Projects</span>\n        <span className={styles.detail}>\n          {confirmedProjects} confirmed, {unconfirmedProjects} pending\n        </span>\n      </div>\n      <div className={styles.stat}>\n        <span className={styles.value}>{siteStaff.length}</span>\n        <span className={styles.label}>Staff</span>\n      </div>\n      <div className={styles.stat}>\n        <span className={styles.value}>{siteEquipment.length}</span>\n        <span className={styles.label}>Equipment</span>\n      </div>\n    </div>\n  );\n}\n","import { useAppStore } from '@/stores/appStore';\nimport { Navigation } from './Navigation';\nimport { AdminSection } from './AdminSection';\nimport { QuickStats } from './QuickStats';\nimport styles from './Sidebar.module.css';\n\nexport function Sidebar() {\n  const sidebarCollapsed = useAppStore((s) => s.sidebarCollapsed);\n  const setSidebarCollapsed = useAppStore((s) => s.setSidebarCollapsed);\n  const currentUser = useAppStore((s) => s.currentUser);\n\n  const isAdminOrSuperuser =\n    currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n\n  const toggleCollapsed = () => {\n    setSidebarCollapsed(!sidebarCollapsed);\n  };\n\n  return (\n    <aside\n      className={`${styles.sidebar} ${sidebarCollapsed ? styles.collapsed : ''}`}\n    >\n      <button\n        className={styles.collapseBtn}\n        onClick={toggleCollapsed}\n        title={sidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar'}\n        aria-label={sidebarCollapsed ? 'Expand sidebar' : 'Collapse sidebar'}\n      >\n        <svg\n          width=\"16\"\n          height=\"16\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          strokeWidth=\"2\"\n        >\n          <polyline points=\"15 18 9 12 15 6\" />\n        </svg>\n      </button>\n\n      <div className={styles.content}>\n        <div className={styles.section}>\n          {!sidebarCollapsed && <div className={styles.sectionTitle}>Views</div>}\n          <Navigation collapsed={sidebarCollapsed} />\n        </div>\n\n        {isAdminOrSuperuser && (\n          <div className={styles.section}>\n            {!sidebarCollapsed && <div className={styles.sectionTitle}>Admin</div>}\n            <AdminSection collapsed={sidebarCollapsed} />\n          </div>\n        )}\n\n        {!sidebarCollapsed && (\n          <div className={styles.section}>\n            <div className={styles.sectionTitle}>Quick Stats</div>\n            <QuickStats />\n          </div>\n        )}\n      </div>\n    </aside>\n  );\n}\n","/**\n * ReorderContext\n * \n * Provides drag-and-drop reordering state and handlers to ProjectPanel components.\n */\n\nimport { createContext, useContext, useState, useCallback, useRef, ReactNode } from 'react';\nimport { apiPut } from '@/api/client';\nimport { loadAllProjects } from '@/api/endpoints/projects';\nimport { useAppStore } from '@/stores/appStore';\n\nexport type ReorderItemType = 'phase' | 'subphase';\n\ninterface DragState {\n  type: ReorderItemType;\n  id: number;\n  projectId: number;\n  parentId?: number;\n  parentType?: 'phase' | 'subphase';\n}\n\ninterface DropTarget {\n  type: ReorderItemType;\n  id: number;\n  position: 'before' | 'after';\n}\n\ninterface ReorderContextValue {\n  dragState: DragState | null;\n  dropTarget: DropTarget | null;\n  handleDragStart: (\n    e: React.DragEvent,\n    type: ReorderItemType,\n    id: number,\n    projectId: number,\n    parentId?: number,\n    parentType?: 'phase' | 'subphase'\n  ) => void;\n  handleDragOver: (e: React.DragEvent, type: ReorderItemType, id: number) => void;\n  handleDragLeave: (e: React.DragEvent) => void;\n  handleDrop: (\n    e: React.DragEvent,\n    type: ReorderItemType,\n    id: number,\n    siblings: { id: number }[],\n    parentId?: number,\n    parentType?: 'phase' | 'subphase'\n  ) => void;\n  handleDragEnd: (e: React.DragEvent) => void;\n  isDragging: (type: ReorderItemType, id: number) => boolean;\n  getDropPosition: (type: ReorderItemType, id: number) => 'before' | 'after' | null;\n}\n\nconst ReorderContext = createContext<ReorderContextValue | null>(null);\n\nexport function ReorderProvider({ children }: { children: ReactNode }) {\n  const [dragState, setDragState] = useState<DragState | null>(null);\n  const [dropTarget, setDropTarget] = useState<DropTarget | null>(null);\n  const dragImageRef = useRef<HTMLElement | null>(null);\n  \n  const setProjects = useAppStore((s) => s.setProjects);\n\n  const cleanup = useCallback(() => {\n    setDragState(null);\n    setDropTarget(null);\n    if (dragImageRef.current && dragImageRef.current.parentNode) {\n      dragImageRef.current.parentNode.removeChild(dragImageRef.current);\n      dragImageRef.current = null;\n    }\n  }, []);\n\n  const handleDragStart = useCallback((\n    e: React.DragEvent,\n    type: ReorderItemType,\n    id: number,\n    projectId: number,\n    parentId?: number,\n    parentType?: 'phase' | 'subphase'\n  ) => {\n    e.stopPropagation();\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/plain', JSON.stringify({ type, id }));\n    \n    const target = e.currentTarget as HTMLElement;\n    const rect = target.getBoundingClientRect();\n    \n    // Create drag image\n    const clone = target.cloneNode(true) as HTMLElement;\n    clone.style.cssText = `\n      position: absolute;\n      top: -1000px;\n      left: -1000px;\n      width: ${rect.width}px;\n      opacity: 0.9;\n      background: var(--bg-tertiary);\n      border-radius: 4px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.4);\n      pointer-events: none;\n    `;\n    document.body.appendChild(clone);\n    dragImageRef.current = clone;\n    e.dataTransfer.setDragImage(clone, 20, rect.height / 2);\n    \n    setDragState({ type, id, projectId, parentId, parentType });\n    \n    requestAnimationFrame(() => {\n      target.style.opacity = '0.4';\n    });\n  }, []);\n\n  const handleDragOver = useCallback((\n    e: React.DragEvent,\n    type: ReorderItemType,\n    id: number\n  ) => {\n    if (!dragState || dragState.type !== type || dragState.id === id) return;\n    \n    e.preventDefault();\n    e.stopPropagation();\n    e.dataTransfer.dropEffect = 'move';\n    \n    const target = e.currentTarget as HTMLElement;\n    const rect = target.getBoundingClientRect();\n    const midY = rect.top + rect.height / 2;\n    const position = e.clientY < midY ? 'before' : 'after';\n    \n    setDropTarget({ type, id, position });\n  }, [dragState]);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    const relatedTarget = e.relatedTarget as HTMLElement;\n    const currentTarget = e.currentTarget as HTMLElement;\n    if (!currentTarget.contains(relatedTarget)) {\n      setDropTarget(null);\n    }\n  }, []);\n\n  const handleDrop = useCallback(async (\n    e: React.DragEvent,\n    type: ReorderItemType,\n    id: number,\n    siblings: { id: number }[],\n    parentId?: number,\n    parentType?: 'phase' | 'subphase'\n  ) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (!dragState || !dropTarget || dragState.id === id) {\n      cleanup();\n      return;\n    }\n    \n    const currentOrder = siblings.map(s => s.id);\n    const dragIndex = currentOrder.indexOf(dragState.id);\n    let dropIndex = currentOrder.indexOf(id);\n    \n    if (dragIndex === -1 || dropIndex === -1) {\n      cleanup();\n      return;\n    }\n    \n    // Remove and reinsert\n    currentOrder.splice(dragIndex, 1);\n    dropIndex = currentOrder.indexOf(id);\n    if (dropTarget.position === 'after') dropIndex += 1;\n    currentOrder.splice(dropIndex, 0, dragState.id);\n    \n    try {\n      if (type === 'phase') {\n        await apiPut(`/api/projects/${dragState.projectId}/phases/reorder`, {\n          phase_order: currentOrder\n        });\n      } else {\n        await apiPut(`/api/subphases/${parentId}/reorder`, {\n          parent_type: parentType,\n          subphase_order: currentOrder\n        });\n      }\n      \n      // Reload projects to get updated order\n      const updatedProjects = await loadAllProjects();\n      setProjects(updatedProjects);\n    } catch (err) {\n      console.error('Failed to reorder:', err);\n    }\n    \n    cleanup();\n  }, [dragState, dropTarget, cleanup, setProjects]);\n\n  const handleDragEnd = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    const target = e.currentTarget as HTMLElement;\n    target.style.opacity = '';\n    cleanup();\n  }, [cleanup]);\n\n  const isDragging = useCallback((type: ReorderItemType, id: number) => {\n    return dragState?.type === type && dragState?.id === id;\n  }, [dragState]);\n\n  const getDropPosition = useCallback((type: ReorderItemType, id: number) => {\n    if (dropTarget?.type === type && dropTarget?.id === id) {\n      return dropTarget.position;\n    }\n    return null;\n  }, [dropTarget]);\n\n  return (\n    <ReorderContext.Provider value={{\n      dragState,\n      dropTarget,\n      handleDragStart,\n      handleDragOver,\n      handleDragLeave,\n      handleDrop,\n      handleDragEnd,\n      isDragging,\n      getDropPosition,\n    }}>\n      {children}\n    </ReorderContext.Provider>\n  );\n}\n\nexport function useReorder() {\n  const context = useContext(ReorderContext);\n  if (!context) {\n    throw new Error('useReorder must be used within ReorderProvider');\n  }\n  return context;\n}\n","/**\n * AssignmentRow\n * Display a staff or equipment assignment row with type badge\n * Right-click to edit/delete assignment\n */\n\nimport { memo, useCallback } from 'react';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport styles from './AssignmentRow.module.css';\n\ninterface AssignmentRowProps {\n  type: 'staff' | 'equipment' | 'phase-staff' | 'subphase-staff';\n  assignmentId: number;\n  projectId: number;\n  phaseId?: number;\n  subphaseId?: number;\n  staffId?: number;\n  equipmentId?: number;\n  name: string;\n  role?: string;\n  equipmentType?: string;\n  allocation?: number;\n  depth: number;\n  phaseType?: string;\n  phaseColor?: string;\n  startDate?: string;\n  endDate?: string;\n}\n\nexport const AssignmentRow = memo(function AssignmentRow({\n  type,\n  assignmentId,\n  projectId,\n  phaseId,\n  subphaseId,\n  staffId,\n  equipmentId,\n  name,\n  role,\n  equipmentType,\n  allocation,\n  depth,\n  phaseType,\n  phaseColor,\n  startDate,\n  endDate,\n}: AssignmentRowProps) {\n  const showContextMenu = useUIStore((s) => s.showContextMenu);\n  const currentUser = useAppStore((s) => s.currentUser);\n  \n  const canEdit = currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n  \n  const paddingLeft = depth * 16 + 28; // Extra offset for no expand button\n\n  // Handle right-click context menu\n  const handleContextMenu = useCallback((e: React.MouseEvent) => {\n    if (!canEdit) return;\n    \n    e.preventDefault();\n    e.stopPropagation();\n    \n    // Determine if this is a staff or equipment assignment\n    const assignmentType = type === 'equipment' ? 'equipmentAssignment' : 'staffAssignment';\n    \n    showContextMenu(\n      assignmentType,\n      assignmentId,\n      e.clientX,\n      e.clientY,\n      projectId,\n      phaseId,\n      subphaseId,\n      {\n        staffId,\n        equipmentId,\n        name,\n        allocation,\n        startDate,\n        endDate,\n      }\n    );\n  }, [canEdit, showContextMenu, type, assignmentId, projectId, phaseId, subphaseId, staffId, equipmentId, name, allocation, startDate, endDate]);\n\n  // Phase/subphase staff has special styling - shows  and phase type badge\n  if (type === 'phase-staff' || type === 'subphase-staff') {\n    return (\n      <div \n        className={`${styles.row} ${canEdit ? styles.editable : ''}`} \n        style={{ paddingLeft }}\n        onContextMenu={handleContextMenu}\n      >\n        {/* Phase type badge with pin icon */}\n        <span \n          className={styles.typeBadge}\n          style={{ \n            backgroundColor: phaseColor ? `${phaseColor}33` : 'rgba(139, 92, 246, 0.2)',\n            color: phaseColor || 'var(--accent-purple)' \n          }}\n        >\n           {phaseType || (type === 'subphase-staff' ? 'Subphase' : 'Phase')}\n        </span>\n\n        {/* Staff name */}\n        <span className={styles.name} title={name}>\n          {name}\n        </span>\n\n        {/* Allocation */}\n        {allocation !== undefined && (\n          <span className={styles.allocation}>{allocation}%</span>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div \n      className={`${styles.row} ${canEdit ? styles.editable : ''}`} \n      style={{ paddingLeft }}\n      onContextMenu={handleContextMenu}\n    >\n      {/* Type badge */}\n      <span className={`${styles.typeBadge} ${styles[type]}`}>\n        {type === 'staff' ? 'STAFF' : 'EQUIP'}\n      </span>\n\n      {/* Name and role/type */}\n      <span className={styles.name} title={`${name}${role ? ` - ${role}` : ''}${equipmentType ? ` - ${equipmentType}` : ''}`}>\n        {name}\n        {(role || equipmentType) && (\n          <span className={styles.detail}>  {role || equipmentType}</span>\n        )}\n      </span>\n\n      {/* Allocation */}\n      {type === 'staff' && allocation !== undefined && (\n        <span className={styles.allocation}>{allocation}%</span>\n      )}\n    </div>\n  );\n});\n","/**\n * PhantomRow\n * \n * Row in the project panel during phantom sibling mode.\n * Shows \"New Phase/Subphase\" label with cancel button.\n */\n\nimport { useUIStore } from '@/stores/uiStore';\nimport styles from './PhantomRow.module.css';\n\ninterface PhantomRowProps {\n  onComplete: () => void;\n  onCancel: () => void;\n}\n\nexport function PhantomRow({ onComplete, onCancel }: PhantomRowProps) {\n  const phantomSiblingMode = useUIStore((s) => s.phantomSiblingMode);\n\n  if (!phantomSiblingMode) return null;\n\n  const { type, phantomColor, dependencyType } = phantomSiblingMode;\n  const depLabel = dependencyType === 'SS' ? 'Start-to-Start' : 'Finish-to-Start';\n\n  return (\n    <div \n      className={styles.phantomRow}\n      onClick={(e) => {\n        // Clicking anywhere on the row (except cancel) completes the phantom\n        if (!(e.target as HTMLElement).closest(`.${styles.cancelBtn}`)) {\n          e.stopPropagation();\n          onComplete();\n        }\n      }}\n    >\n      <span\n        className={styles.typeBadge}\n        style={{\n          backgroundColor: `${phantomColor}40`,\n          color: phantomColor,\n        }}\n      >\n        New {type === 'phase' ? 'Phase' : 'Subphase'}\n      </span>\n      <span className={styles.instructions}>\n        Move & click to place... ({depLabel})\n      </span>\n      <button\n        className={styles.cancelBtn}\n        onClick={(e) => {\n          e.stopPropagation();\n          onCancel();\n        }}\n        title=\"Cancel (Esc)\"\n      >\n        <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n          <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n          <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n        </svg>\n      </button>\n    </div>\n  );\n}\n\nexport default PhantomRow;\n","/**\n * CompletionSlider\n * A popover slider for setting completion percentage (0-100% in 5% increments)\n */\n\nimport { useState, useRef, useEffect } from 'react';\nimport styles from './CompletionSlider.module.css';\n\ninterface CompletionSliderProps {\n  value: number | null;\n  onChange: (value: number) => void;\n  onClose: () => void;\n  anchorEl: HTMLElement | null;\n  isCalculated?: boolean;\n}\n\nexport function CompletionSlider({\n  value,\n  onChange,\n  onClose,\n  anchorEl,\n  isCalculated = false,\n}: CompletionSliderProps) {\n  const [sliderValue, setSliderValue] = useState(value ?? 0);\n  const popoverRef = useRef<HTMLDivElement>(null);\n\n  // Position the popover near the anchor element\n  useEffect(() => {\n    if (!anchorEl || !popoverRef.current) return;\n\n    const rect = anchorEl.getBoundingClientRect();\n    const popover = popoverRef.current;\n    \n    // Position below the anchor\n    popover.style.top = `${rect.bottom + 8}px`;\n    popover.style.left = `${rect.left}px`;\n\n    // Adjust if it would go off screen\n    const popoverRect = popover.getBoundingClientRect();\n    if (popoverRect.right > window.innerWidth - 16) {\n      popover.style.left = `${window.innerWidth - popoverRect.width - 16}px`;\n    }\n    if (popoverRect.bottom > window.innerHeight - 16) {\n      popover.style.top = `${rect.top - popoverRect.height - 8}px`;\n    }\n  }, [anchorEl]);\n\n  // Close on click outside\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (popoverRef.current && !popoverRef.current.contains(e.target as Node)) {\n        onClose();\n      }\n    };\n\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    document.addEventListener('keydown', handleEscape);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n      document.removeEventListener('keydown', handleEscape);\n    };\n  }, [onClose]);\n\n  const handleSliderChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = parseInt(e.target.value, 10);\n    // Round to nearest 5\n    const rounded = Math.round(newValue / 5) * 5;\n    setSliderValue(rounded);\n  };\n\n  const handleApply = () => {\n    onChange(sliderValue);\n    onClose();\n  };\n\n  const handleClear = () => {\n    onChange(-1); // -1 signals to clear the value\n    onClose();\n  };\n\n  // Quick select buttons\n  const quickValues = [0, 25, 50, 75, 100];\n\n  return (\n    <div ref={popoverRef} className={styles.popover}>\n      <div className={styles.header}>\n        <span className={styles.title}>Set Completion</span>\n        {isCalculated && (\n          <span className={styles.calculatedNote}>\n            Currently calculated from children\n          </span>\n        )}\n      </div>\n\n      <div className={styles.sliderContainer}>\n        {/* Large percentage display */}\n        <div className={styles.valueDisplay}>{sliderValue}%</div>\n        \n        {/* Slider with filled track */}\n        <div className={styles.sliderWrapper}>\n          <div \n            className={styles.sliderTrack} \n            style={{ width: `${sliderValue}%` }}\n          />\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"100\"\n            step=\"5\"\n            value={sliderValue}\n            onChange={handleSliderChange}\n            className={styles.sliderInput}\n          />\n        </div>\n        \n        {/* Tick marks */}\n        <div className={styles.tickMarks}>\n          <span className={styles.tick}>0</span>\n          <span className={styles.tick}>25</span>\n          <span className={styles.tick}>50</span>\n          <span className={styles.tick}>75</span>\n          <span className={styles.tick}>100</span>\n        </div>\n      </div>\n\n      <div className={styles.quickSelect}>\n        {quickValues.map((v) => (\n          <button\n            key={v}\n            type=\"button\"\n            className={`${styles.quickBtn} ${sliderValue === v ? styles.active : ''}`}\n            onClick={() => setSliderValue(v)}\n          >\n            {v}%\n          </button>\n        ))}\n      </div>\n\n      <div className={styles.actions}>\n        <button type=\"button\" className={styles.clearBtn} onClick={handleClear}>\n          Clear\n        </button>\n        <button type=\"button\" className={styles.applyBtn} onClick={handleApply}>\n          Apply\n        </button>\n      </div>\n    </div>\n  );\n}\n","/**\n * CustomColumnCell Component\n * Renders the appropriate cell type based on column configuration\n * Supports: text, boolean (checkbox), and list (dropdown)\n * Features: Cascade to children on value change\n */\n\nimport { useState, useRef, useEffect, useCallback } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { setCustomColumnValue as setCustomColumnValueApi, getValueKey } from '@/api';\nimport type { CustomColumn, CustomColumnEntityType } from '@/types';\nimport styles from './CustomColumnCell.module.css';\n\n// Child entity info for cascading values\ninterface ChildEntity {\n  entityType: CustomColumnEntityType;\n  entityId: number;\n}\n\ninterface CustomColumnCellProps {\n  column: CustomColumn;\n  entityType: CustomColumnEntityType;\n  entityId: number;\n  readOnly?: boolean;\n  // All descendant entities to cascade value changes to\n  childEntities?: ChildEntity[];\n}\n\nexport function CustomColumnCell({ \n  column, \n  entityType, \n  entityId,\n  readOnly = false,\n  childEntities = [],\n}: CustomColumnCellProps) {\n  const customColumnValues = useAppStore((s) => s.customColumnValues);\n  const setCustomColumnValueLocal = useAppStore((s) => s.setCustomColumnValue);\n  \n  const valueKey = getValueKey(column.id, entityType, entityId);\n  const value = customColumnValues[valueKey] ?? null;\n  \n  const handleChange = useCallback(async (newValue: string | null) => {\n    // Update local state immediately for responsiveness - this entity\n    setCustomColumnValueLocal(column.id, entityType, entityId, newValue);\n    \n    // Also update all child entities (cascade)\n    for (const child of childEntities) {\n      setCustomColumnValueLocal(column.id, child.entityType, child.entityId, newValue);\n    }\n    \n    // Persist to server - this entity\n    try {\n      await setCustomColumnValueApi({\n        custom_column_id: column.id,\n        entity_type: entityType,\n        entity_id: entityId,\n        value: newValue,\n      });\n      \n      // Persist all children to server\n      for (const child of childEntities) {\n        await setCustomColumnValueApi({\n          custom_column_id: column.id,\n          entity_type: child.entityType,\n          entity_id: child.entityId,\n          value: newValue,\n        });\n      }\n    } catch (err) {\n      console.error('[CustomColumnCell] Failed to save value:', err);\n    }\n  }, [column.id, entityType, entityId, setCustomColumnValueLocal, childEntities]);\n  \n  // Render cell content based on type\n  const renderCellContent = () => {\n    switch (column.column_type) {\n      case 'boolean':\n        return (\n          <BooleanCell \n            value={value} \n            onChange={handleChange} \n            readOnly={readOnly}\n          />\n        );\n      case 'list':\n        return (\n          <ListCell \n            value={value} \n            options={column.list_options || []}\n            onChange={handleChange}\n            readOnly={readOnly}\n          />\n        );\n      default:\n        return (\n          <TextCell \n            value={value} \n            onChange={handleChange}\n            readOnly={readOnly}\n          />\n        );\n    }\n  };\n  \n  return (\n    <div className={styles.cellWrapper}>\n      {renderCellContent()}\n    </div>\n  );\n}\n\n// =============================================================================\n// TEXT CELL\n// =============================================================================\n\ninterface TextCellProps {\n  value: string | null;\n  onChange: (value: string | null) => void;\n  readOnly?: boolean;\n}\n\nfunction TextCell({ value, onChange, readOnly }: TextCellProps) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editValue, setEditValue] = useState(value || '');\n  const inputRef = useRef<HTMLInputElement>(null);\n  \n  useEffect(() => {\n    if (isEditing && inputRef.current) {\n      inputRef.current.focus();\n      inputRef.current.select();\n    }\n  }, [isEditing]);\n  \n  const handleClick = () => {\n    if (!readOnly) {\n      setEditValue(value || '');\n      setIsEditing(true);\n    }\n  };\n  \n  const handleBlur = () => {\n    setIsEditing(false);\n    const trimmed = editValue.trim();\n    if (trimmed !== (value || '')) {\n      onChange(trimmed || null);\n    }\n  };\n  \n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleBlur();\n    } else if (e.key === 'Escape') {\n      setIsEditing(false);\n      setEditValue(value || '');\n    }\n  };\n  \n  if (isEditing) {\n    return (\n      <input\n        ref={inputRef}\n        type=\"text\"\n        className={styles.textInput}\n        value={editValue}\n        onChange={(e) => setEditValue(e.target.value)}\n        onBlur={handleBlur}\n        onKeyDown={handleKeyDown}\n      />\n    );\n  }\n  \n  return (\n    <div \n      className={`${styles.textCell} ${!value ? styles.empty : ''} ${readOnly ? styles.readOnly : ''}`}\n      onClick={handleClick}\n      title={value || 'Click to edit'}\n    >\n      <span className={styles.cellText}>{value || ''}</span>\n    </div>\n  );\n}\n\n// =============================================================================\n// BOOLEAN CELL\n// =============================================================================\n\ninterface BooleanCellProps {\n  value: string | null;\n  onChange: (value: string | null) => void;\n  readOnly?: boolean;\n}\n\nfunction BooleanCell({ value, onChange, readOnly }: BooleanCellProps) {\n  const isChecked = value?.toLowerCase() === 'true';\n  \n  const handleToggle = () => {\n    if (!readOnly) {\n      onChange(isChecked ? 'false' : 'true');\n    }\n  };\n  \n  return (\n    <div \n      className={`${styles.booleanCell} ${readOnly ? styles.readOnly : ''}`}\n      onClick={handleToggle}\n    >\n      <div className={`${styles.checkbox} ${isChecked ? styles.checked : ''}`}>\n        {isChecked && (\n          <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\">\n            <polyline points=\"20 6 9 17 4 12\" />\n          </svg>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// =============================================================================\n// LIST CELL\n// =============================================================================\n\ninterface ListCellProps {\n  value: string | null;\n  options: string[];\n  onChange: (value: string | null) => void;\n  readOnly?: boolean;\n}\n\nfunction ListCell({ value, options, onChange, readOnly }: ListCellProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const cellRef = useRef<HTMLDivElement>(null);\n  \n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (cellRef.current && !cellRef.current.contains(e.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n    \n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen]);\n  \n  const handleSelect = (option: string) => {\n    onChange(option);\n    setIsOpen(false);\n  };\n  \n  const handleClear = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    onChange(null);\n    setIsOpen(false);\n  };\n  \n  return (\n    <div \n      ref={cellRef}\n      className={`${styles.listCell} ${readOnly ? styles.readOnly : ''}`}\n    >\n      <div \n        className={`${styles.listValue} ${!value ? styles.empty : ''}`}\n        onClick={() => !readOnly && setIsOpen(!isOpen)}\n      >\n        <span>{value || ''}</span>\n        {!readOnly && (\n          <svg \n            className={`${styles.chevron} ${isOpen ? styles.open : ''}`}\n            width=\"12\" \n            height=\"12\" \n            viewBox=\"0 0 24 24\" \n            fill=\"none\" \n            stroke=\"currentColor\" \n            strokeWidth=\"2\"\n          >\n            <polyline points=\"6 9 12 15 18 9\" />\n          </svg>\n        )}\n      </div>\n      \n      {isOpen && (\n        <div className={styles.dropdown}>\n          {value && (\n            <div \n              className={styles.clearOption}\n              onClick={handleClear}\n            >\n              Clear selection\n            </div>\n          )}\n          {options.map((option) => (\n            <div\n              key={option}\n              className={`${styles.option} ${option === value ? styles.selected : ''}`}\n              onClick={() => handleSelect(option)}\n            >\n              {option}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * CustomColumnHeader Component\n * Displays the column header with resize handle, filter dropdown, and context menu\n */\n\nimport { useRef, useState, useCallback, useEffect, useMemo } from 'react';\nimport { updateCustomColumn } from '@/api';\nimport { useAppStore } from '@/stores/appStore';\nimport type { CustomColumn } from '@/types';\nimport styles from './CustomColumnHeader.module.css';\n\ninterface CustomColumnHeaderProps {\n  column: CustomColumn;\n  onEdit: (column: CustomColumn) => void;\n  onWidthChange: (columnId: number, width: number) => void;\n}\n\nexport function CustomColumnHeader({ \n  column, \n  onEdit,\n  onWidthChange \n}: CustomColumnHeaderProps) {\n  const headerRef = useRef<HTMLDivElement>(null);\n  const [isResizing, setIsResizing] = useState(false);\n  const [showFilter, setShowFilter] = useState(false);\n  \n  const customColumnValues = useAppStore((s) => s.customColumnValues);\n  const customColumnFilters = useAppStore((s) => s.customColumnFilters);\n  const setCustomColumnFilter = useAppStore((s) => s.setCustomColumnFilter);\n  const clearCustomColumnFilter = useAppStore((s) => s.clearCustomColumnFilter);\n  \n  const activeFilter = customColumnFilters[column.id] || [];\n  const hasActiveFilter = activeFilter.length > 0;\n  \n  // Get unique values for this column from all entities\n  const uniqueValues = useMemo(() => {\n    const values = new Set<string>();\n    Object.entries(customColumnValues).forEach(([key, value]) => {\n      if (key.startsWith(`${column.id}-`) && value) {\n        values.add(value);\n      }\n    });\n    return Array.from(values).sort();\n  }, [column.id, customColumnValues]);\n  \n  // Close filter when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (headerRef.current && !headerRef.current.contains(e.target as Node)) {\n        setShowFilter(false);\n      }\n    };\n    \n    if (showFilter) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showFilter]);\n  \n  const handleMouseDown = useCallback((e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    const startX = e.clientX;\n    const startWidth = column.width;\n    \n    setIsResizing(true);\n    \n    const handleMouseMove = (moveEvent: MouseEvent) => {\n      const delta = moveEvent.clientX - startX;\n      const newWidth = Math.max(60, Math.min(400, startWidth + delta));\n      onWidthChange(column.id, newWidth);\n    };\n    \n    const handleMouseUp = async () => {\n      setIsResizing(false);\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      \n      // Persist the new width\n      try {\n        await updateCustomColumn(column.id, { width: column.width });\n      } catch (err) {\n        console.error('[CustomColumnHeader] Failed to save width:', err);\n      }\n    };\n    \n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  }, [column.id, column.width, onWidthChange]);\n  \n  const handleDoubleClick = () => {\n    onEdit(column);\n  };\n  \n  const handleFilterClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    setShowFilter(!showFilter);\n  };\n  \n  const handleFilterToggle = (value: string) => {\n    const newFilter = activeFilter.includes(value)\n      ? activeFilter.filter(v => v !== value)\n      : [...activeFilter, value];\n    \n    if (newFilter.length === 0) {\n      clearCustomColumnFilter(column.id);\n    } else {\n      setCustomColumnFilter(column.id, newFilter);\n    }\n  };\n  \n  const handleClearFilter = () => {\n    clearCustomColumnFilter(column.id);\n    setShowFilter(false);\n  };\n  \n  const handleSelectAll = () => {\n    setCustomColumnFilter(column.id, uniqueValues);\n  };\n  \n  // Get icon based on column type\n  const getTypeIcon = () => {\n    switch (column.column_type) {\n      case 'boolean':\n        return (\n          <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\n            <polyline points=\"9 11 12 14 22 4\" />\n          </svg>\n        );\n      case 'list':\n        return (\n          <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <polyline points=\"6 9 12 15 18 9\" />\n          </svg>\n        );\n      default:\n        return (\n          <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <line x1=\"17\" y1=\"10\" x2=\"3\" y2=\"10\" />\n            <line x1=\"21\" y1=\"6\" x2=\"3\" y2=\"6\" />\n            <line x1=\"21\" y1=\"14\" x2=\"3\" y2=\"14\" />\n            <line x1=\"17\" y1=\"18\" x2=\"3\" y2=\"18\" />\n          </svg>\n        );\n    }\n  };\n  \n  return (\n    <div \n      ref={headerRef}\n      className={`${styles.header} ${isResizing ? styles.resizing : ''} ${hasActiveFilter ? styles.filtered : ''}`}\n      style={{ width: column.width }}\n      onDoubleClick={handleDoubleClick}\n      title={`${column.name} (double-click to edit)`}\n    >\n      <div className={styles.content}>\n        <span className={styles.icon}>{getTypeIcon()}</span>\n        <span className={styles.name}>{column.name}</span>\n      </div>\n      \n      {/* Filter button */}\n      <button\n        className={`${styles.filterBtn} ${hasActiveFilter ? styles.active : ''}`}\n        onClick={handleFilterClick}\n        title=\"Filter column\"\n      >\n        <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n          <polygon points=\"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\" />\n        </svg>\n      </button>\n      \n      {/* Filter dropdown */}\n      {showFilter && (\n        <div className={styles.filterDropdown}>\n          <div className={styles.filterHeader}>\n            <span>Filter by value</span>\n            {hasActiveFilter && (\n              <button className={styles.clearFilterBtn} onClick={handleClearFilter}>\n                Clear\n              </button>\n            )}\n          </div>\n          \n          {uniqueValues.length === 0 ? (\n            <div className={styles.filterEmpty}>No values</div>\n          ) : (\n            <>\n              <div className={styles.filterActions}>\n                <button onClick={handleSelectAll}>Select All</button>\n                <button onClick={handleClearFilter}>Clear All</button>\n              </div>\n              <div className={styles.filterOptions}>\n                {/* Empty/null option */}\n                <label className={styles.filterOption}>\n                  <input\n                    type=\"checkbox\"\n                    checked={activeFilter.includes('__empty__')}\n                    onChange={() => handleFilterToggle('__empty__')}\n                  />\n                  <span className={styles.filterValueEmpty}>(Empty)</span>\n                </label>\n                {uniqueValues.map(value => (\n                  <label key={value} className={styles.filterOption}>\n                    <input\n                      type=\"checkbox\"\n                      checked={activeFilter.includes(value)}\n                      onChange={() => handleFilterToggle(value)}\n                    />\n                    <span className={styles.filterValue}>\n                      {column.column_type === 'boolean' \n                        ? (value === 'true' ? ' Yes' : ' No')\n                        : value\n                      }\n                    </span>\n                  </label>\n                ))}\n              </div>\n            </>\n          )}\n        </div>\n      )}\n      \n      <div \n        className={styles.resizeHandle}\n        onMouseDown={handleMouseDown}\n      />\n    </div>\n  );\n}\n","/**\n * Date Utilities\n * Common date manipulation functions used throughout the application\n */\n\nimport { \n  format, \n  parse, \n  addDays, \n  addWeeks, \n  addMonths, \n  startOfWeek, \n  endOfWeek,\n  startOfMonth,\n  endOfMonth,\n  startOfQuarter,\n  endOfQuarter,\n  startOfYear,\n  endOfYear,\n  differenceInDays,\n  differenceInWeeks,\n  differenceInMonths,\n  isWeekend,\n  isSameDay,\n  isWithinInterval,\n  getWeek,\n  getYear,\n} from 'date-fns';\n\n// =============================================================================\n// DATE FORMATTING\n// =============================================================================\n\n/**\n * Format a date as YYYY-MM-DD (ISO date string without time)\n */\nexport function formatDateISO(date: Date): string {\n  return format(date, 'yyyy-MM-dd');\n}\n\n/**\n * Convert any date string to YYYY-MM-DD format for HTML date inputs\n * Handles ISO datetime strings (2024-02-27T00:00:00.000Z) and date strings (2024-02-27)\n */\nexport function toInputDateFormat(dateString: string | null | undefined): string {\n  if (!dateString) return '';\n  // If it contains 'T', it's an ISO datetime - extract the date part\n  if (dateString.includes('T')) {\n    return dateString.split('T')[0];\n  }\n  // Already in YYYY-MM-DD format\n  return dateString;\n}\n\n/**\n * Format a date for display using browser locale (e.g., \"Jan 15, 2025\" or \"15 Jan 2025\")\n */\nexport function formatDateDisplay(date: Date): string {\n  const formatter = new Intl.DateTimeFormat(undefined, {\n    day: 'numeric',\n    month: 'short',\n    year: 'numeric',\n  });\n  return formatter.format(date);\n}\n\n/**\n * Format a date for short display (e.g., \"Jan 15\" or \"15 Jan\")\n */\nexport function formatDateShort(date: Date): string {\n  const formatter = new Intl.DateTimeFormat(undefined, {\n    day: 'numeric',\n    month: 'short',\n  });\n  return formatter.format(date);\n}\n\n/**\n * Get the browser's locale\n */\nfunction getBrowserLocale(): string {\n  return navigator.language || 'en-US';\n}\n\n/**\n * Format a date for short display using the browser's locale\n * Uses Intl.DateTimeFormat to respect the user's system preferences\n * @param date - The date to format\n * @returns Formatted date string like \"15 Jan\" (EU) or \"Jan 15\" (US) depending on locale\n */\nexport function formatDateShortLocale(date: Date): string {\n  const locale = getBrowserLocale();\n  \n  // Use Intl.DateTimeFormat to format according to user's locale\n  const formatter = new Intl.DateTimeFormat(locale, {\n    day: 'numeric',\n    month: 'short',\n  });\n  \n  return formatter.format(date);\n}\n\n/**\n * Format a date range for display in project panel\n * Uses browser locale for formatting\n * @param startDate - Start date string (ISO format)\n * @param endDate - End date string (ISO format)\n * @returns Formatted date range like \"15 Jan - 28 Feb\" (EU) or \"Jan 15 - Feb 28\" (US)\n */\nexport function formatShortDateRange(startDate: string, endDate: string): string {\n  const start = new Date(startDate);\n  const end = new Date(endDate);\n  \n  const startFormatted = formatDateShortLocale(start);\n  const endFormatted = formatDateShortLocale(end);\n  \n  return `${startFormatted} - ${endFormatted}`;\n}\n\n/**\n * Format a single date for display in project panel\n * Uses browser locale for formatting\n * @param dateString - Date string (ISO format)\n * @returns Formatted date string\n */\nexport function formatSingleDate(dateString: string): string {\n  const date = new Date(dateString);\n  return formatDateShortLocale(date);\n}\n\n/**\n * Format a date for timeline header (e.g., \"January 2025\")\n */\nexport function formatMonthYear(date: Date): string {\n  return format(date, 'MMMM yyyy');\n}\n\n/**\n * Format a date for week display (e.g., \"W3\")\n */\nexport function formatWeekNumber(date: Date): string {\n  return `W${getWeek(date, { weekStartsOn: 1 })}`;\n}\n\n/**\n * Format quarter display (e.g., \"Q1 2025\")\n */\nexport function formatQuarter(date: Date): string {\n  const quarter = Math.floor(date.getMonth() / 3) + 1;\n  return `Q${quarter} ${getYear(date)}`;\n}\n\n// =============================================================================\n// DATE PARSING\n// =============================================================================\n\n/**\n * Parse an ISO date string to a Date object\n */\nexport function parseDateISO(dateString: string): Date {\n  return parse(dateString, 'yyyy-MM-dd', new Date());\n}\n\n/**\n * Parse a date string, handling both ISO and other common formats\n */\nexport function parseDate(dateString: string): Date {\n  // Handle ISO format\n  if (dateString.includes('T')) {\n    return new Date(dateString);\n  }\n  // Handle YYYY-MM-DD format\n  return parseDateISO(dateString);\n}\n\n// =============================================================================\n// DATE CALCULATIONS\n// =============================================================================\n\n/**\n * Get the Monday of the week containing the given date\n */\nexport function getWeekStart(date: Date): Date {\n  return startOfWeek(date, { weekStartsOn: 1 });\n}\n\n/**\n * Get the Sunday of the week containing the given date\n */\nexport function getWeekEnd(date: Date): Date {\n  return endOfWeek(date, { weekStartsOn: 1 });\n}\n\n/**\n * Calculate the number of business days between two dates\n */\nexport function getBusinessDaysBetween(start: Date, end: Date): number {\n  let count = 0;\n  const current = new Date(start);\n  \n  while (current <= end) {\n    if (!isWeekend(current)) {\n      count++;\n    }\n    current.setDate(current.getDate() + 1);\n  }\n  \n  return count;\n}\n\n/**\n * Add business days to a date\n */\nexport function addBusinessDays(date: Date, days: number): Date {\n  const result = new Date(date);\n  let remaining = days;\n  \n  while (remaining > 0) {\n    result.setDate(result.getDate() + 1);\n    if (!isWeekend(result)) {\n      remaining--;\n    }\n  }\n  \n  return result;\n}\n\n/**\n * Get the ISO week number (1-52/53)\n */\nexport function getISOWeekNumber(date: Date): number {\n  return getWeek(date, { weekStartsOn: 1 });\n}\n\n// =============================================================================\n// DATE RANGE HELPERS\n// =============================================================================\n\n/**\n * Check if a date falls within a range\n */\nexport function isDateInRange(date: Date, start: Date, end: Date): boolean {\n  return isWithinInterval(date, { start, end });\n}\n\n/**\n * Check if two date ranges overlap\n */\nexport function doRangesOverlap(\n  start1: Date, \n  end1: Date, \n  start2: Date, \n  end2: Date\n): boolean {\n  return start1 <= end2 && end1 >= start2;\n}\n\n/**\n * Get the overlap between two date ranges (or null if no overlap)\n */\nexport function getRangeOverlap(\n  start1: Date,\n  end1: Date,\n  start2: Date,\n  end2: Date\n): { start: Date; end: Date } | null {\n  if (!doRangesOverlap(start1, end1, start2, end2)) {\n    return null;\n  }\n  \n  return {\n    start: new Date(Math.max(start1.getTime(), start2.getTime())),\n    end: new Date(Math.min(end1.getTime(), end2.getTime())),\n  };\n}\n\n// =============================================================================\n// PERIOD NAVIGATION\n// =============================================================================\n\n/**\n * Navigate to the next/previous period based on view mode\n */\nexport function navigateDate(\n  date: Date, \n  direction: 1 | -1, \n  viewMode: 'week' | 'month' | 'quarter' | 'year'\n): Date {\n  switch (viewMode) {\n    case 'week':\n      return addWeeks(date, direction);\n    case 'month':\n      return addMonths(date, direction);\n    case 'quarter':\n      return addMonths(date, direction * 3);\n    case 'year':\n      return addMonths(date, direction * 12);\n    default:\n      return addMonths(date, direction);\n  }\n}\n\n/**\n * Get the display label for the current period\n */\nexport function getPeriodLabel(date: Date, viewMode: 'week' | 'month' | 'quarter' | 'year'): string {\n  switch (viewMode) {\n    case 'week':\n      return `Week ${getISOWeekNumber(date)}, ${getYear(date)}`;\n    case 'month':\n      return formatMonthYear(date);\n    case 'quarter':\n      return formatQuarter(date);\n    case 'year':\n      return getYear(date).toString();\n    default:\n      return formatMonthYear(date);\n  }\n}\n\n// =============================================================================\n// TIMELINE RANGE CALCULATION\n// =============================================================================\n\n/**\n * Get the start and end dates for the visible timeline range\n */\nexport function getTimelineRange(\n  centerDate: Date,\n  viewMode: 'week' | 'month' | 'quarter' | 'year',\n  periodsBefore: number = 4,\n  periodsAfter: number = 4\n): { start: Date; end: Date } {\n  let start: Date;\n  let end: Date;\n  \n  switch (viewMode) {\n    case 'week':\n      start = addWeeks(getWeekStart(centerDate), -periodsBefore);\n      end = addWeeks(getWeekEnd(centerDate), periodsAfter);\n      break;\n    case 'month':\n      start = startOfMonth(addMonths(centerDate, -periodsBefore));\n      end = endOfMonth(addMonths(centerDate, periodsAfter));\n      break;\n    case 'quarter':\n      start = startOfQuarter(addMonths(centerDate, -periodsBefore * 3));\n      end = endOfQuarter(addMonths(centerDate, periodsAfter * 3));\n      break;\n    case 'year':\n      start = startOfYear(addMonths(centerDate, -periodsBefore * 12));\n      end = endOfYear(addMonths(centerDate, periodsAfter * 12));\n      break;\n    default:\n      start = startOfMonth(addMonths(centerDate, -periodsBefore));\n      end = endOfMonth(addMonths(centerDate, periodsAfter));\n  }\n  \n  return { start, end };\n}\n\n// =============================================================================\n// RE-EXPORTS FROM DATE-FNS\n// =============================================================================\n\nexport {\n  format,\n  addDays,\n  addWeeks,\n  addMonths,\n  startOfWeek,\n  endOfWeek,\n  startOfMonth,\n  endOfMonth,\n  startOfQuarter,\n  endOfQuarter,\n  startOfYear,\n  endOfYear,\n  differenceInDays,\n  differenceInWeeks,\n  differenceInMonths,\n  isWeekend,\n  isSameDay,\n  isWithinInterval,\n  getWeek,\n  getYear,\n};\n","/**\n * SubphaseRow\n * A subphase row within a phase with WBS level indicator\n * Supports drag-and-drop reordering\n */\n\nimport { memo, useMemo, useCallback, useState, Fragment } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useReorder } from '@/contexts/ReorderContext';\nimport { AssignmentRow } from './AssignmentRow';\nimport { PhantomRow } from './PhantomRow';\nimport { usePhantomSibling } from '@/hooks';\nimport { CompletionSlider } from '@/components/gantt/CompletionSlider';\nimport { CustomColumnCell } from '@/components/gantt/CustomColumns';\nimport { updateSubphase } from '@/api/endpoints/projects';\nimport { formatShortDateRange, formatSingleDate } from '@/utils/date';\nimport type { Subphase, CustomColumn, CustomColumnEntityType } from '@/types';\nimport styles from './SubphaseRow.module.css';\n\n// Child entity info for cascading values\ninterface ChildEntity {\n  entityType: CustomColumnEntityType;\n  entityId: number;\n}\n\n// Collect all descendant subphase IDs recursively\nfunction collectAllDescendants(subphases: Subphase[]): ChildEntity[] {\n  const result: ChildEntity[] = [];\n  \n  function traverse(items: Subphase[]) {\n    for (const sp of items) {\n      result.push({ entityType: 'subphase', entityId: sp.id });\n      if (sp.children && sp.children.length > 0) {\n        traverse(sp.children);\n      }\n    }\n  }\n  \n  traverse(subphases);\n  return result;\n}\n\ninterface SubphaseRowProps {\n  subphase: Subphase;\n  phaseId: number;\n  projectId: number;\n  depth: number;\n  wbsLevel?: number; // WBS level for display (defaults to 1 for first subphase)\n  siblings: Subphase[];  // Sibling subphases for reorder context\n  parentId: number;      // Parent ID (phase or subphase)\n  parentType: 'phase' | 'subphase';\n  customColumns?: CustomColumn[];\n  nameColumnWidth: number;\n  criticalPathItems?: Set<string>;  // Critical path items for this project\n}\n\n// Recursively calculate effective completion for an item\n// If at least one child has a completion value, unset siblings count as 0%\nfunction getEffectiveCompletion(item: Subphase): { completion: number | null; isCalculated: boolean } {\n  if (!item) return { completion: null, isCalculated: false };\n  \n  const children = item.children || [];\n  \n  // Check if any children have completion (direct or calculated)\n  let hasChildrenWithCompletion = false;\n  for (const child of children) {\n    if (!child) continue;\n    const childResult = getEffectiveCompletion(child);\n    if (childResult && childResult.completion !== null) {\n      hasChildrenWithCompletion = true;\n      break;\n    }\n  }\n  \n  if (hasChildrenWithCompletion) {\n    // Calculate weighted average from children's effective completion\n    // Children without completion count as 0%\n    let totalWeight = 0;\n    let weightedSum = 0;\n    \n    for (const child of children) {\n      if (!child) continue;\n      const childResult = getEffectiveCompletion(child);\n      const days = Math.max(1, Math.ceil((new Date(child.end_date).getTime() - new Date(child.start_date).getTime()) / (1000*60*60*24)));\n      \n      // Unset completion counts as 0% when at least one sibling has a value\n      const completion = childResult.completion ?? 0;\n      weightedSum += completion * days;\n      totalWeight += days;\n    }\n    \n    if (totalWeight > 0) {\n      return { completion: Math.round(weightedSum / totalWeight), isCalculated: true };\n    }\n  }\n  \n  // No children with completion, return item's own completion\n  return { completion: item.completion ?? null, isCalculated: false };\n}\n\nexport const SubphaseRow = memo(function SubphaseRow({\n  subphase,\n  phaseId,\n  projectId,\n  depth,\n  wbsLevel = 1, // Default to L1 for first subphase\n  siblings,\n  parentId,\n  parentType,\n  customColumns = [],\n  nameColumnWidth,\n  criticalPathItems = new Set(),\n}: SubphaseRowProps) {\n  const expandedSubphases = useAppStore((s) => s.expandedSubphases);\n  const toggleSubphaseExpanded = useAppStore((s) => s.toggleSubphaseExpanded);\n  const staff = useAppStore((s) => s.staff);\n  const equipment = useAppStore((s) => s.equipment);\n  const currentUser = useAppStore((s) => s.currentUser);\n  const showAssignments = useAppStore((s) => s.showAssignments);\n  const openSubphaseModal = useUIStore((s) => s.openSubphaseModal);\n  const triggerScrollToDate = useUIStore((s) => s.triggerScrollToDate);\n  const projects = useAppStore((s) => s.projects);\n  const setProjects = useAppStore((s) => s.setProjects);\n  \n  const canEdit = currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n  \n  // Completion slider state\n  const [sliderAnchor, setSliderAnchor] = useState<HTMLElement | null>(null);\n  const showSlider = Boolean(sliderAnchor);\n  \n  // Reorder hooks\n  const {\n    handleDragStart,\n    handleDragOver,\n    handleDragLeave,\n    handleDrop,\n    handleDragEnd,\n    isDragging,\n    getDropPosition,\n  } = useReorder();\n\n  const isExpanded = expandedSubphases.has(subphase.id);\n\n  const handleToggle = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    toggleSubphaseExpanded(subphase.id);\n  };\n\n  const handleEdit = () => {\n    openSubphaseModal(subphase, phaseId, projectId);\n  };\n\n  // Handle clicking on the level indicator to scroll to start date\n  const handleLevelClick = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    triggerScrollToDate(subphase.start_date);\n  }, [subphase.start_date, triggerScrollToDate]);\n\n  // Handle clicking on completion badge to show slider\n  const handleCompletionClick = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    // Don't show slider if calculated from children\n    const result = getEffectiveCompletion(subphase);\n    if (result.isCalculated) return;\n    setSliderAnchor(e.currentTarget as HTMLElement);\n  }, [subphase]);\n\n  // Helper to update subphase in project tree\n  const updateSubphaseInTree = useCallback((subphases: Subphase[], targetId: number, newCompletion: number | null): Subphase[] => {\n    return subphases.map(sp => {\n      if (sp.id === targetId) {\n        return { ...sp, completion: newCompletion };\n      }\n      if (sp.children && sp.children.length > 0) {\n        return { ...sp, children: updateSubphaseInTree(sp.children, targetId, newCompletion) };\n      }\n      return sp;\n    });\n  }, []);\n\n  // Handle completion change from slider\n  const handleCompletionChange = useCallback(async (value: number) => {\n    try {\n      const newCompletion = value === -1 ? null : value;\n      await updateSubphase(subphase.id, { completion: newCompletion });\n      \n      // Update local state optimistically\n      const updatedProjects = projects.map(p => {\n        if (p.id !== projectId) return p;\n        return {\n          ...p,\n          phases: p.phases?.map(ph => {\n            if (ph.id !== phaseId) return ph;\n            return {\n              ...ph,\n              children: updateSubphaseInTree(ph.children || [], subphase.id, newCompletion)\n            };\n          })\n        };\n      });\n      setProjects(updatedProjects);\n    } catch (err) {\n      console.error('Failed to update completion:', err);\n    }\n  }, [subphase.id, projectId, phaseId, projects, setProjects, updateSubphaseInTree]);\n\n  const hasChildren =\n    (subphase.children?.length ?? 0) > 0 ||\n    (subphase.staffAssignments?.length ?? 0) > 0 ||\n    (subphase.equipmentAssignments?.length ?? 0) > 0;\n\n  const paddingLeft = depth * 16 + 8;\n\n  // Format date display using browser locale\n  const dateDisplay = useMemo(() => {\n    if (subphase.is_milestone) {\n      return formatSingleDate(subphase.start_date);\n    }\n    return formatShortDateRange(subphase.start_date, subphase.end_date);\n  }, [subphase.start_date, subphase.end_date, subphase.is_milestone]);\n\n  // Get effective completion (calculated from children or manual)\n  const completionResult = useMemo(() => getEffectiveCompletion(subphase), [subphase]);\n\n  // Collect all descendant subphases for cascading custom column values\n  const childEntities = useMemo(() => collectAllDescendants(subphase.children ?? []), [subphase.children]);\n\n  const showContextMenu = useUIStore((s) => s.showContextMenu);\n  \n  const handleContextMenu = useCallback((e: React.MouseEvent) => {\n    e.preventDefault();\n    showContextMenu('subphase', subphase.id, e.clientX, e.clientY, projectId, phaseId);\n  }, [showContextMenu, subphase.id, projectId, phaseId]);\n\n  // Drag handlers\n  const onDragStart = useCallback((e: React.DragEvent) => {\n    handleDragStart(e, 'subphase', subphase.id, projectId, parentId, parentType);\n  }, [handleDragStart, subphase.id, projectId, parentId, parentType]);\n\n  const onDragOver = useCallback((e: React.DragEvent) => {\n    handleDragOver(e, 'subphase', subphase.id);\n  }, [handleDragOver, subphase.id]);\n\n  const onDrop = useCallback((e: React.DragEvent) => {\n    handleDrop(e, 'subphase', subphase.id, siblings, parentId, parentType);\n  }, [handleDrop, subphase.id, siblings, parentId, parentType]);\n\n  const dragging = isDragging('subphase', subphase.id);\n  const dropPosition = getDropPosition('subphase', subphase.id);\n\n  return (\n    <>\n      {/* Subphase row */}\n      <div\n        className={`${styles.row} ${dragging ? styles.dragging : ''} ${dropPosition ? styles[`drop${dropPosition.charAt(0).toUpperCase() + dropPosition.slice(1)}`] : ''}`}\n        data-subphase-id={subphase.id}\n        onDragOver={onDragOver}\n        onDragLeave={handleDragLeave}\n        onDrop={onDrop}\n        onDoubleClick={handleEdit}\n        onContextMenu={handleContextMenu}\n      >\n        {/* Name column - fixed width */}\n        <div className={styles.nameColumn} style={{ width: nameColumnWidth, paddingLeft }}>\n          {/* Critical path indicator */}\n          {criticalPathItems.has(`subphase-${subphase.id}`) && (\n            <span className={styles.criticalPathDot} title=\"On Critical Path\" />\n          )}\n          {/* Drag handle */}\n          <div\n            className={styles.dragHandle}\n            draggable\n            onDragStart={onDragStart}\n            onDragEnd={handleDragEnd}\n            title=\"Drag to reorder\"\n          >\n            <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <circle cx=\"9\" cy=\"6\" r=\"2\" />\n              <circle cx=\"15\" cy=\"6\" r=\"2\" />\n              <circle cx=\"9\" cy=\"12\" r=\"2\" />\n              <circle cx=\"15\" cy=\"12\" r=\"2\" />\n              <circle cx=\"9\" cy=\"18\" r=\"2\" />\n              <circle cx=\"15\" cy=\"18\" r=\"2\" />\n            </svg>\n          </div>\n          {/* Expand button */}\n          <button\n            className={`${styles.expandBtn} ${isExpanded ? styles.expanded : ''}`}\n            onClick={handleToggle}\n            disabled={!hasChildren}\n          >\n            {hasChildren && (\n              <svg\n                width=\"10\"\n                height=\"10\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n              >\n                <polyline points=\"9 18 15 12 9 6\" />\n              </svg>\n            )}\n          </button>\n\n          {/* Completion badge - always shown */}\n          <button \n            className={`${styles.completionBadge} ${\n              completionResult.completion !== null \n                ? (completionResult.isCalculated ? styles.calculated : styles.manual)\n                : styles.empty\n            }`}\n            onClick={handleCompletionClick}\n            title={\n              completionResult.completion !== null\n                ? (completionResult.isCalculated ? 'Calculated from children' : 'Click to edit')\n                : 'Click to set completion'\n            }\n          >\n            {completionResult.completion !== null ? `${completionResult.completion}%` : ''}\n          </button>\n\n          {/* WBS Level indicator - clickable to scroll to start date */}\n          <button\n            className={styles.wbsLevel}\n            style={{ backgroundColor: subphase.color }}\n            onClick={handleLevelClick}\n            title={`Level ${wbsLevel} - Click to scroll to start date`}\n          >\n            L{wbsLevel}\n          </button>\n\n          {/* Subphase name */}\n          <span className={styles.name} title={subphase.name}>\n            {subphase.name}\n          </span>\n\n          {/* Date display */}\n          <span className={styles.dateDisplay}>\n            {dateDisplay}\n          </span>\n        </div>\n\n        {/* Custom Column Cells */}\n        {customColumns.length > 0 && (\n          <div className={styles.customCells}>\n            {customColumns.map(column => (\n              <div \n                key={column.id} \n                className={styles.customCell}\n                style={{ width: column.width }}\n              >\n                <CustomColumnCell\n                  column={column}\n                  entityType=\"subphase\"\n                  entityId={subphase.id}\n                  readOnly={!canEdit}\n                  childEntities={childEntities}\n                />\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Completion slider popover */}\n      {showSlider && createPortal(\n        <CompletionSlider\n          value={subphase.completion ?? null}\n          onChange={handleCompletionChange}\n          onClose={() => setSliderAnchor(null)}\n          anchorEl={sliderAnchor}\n          isCalculated={completionResult.isCalculated}\n        />,\n        document.body\n      )}\n\n      {/* Expanded children */}\n      {isExpanded && (\n        <>\n          {/* Nested subphases with phantom row support */}\n          <SubphasesWithPhantom\n            subphases={subphase.children ?? []}\n            phaseId={phaseId}\n            projectId={projectId}\n            depth={depth + 1}\n            wbsLevel={wbsLevel + 1}\n            parentId={subphase.id}\n            parentType=\"subphase\"\n            customColumns={customColumns}\n            nameColumnWidth={nameColumnWidth}\n            criticalPathItems={criticalPathItems}\n          />\n\n          {/* Subphase-level staff assignments - filtered by showAssignments */}\n          {showAssignments && (subphase.staffAssignments ?? []).map((assignment) => {\n            const staffMember = staff.find((s) => s.id === assignment.staff_id);\n            return (\n              <AssignmentRow\n                key={`staff-${assignment.id}`}\n                type=\"subphase-staff\"\n                assignmentId={assignment.id}\n                projectId={projectId}\n                phaseId={phaseId}\n                subphaseId={subphase.id}\n                staffId={assignment.staff_id}\n                name={staffMember?.name || assignment.staff_name || 'Unknown'}\n                role={staffMember?.role}\n                allocation={assignment.allocation}\n                phaseType={subphase.name}\n                phaseColor={subphase.color}\n                depth={depth + 1}\n              />\n            );\n          })}\n\n          {/* Subphase-level equipment assignments - filtered by showAssignments */}\n          {showAssignments && (subphase.equipmentAssignments ?? []).map((assignment) => {\n            const equip = equipment.find((e) => e.id === assignment.equipment_id);\n            return (\n              <AssignmentRow\n                key={`equip-${assignment.id}`}\n                type=\"equipment\"\n                assignmentId={assignment.id}\n                projectId={projectId}\n                phaseId={phaseId}\n                subphaseId={subphase.id}\n                equipmentId={assignment.equipment_id}\n                name={equip?.name || assignment.equipment_name || 'Unknown'}\n                equipmentType={equip?.type}\n                depth={depth + 1}\n              />\n            );\n          })}\n        </>\n      )}\n    </>\n  );\n});\n\n/**\n * Helper component to render subphases with PhantomRow after source\n */\nfunction SubphasesWithPhantom({ \n  subphases, \n  phaseId, \n  projectId, \n  depth, \n  wbsLevel,\n  parentId,\n  parentType,\n  customColumns,\n  nameColumnWidth,\n  criticalPathItems,\n}: { \n  subphases: Subphase[]; \n  phaseId: number; \n  projectId: number; \n  depth: number; \n  wbsLevel: number;\n  parentId: number;\n  parentType: 'phase' | 'subphase';\n  customColumns: CustomColumn[];\n  nameColumnWidth: number;\n  criticalPathItems: Set<string>;\n}) {\n  const phantomSiblingMode = useUIStore((s) => s.phantomSiblingMode);\n  const customColumnFilters = useAppStore((s) => s.customColumnFilters);\n  const customColumnValues = useAppStore((s) => s.customColumnValues);\n  const { completePhantom, cancelPhantom } = usePhantomSibling();\n  \n  // Check if phantom mode is for a subphase\n  const showPhantomAfter = phantomSiblingMode?.type === 'subphase' && \n    phantomSiblingMode.projectId === projectId\n    ? phantomSiblingMode.sourceId\n    : null;\n  \n  // Helper to check if entity passes filters\n  const entityPassesFilters = useCallback((entityType: string, entityId: number): boolean => {\n    const activeFilterColumns = Object.keys(customColumnFilters).filter(\n      colId => customColumnFilters[Number(colId)]?.length > 0\n    );\n    \n    if (activeFilterColumns.length === 0) return true;\n    \n    for (const colIdStr of activeFilterColumns) {\n      const colId = Number(colIdStr);\n      const filterValues = customColumnFilters[colId];\n      const valueKey = `${colId}-${entityType}-${entityId}`;\n      const cellValue = customColumnValues[valueKey] ?? null;\n      \n      if (cellValue === null) {\n        if (!filterValues.includes('__empty__')) return false;\n      } else {\n        if (!filterValues.includes(cellValue)) return false;\n      }\n    }\n    return true;\n  }, [customColumnFilters, customColumnValues]);\n  \n  // Check if any descendant subphase matches filters\n  const anyDescendantMatches = useCallback((children: Subphase[]): boolean => {\n    for (const sp of children) {\n      if (entityPassesFilters('subphase', sp.id)) return true;\n      if (sp.children && sp.children.length > 0) {\n        if (anyDescendantMatches(sp.children)) return true;\n      }\n    }\n    return false;\n  }, [entityPassesFilters]);\n  \n  // Filter subphases: show if subphase matches OR any descendant matches\n  const visibleSubphases = useMemo(() => \n    subphases.filter(sp => \n      entityPassesFilters('subphase', sp.id) || \n      anyDescendantMatches(sp.children ?? [])\n    ),\n    [subphases, entityPassesFilters, anyDescendantMatches]\n  );\n  \n  return (\n    <>\n      {visibleSubphases.map((child) => (\n        <Fragment key={child.id}>\n          <SubphaseRow\n            subphase={child}\n            phaseId={phaseId}\n            projectId={projectId}\n            depth={depth}\n            wbsLevel={wbsLevel}\n            siblings={subphases}\n            parentId={parentId}\n            parentType={parentType}\n            customColumns={customColumns}\n            nameColumnWidth={nameColumnWidth}\n            criticalPathItems={criticalPathItems}\n          />\n          {showPhantomAfter === child.id && (\n            <PhantomRow\n              onComplete={completePhantom}\n              onCancel={cancelPhantom}\n            />\n          )}\n        </Fragment>\n      ))}\n    </>\n  );\n}\n","/**\n * PhaseRow\n * A phase row within a project, with expandable subphases\n * Supports drag-and-drop reordering\n */\n\nimport { memo, useMemo, useCallback, Fragment, useState } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useReorder } from '@/contexts/ReorderContext';\nimport { SubphaseRow } from './SubphaseRow';\nimport { AssignmentRow } from './AssignmentRow';\nimport { PhantomRow } from './PhantomRow';\nimport { usePhantomSibling } from '@/hooks';\nimport { CustomColumnCell } from '@/components/gantt/CustomColumns';\nimport { CompletionSlider } from '@/components/gantt/CompletionSlider';\nimport { updatePhase } from '@/api';\nimport { formatShortDateRange, formatSingleDate } from '@/utils/date';\nimport type { Phase, Subphase, CustomColumn, CustomColumnEntityType } from '@/types';\nimport styles from './PhaseRow.module.css';\n\n// Child entity info for cascading values\ninterface ChildEntity {\n  entityType: CustomColumnEntityType;\n  entityId: number;\n}\n\n// Collect all descendant subphase IDs recursively\nfunction collectAllDescendants(subphases: Subphase[]): ChildEntity[] {\n  const result: ChildEntity[] = [];\n  \n  function traverse(items: Subphase[]) {\n    for (const sp of items) {\n      result.push({ entityType: 'subphase', entityId: sp.id });\n      if (sp.children && sp.children.length > 0) {\n        traverse(sp.children);\n      }\n    }\n  }\n  \n  traverse(subphases);\n  return result;\n}\n\ninterface PhaseRowProps {\n  phase: Phase;\n  projectId: number;\n  depth: number;\n  phases: Phase[];  // All phases for reorder context\n  customColumns?: CustomColumn[];\n  nameColumnWidth: number;\n  criticalPathItems?: Set<string>;  // Critical path items for this project\n}\n\n// Recursively calculate effective completion for an item\n// If at least one child has a completion value, unset siblings count as 0%\nfunction getEffectiveCompletion(item: Phase | Subphase): { completion: number | null; isCalculated: boolean } {\n  if (!item) return { completion: null, isCalculated: false };\n  \n  const children = item.children || [];\n  \n  // Check if any children have completion (direct or calculated)\n  let hasChildrenWithCompletion = false;\n  for (const child of children) {\n    if (!child) continue;\n    const childResult = getEffectiveCompletion(child);\n    if (childResult && childResult.completion !== null) {\n      hasChildrenWithCompletion = true;\n      break;\n    }\n  }\n  \n  if (hasChildrenWithCompletion) {\n    // Calculate weighted average from children's effective completion\n    // Children without completion count as 0%\n    let totalWeight = 0;\n    let weightedSum = 0;\n    \n    for (const child of children) {\n      if (!child) continue;\n      const childResult = getEffectiveCompletion(child);\n      const days = Math.max(1, Math.ceil((new Date(child.end_date).getTime() - new Date(child.start_date).getTime()) / (1000*60*60*24)));\n      \n      // Unset completion counts as 0% when at least one sibling has a value\n      const completion = childResult.completion ?? 0;\n      weightedSum += completion * days;\n      totalWeight += days;\n    }\n    \n    if (totalWeight > 0) {\n      return { completion: Math.round(weightedSum / totalWeight), isCalculated: true };\n    }\n  }\n  \n  // No children with completion, return item's own completion\n  return { completion: item.completion ?? null, isCalculated: false };\n}\n\nexport const PhaseRow = memo(function PhaseRow({\n  phase,\n  projectId,\n  depth,\n  phases,\n  customColumns = [],\n  nameColumnWidth,\n  criticalPathItems = new Set(),\n}: PhaseRowProps) {\n  const expandedPhases = useAppStore((s) => s.expandedPhases);\n  const togglePhaseExpanded = useAppStore((s) => s.togglePhaseExpanded);\n  const staff = useAppStore((s) => s.staff);\n  const equipment = useAppStore((s) => s.equipment);\n  const currentUser = useAppStore((s) => s.currentUser);\n  const showAssignments = useAppStore((s) => s.showAssignments);\n  const projects = useAppStore((s) => s.projects);\n  const setProjects = useAppStore((s) => s.setProjects);\n  const openPhaseModal = useUIStore((s) => s.openPhaseModal);\n  \n  const canEdit = currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n  \n  // Completion slider state\n  const [sliderAnchor, setSliderAnchor] = useState<HTMLElement | null>(null);\n  const showSlider = Boolean(sliderAnchor);\n  \n  // Reorder hooks\n  const {\n    handleDragStart,\n    handleDragOver,\n    handleDragLeave,\n    handleDrop,\n    handleDragEnd,\n    isDragging,\n    getDropPosition,\n  } = useReorder();\n\n  const isExpanded = expandedPhases.has(phase.id);\n\n  const handleToggle = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    togglePhaseExpanded(phase.id);\n  };\n\n  const handleEdit = () => {\n    openPhaseModal(phase, projectId);\n  };\n  \n  // Handle clicking on completion badge to show slider\n  const handleCompletionClick = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    // Don't show slider if calculated from children\n    const result = getEffectiveCompletion(phase);\n    if (result.isCalculated) return;\n    setSliderAnchor(e.currentTarget as HTMLElement);\n  }, [phase]);\n  \n  // Handle completion change from slider\n  const handleCompletionChange = useCallback(async (value: number) => {\n    try {\n      const newCompletion = value === -1 ? null : value;\n      await updatePhase(phase.id, { completion: newCompletion });\n      \n      // Update local state optimistically\n      const updatedProjects = projects.map(p => {\n        if (p.id !== projectId) return p;\n        return {\n          ...p,\n          phases: (p.phases ?? []).map(ph => \n            ph.id === phase.id ? { ...ph, completion: newCompletion } : ph\n          )\n        };\n      });\n      setProjects(updatedProjects);\n    } catch (err) {\n      console.error('Failed to update phase completion:', err);\n    }\n  }, [phase.id, projectId, projects, setProjects]);\n\n  const hasChildren =\n    (phase.children?.length ?? 0) > 0 ||\n    (phase.staffAssignments?.length ?? 0) > 0 ||\n    (phase.equipmentAssignments?.length ?? 0) > 0;\n\n  const paddingLeft = depth * 16 + 8;\n\n  // Format date display using browser locale\n  const dateDisplay = useMemo(() => {\n    if (phase.is_milestone) {\n      return formatSingleDate(phase.start_date);\n    }\n    return formatShortDateRange(phase.start_date, phase.end_date);\n  }, [phase.start_date, phase.end_date, phase.is_milestone]);\n\n  // Get effective completion (calculated from children or manual)\n  const completionResult = useMemo(() => getEffectiveCompletion(phase), [phase]);\n\n  // Collect all descendant subphases for cascading custom column values\n  const childEntities = useMemo(() => collectAllDescendants(phase.children ?? []), [phase.children]);\n\n  const showContextMenu = useUIStore((s) => s.showContextMenu);\n  \n  const handleContextMenu = useCallback((e: React.MouseEvent) => {\n    e.preventDefault();\n    showContextMenu('phase', phase.id, e.clientX, e.clientY, projectId);\n  }, [showContextMenu, phase.id, projectId]);\n\n  // Drag handlers\n  const onDragStart = useCallback((e: React.DragEvent) => {\n    handleDragStart(e, 'phase', phase.id, projectId);\n  }, [handleDragStart, phase.id, projectId]);\n\n  const onDragOver = useCallback((e: React.DragEvent) => {\n    handleDragOver(e, 'phase', phase.id);\n  }, [handleDragOver, phase.id]);\n\n  const onDrop = useCallback((e: React.DragEvent) => {\n    handleDrop(e, 'phase', phase.id, phases);\n  }, [handleDrop, phase.id, phases]);\n\n  const dragging = isDragging('phase', phase.id);\n  const dropPosition = getDropPosition('phase', phase.id);\n\n  return (\n    <>\n      {/* Phase row */}\n      <div\n        className={`${styles.row} ${dragging ? styles.dragging : ''} ${dropPosition ? styles[`drop${dropPosition.charAt(0).toUpperCase() + dropPosition.slice(1)}`] : ''}`}\n        data-phase-id={phase.id}\n        onDragOver={onDragOver}\n        onDragLeave={handleDragLeave}\n        onDrop={onDrop}\n        onDoubleClick={handleEdit}\n        onContextMenu={handleContextMenu}\n      >\n        {/* Name column - fixed width */}\n        <div className={styles.nameColumn} style={{ width: nameColumnWidth, paddingLeft }}>\n          {/* Critical path indicator */}\n          {criticalPathItems.has(`phase-${phase.id}`) && (\n            <span className={styles.criticalPathDot} title=\"On Critical Path\" />\n          )}\n          {/* Drag handle */}\n          <div\n            className={styles.dragHandle}\n            draggable\n            onDragStart={onDragStart}\n            onDragEnd={handleDragEnd}\n            title=\"Drag to reorder\"\n          >\n            <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <circle cx=\"9\" cy=\"6\" r=\"2\" />\n              <circle cx=\"15\" cy=\"6\" r=\"2\" />\n              <circle cx=\"9\" cy=\"12\" r=\"2\" />\n              <circle cx=\"15\" cy=\"12\" r=\"2\" />\n              <circle cx=\"9\" cy=\"18\" r=\"2\" />\n              <circle cx=\"15\" cy=\"18\" r=\"2\" />\n            </svg>\n          </div>\n          {/* Expand button */}\n          <button\n            className={`${styles.expandBtn} ${isExpanded ? styles.expanded : ''}`}\n            onClick={handleToggle}\n            disabled={!hasChildren}\n          >\n            {hasChildren && (\n              <svg\n                width=\"10\"\n                height=\"10\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n              >\n                <polyline points=\"9 18 15 12 9 6\" />\n              </svg>\n            )}\n          </button>\n\n          {/* Completion badge - always shown, clickable when not calculated */}\n          <span \n            className={`${styles.completionBadge} ${\n              completionResult.completion !== null \n                ? (completionResult.isCalculated ? styles.calculated : styles.manual)\n                : styles.empty\n            }`}\n            style={{ cursor: completionResult.isCalculated ? 'default' : 'pointer' }}\n            title={\n              completionResult.completion !== null\n                ? (completionResult.isCalculated ? 'Calculated from children' : 'Click to edit')\n                : 'Click to set completion'\n            }\n            onClick={handleCompletionClick}\n          >\n            {completionResult.completion !== null ? `${completionResult.completion}%` : ''}\n          </span>\n\n          {/* Type badge */}\n          <span\n            className={styles.typeBadge}\n            style={{ \n              backgroundColor: `${phase.color}33`,\n              color: phase.color \n            }}\n          >\n            {phase.is_milestone ? '' : ''}{phase.name}\n          </span>\n\n          {/* Date display */}\n          <span className={styles.dateDisplay}>\n            {dateDisplay}\n          </span>\n        </div>\n\n        {/* Custom Column Cells */}\n        {customColumns.length > 0 && (\n          <div className={styles.customCells}>\n            {customColumns.map(column => (\n              <div \n                key={column.id} \n                className={styles.customCell}\n                style={{ width: column.width }}\n              >\n                <CustomColumnCell\n                  column={column}\n                  entityType=\"phase\"\n                  entityId={phase.id}\n                  readOnly={!canEdit}\n                  childEntities={childEntities}\n                />\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Expanded children */}\n      {isExpanded && (\n        <>\n          {/* Subphases with phantom row support */}\n          <PhaseSubphasesWithPhantom\n            subphases={phase.children ?? []}\n            phaseId={phase.id}\n            projectId={projectId}\n            depth={depth + 1}\n            customColumns={customColumns}\n            nameColumnWidth={nameColumnWidth}\n            criticalPathItems={criticalPathItems}\n          />\n\n          {/* Phase-level staff assignments - filtered by showAssignments */}\n          {showAssignments && (phase.staffAssignments ?? []).map((assignment) => {\n            const staffMember = staff.find((s) => s.id === assignment.staff_id);\n            return (\n              <AssignmentRow\n                key={`staff-${assignment.id}`}\n                type=\"phase-staff\"\n                assignmentId={assignment.id}\n                projectId={projectId}\n                phaseId={phase.id}\n                staffId={assignment.staff_id}\n                name={staffMember?.name || assignment.staff_name || 'Unknown'}\n                role={staffMember?.role}\n                allocation={assignment.allocation}\n                phaseType={phase.name}\n                phaseColor={phase.color}\n                depth={depth + 1}\n              />\n            );\n          })}\n\n          {/* Phase-level equipment assignments - filtered by showAssignments */}\n          {showAssignments && (phase.equipmentAssignments ?? []).map((assignment) => {\n            const equip = equipment.find((e) => e.id === assignment.equipment_id);\n            return (\n              <AssignmentRow\n                key={`equip-${assignment.id}`}\n                type=\"equipment\"\n                assignmentId={assignment.id}\n                projectId={projectId}\n                phaseId={phase.id}\n                equipmentId={assignment.equipment_id}\n                name={equip?.name || assignment.equipment_name || 'Unknown'}\n                equipmentType={equip?.type}\n                depth={depth + 1}\n              />\n            );\n          })}\n        </>\n      )}\n      \n      {/* Completion Slider Popup */}\n      {showSlider && (\n        <CompletionSlider\n          value={phase.completion ?? null}\n          onClose={() => setSliderAnchor(null)}\n          anchorEl={sliderAnchor}\n          onChange={handleCompletionChange}\n        />\n      )}\n    </>\n  );\n});\n\n/**\n * Helper component to render phase's direct subphases with PhantomRow after source\n */\nfunction PhaseSubphasesWithPhantom({ \n  subphases,\n  phaseId, \n  projectId, \n  depth,\n  customColumns,\n  nameColumnWidth,\n  criticalPathItems,\n}: { \n  subphases: Subphase[]; \n  phaseId: number; \n  projectId: number; \n  depth: number;\n  customColumns: CustomColumn[];\n  nameColumnWidth: number;\n  criticalPathItems: Set<string>;\n}) {\n  const phantomSiblingMode = useUIStore((s) => s.phantomSiblingMode);\n  const customColumnFilters = useAppStore((s) => s.customColumnFilters);\n  const customColumnValues = useAppStore((s) => s.customColumnValues);\n  const { completePhantom, cancelPhantom } = usePhantomSibling();\n  \n  // Check if phantom mode is for a subphase under this phase\n  const showPhantomAfter = phantomSiblingMode?.type === 'subphase' && \n    phantomSiblingMode.projectId === projectId &&\n    phantomSiblingMode.parentType === 'phase' &&\n    phantomSiblingMode.parentId === phaseId\n    ? phantomSiblingMode.sourceId\n    : null;\n  \n  // Helper to check if entity passes filters\n  const entityPassesFilters = useCallback((entityType: string, entityId: number): boolean => {\n    const activeFilterColumns = Object.keys(customColumnFilters).filter(\n      colId => customColumnFilters[Number(colId)]?.length > 0\n    );\n    \n    if (activeFilterColumns.length === 0) return true;\n    \n    for (const colIdStr of activeFilterColumns) {\n      const colId = Number(colIdStr);\n      const filterValues = customColumnFilters[colId];\n      const valueKey = `${colId}-${entityType}-${entityId}`;\n      const cellValue = customColumnValues[valueKey] ?? null;\n      \n      if (cellValue === null) {\n        if (!filterValues.includes('__empty__')) return false;\n      } else {\n        if (!filterValues.includes(cellValue)) return false;\n      }\n    }\n    return true;\n  }, [customColumnFilters, customColumnValues]);\n  \n  // Check if any descendant subphase matches filters\n  const anyDescendantMatches = useCallback((children: Subphase[]): boolean => {\n    for (const sp of children) {\n      if (entityPassesFilters('subphase', sp.id)) return true;\n      if (sp.children && sp.children.length > 0) {\n        if (anyDescendantMatches(sp.children)) return true;\n      }\n    }\n    return false;\n  }, [entityPassesFilters]);\n  \n  // Filter subphases: show if subphase matches OR any descendant matches\n  const visibleSubphases = useMemo(() => \n    subphases.filter(sp => \n      entityPassesFilters('subphase', sp.id) || \n      anyDescendantMatches(sp.children ?? [])\n    ),\n    [subphases, entityPassesFilters, anyDescendantMatches]\n  );\n  \n  return (\n    <>\n      {visibleSubphases.map((subphase) => (\n        <Fragment key={subphase.id}>\n          <SubphaseRow\n            subphase={subphase}\n            phaseId={phaseId}\n            projectId={projectId}\n            depth={depth}\n            wbsLevel={1}\n            siblings={subphases}\n            parentId={phaseId}\n            parentType=\"phase\"\n            customColumns={customColumns}\n            nameColumnWidth={nameColumnWidth}\n            criticalPathItems={criticalPathItems}\n          />\n          {showPhantomAfter === subphase.id && (\n            <PhantomRow\n              onComplete={completePhantom}\n              onCancel={cancelPhantom}\n            />\n          )}\n        </Fragment>\n      ))}\n    </>\n  );\n}\n","/**\n * ProjectRow\n * A single project row in the project panel with expandable children\n */\n\nimport { memo, useMemo, useCallback, Fragment, useState } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { PhaseRow } from './PhaseRow';\nimport { AssignmentRow } from './AssignmentRow';\nimport { PhantomRow } from './PhantomRow';\nimport { usePhantomSibling } from '@/hooks';\nimport type { Project, Phase, Subphase, CustomColumn } from '@/types';\nimport styles from './ProjectRow.module.css';\n\ninterface ProjectRowProps {\n  project: Project;\n  customColumns?: CustomColumn[];\n  nameColumnWidth: number;  // Width of the name/info column\n  onReorder?: (fromId: number, toId: number) => void;  // Callback when project is reordered\n  siblingIds?: number[];  // IDs of all projects for reorder context\n  index?: number;  // Position in the list\n}\n\n// Recursively calculate effective completion for a phase/subphase\n// If at least one child has a completion value, unset siblings count as 0%\nfunction getEffectiveCompletion(item: Phase | Subphase): { completion: number | null; isCalculated: boolean } {\n  if (!item) return { completion: null, isCalculated: false };\n  \n  const children = item.children || [];\n  \n  // Check if any children have completion (direct or calculated)\n  let hasChildrenWithCompletion = false;\n  for (const child of children) {\n    if (!child) continue;\n    const childResult = getEffectiveCompletion(child);\n    if (childResult && childResult.completion !== null) {\n      hasChildrenWithCompletion = true;\n      break;\n    }\n  }\n  \n  if (hasChildrenWithCompletion) {\n    // Calculate weighted average from children's effective completion\n    // Children without completion count as 0%\n    let totalWeight = 0;\n    let weightedSum = 0;\n    \n    for (const child of children) {\n      if (!child) continue;\n      const childResult = getEffectiveCompletion(child);\n      const days = Math.max(1, Math.ceil((new Date(child.end_date).getTime() - new Date(child.start_date).getTime()) / (1000*60*60*24)));\n      \n      // Unset completion counts as 0% when at least one sibling has a value\n      const completion = childResult.completion ?? 0;\n      weightedSum += completion * days;\n      totalWeight += days;\n    }\n    \n    if (totalWeight > 0) {\n      return { completion: Math.round(weightedSum / totalWeight), isCalculated: true };\n    }\n  }\n  \n  // No children with completion, return item's own completion\n  return { completion: item.completion ?? null, isCalculated: false };\n}\n\n// Calculate project completion from phases (weighted by duration, using effective completion)\n// Unset phases count as 0% in the calculation\nfunction calculateProjectCompletion(project: Project): number | null {\n  const phases = project.phases ?? [];\n  if (phases.length === 0) return null;\n\n  let weightedSum = 0;\n  let totalWeight = 0;\n\n  phases.forEach((phase) => {\n    const effectiveResult = getEffectiveCompletion(phase);\n    const start = new Date(phase.start_date);\n    const end = new Date(phase.end_date);\n    const days = Math.max(1, (end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24));\n    \n    // Unset completion counts as 0%\n    const completion = effectiveResult.completion ?? 0;\n    weightedSum += completion * days;\n    totalWeight += days;\n  });\n\n  if (totalWeight > 0) {\n    return Math.round(weightedSum / totalWeight);\n  }\n  return null;\n}\n\nexport const ProjectRow = memo(function ProjectRow({ \n  project, \n  customColumns = [], \n  nameColumnWidth,\n  onReorder,\n  siblingIds = [],\n  index: _index = 0,\n}: ProjectRowProps) {\n  const expandedProjects = useAppStore((s) => s.expandedProjects);\n  const expandedPhases = useAppStore((s) => s.expandedPhases);\n  const expandedSubphases = useAppStore((s) => s.expandedSubphases);\n  const toggleProjectExpanded = useAppStore((s) => s.toggleProjectExpanded);\n  const expandProjectLevel = useAppStore((s) => s.expandProjectLevel);\n  const collapseProjectLevel = useAppStore((s) => s.collapseProjectLevel);\n  const staff = useAppStore((s) => s.staff);\n  const equipment = useAppStore((s) => s.equipment);\n  const showAssignments = useAppStore((s) => s.showAssignments);\n  const toggleCriticalPath = useAppStore((s) => s.toggleCriticalPath);\n  const isCriticalPathEnabled = useAppStore((s) => s.isCriticalPathEnabled);\n  const criticalPathItems = useAppStore((s) => s.criticalPathItems);\n  const openProjectModal = useUIStore((s) => s.openProjectModal);\n\n  const isExpanded = expandedProjects.has(project.id);\n  const completion = useMemo(() => calculateProjectCompletion(project), [project]);\n  \n  // Get critical path items for this project\n  const projectCriticalPathItems = criticalPathItems.get(project.id) || new Set<string>();\n\n  // Calculate current expansion level for this project\n  const currentLevel = useMemo(() => {\n    if (!expandedProjects.has(project.id)) return 0;\n    const phases = project.phases ?? [];\n    const anyPhaseExpanded = phases.some(p => expandedPhases.has(p.id));\n    if (!anyPhaseExpanded) return 1;\n    \n    // Check if any subphases are expanded\n    let anySubphaseExpanded = false;\n    phases.forEach(phase => {\n      const checkSubphases = (children: typeof phase.children) => {\n        children?.forEach(child => {\n          if (expandedSubphases.has(child.id)) anySubphaseExpanded = true;\n          checkSubphases(child.children);\n        });\n      };\n      checkSubphases(phase.children);\n    });\n    \n    return anySubphaseExpanded ? 3 : 2;\n  }, [project, expandedProjects, expandedPhases, expandedSubphases]);\n\n  // Calculate max possible level\n  // Always allow at least level 1 so users can expand to add phases\n  const maxLevel = useMemo(() => {\n    const phases = project.phases ?? [];\n    \n    // Always allow expanding to level 1 (to add phases)\n    let maxDepth = 1;\n    \n    phases.forEach(phase => {\n      if (phase.children?.length > 0) {\n        maxDepth = Math.max(maxDepth, 2);\n        const checkDepth = (children: typeof phase.children, depth: number) => {\n          children?.forEach(child => {\n            maxDepth = Math.max(maxDepth, depth);\n            if (child.children?.length > 0) {\n              checkDepth(child.children, depth + 1);\n            }\n          });\n        };\n        checkDepth(phase.children, 3);\n      }\n    });\n    return maxDepth;\n  }, [project]);\n\n  const handleToggle = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    toggleProjectExpanded(project.id);\n  };\n\n  const handleExpandLevel = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    expandProjectLevel(project.id);\n  };\n\n  const handleCollapseLevel = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    collapseProjectLevel(project.id);\n  };\n\n  const handleCriticalPathToggle = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    toggleCriticalPath(project.id);\n  };\n\n  const handleEdit = () => {\n    openProjectModal(project);\n  };\n\n  const showContextMenu = useUIStore((s) => s.showContextMenu);\n  \n  const handleContextMenu = useCallback((e: React.MouseEvent) => {\n    e.preventDefault();\n    showContextMenu('project', project.id, e.clientX, e.clientY);\n  }, [showContextMenu, project.id]);\n\n  // Project reorder drag state\n  const [dropPosition, setDropPosition] = useState<'above' | 'below' | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  \n  // Project drag handlers for reordering\n  const handleProjectDragStart = useCallback((e: React.DragEvent) => {\n    e.stopPropagation();\n    setIsDragging(true);\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('application/x-project-reorder', String(project.id));\n  }, [project.id]);\n  \n  const handleProjectDragEnd = useCallback(() => {\n    setIsDragging(false);\n    setDropPosition(null);\n  }, []);\n  \n  const handleProjectDragOver = useCallback((e: React.DragEvent) => {\n    // Only accept project reorder drags\n    if (!e.dataTransfer.types.includes('application/x-project-reorder')) return;\n    \n    e.preventDefault();\n    e.stopPropagation();\n    \n    // Determine drop position based on mouse position\n    const rect = (e.currentTarget as HTMLElement).getBoundingClientRect();\n    const midpoint = rect.top + rect.height / 2;\n    const newPosition = e.clientY < midpoint ? 'above' : 'below';\n    setDropPosition(newPosition);\n  }, []);\n  \n  const handleProjectDragLeave = useCallback((e: React.DragEvent) => {\n    // Only reset if actually leaving the element (not entering a child)\n    const relatedTarget = e.relatedTarget as HTMLElement;\n    const currentTarget = e.currentTarget as HTMLElement;\n    if (relatedTarget && currentTarget.contains(relatedTarget)) return;\n    setDropPosition(null);\n  }, []);\n  \n  const handleProjectDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    const draggedId = parseInt(e.dataTransfer.getData('application/x-project-reorder'), 10);\n    if (isNaN(draggedId) || draggedId === project.id) {\n      setDropPosition(null);\n      return;\n    }\n    \n    // Determine target position\n    const rect = (e.currentTarget as HTMLElement).getBoundingClientRect();\n    const midpoint = rect.top + rect.height / 2;\n    const insertBefore = e.clientY < midpoint;\n    \n    // Calculate target ID\n    let targetId = project.id;\n    if (!insertBefore && siblingIds.length > 0) {\n      // If dropping below, find the next sibling\n      const currentIndex = siblingIds.indexOf(project.id);\n      if (currentIndex < siblingIds.length - 1) {\n        targetId = siblingIds[currentIndex + 1];\n      }\n    }\n    \n    if (onReorder) {\n      onReorder(draggedId, targetId);\n    }\n    \n    setDropPosition(null);\n  }, [project.id, siblingIds, onReorder]);\n\n  return (\n    <>\n      {/* Project row */}\n      <div\n        className={`${styles.row} ${!project.confirmed ? styles.unconfirmed : ''} ${dropPosition === 'above' ? styles.dropAbove : ''} ${dropPosition === 'below' ? styles.dropBelow : ''} ${isDragging ? styles.dragging : ''}`}\n        data-project-id={project.id}\n        onDoubleClick={handleEdit}\n        onContextMenu={handleContextMenu}\n        onDragOver={handleProjectDragOver}\n        onDragLeave={handleProjectDragLeave}\n        onDrop={handleProjectDrop}\n      >\n        {/* Name column - fixed width */}\n        <div className={styles.nameColumn} style={{ width: nameColumnWidth }}>\n          {/* Drag handle for reordering */}\n          {onReorder && (\n            <div\n              className={styles.dragHandle}\n              draggable\n              onDragStart={handleProjectDragStart}\n              onDragEnd={handleProjectDragEnd}\n              onClick={(e) => e.stopPropagation()}\n              onDoubleClick={(e) => e.stopPropagation()}\n              title=\"Drag to reorder\"\n            >\n              <svg width=\"8\" height=\"12\" viewBox=\"0 0 8 12\" fill=\"currentColor\">\n                <circle cx=\"2\" cy=\"2\" r=\"1.2\" />\n                <circle cx=\"6\" cy=\"2\" r=\"1.2\" />\n                <circle cx=\"2\" cy=\"6\" r=\"1.2\" />\n                <circle cx=\"6\" cy=\"6\" r=\"1.2\" />\n                <circle cx=\"2\" cy=\"10\" r=\"1.2\" />\n                <circle cx=\"6\" cy=\"10\" r=\"1.2\" />\n              </svg>\n            </div>\n          )}\n          \n          {/* Level controls (+/-) */}\n          <div \n            className={styles.levelControls} \n            onClick={(e) => e.stopPropagation()}\n            onDoubleClick={(e) => e.stopPropagation()}\n          >\n            <button\n              className={styles.levelBtn}\n              onClick={handleCollapseLevel}\n              onDoubleClick={(e) => e.stopPropagation()}\n              disabled={currentLevel === 0}\n              title=\"Collapse one level\"\n            >\n              <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n              </svg>\n            </button>\n            <button\n              className={styles.levelBtn}\n              onClick={handleExpandLevel}\n              onDoubleClick={(e) => e.stopPropagation()}\n              disabled={currentLevel >= maxLevel}\n              title=\"Expand one level\"\n            >\n              <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n                <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n              </svg>\n            </button>\n          </div>\n\n          {/* Critical Path toggle */}\n          <button\n            className={`${styles.criticalPathBtn} ${isCriticalPathEnabled(project.id) ? styles.active : ''}`}\n            onClick={handleCriticalPathToggle}\n            onDoubleClick={(e) => e.stopPropagation()}\n            title={isCriticalPathEnabled(project.id) ? 'Hide Critical Path' : 'Show Critical Path'}\n          >\n            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M13 2L3 14h9l-1 8 10-12h-9l1-8z\" />\n            </svg>\n          </button>\n\n          {/* Status indicator */}\n          <span\n            className={`${styles.status} ${project.confirmed ? styles.confirmed : styles.pending}`}\n            title={project.confirmed ? 'Confirmed' : 'Unconfirmed'}\n            onClick={handleToggle}\n          />\n\n          {/* Completion badge */}\n          {completion !== null && (\n            <span \n              className={styles.completionBadge}\n              title=\"Project completion (calculated from phases)\"\n            >\n              {completion}%\n            </span>\n          )}\n\n          {/* Project info */}\n          <div className={styles.info} onClick={handleToggle}>\n            <span className={styles.name} title={project.name}>\n              {project.name}\n            </span>\n            <span className={styles.meta}>\n              {project.pm_name && (\n                <span className={styles.pm}>{project.pm_name}</span>\n              )}\n              {project.customer && (\n                <span className={styles.customer}>  {project.customer}</span>\n              )}\n            </span>\n          </div>\n        </div>\n        \n        {/* Empty placeholders for custom columns to maintain alignment */}\n        {customColumns.length > 0 && (\n          <div className={styles.customCells}>\n            {customColumns.map(column => (\n              <div \n                key={column.id} \n                className={`${styles.customCell} ${styles.emptyCell}`}\n                style={{ width: column.width }}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Expanded children */}\n      {isExpanded && (\n        <div className={styles.children}>\n          {/* Phases with PhantomRow after source */}\n          <PhasesWithPhantom\n            phases={project.phases ?? []}\n            projectId={project.id}\n            customColumns={customColumns}\n            nameColumnWidth={nameColumnWidth}\n            criticalPathItems={projectCriticalPathItems}\n          />\n\n          {/* Project-level staff assignments */}\n          {/* Project-level staff assignments - filtered by showAssignments */}\n          {showAssignments && (project.staffAssignments ?? []).map((assignment) => {\n            const staffMember = staff.find((s) => s.id === assignment.staff_id);\n            return (\n              <AssignmentRow\n                key={`staff-${assignment.id}`}\n                type=\"staff\"\n                assignmentId={assignment.id}\n                projectId={project.id}\n                staffId={assignment.staff_id}\n                name={staffMember?.name || assignment.staff_name || 'Unknown'}\n                role={staffMember?.role}\n                allocation={assignment.allocation}\n                startDate={assignment.start_date}\n                endDate={assignment.end_date}\n                depth={1}\n              />\n            );\n          })}\n\n          {/* Project-level equipment assignments - filtered by showAssignments */}\n          {showAssignments && (project.equipmentAssignments ?? []).map((assignment) => {\n            const equip = equipment.find((e) => e.id === assignment.equipment_id);\n            return (\n              <AssignmentRow\n                key={`equip-${assignment.id}`}\n                type=\"equipment\"\n                assignmentId={assignment.id}\n                projectId={project.id}\n                equipmentId={assignment.equipment_id}\n                name={equip?.name || assignment.equipment_name || 'Unknown'}\n                equipmentType={equip?.type}\n                startDate={assignment.start_date}\n                endDate={assignment.end_date}\n                depth={1}\n              />\n            );\n          })}\n        </div>\n      )}\n    </>\n  );\n});\n\n/**\n * Helper component to render phases with PhantomRow after source\n */\nfunction PhasesWithPhantom({ \n  phases, \n  projectId, \n  customColumns,\n  nameColumnWidth,\n  criticalPathItems,\n}: { \n  phases: Phase[]; \n  projectId: number;\n  customColumns: CustomColumn[];\n  nameColumnWidth: number;\n  criticalPathItems: Set<string>;\n}) {\n  const phantomSiblingMode = useUIStore((s) => s.phantomSiblingMode);\n  const customColumnFilters = useAppStore((s) => s.customColumnFilters);\n  const customColumnValues = useAppStore((s) => s.customColumnValues);\n  const { completePhantom, cancelPhantom } = usePhantomSibling();\n  \n  // Check if phantom mode is for a phase in this project\n  const showPhantomAfter = phantomSiblingMode?.type === 'phase' && \n    phantomSiblingMode.projectId === projectId\n    ? phantomSiblingMode.sourceId\n    : null;\n  \n  // Helper to check if entity passes filters\n  const entityPassesFilters = useCallback((entityType: string, entityId: number): boolean => {\n    const activeFilterColumns = Object.keys(customColumnFilters).filter(\n      colId => customColumnFilters[Number(colId)]?.length > 0\n    );\n    \n    if (activeFilterColumns.length === 0) return true;\n    \n    for (const colIdStr of activeFilterColumns) {\n      const colId = Number(colIdStr);\n      const filterValues = customColumnFilters[colId];\n      const valueKey = `${colId}-${entityType}-${entityId}`;\n      const cellValue = customColumnValues[valueKey] ?? null;\n      \n      if (cellValue === null) {\n        if (!filterValues.includes('__empty__')) return false;\n      } else {\n        if (!filterValues.includes(cellValue)) return false;\n      }\n    }\n    return true;\n  }, [customColumnFilters, customColumnValues]);\n  \n  // Check if any descendant subphase matches filters\n  const anyDescendantMatches = useCallback((subphases: Subphase[]): boolean => {\n    for (const sp of subphases) {\n      if (entityPassesFilters('subphase', sp.id)) return true;\n      if (sp.children && sp.children.length > 0) {\n        if (anyDescendantMatches(sp.children)) return true;\n      }\n    }\n    return false;\n  }, [entityPassesFilters]);\n  \n  // Filter phases: show if phase matches OR any descendant subphase matches\n  const visiblePhases = useMemo(() => \n    phases.filter(phase => \n      entityPassesFilters('phase', phase.id) || \n      anyDescendantMatches(phase.children ?? [])\n    ),\n    [phases, entityPassesFilters, anyDescendantMatches]\n  );\n  \n  return (\n    <>\n      {visiblePhases.map((phase) => (\n        <Fragment key={phase.id}>\n          <PhaseRow\n            phase={phase}\n            projectId={projectId}\n            depth={1}\n            phases={phases}\n            customColumns={customColumns}\n            nameColumnWidth={nameColumnWidth}\n            criticalPathItems={criticalPathItems}\n          />\n          {showPhantomAfter === phase.id && (\n            <PhantomRow\n              onComplete={completePhantom}\n              onCancel={cancelPhantom}\n            />\n          )}\n        </Fragment>\n      ))}\n    </>\n  );\n}\n","import { useEffect, useRef, ReactNode, useCallback } from 'react';\nimport { createPortal } from 'react-dom';\nimport styles from './Modal.module.css';\n\nexport interface ModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  title: string;\n  children: ReactNode;\n  size?: 'sm' | 'md' | 'lg' | 'xl' | 'xxl' | 'full';\n  footer?: ReactNode;\n  closeOnOverlayClick?: boolean;\n  closeOnEscape?: boolean;\n}\n\nexport function Modal({\n  isOpen,\n  onClose,\n  title,\n  children,\n  size = 'md',\n  footer,\n  closeOnOverlayClick = false,\n  closeOnEscape = true,\n}: ModalProps) {\n  const overlayRef = useRef<HTMLDivElement>(null);\n  const modalRef = useRef<HTMLDivElement>(null);\n  const wasOpenRef = useRef(false);\n  \n  // Store onClose in a ref to avoid re-running effect when it changes\n  const onCloseRef = useRef(onClose);\n  onCloseRef.current = onClose;\n\n  const handleOverlayClick = useCallback(\n    (e: React.MouseEvent) => {\n      if (closeOnOverlayClick && e.target === overlayRef.current) {\n        onCloseRef.current();\n      }\n    },\n    [closeOnOverlayClick]\n  );\n\n  // Handle escape key - use ref to avoid dependency on onClose\n  useEffect(() => {\n    if (!isOpen || !closeOnEscape) return;\n    \n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onCloseRef.current();\n      }\n    };\n    \n    document.addEventListener('keydown', handleEscape);\n    return () => document.removeEventListener('keydown', handleEscape);\n  }, [isOpen, closeOnEscape]);\n\n  // Handle body scroll lock and initial focus - only when modal opens\n  useEffect(() => {\n    if (isOpen && !wasOpenRef.current) {\n      // Modal just opened - focus it and lock scroll\n      document.body.style.overflow = 'hidden';\n      modalRef.current?.focus();\n      wasOpenRef.current = true;\n    } else if (!isOpen && wasOpenRef.current) {\n      // Modal just closed - restore scroll\n      document.body.style.overflow = '';\n      wasOpenRef.current = false;\n    }\n\n    return () => {\n      if (wasOpenRef.current) {\n        document.body.style.overflow = '';\n      }\n    };\n  }, [isOpen]);\n\n  if (!isOpen) return null;\n\n  const modalClasses = [styles.modal, styles[size]].join(' ');\n\n  return createPortal(\n    <div\n      ref={overlayRef}\n      className={styles.overlay}\n      onClick={handleOverlayClick}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"modal-title\"\n    >\n      <div ref={modalRef} className={modalClasses} tabIndex={-1}>\n        <div className={styles.header}>\n          <h2 id=\"modal-title\" className={styles.title}>\n            {title}\n          </h2>\n          <button\n            className={styles.closeBtn}\n            onClick={onClose}\n            aria-label=\"Close modal\"\n          >\n            <svg\n              width=\"18\"\n              height=\"18\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"2\"\n            >\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n            </svg>\n          </button>\n        </div>\n        <div className={styles.body}>{children}</div>\n        {footer && <div className={styles.footer}>{footer}</div>}\n      </div>\n    </div>,\n    document.body\n  );\n}\n","import { forwardRef, ButtonHTMLAttributes, ReactNode } from 'react';\nimport styles from './Button.module.css';\n\nexport interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'danger' | 'ghost' | 'icon';\n  size?: 'sm' | 'md' | 'lg';\n  loading?: boolean;\n  icon?: ReactNode;\n  iconPosition?: 'left' | 'right';\n}\n\nexport const Button = forwardRef<HTMLButtonElement, ButtonProps>(\n  (\n    {\n      variant = 'primary',\n      size = 'md',\n      loading = false,\n      icon,\n      iconPosition = 'left',\n      children,\n      className,\n      disabled,\n      ...props\n    },\n    ref\n  ) => {\n    const classes = [\n      styles.button,\n      styles[variant],\n      styles[size],\n      loading && styles.loading,\n      disabled && styles.disabled,\n      className,\n    ]\n      .filter(Boolean)\n      .join(' ');\n\n    return (\n      <button\n        ref={ref}\n        className={classes}\n        disabled={loading || disabled}\n        {...props}\n      >\n        {loading && <span className={styles.spinner} />}\n        {!loading && icon && iconPosition === 'left' && (\n          <span className={styles.icon}>{icon}</span>\n        )}\n        {children && <span className={styles.content}>{children}</span>}\n        {!loading && icon && iconPosition === 'right' && (\n          <span className={styles.icon}>{icon}</span>\n        )}\n      </button>\n    );\n  }\n);\n\nButton.displayName = 'Button';\n","/**\n * CSV Export Utility\n * \n * Exports projects to CSV format compatible with Microsoft Project import.\n * \n * MS Project CSV columns:\n * - ID: Row number\n * - Name: Task name\n * - Outline Level: Hierarchy depth (1=project, 2=phase, 3+=subphase)\n * - Start: Start date (MM/DD/YYYY format)\n * - Finish: End date (MM/DD/YYYY format)\n * - Duration: Number of days\n * - Predecessors: Dependencies in format \"ID{FS|SS|FF|SF}[+/-lag]\"\n * - % Complete: Completion percentage\n * - Milestone: Yes/No\n * - Notes: Additional info\n */\n\nimport type { Project, Subphase, Dependency } from '@/types';\nimport { format, differenceInDays, parseISO } from 'date-fns';\n\ninterface ExportRow {\n  id: number;\n  name: string;\n  outlineLevel: number;\n  start: string;\n  finish: string;\n  duration: string;\n  predecessors: string;\n  percentComplete: number;\n  milestone: string;\n  notes: string;\n  // Internal tracking\n  internalId: string; // e.g., \"project-1\", \"phase-5\", \"subphase-12\"\n}\n\ninterface IdMapping {\n  [internalId: string]: number; // maps internal ID to export row ID\n}\n\n/**\n * Format a date for MS Project (MM/DD/YYYY)\n */\nfunction formatDate(dateStr: string | null | undefined): string {\n  if (!dateStr) return '';\n  try {\n    const date = parseISO(dateStr);\n    return format(date, 'MM/dd/yyyy');\n  } catch {\n    return dateStr;\n  }\n}\n\n/**\n * Calculate duration in days\n */\nfunction calculateDuration(startDate: string | null | undefined, endDate: string | null | undefined): number {\n  if (!startDate || !endDate) return 1;\n  try {\n    const start = parseISO(startDate);\n    const end = parseISO(endDate);\n    return differenceInDays(end, start) + 1; // Inclusive\n  } catch {\n    return 1;\n  }\n}\n\n/**\n * Check if a phase/subphase is a milestone (same start and end date)\n */\nfunction isMilestone(startDate: string | null | undefined, endDate: string | null | undefined): boolean {\n  return startDate === endDate;\n}\n\n/**\n * Format predecessors for MS Project\n * The Dependency type has: id (predecessor ID), type (FS/SS/FF/SF), lag (days)\n * Format: \"ID{FS|SS|FF|SF}[+/-lag]\"\n * Example: \"2FS\", \"3SS+2d\", \"4FF-1d\"\n */\nfunction formatPredecessors(\n  dependencies: Dependency[] | undefined,\n  idMapping: IdMapping\n): string {\n  if (!dependencies || dependencies.length === 0) return '';\n  \n  return dependencies\n    .map(dep => {\n      // The dependency.id is the predecessor's ID\n      // We need to find it in our mapping\n      // Since we don't know if the predecessor is a phase or subphase,\n      // we try both\n      const phaseKey = `phase-${dep.id}`;\n      const subphaseKey = `subphase-${dep.id}`;\n      \n      let sourceRowId = idMapping[phaseKey] || idMapping[subphaseKey];\n      if (!sourceRowId) return null;\n      \n      // Format: ID + Type + Lag\n      let result = `${sourceRowId}${dep.type}`;\n      if (dep.lag && dep.lag !== 0) {\n        result += dep.lag > 0 ? `+${dep.lag}d` : `${dep.lag}d`;\n      }\n      return result;\n    })\n    .filter(Boolean)\n    .join(',');\n}\n\n/**\n * Recursively process subphases\n */\nfunction processSubphases(\n  subphases: Subphase[],\n  parentId: number | null,\n  outlineLevel: number,\n  rows: ExportRow[],\n  idMapping: IdMapping\n): void {\n  const children = subphases.filter(s => s.parent_subphase_id === parentId);\n  \n  for (const subphase of children) {\n    const rowId = rows.length + 1;\n    const internalId = `subphase-${subphase.id}`;\n    idMapping[internalId] = rowId;\n    \n    const milestone = isMilestone(subphase.start_date, subphase.end_date);\n    \n    rows.push({\n      id: rowId,\n      name: milestone ? ` ${subphase.name}` : subphase.name,\n      outlineLevel,\n      start: formatDate(subphase.start_date),\n      finish: formatDate(subphase.end_date),\n      duration: milestone ? '0d' : `${calculateDuration(subphase.start_date, subphase.end_date)}d`,\n      predecessors: '', // Will be filled later\n      percentComplete: subphase.completion || 0,\n      milestone: milestone ? 'Yes' : 'No',\n      notes: '',\n      internalId,\n    });\n    \n    // Process nested subphases\n    processSubphases(subphases, subphase.id, outlineLevel + 1, rows, idMapping);\n  }\n}\n\n/**\n * Collect all subphases recursively from a phase\n */\nfunction collectAllSubphases(phase: { children?: Subphase[] }): Subphase[] {\n  const result: Subphase[] = [];\n  \n  function collect(subphases: Subphase[] | undefined) {\n    if (!subphases) return;\n    for (const sub of subphases) {\n      result.push(sub);\n      if (sub.children) {\n        collect(sub.children);\n      }\n    }\n  }\n  \n  collect(phase.children);\n  return result;\n}\n\n/**\n * Export projects to CSV format\n */\nexport function exportProjectsToCSV(projects: Project[]): string {\n  const rows: ExportRow[] = [];\n  const idMapping: IdMapping = {};\n  \n  // First pass: Create all rows and build ID mapping\n  for (const project of projects) {\n    // Project row\n    const projectRowId = rows.length + 1;\n    const projectInternalId = `project-${project.id}`;\n    idMapping[projectInternalId] = projectRowId;\n    \n    rows.push({\n      id: projectRowId,\n      name: project.name,\n      outlineLevel: 1,\n      start: formatDate(project.start_date),\n      finish: formatDate(project.end_date),\n      duration: `${calculateDuration(project.start_date, project.end_date)}d`,\n      predecessors: '',\n      percentComplete: 0, // Calculate from phases if needed\n      milestone: 'No',\n      notes: [\n        project.customer ? `Customer: ${project.customer}` : '',\n        project.pm_name ? `PM: ${project.pm_name}` : '',\n        !project.confirmed ? 'UNCONFIRMED' : '',\n      ].filter(Boolean).join('; '),\n      internalId: projectInternalId,\n    });\n    \n    // Phase rows\n    for (const phase of project.phases || []) {\n      const phaseRowId = rows.length + 1;\n      const phaseInternalId = `phase-${phase.id}`;\n      idMapping[phaseInternalId] = phaseRowId;\n      \n      const milestone = isMilestone(phase.start_date, phase.end_date);\n      \n      rows.push({\n        id: phaseRowId,\n        name: milestone ? ` ${phase.name}` : phase.name,\n        outlineLevel: 2,\n        start: formatDate(phase.start_date),\n        finish: formatDate(phase.end_date),\n        duration: milestone ? '0d' : `${calculateDuration(phase.start_date, phase.end_date)}d`,\n        predecessors: '', // Will be filled later\n        percentComplete: phase.completion || 0,\n        milestone: milestone ? 'Yes' : 'No',\n        notes: '',\n        internalId: phaseInternalId,\n      });\n      \n      // Collect all subphases (flattened from hierarchy)\n      const allSubphases = collectAllSubphases(phase);\n      \n      // Subphase rows (recursive)\n      if (allSubphases.length > 0) {\n        processSubphases(\n          allSubphases,\n          null, // Top-level subphases have no parent\n          3,    // Start at outline level 3\n          rows,\n          idMapping\n        );\n      }\n    }\n  }\n  \n  // Second pass: Fill in predecessors now that all IDs are assigned\n  for (const project of projects) {\n    for (const phase of project.phases || []) {\n      const phaseRow = rows.find(r => r.internalId === `phase-${phase.id}`);\n      if (phaseRow && phase.dependencies) {\n        phaseRow.predecessors = formatPredecessors(phase.dependencies, idMapping);\n      }\n      \n      const allSubphases = collectAllSubphases(phase);\n      for (const subphase of allSubphases) {\n        const subRow = rows.find(r => r.internalId === `subphase-${subphase.id}`);\n        if (subRow && subphase.dependencies) {\n          subRow.predecessors = formatPredecessors(subphase.dependencies, idMapping);\n        }\n      }\n    }\n  }\n  \n  // Generate CSV\n  const headers = [\n    'ID',\n    'Name',\n    'Outline Level',\n    'Start',\n    'Finish',\n    'Duration',\n    'Predecessors',\n    '% Complete',\n    'Milestone',\n    'Notes',\n  ];\n  \n  const csvRows = [\n    headers.join(','),\n    ...rows.map(row => [\n      row.id,\n      `\"${row.name.replace(/\"/g, '\"\"')}\"`, // Escape quotes\n      row.outlineLevel,\n      row.start,\n      row.finish,\n      row.duration,\n      row.predecessors,\n      row.percentComplete,\n      row.milestone,\n      `\"${row.notes.replace(/\"/g, '\"\"')}\"`,\n    ].join(',')),\n  ];\n  \n  return csvRows.join('\\n');\n}\n\n/**\n * Download CSV as a file\n */\nexport function downloadCSV(csv: string, filename: string): void {\n  const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = filename;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n}\n\n/**\n * Export and download projects\n */\nexport function exportAndDownload(projects: Project[], siteName?: string): void {\n  const csv = exportProjectsToCSV(projects);\n  const date = format(new Date(), 'yyyy-MM-dd');\n  const filename = siteName \n    ? `${siteName.toLowerCase().replace(/\\s+/g, '-')}-projects-${date}.csv`\n    : `projects-export-${date}.csv`;\n  downloadCSV(csv, filename);\n}\n","/**\n * MS Project XML Export Utility\n * \n * Exports projects to Microsoft Project XML format entirely client-side.\n */\n\nimport type { Project, Subphase } from '@/types';\nimport { format } from 'date-fns';\n\n/**\n * Create MS Project XML from a project\n */\nexport function createMSProjectXML(project: Project): string {\n  const lines: string[] = [];\n  \n  // XML declaration\n  lines.push('<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>');\n  lines.push('<Project xmlns=\"http://schemas.microsoft.com/project\">');\n  \n  // Project properties\n  lines.push(`  <Name>${escapeXml(project.name)}</Name>`);\n  lines.push(`  <Title>${escapeXml(project.name)}</Title>`);\n  lines.push(`  <Company>${escapeXml(project.customer || '')}</Company>`);\n  \n  if (project.start_date) {\n    lines.push(`  <StartDate>${project.start_date}T08:00:00</StartDate>`);\n  }\n  if (project.end_date) {\n    lines.push(`  <FinishDate>${project.end_date}T17:00:00</FinishDate>`);\n  }\n  \n  lines.push('  <ScheduleFromStart>1</ScheduleFromStart>');\n  lines.push(`  <CurrentDate>${format(new Date(), \"yyyy-MM-dd'T'HH:mm:ss\")}</CurrentDate>`);\n  lines.push('  <CalendarUID>1</CalendarUID>');\n  \n  // Calendar\n  lines.push('  <Calendars>');\n  lines.push('    <Calendar>');\n  lines.push('      <UID>1</UID>');\n  lines.push('      <Name>Standard</Name>');\n  lines.push('      <IsBaseCalendar>1</IsBaseCalendar>');\n  lines.push('    </Calendar>');\n  lines.push('  </Calendars>');\n  \n  // Tasks\n  lines.push('  <Tasks>');\n  \n  let uid = 0;\n  \n  // Helper to add a task\n  const addTask = (\n    name: string,\n    startDate: string | null | undefined,\n    endDate: string | null | undefined,\n    outlineLevel: number,\n    isMilestone: boolean = false,\n    completion: number = 0\n  ) => {\n    uid++;\n    lines.push('    <Task>');\n    lines.push(`      <UID>${uid}</UID>`);\n    lines.push(`      <ID>${uid}</ID>`);\n    lines.push(`      <Name>${escapeXml(name)}</Name>`);\n    lines.push(`      <OutlineLevel>${outlineLevel}</OutlineLevel>`);\n    if (startDate) {\n      lines.push(`      <Start>${startDate}T08:00:00</Start>`);\n    }\n    if (endDate) {\n      lines.push(`      <Finish>${endDate}T17:00:00</Finish>`);\n    }\n    lines.push(`      <Milestone>${isMilestone ? '1' : '0'}</Milestone>`);\n    lines.push(`      <PercentComplete>${completion || 0}</PercentComplete>`);\n    lines.push('    </Task>');\n  };\n  \n  // Project summary task\n  addTask(project.name, project.start_date, project.end_date, 0);\n  \n  // Phases\n  for (const phase of project.phases || []) {\n    const isMilestone = phase.start_date === phase.end_date;\n    addTask(phase.name, phase.start_date, phase.end_date, 1, isMilestone, phase.completion || 0);\n    \n    // Subphases (children)\n    const addChildren = (children: Subphase[] | undefined, level: number) => {\n      for (const child of children || []) {\n        const childMilestone = child.start_date === child.end_date;\n        addTask(child.name, child.start_date, child.end_date, level, childMilestone, child.completion || 0);\n        // Recurse for nested children\n        if (child.children && child.children.length > 0) {\n          addChildren(child.children, level + 1);\n        }\n      }\n    };\n    \n    addChildren(phase.children, 2);\n  }\n  \n  lines.push('  </Tasks>');\n  \n  // Empty resources and assignments\n  lines.push('  <Resources/>');\n  lines.push('  <Assignments/>');\n  \n  lines.push('</Project>');\n  \n  return lines.join('\\n');\n}\n\n/**\n * Escape XML special characters\n */\nfunction escapeXml(str: string): string {\n  return str\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&apos;');\n}\n\n/**\n * Download XML as a file\n */\nexport function downloadXML(xml: string, filename: string): void {\n  const blob = new Blob([xml], { type: 'application/xml;charset=utf-8;' });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = filename;\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n}\n\n/**\n * Export project to MS Project XML and download\n */\nexport function exportProjectToXML(project: Project): void {\n  const xml = createMSProjectXML(project);\n  const filename = `${project.name.replace(/\\s+/g, '_')}.xml`;\n  downloadXML(xml, filename);\n}\n","/**\n * ProjectModal - Create/Edit Project Modal\n * Matches vanilla JS functionality for creating new projects with phases\n */\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { createProject, updateProject, loadAllProjects } from '@/api/endpoints/projects';\nimport { getPredefinedPhases } from '@/api/endpoints/settings';\nimport { toInputDateFormat } from '@/utils/date';\nimport { exportAndDownload } from '@/utils/csvExport';\nimport { exportProjectToXML } from '@/utils/xmlExport';\nimport styles from './ProjectModal.module.css';\n\n// Local interface for predefined phases from API\ninterface PredefinedPhaseFromAPI {\n  id: number;\n  name: string;\n  default_color?: string;\n  color?: string;\n  is_active?: boolean;\n}\n\nexport function ProjectModal() {\n  const { activeModal, editingProject, closeModal } = useUIStore();\n  const { currentSite, staff, setProjects } = useAppStore();\n  \n  const isOpen = activeModal === 'project';\n  const isEditing = !!editingProject;\n  \n  // Form state\n  const [name, setName] = useState('');\n  const [customer, setCustomer] = useState('');\n  const [pmId, setPmId] = useState<string>('');\n  const [salesPm, setSalesPm] = useState('');\n  const [volume, setVolume] = useState('');\n  const [confirmed, setConfirmed] = useState(false);\n  const [archived, setArchived] = useState(false);\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [selectedPhases, setSelectedPhases] = useState<Set<string>>(new Set());\n  const [predefinedPhases, setPredefinedPhases] = useState<PredefinedPhaseFromAPI[]>([]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Filter staff by current site\n  const siteStaff = useMemo(() => {\n    if (!currentSite) return [];\n    return staff.filter(s => s.site_id === currentSite.id);\n  }, [staff, currentSite]);\n  \n  // Load predefined phases\n  useEffect(() => {\n    if (isOpen) {\n      getPredefinedPhases()\n        .then((phases: unknown) => {\n          const typedPhases = phases as PredefinedPhaseFromAPI[];\n          const activePhases = typedPhases.filter(p => p.is_active !== false);\n          setPredefinedPhases(activePhases);\n          // Select all by default for new projects\n          if (!isEditing) {\n            setSelectedPhases(new Set(activePhases.map(p => p.name)));\n          }\n        })\n        .catch(err => console.error('Failed to load predefined phases:', err));\n    }\n  }, [isOpen, isEditing]);\n  \n  // Initialize form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editingProject) {\n        // Editing mode - convert ISO datetime to input format\n        setName(editingProject.name);\n        setCustomer(editingProject.customer || '');\n        setPmId(editingProject.pm_id?.toString() || '');\n        setSalesPm(editingProject.sales_pm || '');\n        setVolume(editingProject.volume?.toString() || '');\n        setConfirmed(editingProject.confirmed);\n        setArchived(editingProject.archived || false);\n        setStartDate(toInputDateFormat(editingProject.start_date));\n        setEndDate(toInputDateFormat(editingProject.end_date));\n        setSelectedPhases(new Set()); // Don't select phases when editing\n      } else {\n        // New project mode\n        const today = new Date();\n        const nextMonth = new Date(today);\n        nextMonth.setMonth(nextMonth.getMonth() + 1);\n        \n        setName('');\n        setCustomer('');\n        setPmId('');\n        setSalesPm('');\n        setVolume('');\n        setConfirmed(false);\n        setArchived(false);\n        setStartDate(today.toISOString().split('T')[0]);\n        setEndDate(nextMonth.toISOString().split('T')[0]);\n      }\n      setError(null);\n    }\n  }, [isOpen, editingProject]);\n  \n  const togglePhase = (phaseName: string) => {\n    setSelectedPhases(prev => {\n      const next = new Set(prev);\n      if (next.has(phaseName)) {\n        next.delete(phaseName);\n      } else {\n        next.add(phaseName);\n      }\n      return next;\n    });\n  };\n  \n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!name.trim()) {\n      setError('Please enter a project name');\n      return;\n    }\n    \n    if (!startDate || !endDate) {\n      setError('Please select start and end dates');\n      return;\n    }\n    \n    if (!currentSite) {\n      setError('No site selected');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      // Build phases array from selected predefined phases\n      const phases: { type: string; start_date: string; end_date: string }[] = [];\n      \n      if (selectedPhases.size > 0 && !isEditing) {\n        const start = new Date(startDate);\n        const end = new Date(endDate);\n        const totalDuration = end.getTime() - start.getTime();\n        const phaseDuration = totalDuration / selectedPhases.size;\n        \n        let idx = 0;\n        // Maintain order from predefinedPhases\n        for (const phase of predefinedPhases) {\n          if (selectedPhases.has(phase.name)) {\n            const phaseStart = new Date(start.getTime() + phaseDuration * idx);\n            const phaseEnd = new Date(start.getTime() + phaseDuration * (idx + 1));\n            // Don't exceed project end\n            const adjustedEnd = phaseEnd > end ? end : phaseEnd;\n            \n            phases.push({\n              type: phase.name,\n              start_date: phaseStart.toISOString().split('T')[0],\n              end_date: adjustedEnd.toISOString().split('T')[0],\n            });\n            idx++;\n          }\n        }\n      }\n      \n      const projectData = {\n        name: name.trim(),\n        site_id: currentSite.id,\n        customer: customer.trim() || null,\n        pm_id: pmId ? parseInt(pmId) : null,\n        sales_pm: salesPm.trim() || null,\n        volume: volume ? parseInt(volume) : null,\n        confirmed,\n        archived,\n        start_date: startDate,\n        end_date: endDate,\n        phases: isEditing ? undefined : phases,\n      };\n      \n      if (isEditing && editingProject) {\n        await updateProject(editingProject.id, projectData);\n      } else {\n        await createProject(projectData);\n      }\n      \n      // Reload projects\n      const updatedProjects = await loadAllProjects();\n      setProjects(updatedProjects);\n      closeModal();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to save project');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  const [isExporting, setIsExporting] = useState(false);\n  \n  // Get the full project data from the store for export\n  const projects = useAppStore((s) => s.projects);\n  const fullProject = useMemo(() => {\n    if (!editingProject) return null;\n    return projects.find(p => p.id === editingProject.id);\n  }, [editingProject, projects]);\n  \n  // Export to CSV\n  const handleExportCSV = () => {\n    if (!fullProject) return;\n    exportAndDownload([fullProject], fullProject.name);\n  };\n  \n  // Export to MS Project XML (client-side)\n  const handleExportXML = () => {\n    if (!fullProject) return;\n    \n    setIsExporting(true);\n    try {\n      exportProjectToXML(fullProject);\n    } catch (err) {\n      console.error('Export failed:', err);\n      alert('Failed to export to MS Project format');\n    } finally {\n      setIsExporting(false);\n    }\n  };\n  \n  const footer = (\n    <div className={styles.footer}>\n      {isEditing && (\n        <div className={styles.exportButtons}>\n          <Button \n            variant=\"secondary\" \n            onClick={handleExportCSV} \n            disabled={isSubmitting || isExporting}\n            title=\"Export to CSV (MS Project compatible)\"\n          >\n            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n              <polyline points=\"7,10 12,15 17,10\" />\n              <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\" />\n            </svg>\n            CSV\n          </Button>\n          <Button \n            variant=\"secondary\" \n            onClick={handleExportXML} \n            disabled={isSubmitting || isExporting}\n            title=\"Export to MS Project XML format\"\n          >\n            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n              <polyline points=\"7,10 12,15 17,10\" />\n              <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\" />\n            </svg>\n            {isExporting ? 'Exporting...' : 'XML'}\n          </Button>\n        </div>\n      )}\n      <div className={styles.actionButtons}>\n        <Button variant=\"secondary\" onClick={closeModal} disabled={isSubmitting}>\n          Cancel\n        </Button>\n        <Button variant=\"primary\" onClick={handleSubmit} disabled={isSubmitting}>\n          {isSubmitting ? 'Saving...' : isEditing ? 'Save Changes' : 'Create Project'}\n        </Button>\n      </div>\n    </div>\n  );\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={closeModal}\n      title={isEditing ? 'Edit Project' : 'New Project'}\n      size=\"lg\"\n      footer={footer}\n    >\n      <form onSubmit={handleSubmit} className={styles.form}>\n        {error && <div className={styles.error}>{error}</div>}\n        \n        <div className={styles.formGroup}>\n          <label className={styles.label}>Project Name *</label>\n          <input\n            type=\"text\"\n            className={styles.input}\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            placeholder=\"Enter project name\"\n            autoFocus\n          />\n        </div>\n        \n        <div className={styles.formRow}>\n          <div className={styles.formGroup}>\n            <label className={styles.label}>Start Date *</label>\n            <input\n              type=\"date\"\n              className={styles.input}\n              value={startDate}\n              onChange={(e) => setStartDate(e.target.value)}\n            />\n          </div>\n          <div className={styles.formGroup}>\n            <label className={styles.label}>End Date *</label>\n            <input\n              type=\"date\"\n              className={styles.input}\n              value={endDate}\n              onChange={(e) => setEndDate(e.target.value)}\n            />\n          </div>\n        </div>\n        \n        <div className={styles.formRow}>\n          <div className={styles.formGroup}>\n            <label className={styles.label}>Project Manager</label>\n            <select\n              className={styles.input}\n              value={pmId}\n              onChange={(e) => setPmId(e.target.value)}\n            >\n              <option value=\"\">Select PM</option>\n              {siteStaff.map(s => (\n                <option key={s.id} value={s.id}>{s.name}</option>\n              ))}\n            </select>\n          </div>\n          <div className={styles.formGroup}>\n            <label className={styles.label}>Customer</label>\n            <input\n              type=\"text\"\n              className={styles.input}\n              value={customer}\n              onChange={(e) => setCustomer(e.target.value)}\n              placeholder=\"Customer name\"\n            />\n          </div>\n        </div>\n        \n        <div className={styles.formRow}>\n          <div className={styles.formGroup}>\n            <label className={styles.label}>Sales PM</label>\n            <input\n              type=\"text\"\n              className={styles.input}\n              value={salesPm}\n              onChange={(e) => setSalesPm(e.target.value)}\n              placeholder=\"Sales contact\"\n            />\n          </div>\n          <div className={styles.formGroup}>\n            <label className={styles.label}>Project Volume (CHF)</label>\n            <input\n              type=\"number\"\n              className={styles.input}\n              value={volume}\n              onChange={(e) => setVolume(e.target.value)}\n              placeholder=\"0\"\n            />\n          </div>\n        </div>\n        \n        {!isEditing && (\n          <div className={styles.formGroup}>\n            <label className={styles.label}>Project Phases</label>\n            <div className={styles.phaseTags}>\n              {predefinedPhases.map(phase => (\n                <span\n                  key={phase.id}\n                  className={`${styles.phaseTag} ${selectedPhases.has(phase.name) ? styles.selected : ''}`}\n                  onClick={() => togglePhase(phase.name)}\n                  style={{ \n                    '--phase-color': phase.default_color || phase.color || 'var(--accent-blue)',\n                  } as React.CSSProperties}\n                >\n                  {phase.name}\n                </span>\n              ))}\n            </div>\n          </div>\n        )}\n        \n        <div className={styles.formRow}>\n          <div className={styles.formGroup}>\n            <label className={styles.checkbox}>\n              <input\n                type=\"checkbox\"\n                checked={confirmed}\n                onChange={(e) => setConfirmed(e.target.checked)}\n              />\n              <span>Project Confirmed</span>\n            </label>\n          </div>\n          {isEditing && (\n            <div className={styles.formGroup}>\n              <label className={styles.checkbox}>\n                <input\n                  type=\"checkbox\"\n                  checked={archived}\n                  onChange={(e) => setArchived(e.target.checked)}\n                />\n                <span>Archived</span>\n              </label>\n            </div>\n          )}\n        </div>\n      </form>\n    </Modal>\n  );\n}\n","/**\n * PhaseModal - Create/Edit Phase Modal\n * Supports phase creation, editing, milestone mode, and staff assignments\n */\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { createPhase, updatePhase, deletePhase, loadAllProjects, updateProject } from '@/api/endpoints/projects';\nimport { toInputDateFormat } from '@/utils/date';\nimport { getPhaseColor } from '@/utils/themeColors';\nimport type { Project } from '@/types';\nimport styles from './PhaseModal.module.css';\n\n// Calculate the date range that encompasses all phases of a project\nfunction calculateProjectDateRange(project: Project): { start: Date; end: Date } | null {\n  const phases = project.phases || [];\n  if (phases.length === 0) return null;\n  \n  let minStart: Date | null = null;\n  let maxEnd: Date | null = null;\n  \n  for (const phase of phases) {\n    const start = new Date(phase.start_date);\n    const end = new Date(phase.end_date);\n    \n    if (!minStart || start < minStart) minStart = start;\n    if (!maxEnd || end > maxEnd) maxEnd = end;\n  }\n  \n  if (minStart && maxEnd) {\n    return { start: minStart, end: maxEnd };\n  }\n  return null;\n}\n\n// Cascade project dates based on phases\nasync function cascadeProjectDates(\n  project: Project,\n  mode: 'expand' | 'shrink',\n  newPhaseStart?: Date,\n  newPhaseEnd?: Date\n): Promise<boolean> {\n  // Project must have dates\n  if (!project.start_date || !project.end_date) return false;\n  \n  const projectStart = new Date(project.start_date);\n  const projectEnd = new Date(project.end_date);\n  \n  let updatedProjectStart = projectStart;\n  let updatedProjectEnd = projectEnd;\n  \n  if (mode === 'expand' && newPhaseStart && newPhaseEnd) {\n    // Expand project if new phase extends beyond\n    if (newPhaseStart < projectStart) updatedProjectStart = newPhaseStart;\n    if (newPhaseEnd > projectEnd) updatedProjectEnd = newPhaseEnd;\n  } else if (mode === 'shrink') {\n    // Recalculate project bounds from remaining phases\n    const projectRange = calculateProjectDateRange(project);\n    if (projectRange) {\n      updatedProjectStart = projectRange.start;\n      updatedProjectEnd = projectRange.end;\n    }\n  }\n  \n  // Update project if dates changed\n  if (updatedProjectStart.getTime() !== projectStart.getTime() || \n      updatedProjectEnd.getTime() !== projectEnd.getTime()) {\n    console.log('[PhaseModal] Cascading project dates:', {\n      projectId: project.id,\n      mode,\n      oldStart: project.start_date,\n      oldEnd: project.end_date,\n      newStart: updatedProjectStart.toISOString().split('T')[0],\n      newEnd: updatedProjectEnd.toISOString().split('T')[0],\n    });\n    await updateProject(project.id, {\n      start_date: updatedProjectStart.toISOString().split('T')[0],\n      end_date: updatedProjectEnd.toISOString().split('T')[0],\n    });\n    return true;\n  }\n  return false;\n}\n\nexport function PhaseModal() {\n  const { activeModal, editingPhase, modalContext, closeModal } = useUIStore();\n  const { projects, setProjects, ensureProjectExpanded } = useAppStore();\n  \n  const isOpen = activeModal === 'phase';\n  const isEditing = !!editingPhase;\n  const projectId = editingPhase?.project_id || modalContext.projectId;\n  \n  // Form state\n  const [name, setName] = useState('');\n  const [isMilestone, setIsMilestone] = useState(false);\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Get parent project for date constraints\n  const project = useMemo(() => {\n    return projects.find(p => p.id === projectId);\n  }, [projects, projectId]);\n  \n  // Initialize form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editingPhase) {\n        // Editing mode - convert ISO datetime to input format\n        setName(editingPhase.name);\n        // Handle both boolean true and integer 1 from SQLite\n        setIsMilestone(Boolean(editingPhase.is_milestone));\n        setStartDate(toInputDateFormat(editingPhase.start_date));\n        setEndDate(toInputDateFormat(editingPhase.end_date));\n      } else if (modalContext.phantomPreset) {\n        // Phantom sibling mode - use preset dates\n        setName('');\n        setIsMilestone(false);\n        setStartDate(toInputDateFormat(modalContext.phantomPreset.startDate));\n        setEndDate(toInputDateFormat(modalContext.phantomPreset.endDate));\n      } else {\n        // New phase mode - use project dates as default\n        const today = new Date().toISOString().split('T')[0];\n        const defaultStart = toInputDateFormat(project?.start_date) || today;\n        const defaultEnd = toInputDateFormat(project?.end_date) || today;\n        \n        setName('');\n        setIsMilestone(false);\n        setStartDate(defaultStart);\n        setEndDate(defaultEnd);\n      }\n      setError(null);\n    }\n  }, [isOpen, editingPhase, project, modalContext.phantomPreset]);\n  \n  // Sync end date with start date for milestones\n  useEffect(() => {\n    if (isMilestone && startDate) {\n      setEndDate(startDate);\n    }\n  }, [isMilestone, startDate]);\n  \n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!name.trim()) {\n      setError('Please enter a phase name');\n      return;\n    }\n    \n    if (!startDate) {\n      setError('Please select a start date');\n      return;\n    }\n    \n    if (!isMilestone && !endDate) {\n      setError('Please select an end date');\n      return;\n    }\n    \n    if (!projectId) {\n      setError('No project selected');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      // Build phase data\n      const phaseData: {\n        name: string;\n        start_date: string;\n        end_date: string;\n        is_milestone: boolean;\n        color: string;\n        dependencies?: { id: number; type: 'FS' | 'FF' | 'SS' | 'SF'; lag: number }[];\n        order_index?: number;\n      } = {\n        name: name.trim(),\n        start_date: startDate,\n        end_date: isMilestone ? startDate : endDate,\n        is_milestone: isMilestone,\n        color: editingPhase?.color || getPhaseColor(),\n      };\n      \n      // If this was created via phantom sibling mode, add dependency and order\n      if (modalContext.phantomPreset) {\n        const { predecessorId, dependencyType } = modalContext.phantomPreset;\n        \n        // Find the source phase to calculate lag\n        const sourcePhase = project?.phases?.find(p => p.id === predecessorId);\n        if (sourcePhase) {\n          // Calculate lag based on dependency type\n          let lag = 0;\n          const newStart = new Date(startDate);\n          const sourceStart = new Date(sourcePhase.start_date.split('T')[0]);\n          const sourceEnd = new Date(sourcePhase.end_date.split('T')[0]);\n          \n          if (dependencyType === 'SS') {\n            // Start-to-Start: lag = new start - source start\n            lag = Math.round((newStart.getTime() - sourceStart.getTime()) / (1000 * 60 * 60 * 24));\n          } else {\n            // Finish-to-Start: lag = new start - (source end + 1)\n            const expectedStart = new Date(sourceEnd);\n            expectedStart.setDate(expectedStart.getDate() + 1);\n            lag = Math.round((newStart.getTime() - expectedStart.getTime()) / (1000 * 60 * 60 * 24));\n          }\n          \n          phaseData.dependencies = [{\n            id: predecessorId,\n            type: dependencyType,\n            lag,\n          }];\n          \n          // Use the source phase's order_index to insert after it\n          const sourceSortOrder = sourcePhase.order_index ?? 0;\n          phaseData.order_index = sourceSortOrder + 1;\n        } else {\n          console.warn('[PhaseModal] sourcePhase not found for predecessorId:', predecessorId);\n        }\n      }\n      \n      if (isEditing && editingPhase) {\n        await updatePhase(editingPhase.id, phaseData);\n      } else {\n        await createPhase(projectId, phaseData);\n        // Expand project so new phase is visible\n        ensureProjectExpanded(projectId);\n        \n        // Cascade project dates if the new phase extends beyond project bounds\n        if (project) {\n          const newPhaseStart = new Date(phaseData.start_date);\n          const newPhaseEnd = new Date(phaseData.end_date);\n          await cascadeProjectDates(project, 'expand', newPhaseStart, newPhaseEnd);\n        }\n      }\n      \n      // Reload projects\n      const updatedProjects = await loadAllProjects();\n      setProjects(updatedProjects);\n      closeModal();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to save phase');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  const handleDelete = async () => {\n    if (!isEditing || !editingPhase || !projectId) return;\n    \n    if (!confirm('Are you sure you want to delete this phase? This will also delete all subphases and assignments.')) {\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      await deletePhase(editingPhase.id);\n      \n      // Reload projects to get updated structure\n      const updatedProjects = await loadAllProjects();\n      \n      // Cascade shrink project dates after deletion\n      if (project) {\n        const updatedProject = updatedProjects.find(p => p.id === project.id);\n        if (updatedProject) {\n          const didCascade = await cascadeProjectDates(updatedProject, 'shrink');\n          if (didCascade) {\n            // Reload again to get the cascaded dates\n            const finalProjects = await loadAllProjects();\n            setProjects(finalProjects);\n          } else {\n            setProjects(updatedProjects);\n          }\n        } else {\n          setProjects(updatedProjects);\n        }\n      } else {\n        setProjects(updatedProjects);\n      }\n      \n      closeModal();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to delete phase');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  const footer = (\n    <div className={styles.footer}>\n      {isEditing && (\n        <Button \n          variant=\"danger\" \n          onClick={handleDelete} \n          disabled={isSubmitting}\n          className={styles.deleteBtn}\n        >\n          Delete Phase\n        </Button>\n      )}\n      <div className={styles.footerRight}>\n        <Button variant=\"secondary\" onClick={closeModal} disabled={isSubmitting}>\n          Cancel\n        </Button>\n        <Button variant=\"primary\" onClick={handleSubmit} disabled={isSubmitting}>\n          {isSubmitting ? 'Saving...' : isEditing ? 'Save Changes' : 'Add Phase'}\n        </Button>\n      </div>\n    </div>\n  );\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={closeModal}\n      title={isEditing ? 'Edit Phase' : 'Add Phase'}\n      size=\"md\"\n      footer={footer}\n    >\n      <form onSubmit={handleSubmit} className={styles.form}>\n        {error && <div className={styles.error}>{error}</div>}\n        \n        <div className={styles.formGroup}>\n          <label className={styles.label}>Phase Name *</label>\n          <input\n            type=\"text\"\n            className={styles.input}\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            placeholder=\"e.g., Preparation, Analytics, Trial, etc.\"\n            autoFocus\n          />\n        </div>\n        \n        <div className={styles.formGroup}>\n          <label className={styles.checkbox}>\n            <input\n              type=\"checkbox\"\n              checked={isMilestone}\n              onChange={(e) => setIsMilestone(e.target.checked)}\n            />\n            <span>Milestone (single date, shown as diamond)</span>\n          </label>\n        </div>\n        \n        <div className={styles.formRow}>\n          <div className={styles.formGroup}>\n            <label className={styles.label}>{isMilestone ? 'Date *' : 'Start Date *'}</label>\n            <input\n              type=\"date\"\n              className={styles.input}\n              value={startDate}\n              onChange={(e) => setStartDate(e.target.value)}\n            />\n          </div>\n          {!isMilestone && (\n            <div className={styles.formGroup}>\n              <label className={styles.label}>End Date *</label>\n              <input\n                type=\"date\"\n                className={styles.input}\n                value={endDate}\n                onChange={(e) => setEndDate(e.target.value)}\n              />\n            </div>\n          )}\n        </div>\n        \n        {/* Staff assignments section - only shown when editing */}\n        {isEditing && editingPhase?.staffAssignments && editingPhase.staffAssignments.length > 0 && (\n          <div className={styles.assignmentsSection}>\n            <label className={styles.label}>Assigned Staff</label>\n            <div className={styles.assignmentsList}>\n              {editingPhase.staffAssignments.map(assignment => (\n                <div key={assignment.id} className={styles.assignmentItem}>\n                  <span className={styles.assignmentName}>\n                    {assignment.staff_name || `Staff #${assignment.staff_id}`}\n                  </span>\n                  <span className={styles.assignmentAllocation}>\n                    {assignment.allocation}%\n                  </span>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </form>\n    </Modal>\n  );\n}\n","/**\n * SubphaseModal - Create/Edit Subphase Modal\n * Supports subphase creation, editing, milestone mode\n * Can create under a phase or under another subphase\n */\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { createSubphase, createChildSubphase, updateSubphase, deleteSubphase, loadAllProjects, updatePhase, updateProject } from '@/api/endpoints/projects';\nimport { toInputDateFormat } from '@/utils/date';\nimport { getDepthColor } from '@/utils/themeColors';\nimport type { Phase, Subphase, Project, CreateSubphaseRequest } from '@/types';\nimport styles from './PhaseModal.module.css'; // Reuse phase modal styles\n\n// Helper to find subphase by ID in nested structure\nfunction findSubphaseById(phases: Phase[], subphaseId: number): Subphase | null {\n  for (const phase of phases) {\n    const found = findSubphaseInChildren(phase.children || [], subphaseId);\n    if (found) return found;\n  }\n  return null;\n}\n\nfunction findSubphaseInChildren(children: Subphase[], targetId: number): Subphase | null {\n  for (const child of children) {\n    if (child.id === targetId) return child;\n    if (child.children && child.children.length > 0) {\n      const found = findSubphaseInChildren(child.children, targetId);\n      if (found) return found;\n    }\n  }\n  return null;\n}\n\n// Calculate the depth of a subphase (1-based)\nfunction getSubphaseDepth(phases: Phase[], subphaseId: number): number {\n  for (const phase of phases) {\n    const depth = findSubphaseDepthInChildren(phase.children || [], subphaseId, 1);\n    if (depth !== null) return depth;\n  }\n  return 1;\n}\n\nfunction findSubphaseDepthInChildren(children: Subphase[], targetId: number, currentDepth: number): number | null {\n  for (const child of children) {\n    if (child.id === targetId) return currentDepth;\n    if (child.children && child.children.length > 0) {\n      const depth = findSubphaseDepthInChildren(child.children, targetId, currentDepth + 1);\n      if (depth !== null) return depth;\n    }\n  }\n  return null;\n}\n\n// Find the phase that contains a subphase\nfunction findPhaseContainingSubphase(phases: Phase[], subphaseId: number): Phase | null {\n  for (const phase of phases) {\n    const found = findSubphaseInChildren(phase.children || [], subphaseId);\n    if (found) return phase;\n  }\n  return null;\n}\n\n// Calculate the date range that encompasses all children of a phase\nfunction calculatePhaseDateRange(phase: Phase): { start: Date; end: Date } | null {\n  const children = phase.children || [];\n  if (children.length === 0) return null;\n  \n  let minStart: Date | null = null;\n  let maxEnd: Date | null = null;\n  \n  const processSubphases = (subphases: Subphase[]) => {\n    for (const sub of subphases) {\n      const start = new Date(sub.start_date);\n      const end = new Date(sub.end_date);\n      \n      if (!minStart || start < minStart) minStart = start;\n      if (!maxEnd || end > maxEnd) maxEnd = end;\n      \n      if (sub.children && sub.children.length > 0) {\n        processSubphases(sub.children);\n      }\n    }\n  };\n  \n  processSubphases(children);\n  \n  if (minStart && maxEnd) {\n    return { start: minStart, end: maxEnd };\n  }\n  return null;\n}\n\n// Calculate the date range that encompasses all phases of a project\nfunction calculateProjectDateRange(project: Project): { start: Date; end: Date } | null {\n  const phases = project.phases || [];\n  if (phases.length === 0) return null;\n  \n  let minStart: Date | null = null;\n  let maxEnd: Date | null = null;\n  \n  for (const phase of phases) {\n    const start = new Date(phase.start_date);\n    const end = new Date(phase.end_date);\n    \n    if (!minStart || start < minStart) minStart = start;\n    if (!maxEnd || end > maxEnd) maxEnd = end;\n  }\n  \n  if (minStart && maxEnd) {\n    return { start: minStart, end: maxEnd };\n  }\n  return null;\n}\n\n// Cascade dates upward: expand parents if child extends beyond, or shrink if child deleted\ninterface CascadeResult {\n  subphasesUpdated: number;\n  phaseUpdated: boolean;\n  projectUpdated: boolean;\n}\n\n// Calculate the date range that encompasses all children of a subphase\nfunction calculateSubphaseDateRange(subphase: Subphase): { start: Date; end: Date } | null {\n  const children = subphase.children || [];\n  if (children.length === 0) return null;\n  \n  let minStart: Date | null = null;\n  let maxEnd: Date | null = null;\n  \n  const processChildren = (subs: Subphase[]) => {\n    for (const sub of subs) {\n      const start = new Date(sub.start_date);\n      const end = new Date(sub.end_date);\n      \n      if (!minStart || start < minStart) minStart = start;\n      if (!maxEnd || end > maxEnd) maxEnd = end;\n      \n      if (sub.children && sub.children.length > 0) {\n        processChildren(sub.children);\n      }\n    }\n  };\n  \n  processChildren(children);\n  \n  if (minStart && maxEnd) {\n    return { start: minStart, end: maxEnd };\n  }\n  return null;\n}\n\n// Find the chain of parent subphases from a given subphase up to the phase\nfunction findParentSubphaseChain(phases: Phase[], subphaseId: number): Subphase[] {\n  const chain: Subphase[] = [];\n  \n  // Find the subphase first\n  const subphase = findSubphaseById(phases, subphaseId);\n  if (!subphase) return chain;\n  \n  // Walk up the parent chain\n  let current: Subphase | null = subphase;\n  while (current) {\n    if (current.parent_subphase_id) {\n      const parent = findSubphaseById(phases, current.parent_subphase_id);\n      if (parent) {\n        chain.push(parent);\n        current = parent;\n      } else {\n        break;\n      }\n    } else {\n      break;\n    }\n  }\n  \n  return chain; // Returns parents from immediate to root (closest first)\n}\n\nasync function cascadeDatesUpward(\n  project: Project,\n  phaseId: number,\n  mode: 'expand' | 'shrink',\n  newChildStart?: Date,\n  newChildEnd?: Date,\n  parentSubphaseId?: number // The immediate parent subphase (if any)\n): Promise<CascadeResult> {\n  const result: CascadeResult = { subphasesUpdated: 0, phaseUpdated: false, projectUpdated: false };\n  const phase = project.phases?.find(p => p.id === phaseId);\n  if (!phase) return result;\n  \n  // Project must have dates\n  if (!project.start_date || !project.end_date) return result;\n  \n  // Track the current bounds as we cascade up\n  let currentStart = newChildStart;\n  let currentEnd = newChildEnd;\n  \n  // First, cascade through parent subphases (if any)\n  if (parentSubphaseId) {\n    const parentChain = findParentSubphaseChain(project.phases || [], parentSubphaseId);\n    // Add the immediate parent to the front of the chain\n    const immediateParent = findSubphaseById(project.phases || [], parentSubphaseId);\n    if (immediateParent) {\n      parentChain.unshift(immediateParent);\n    }\n    \n    // Process each parent subphase from closest to furthest\n    for (const parentSubphase of parentChain) {\n      const subStart = new Date(parentSubphase.start_date);\n      const subEnd = new Date(parentSubphase.end_date);\n      \n      let updatedStart = subStart;\n      let updatedEnd = subEnd;\n      \n      if (mode === 'expand' && currentStart && currentEnd) {\n        // Expand if child extends beyond\n        if (currentStart < subStart) updatedStart = currentStart;\n        if (currentEnd > subEnd) updatedEnd = currentEnd;\n      } else if (mode === 'shrink') {\n        // Recalculate bounds from remaining children\n        const childRange = calculateSubphaseDateRange(parentSubphase);\n        if (childRange) {\n          updatedStart = childRange.start;\n          updatedEnd = childRange.end;\n        }\n      }\n      \n      // Update subphase if dates changed\n      if (updatedStart.getTime() !== subStart.getTime() || \n          updatedEnd.getTime() !== subEnd.getTime()) {\n        console.log('[Cascade] Updating parent subphase dates:', {\n          subphaseId: parentSubphase.id,\n          name: parentSubphase.name,\n          oldStart: parentSubphase.start_date,\n          oldEnd: parentSubphase.end_date,\n          newStart: updatedStart.toISOString().split('T')[0],\n          newEnd: updatedEnd.toISOString().split('T')[0],\n        });\n        await updateSubphase(parentSubphase.id, {\n          start_date: updatedStart.toISOString().split('T')[0],\n          end_date: updatedEnd.toISOString().split('T')[0],\n        });\n        result.subphasesUpdated++;\n        \n        // Update local object for next iteration\n        parentSubphase.start_date = updatedStart.toISOString().split('T')[0];\n        parentSubphase.end_date = updatedEnd.toISOString().split('T')[0];\n      }\n      \n      // Update current bounds for next parent\n      currentStart = updatedStart;\n      currentEnd = updatedEnd;\n    }\n  }\n  \n  // Now cascade to phase\n  const phaseStart = new Date(phase.start_date);\n  const phaseEnd = new Date(phase.end_date);\n  \n  let updatedPhaseStart = phaseStart;\n  let updatedPhaseEnd = phaseEnd;\n  \n  if (mode === 'expand' && currentStart && currentEnd) {\n    // Expand phase if child extends beyond\n    if (currentStart < phaseStart) updatedPhaseStart = currentStart;\n    if (currentEnd > phaseEnd) updatedPhaseEnd = currentEnd;\n  } else if (mode === 'shrink') {\n    // Recalculate phase bounds from remaining children\n    const childRange = calculatePhaseDateRange(phase);\n    if (childRange) {\n      updatedPhaseStart = childRange.start;\n      updatedPhaseEnd = childRange.end;\n    }\n  }\n  \n  // Update phase if dates changed\n  if (updatedPhaseStart.getTime() !== phaseStart.getTime() || \n      updatedPhaseEnd.getTime() !== phaseEnd.getTime()) {\n    console.log('[Cascade] Updating phase dates:', {\n      phaseId,\n      oldStart: phase.start_date,\n      oldEnd: phase.end_date,\n      newStart: updatedPhaseStart.toISOString().split('T')[0],\n      newEnd: updatedPhaseEnd.toISOString().split('T')[0],\n    });\n    await updatePhase(phaseId, {\n      start_date: updatedPhaseStart.toISOString().split('T')[0],\n      end_date: updatedPhaseEnd.toISOString().split('T')[0],\n    });\n    result.phaseUpdated = true;\n    \n    // Update local phase object for project cascade calculation\n    phase.start_date = updatedPhaseStart.toISOString().split('T')[0];\n    phase.end_date = updatedPhaseEnd.toISOString().split('T')[0];\n  }\n  \n  // Now cascade to project\n  const projectStart = new Date(project.start_date);\n  const projectEnd = new Date(project.end_date);\n  \n  let updatedProjectStart = projectStart;\n  let updatedProjectEnd = projectEnd;\n  \n  if (mode === 'expand') {\n    // Expand project if phase extends beyond\n    if (updatedPhaseStart < projectStart) updatedProjectStart = updatedPhaseStart;\n    if (updatedPhaseEnd > projectEnd) updatedProjectEnd = updatedPhaseEnd;\n  } else if (mode === 'shrink') {\n    // Recalculate project bounds from all phases\n    const projectRange = calculateProjectDateRange(project);\n    if (projectRange) {\n      updatedProjectStart = projectRange.start;\n      updatedProjectEnd = projectRange.end;\n    }\n  }\n  \n  // Update project if dates changed\n  if (updatedProjectStart.getTime() !== projectStart.getTime() || \n      updatedProjectEnd.getTime() !== projectEnd.getTime()) {\n    console.log('[Cascade] Updating project dates:', {\n      projectId: project.id,\n      oldStart: project.start_date,\n      oldEnd: project.end_date,\n      newStart: updatedProjectStart.toISOString().split('T')[0],\n      newEnd: updatedProjectEnd.toISOString().split('T')[0],\n    });\n    await updateProject(project.id, {\n      start_date: updatedProjectStart.toISOString().split('T')[0],\n      end_date: updatedProjectEnd.toISOString().split('T')[0],\n    });\n    result.projectUpdated = true;\n  }\n  \n  return result;\n}\n\nexport function SubphaseModal() {\n  const { activeModal, editingSubphase, modalContext, closeModal } = useUIStore();\n  const { projects, setProjects, ensurePhaseExpanded, ensureSubphaseExpanded } = useAppStore();\n  \n  const isOpen = activeModal === 'subphase';\n  const isEditing = !!editingSubphase;\n  const projectId = modalContext.projectId;\n  const phaseId = editingSubphase?.parent_phase_id || modalContext.phaseId;\n  const parentSubphaseId = modalContext.subphaseId; // For creating nested subphases\n  \n  // Form state\n  const [name, setName] = useState('');\n  const [isMilestone, setIsMilestone] = useState(false);\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Get parent phase for date constraints\n  const project = useMemo(() => {\n    if (!projectId) return null;\n    return projects.find(p => p.id === projectId) || null;\n  }, [projects, projectId]);\n  \n  const parentPhase = useMemo(() => {\n    if (!project || !phaseId) return null;\n    return project.phases?.find(ph => ph.id === phaseId) || null;\n  }, [project, phaseId]);\n  \n  // Initialize form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editingSubphase) {\n        // Editing mode - convert ISO datetime to input format\n        setName(editingSubphase.name);\n        // Handle both boolean true and integer 1 from SQLite\n        setIsMilestone(Boolean(editingSubphase.is_milestone));\n        setStartDate(toInputDateFormat(editingSubphase.start_date));\n        setEndDate(toInputDateFormat(editingSubphase.end_date));\n      } else if (modalContext.phantomPreset) {\n        // Phantom sibling mode - use preset dates\n        setName('');\n        setIsMilestone(false);\n        setStartDate(toInputDateFormat(modalContext.phantomPreset.startDate));\n        setEndDate(toInputDateFormat(modalContext.phantomPreset.endDate));\n      } else {\n        // New subphase mode - use parent phase dates as default\n        const today = new Date().toISOString().split('T')[0];\n        const defaultStart = toInputDateFormat(parentPhase?.start_date) || today;\n        const defaultEnd = toInputDateFormat(parentPhase?.end_date) || today;\n        \n        setName('');\n        setIsMilestone(false);\n        setStartDate(defaultStart);\n        setEndDate(defaultEnd);\n      }\n      setError(null);\n    }\n  }, [isOpen, editingSubphase, parentPhase, modalContext.phantomPreset]);\n  \n  // Sync end date with start date for milestones\n  useEffect(() => {\n    if (isMilestone && startDate) {\n      setEndDate(startDate);\n    }\n  }, [isMilestone, startDate]);\n  \n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!name.trim()) {\n      setError('Please enter a subphase name');\n      return;\n    }\n    \n    if (!startDate) {\n      setError('Please select a start date');\n      return;\n    }\n    \n    if (!isMilestone && !endDate) {\n      setError('Please select an end date');\n      return;\n    }\n    \n    if (!phaseId) {\n      setError('No parent phase selected');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      // Calculate the appropriate color based on depth\n      let subphaseColor: string;\n      if (editingSubphase?.color) {\n        // Keep existing color when editing\n        subphaseColor = editingSubphase.color;\n      } else if (parentSubphaseId && project) {\n        // Creating under a subphase - depth is parent's depth + 1\n        const parentDepth = getSubphaseDepth(project.phases || [], parentSubphaseId);\n        subphaseColor = getDepthColor(parentDepth + 1);\n      } else {\n        // Creating directly under a phase - depth 1\n        subphaseColor = getDepthColor(1);\n      }\n      \n      // Build subphase data\n      const subphaseData: CreateSubphaseRequest = {\n        name: name.trim(),\n        start_date: startDate,\n        end_date: isMilestone ? startDate : endDate,\n        is_milestone: isMilestone,\n        color: subphaseColor,\n      };\n      \n      // If this was created via phantom sibling mode, add dependency and order\n      if (modalContext.phantomPreset) {\n        const { predecessorId, dependencyType } = modalContext.phantomPreset;\n        \n        // Find the source subphase to calculate lag\n        const project = projects.find(p => p.id === projectId);\n        const sourceSubphase = findSubphaseById(project?.phases || [], predecessorId);\n        \n        if (sourceSubphase) {\n          // Calculate lag based on dependency type\n          let lag = 0;\n          const newStart = new Date(startDate);\n          const sourceStart = new Date(sourceSubphase.start_date.split('T')[0]);\n          const sourceEnd = new Date(sourceSubphase.end_date.split('T')[0]);\n          \n          if (dependencyType === 'SS') {\n            // Start-to-Start: lag = new start - source start\n            lag = Math.round((newStart.getTime() - sourceStart.getTime()) / (1000 * 60 * 60 * 24));\n          } else {\n            // Finish-to-Start: lag = new start - (source end + 1)\n            const expectedStart = new Date(sourceEnd);\n            expectedStart.setDate(expectedStart.getDate() + 1);\n            lag = Math.round((newStart.getTime() - expectedStart.getTime()) / (1000 * 60 * 60 * 24));\n          }\n          \n          subphaseData.dependencies = [{\n            id: predecessorId,\n            type: dependencyType,\n            lag,\n          }];\n          \n          // Use the source subphase's order_index + 1 to insert after it\n          const sourceSortOrder = sourceSubphase.order_index ?? 0;\n          subphaseData.order_index = sourceSortOrder + 1;\n        }\n      }\n      \n      // Track if we need to cascade parent phase dates\n      let cascadePhaseId: number | null = null;\n      let cascadeParentSubphaseId: number | undefined = undefined;\n      \n      if (isEditing && editingSubphase) {\n        await updateSubphase(editingSubphase.id, subphaseData);\n      } else if (parentSubphaseId && projectId) {\n        // Creating nested subphase under another subphase\n        await createChildSubphase(parentSubphaseId, projectId, subphaseData);\n        // Expand parent subphase so new child is visible\n        ensureSubphaseExpanded(parentSubphaseId);\n        // For nested subphases, cascade through parent subphases to phase to project\n        cascadePhaseId = phaseId || null;\n        cascadeParentSubphaseId = parentSubphaseId;\n      } else if (phaseId && projectId) {\n        // Creating subphase directly under a phase\n        await createSubphase(phaseId, projectId, subphaseData);\n        // Expand parent phase so new subphase is visible\n        ensurePhaseExpanded(phaseId);\n        cascadePhaseId = phaseId;\n        // No parent subphase - direct child of phase\n      } else {\n        throw new Error('Missing phaseId or projectId');\n      }\n      \n      // Cascade parent dates if the new subphase extends beyond bounds\n      if (cascadePhaseId && !isEditing && project) {\n        const newSubphaseStart = new Date(subphaseData.start_date);\n        const newSubphaseEnd = new Date(subphaseData.end_date);\n        \n        await cascadeDatesUpward(\n          project,\n          cascadePhaseId,\n          'expand',\n          newSubphaseStart,\n          newSubphaseEnd,\n          cascadeParentSubphaseId\n        );\n      }\n      \n      // Reload projects\n      const updatedProjects = await loadAllProjects();\n      setProjects(updatedProjects);\n      closeModal();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to save subphase');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  const handleDelete = async () => {\n    if (!isEditing || !editingSubphase) return;\n    \n    if (!confirm('Are you sure you want to delete this subphase? This will also delete all nested subphases and assignments.')) {\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      // Find the phase containing this subphase before deletion\n      const containingPhase = project ? findPhaseContainingSubphase(project.phases || [], editingSubphase.id) : null;\n      // Get the parent subphase ID (if this was a nested subphase)\n      const parentSubphaseIdForCascade = editingSubphase.parent_subphase_id || undefined;\n      \n      await deleteSubphase(editingSubphase.id);\n      \n      // Reload projects to get updated structure\n      const updatedProjects = await loadAllProjects();\n      \n      // Cascade shrink dates after deletion\n      if (containingPhase && project) {\n        // Find the updated project\n        const updatedProject = updatedProjects.find(p => p.id === project.id);\n        if (updatedProject) {\n          await cascadeDatesUpward(\n            updatedProject, \n            containingPhase.id, \n            'shrink',\n            undefined,\n            undefined,\n            parentSubphaseIdForCascade\n          );\n          // Reload again to get the cascaded dates\n          const finalProjects = await loadAllProjects();\n          setProjects(finalProjects);\n        } else {\n          setProjects(updatedProjects);\n        }\n      } else {\n        setProjects(updatedProjects);\n      }\n      \n      closeModal();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to delete subphase');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  const footer = (\n    <div className={styles.footer}>\n      {isEditing && (\n        <Button \n          variant=\"danger\" \n          onClick={handleDelete} \n          disabled={isSubmitting}\n          className={styles.deleteBtn}\n        >\n          Delete Subphase\n        </Button>\n      )}\n      <div className={styles.footerRight}>\n        <Button variant=\"secondary\" onClick={closeModal} disabled={isSubmitting}>\n          Cancel\n        </Button>\n        <Button variant=\"primary\" onClick={handleSubmit} disabled={isSubmitting}>\n          {isSubmitting ? 'Saving...' : isEditing ? 'Save Changes' : 'Add Subphase'}\n        </Button>\n      </div>\n    </div>\n  );\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={closeModal}\n      title={isEditing ? 'Edit Subphase' : 'Add Subphase'}\n      size=\"md\"\n      footer={footer}\n    >\n      <form onSubmit={handleSubmit} className={styles.form}>\n        {error && <div className={styles.error}>{error}</div>}\n        \n        {parentPhase && (\n          <div className={styles.contextInfo}>\n            Parent: <strong>{parentPhase.name}</strong>\n          </div>\n        )}\n        \n        <div className={styles.formGroup}>\n          <label className={styles.label}>Subphase Name *</label>\n          <input\n            type=\"text\"\n            className={styles.input}\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            placeholder=\"e.g., Task 1, Setup, Review, etc.\"\n            autoFocus\n          />\n        </div>\n        \n        <div className={styles.formGroup}>\n          <label className={styles.checkbox}>\n            <input\n              type=\"checkbox\"\n              checked={isMilestone}\n              onChange={(e) => setIsMilestone(e.target.checked)}\n            />\n            <span>Milestone (single date, shown as diamond)</span>\n          </label>\n        </div>\n        \n        <div className={styles.formRow}>\n          <div className={styles.formGroup}>\n            <label className={styles.label}>{isMilestone ? 'Date *' : 'Start Date *'}</label>\n            <input\n              type=\"date\"\n              className={styles.input}\n              value={startDate}\n              onChange={(e) => setStartDate(e.target.value)}\n            />\n          </div>\n          {!isMilestone && (\n            <div className={styles.formGroup}>\n              <label className={styles.label}>End Date *</label>\n              <input\n                type=\"date\"\n                className={styles.input}\n                value={endDate}\n                onChange={(e) => setEndDate(e.target.value)}\n              />\n            </div>\n          )}\n        </div>\n      </form>\n    </Modal>\n  );\n}\n","/**\n * StaffAssignmentModal - Assign Staff to Projects/Phases/Subphases\n * Supports percentage-based allocation with max capacity awareness\n */\n\nimport { useState, useEffect, useMemo, useCallback } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { \n  createStaffAssignment, \n  updateStaffAssignment, \n  deleteStaffAssignment,\n  loadAllProjects \n} from '@/api/endpoints/projects';\nimport { toInputDateFormat } from '@/utils/date';\nimport styles from './AssignmentModal.module.css';\n\n// Snap allocation value to nearest 5%\nconst snapTo5Percent = (value: number): number => {\n  return Math.round(value / 5) * 5;\n};\n\nexport function StaffAssignmentModal() {\n  const { activeModal, editingStaffAssignment, modalContext, closeModal } = useUIStore();\n  const { projects, staff, currentSite, setProjects } = useAppStore();\n  \n  const isOpen = activeModal === 'staffAssignment';\n  const isEditing = !!editingStaffAssignment;\n  \n  // Form state\n  const [staffId, setStaffId] = useState<string>('');\n  const [allocation, setAllocation] = useState(100);\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Get context (project, phase, or subphase)\n  const projectId = editingStaffAssignment?.project_id || modalContext.projectId;\n  const phaseId = editingStaffAssignment?.phase_id || modalContext.phaseId;\n  const subphaseId = editingStaffAssignment?.subphase_id || modalContext.subphaseId;\n  \n  // Filter staff by current site\n  const siteStaff = useMemo(() => {\n    if (!currentSite) return [];\n    return staff.filter(s => s.site_id === currentSite.id);\n  }, [staff, currentSite]);\n  \n  // Get selected staff's max capacity (default to 100 if not set)\n  const selectedStaffMaxCapacity = useMemo(() => {\n    if (!staffId) return 100;\n    const selected = staff.find(s => s.id === parseInt(staffId));\n    return selected?.max_capacity ?? 100;\n  }, [staffId, staff]);\n  \n  // Check if allocation exceeds max capacity\n  const isOverallocated = allocation > selectedStaffMaxCapacity;\n  \n  // Get the target item (project, phase, or subphase) for dates\n  const targetItem = useMemo(() => {\n    if (!projectId) return null;\n    const project = projects.find(p => p.id === projectId);\n    if (!project) return null;\n    \n    if (subphaseId) {\n      // Find subphase recursively\n      const findSubphase = (phases: typeof project.phases): typeof project.phases[0]['children'][0] | null => {\n        for (const phase of phases || []) {\n          const findInChildren = (children: typeof phase.children): typeof phase.children[0] | null => {\n            for (const child of children || []) {\n              if (child.id === subphaseId) return child;\n              const found = findInChildren(child.children || []);\n              if (found) return found;\n            }\n            return null;\n          };\n          const found = findInChildren(phase.children || []);\n          if (found) return found;\n        }\n        return null;\n      };\n      return findSubphase(project.phases || []);\n    }\n    \n    if (phaseId) {\n      return project.phases?.find(ph => ph.id === phaseId) || null;\n    }\n    \n    return project;\n  }, [projects, projectId, phaseId, subphaseId]);\n  \n  // Initialize form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editingStaffAssignment) {\n        // Editing mode - convert ISO datetime to input format\n        setStaffId(editingStaffAssignment.staff_id.toString());\n        setAllocation(editingStaffAssignment.allocation);\n        setStartDate(toInputDateFormat(editingStaffAssignment.start_date));\n        setEndDate(toInputDateFormat(editingStaffAssignment.end_date));\n      } else {\n        // New assignment mode - use target item dates as default\n        const today = new Date().toISOString().split('T')[0];\n        setStaffId('');\n        setAllocation(100);\n        setStartDate(toInputDateFormat(targetItem?.start_date) || today);\n        setEndDate(toInputDateFormat(targetItem?.end_date) || today);\n      }\n      setError(null);\n    }\n  }, [isOpen, editingStaffAssignment, targetItem]);\n  \n  // Handle staff selection - auto-set allocation to their max capacity\n  const handleStaffChange = useCallback((newStaffId: string) => {\n    setStaffId(newStaffId);\n    if (newStaffId && !isEditing) {\n      // Find the staff member's max capacity and set allocation to it\n      const selectedStaff = staff.find(s => s.id === parseInt(newStaffId));\n      const maxCap = selectedStaff?.max_capacity ?? 100;\n      setAllocation(snapTo5Percent(maxCap));\n    }\n  }, [staff, isEditing]);\n  \n  // Handle allocation slider change with 5% increments\n  const handleAllocationChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const rawValue = parseInt(e.target.value);\n    setAllocation(snapTo5Percent(rawValue));\n  }, []);\n  \n  // Determine assignment level for API calls\n  const assignmentLevel: 'project' | 'phase' | 'subphase' = subphaseId ? 'subphase' : (phaseId ? 'phase' : 'project');\n  const isPhaseOrSubphase = assignmentLevel !== 'project';\n  \n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!staffId) {\n      setError('Please select a staff member');\n      return;\n    }\n    \n    // Only require dates for project-level assignments\n    if (!isPhaseOrSubphase && (!startDate || !endDate)) {\n      setError('Please select start and end dates');\n      return;\n    }\n    \n    if (allocation < 5) {\n      setError('Allocation must be at least 5%');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      if (isEditing && editingStaffAssignment) {\n        // For phase/subphase, only update allocation (no dates)\n        const updateData = isPhaseOrSubphase \n          ? { allocation }\n          : { allocation, start_date: startDate, end_date: endDate };\n        await updateStaffAssignment(editingStaffAssignment.id, updateData, assignmentLevel);\n      } else {\n        const assignmentData = {\n          staff_id: parseInt(staffId),\n          allocation,\n          start_date: startDate,\n          end_date: endDate,\n          project_id: projectId || undefined,\n          phase_id: phaseId || undefined,\n          subphase_id: subphaseId || undefined,\n        };\n        await createStaffAssignment(assignmentData);\n      }\n      \n      // Reload projects\n      const updatedProjects = await loadAllProjects();\n      setProjects(updatedProjects);\n      closeModal();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to save assignment');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  const handleDelete = async () => {\n    if (!isEditing || !editingStaffAssignment) return;\n    \n    if (!confirm('Are you sure you want to remove this staff assignment?')) {\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      await deleteStaffAssignment(editingStaffAssignment.id, assignmentLevel);\n      // Reload projects\n      const updatedProjects = await loadAllProjects();\n      setProjects(updatedProjects);\n      closeModal();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to delete assignment');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  // Determine assignment level for display\n  const assignmentLevelLabel = subphaseId ? 'Subphase' : phaseId ? 'Phase' : 'Project';\n  const targetName = targetItem?.name || 'Unknown';\n  \n  const footer = (\n    <div className={styles.footer}>\n      {isEditing && (\n        <Button \n          variant=\"danger\" \n          onClick={handleDelete} \n          disabled={isSubmitting}\n          className={styles.deleteBtn}\n        >\n          Remove Assignment\n        </Button>\n      )}\n      <div className={styles.footerRight}>\n        <Button variant=\"secondary\" onClick={closeModal} disabled={isSubmitting}>\n          Cancel\n        </Button>\n        <Button variant=\"primary\" onClick={handleSubmit} disabled={isSubmitting}>\n          {isSubmitting ? 'Saving...' : isEditing ? 'Save Changes' : 'Assign Staff'}\n        </Button>\n      </div>\n    </div>\n  );\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={closeModal}\n      title={isEditing ? 'Edit Staff Assignment' : 'Assign Staff'}\n      size=\"md\"\n      footer={footer}\n    >\n      <form onSubmit={handleSubmit} className={styles.form}>\n        {error && <div className={styles.error}>{error}</div>}\n        \n        <div className={styles.contextInfo}>\n          {assignmentLevelLabel}: <strong>{targetName}</strong>\n        </div>\n        \n        <div className={styles.formGroup}>\n          <label className={styles.label}>Staff Member *</label>\n          <select\n            className={styles.input}\n            value={staffId}\n            onChange={(e) => handleStaffChange(e.target.value)}\n            disabled={isEditing} // Can't change staff member when editing\n          >\n            <option value=\"\">Select staff member</option>\n            {siteStaff.map(s => {\n              const maxCap = s.max_capacity ?? 100;\n              const capacityLabel = maxCap < 100 ? ` - ${maxCap}% capacity` : '';\n              return (\n                <option key={s.id} value={s.id}>\n                  {s.name} ({s.role || 'No role'}){capacityLabel}\n                </option>\n              );\n            })}\n          </select>\n        </div>\n        \n        <div className={styles.formGroup}>\n          <label className={styles.label}>\n            Allocation: {allocation}%\n            {selectedStaffMaxCapacity < 100 && (\n              <span className={styles.capacityHint}> (Max capacity: {selectedStaffMaxCapacity}%)</span>\n            )}\n          </label>\n          <div className={styles.sliderContainer}>\n            <input\n              type=\"range\"\n              className={`${styles.slider} ${isOverallocated ? styles.sliderOverallocated : ''}`}\n              min=\"5\"\n              max=\"100\"\n              step=\"5\"\n              value={Math.min(allocation, 100)}\n              onChange={handleAllocationChange}\n            />\n            <div className={styles.sliderLabels}>\n              <span>5%</span>\n              {selectedStaffMaxCapacity < 100 && selectedStaffMaxCapacity > 25 && selectedStaffMaxCapacity < 75 && (\n                <span className={styles.maxCapacityMarker}>{selectedStaffMaxCapacity}%</span>\n              )}\n              <span>50%</span>\n              <span>100%</span>\n            </div>\n          </div>\n          {isOverallocated && (\n            <div className={styles.overallocationWarning}>\n               Allocation exceeds staff's max capacity of {selectedStaffMaxCapacity}%\n            </div>\n          )}\n        </div>\n        \n        {/* Date fields only for project-level assignments */}\n        {!isPhaseOrSubphase && (\n          <div className={styles.formRow}>\n            <div className={styles.formGroup}>\n              <label className={styles.label}>Start Date *</label>\n              <input\n                type=\"date\"\n                className={styles.input}\n                value={startDate}\n                onChange={(e) => setStartDate(e.target.value)}\n              />\n            </div>\n            <div className={styles.formGroup}>\n              <label className={styles.label}>End Date *</label>\n              <input\n                type=\"date\"\n                className={styles.input}\n                value={endDate}\n                onChange={(e) => setEndDate(e.target.value)}\n              />\n            </div>\n          </div>\n        )}\n        \n        {/* Info for phase/subphase assignments */}\n        {isPhaseOrSubphase && (\n          <div className={styles.infoBox}>\n            <p> This assignment uses the {assignmentLevelLabel.toLowerCase()}'s dates automatically.</p>\n          </div>\n        )}\n      </form>\n    </Modal>\n  );\n}\n","/**\n * EquipmentAssignmentModal - Assign Equipment to Projects/Phases/Subphases\n */\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { \n  createEquipmentAssignment, \n  updateEquipmentAssignment, \n  deleteEquipmentAssignment,\n  loadAllProjects \n} from '@/api/endpoints/projects';\nimport { toInputDateFormat } from '@/utils/date';\nimport styles from './AssignmentModal.module.css';\n\nexport function EquipmentAssignmentModal() {\n  const { activeModal, editingEquipmentAssignment, modalContext, closeModal } = useUIStore();\n  const { projects, equipment, currentSite, setProjects } = useAppStore();\n  \n  const isOpen = activeModal === 'equipmentAssignment';\n  const isEditing = !!editingEquipmentAssignment;\n  \n  // Form state\n  const [equipmentId, setEquipmentId] = useState<string>('');\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Get context (project, phase, or subphase)\n  const projectId = editingEquipmentAssignment?.project_id || modalContext.projectId;\n  const phaseId = editingEquipmentAssignment?.phase_id || modalContext.phaseId;\n  const subphaseId = editingEquipmentAssignment?.subphase_id || modalContext.subphaseId;\n  \n  // Filter equipment by current site\n  const siteEquipment = useMemo(() => {\n    if (!currentSite) return [];\n    return equipment.filter(e => e.site_id === currentSite.id);\n  }, [equipment, currentSite]);\n  \n  // Get the target item (project, phase, or subphase) for dates\n  const targetItem = useMemo(() => {\n    if (!projectId) return null;\n    const project = projects.find(p => p.id === projectId);\n    if (!project) return null;\n    \n    if (subphaseId) {\n      // Find subphase recursively\n      const findSubphase = (phases: typeof project.phases): typeof project.phases[0]['children'][0] | null => {\n        for (const phase of phases || []) {\n          const findInChildren = (children: typeof phase.children): typeof phase.children[0] | null => {\n            for (const child of children || []) {\n              if (child.id === subphaseId) return child;\n              const found = findInChildren(child.children || []);\n              if (found) return found;\n            }\n            return null;\n          };\n          const found = findInChildren(phase.children || []);\n          if (found) return found;\n        }\n        return null;\n      };\n      return findSubphase(project.phases || []);\n    }\n    \n    if (phaseId) {\n      return project.phases?.find(ph => ph.id === phaseId) || null;\n    }\n    \n    return project;\n  }, [projects, projectId, phaseId, subphaseId]);\n  \n  // Initialize form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      if (editingEquipmentAssignment) {\n        // Editing mode - convert ISO datetime to input format\n        setEquipmentId(editingEquipmentAssignment.equipment_id.toString());\n        setStartDate(toInputDateFormat(editingEquipmentAssignment.start_date));\n        setEndDate(toInputDateFormat(editingEquipmentAssignment.end_date));\n      } else {\n        // New assignment mode - use target item dates as default\n        const today = new Date().toISOString().split('T')[0];\n        setEquipmentId('');\n        setStartDate(toInputDateFormat(targetItem?.start_date) || today);\n        setEndDate(toInputDateFormat(targetItem?.end_date) || today);\n      }\n      setError(null);\n    }\n  }, [isOpen, editingEquipmentAssignment, targetItem]);\n  \n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!equipmentId) {\n      setError('Please select equipment');\n      return;\n    }\n    \n    if (!startDate || !endDate) {\n      setError('Please select start and end dates');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      const assignmentData = {\n        equipment_id: parseInt(equipmentId),\n        start_date: startDate,\n        end_date: endDate,\n        project_id: projectId || undefined,\n        phase_id: phaseId || undefined,\n        subphase_id: subphaseId || undefined,\n      };\n      \n      if (isEditing && editingEquipmentAssignment) {\n        await updateEquipmentAssignment(editingEquipmentAssignment.id, assignmentData);\n      } else {\n        await createEquipmentAssignment(assignmentData);\n      }\n      \n      // Reload projects\n      const updatedProjects = await loadAllProjects();\n      setProjects(updatedProjects);\n      closeModal();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to save assignment');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  const handleDelete = async () => {\n    if (!isEditing || !editingEquipmentAssignment) return;\n    \n    if (!confirm('Are you sure you want to remove this equipment assignment?')) {\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      await deleteEquipmentAssignment(editingEquipmentAssignment.id);\n      // Reload projects\n      const updatedProjects = await loadAllProjects();\n      setProjects(updatedProjects);\n      closeModal();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to delete assignment');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  // Determine assignment level for display\n  const assignmentLevel = subphaseId ? 'Subphase' : phaseId ? 'Phase' : 'Project';\n  const targetName = targetItem?.name || 'Unknown';\n  \n  const footer = (\n    <div className={styles.footer}>\n      {isEditing && (\n        <Button \n          variant=\"danger\" \n          onClick={handleDelete} \n          disabled={isSubmitting}\n          className={styles.deleteBtn}\n        >\n          Remove Assignment\n        </Button>\n      )}\n      <div className={styles.footerRight}>\n        <Button variant=\"secondary\" onClick={closeModal} disabled={isSubmitting}>\n          Cancel\n        </Button>\n        <Button variant=\"primary\" onClick={handleSubmit} disabled={isSubmitting}>\n          {isSubmitting ? 'Saving...' : isEditing ? 'Save Changes' : 'Assign Equipment'}\n        </Button>\n      </div>\n    </div>\n  );\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={closeModal}\n      title={isEditing ? 'Edit Equipment Assignment' : 'Assign Equipment'}\n      size=\"md\"\n      footer={footer}\n    >\n      <form onSubmit={handleSubmit} className={styles.form}>\n        {error && <div className={styles.error}>{error}</div>}\n        \n        <div className={styles.contextInfo}>\n          {assignmentLevel}: <strong>{targetName}</strong>\n        </div>\n        \n        <div className={styles.formGroup}>\n          <label className={styles.label}>Equipment *</label>\n          <select\n            className={styles.input}\n            value={equipmentId}\n            onChange={(e) => setEquipmentId(e.target.value)}\n            disabled={isEditing} // Can't change equipment when editing\n          >\n            <option value=\"\">Select equipment</option>\n            {siteEquipment.map(e => (\n              <option key={e.id} value={e.id}>\n                {e.name} ({e.type || 'No type'})\n              </option>\n            ))}\n          </select>\n        </div>\n        \n        <div className={styles.formRow}>\n          <div className={styles.formGroup}>\n            <label className={styles.label}>Start Date *</label>\n            <input\n              type=\"date\"\n              className={styles.input}\n              value={startDate}\n              onChange={(e) => setStartDate(e.target.value)}\n            />\n          </div>\n          <div className={styles.formGroup}>\n            <label className={styles.label}>End Date *</label>\n            <input\n              type=\"date\"\n              className={styles.input}\n              value={endDate}\n              onChange={(e) => setEndDate(e.target.value)}\n            />\n          </div>\n        </div>\n      </form>\n    </Modal>\n  );\n}\n","/**\n * VacationModal - Create/Edit Staff Vacations\n * Supports date range selection, ICS export, ICS import, and recurring patterns\n */\n\nimport { useState, useEffect, useMemo, useCallback, useRef, memo } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore, selectCanManageResources } from '@/stores/appStore';\nimport { \n  createVacation, \n  updateVacation, \n  getVacations,\n} from '@/api/endpoints/vacations';\nimport { toInputDateFormat } from '@/utils/date';\nimport { \n  parseRecurringPattern, \n  createRecurringPattern, \n  getRecurringDaysDisplay,\n  DAY_NAMES,\n} from '@/utils/recurringVacation';\nimport styles from './VacationModal.module.css';\n\n// Parsed ICS event structure\ninterface ParsedEvent {\n  summary: string;\n  startDate: string;\n  endDate: string;\n  selected: boolean;\n}\n\n// Normalize ICS content - handles UTF-16 encoding (SAP exports)\nfunction normalizeICSContent(content: string): string {\n  // Check for UTF-16 by looking for null bytes (appear as \\x00 or char code 0)\n  // UTF-16 files have null bytes between ASCII characters\n  if (content.includes('\\x00') || content.charCodeAt(1) === 0) {\n    // Remove null bytes - this handles UTF-16 LE where nulls come after each char\n    content = content.replace(/\\x00/g, '');\n  }\n  \n  // Also handle any BOM (Byte Order Mark)\n  content = content.replace(/^\\uFEFF/, '').replace(/^\\uFFFE/, '');\n  \n  return content;\n}\n\n// ICS Parser function\nfunction parseICSFile(content: string): ParsedEvent[] {\n  // Normalize content first (handles UTF-16 encoding from SAP etc.)\n  content = normalizeICSContent(content);\n  \n  const events: ParsedEvent[] = [];\n  const lines = content.replace(/\\r\\n /g, '').split(/\\r?\\n/);\n  \n  let inEvent = false;\n  let currentEvent: Partial<ParsedEvent> = {};\n  \n  for (const line of lines) {\n    if (line === 'BEGIN:VEVENT') {\n      inEvent = true;\n      currentEvent = { selected: true };\n    } else if (line === 'END:VEVENT') {\n      inEvent = false;\n      if (currentEvent.startDate && currentEvent.endDate) {\n        events.push({\n          summary: currentEvent.summary || 'Vacation',\n          startDate: currentEvent.startDate,\n          endDate: currentEvent.endDate,\n          selected: true,\n        });\n      }\n      currentEvent = {};\n    } else if (inEvent) {\n      // Parse DTSTART\n      if (line.startsWith('DTSTART')) {\n        const dateStr = extractDateFromLine(line);\n        if (dateStr) currentEvent.startDate = dateStr;\n      }\n      // Parse DTEND\n      else if (line.startsWith('DTEND')) {\n        const dateStr = extractDateFromLine(line);\n        if (dateStr) {\n          // ICS end dates for all-day events are exclusive, so subtract 1 day\n          const isAllDay = line.includes('VALUE=DATE:') || !line.includes('T');\n          if (isAllDay) {\n            const d = new Date(dateStr);\n            d.setDate(d.getDate() - 1);\n            currentEvent.endDate = d.toISOString().split('T')[0];\n          } else {\n            currentEvent.endDate = dateStr;\n          }\n        }\n      }\n      // Parse SUMMARY\n      else if (line.startsWith('SUMMARY:')) {\n        currentEvent.summary = unescapeICS(line.substring(8));\n      }\n    }\n  }\n  \n  return events;\n}\n\n// Extract date from ICS date line\nfunction extractDateFromLine(line: string): string | null {\n  // Handle VALUE=DATE: format (all-day events)\n  const allDayMatch = line.match(/VALUE=DATE:(\\d{8})/);\n  if (allDayMatch) {\n    const dateStr = allDayMatch[1];\n    return `${dateStr.slice(0, 4)}-${dateStr.slice(4, 6)}-${dateStr.slice(6, 8)}`;\n  }\n  \n  // Handle regular date/datetime formats\n  const dateMatch = line.match(/:(\\d{8})(T\\d{6}Z?)?/);\n  if (dateMatch) {\n    const dateStr = dateMatch[1];\n    return `${dateStr.slice(0, 4)}-${dateStr.slice(4, 6)}-${dateStr.slice(6, 8)}`;\n  }\n  \n  return null;\n}\n\n// Unescape ICS text\nfunction unescapeICS(text: string): string {\n  return text\n    .replace(/\\\\n/g, '\\n')\n    .replace(/\\\\,/g, ',')\n    .replace(/\\\\;/g, ';')\n    .replace(/\\\\\\\\/g, '\\\\');\n}\n\n// Memoized footer to prevent re-renders\nconst ModalFooter = memo(function ModalFooter({\n  onCancel,\n  onSaveAndExport,\n  onSave,\n  isSubmitting,\n  canSubmit,\n  isImportMode,\n  importCount,\n}: {\n  onCancel: () => void;\n  onSaveAndExport: () => void;\n  onSave: () => void;\n  isSubmitting: boolean;\n  canSubmit: boolean;\n  isImportMode: boolean;\n  importCount: number;\n}) {\n  return (\n    <div className={styles.footer}>\n      <Button\n        type=\"button\"\n        variant=\"secondary\"\n        onClick={onCancel}\n        disabled={isSubmitting}\n      >\n        Cancel\n      </Button>\n      {!isImportMode && (\n        <Button\n          type=\"button\"\n          variant=\"secondary\"\n          onClick={onSaveAndExport}\n          disabled={isSubmitting || !canSubmit}\n          title=\"Save vacation and export to Outlook calendar\"\n          className={styles.exportBtn}\n        >\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n            <polyline points=\"7 10 12 15 17 10\" />\n            <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\" />\n          </svg>\n          Save & Export to Outlook\n        </Button>\n      )}\n      <Button\n        type=\"button\"\n        variant=\"primary\"\n        onClick={onSave}\n        disabled={isSubmitting || !canSubmit}\n      >\n        {isSubmitting ? 'Saving...' : isImportMode ? `Import ${importCount} vacation${importCount !== 1 ? 's' : ''}` : 'Save'}\n      </Button>\n    </div>\n  );\n});\n\nexport function VacationModal() {\n  const { activeModal, editingVacation, modalContext, closeModal } = useUIStore();\n  const { staff, setVacations } = useAppStore();\n  const canManageResources = useAppStore(selectCanManageResources);\n  \n  const isOpen = activeModal === 'vacation';\n  const isEditing = !!editingVacation;\n  \n  // Form state\n  const [staffId, setStaffId] = useState<number | null>(null);\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Recurring vacation state\n  const [isRecurring, setIsRecurring] = useState(false);\n  const [selectedDays, setSelectedDays] = useState<number[]>([]);\n  \n  // ICS Import state\n  const [importMode, setImportMode] = useState(false);\n  const [parsedEvents, setParsedEvents] = useState<ParsedEvent[]>([]);\n  const [isDragging, setIsDragging] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  \n  // Use ref for description to avoid re-renders on typing\n  const descriptionRef = useRef<HTMLInputElement>(null);\n  const initializedRef = useRef(false);\n  \n  // Get staff member for display - memoized\n  const staffMember = useMemo(() => {\n    if (!staffId) return null;\n    return staff.find(s => s.id === staffId);\n  }, [staff, staffId]);\n  \n  // Count selected events for import\n  const selectedEventsCount = useMemo(() => {\n    return parsedEvents.filter(e => e.selected).length;\n  }, [parsedEvents]);\n  \n  // Initialize form when modal opens\n  useEffect(() => {\n    if (isOpen && !initializedRef.current) {\n      initializedRef.current = true;\n      setImportMode(false);\n      setParsedEvents([]);\n      \n      if (editingVacation) {\n        setStaffId(editingVacation.staff_id);\n        setStartDate(toInputDateFormat(editingVacation.start_date));\n        setEndDate(toInputDateFormat(editingVacation.end_date));\n        \n        // Parse recurring pattern from description\n        const pattern = parseRecurringPattern(editingVacation.description);\n        if (pattern) {\n          setIsRecurring(true);\n          setSelectedDays(pattern.daysOfWeek);\n          if (descriptionRef.current) {\n            descriptionRef.current.value = pattern.cleanDescription;\n          }\n        } else {\n          setIsRecurring(false);\n          setSelectedDays([]);\n          if (descriptionRef.current) {\n            descriptionRef.current.value = editingVacation.description || '';\n          }\n        }\n      } else {\n        setStaffId(modalContext.staffId || null);\n        setIsRecurring(false);\n        setSelectedDays([]);\n        \n        const today = new Date();\n        const nextMonday = new Date(today);\n        nextMonday.setDate(today.getDate() + ((8 - today.getDay()) % 7 || 7));\n        const nextFriday = new Date(nextMonday);\n        nextFriday.setDate(nextMonday.getDate() + 4);\n        \n        setStartDate(toInputDateFormat(nextMonday.toISOString()));\n        setEndDate(toInputDateFormat(nextFriday.toISOString()));\n        if (descriptionRef.current) {\n          descriptionRef.current.value = '';\n        }\n      }\n      setError(null);\n    }\n    \n    if (!isOpen) {\n      initializedRef.current = false;\n    }\n  }, [isOpen, editingVacation, modalContext.staffId]);\n  \n  // Calculate duration\n  const duration = useMemo(() => {\n    if (!startDate || !endDate) return 0;\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const diffTime = end.getTime() - start.getTime();\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;\n    return diffDays;\n  }, [startDate, endDate]);\n  \n  const handleClose = useCallback(() => {\n    closeModal();\n    setError(null);\n    setImportMode(false);\n    setParsedEvents([]);\n  }, [closeModal]);\n  \n  // Handle ICS file selection\n  const handleFileSelect = useCallback((file: File) => {\n    if (!file.name.toLowerCase().endsWith('.ics')) {\n      setError('Please select an ICS file');\n      return;\n    }\n    \n    const reader = new FileReader();\n    reader.onload = (e) => {\n      const content = e.target?.result as string;\n      try {\n        const events = parseICSFile(content);\n        if (events.length === 0) {\n          setError('No events found in the ICS file');\n          return;\n        }\n        setParsedEvents(events);\n        setImportMode(true);\n        setError(null);\n      } catch (err) {\n        console.error('Failed to parse ICS:', err);\n        setError('Failed to parse ICS file');\n      }\n    };\n    reader.onerror = () => {\n      setError('Failed to read file');\n    };\n    reader.readAsText(file);\n  }, []);\n  \n  // File input change handler\n  const handleFileInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      handleFileSelect(file);\n    }\n    // Reset input so same file can be selected again\n    e.target.value = '';\n  }, [handleFileSelect]);\n  \n  // Drag and drop handlers\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(true);\n  }, []);\n  \n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(false);\n  }, []);\n  \n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragging(false);\n    \n    const file = e.dataTransfer.files?.[0];\n    if (file) {\n      handleFileSelect(file);\n    }\n  }, [handleFileSelect]);\n  \n  // Toggle event selection\n  const toggleEventSelection = useCallback((index: number) => {\n    setParsedEvents(prev => prev.map((e, i) => \n      i === index ? { ...e, selected: !e.selected } : e\n    ));\n  }, []);\n  \n  // Select/deselect all events\n  const toggleAllEvents = useCallback((selected: boolean) => {\n    setParsedEvents(prev => prev.map(e => ({ ...e, selected })));\n  }, []);\n  \n  const saveVacation = useCallback(async (): Promise<boolean> => {\n    const rawDescription = descriptionRef.current?.value || '';\n    \n    if (!staffId) {\n      setError('No staff member selected');\n      return false;\n    }\n    \n    if (!startDate || !endDate) {\n      setError('Please select start and end dates');\n      return false;\n    }\n    \n    if (new Date(startDate) > new Date(endDate)) {\n      setError('Start date must be before end date');\n      return false;\n    }\n    \n    // Validate recurring selection\n    if (isRecurring && selectedDays.length === 0) {\n      setError('Please select at least one day for the recurring pattern');\n      return false;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      // Build description with recurring pattern if applicable\n      const description = isRecurring \n        ? createRecurringPattern(selectedDays, rawDescription || 'Recurring absence')\n        : (rawDescription || 'Vacation');\n      \n      const vacationData = {\n        staff_id: staffId,\n        start_date: startDate,\n        end_date: endDate,\n        description,\n      };\n      \n      if (isEditing && editingVacation) {\n        await updateVacation(editingVacation.id, vacationData);\n      } else {\n        await createVacation(vacationData);\n      }\n      \n      const updatedVacations = await getVacations();\n      setVacations(updatedVacations);\n      \n      return true;\n    } catch (err) {\n      console.error('Failed to save vacation:', err);\n      setError(err instanceof Error ? err.message : 'Failed to save vacation');\n      return false;\n    } finally {\n      setIsSubmitting(false);\n    }\n  }, [staffId, startDate, endDate, isEditing, editingVacation, setVacations, isRecurring, selectedDays]);\n  \n  // Import vacations from parsed ICS events\n  const importVacations = useCallback(async (): Promise<boolean> => {\n    if (!staffId) {\n      setError('No staff member selected');\n      return false;\n    }\n    \n    const selectedEvents = parsedEvents.filter(e => e.selected);\n    if (selectedEvents.length === 0) {\n      setError('No events selected for import');\n      return false;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      // Create vacations sequentially to avoid race conditions\n      for (const event of selectedEvents) {\n        await createVacation({\n          staff_id: staffId,\n          start_date: event.startDate,\n          end_date: event.endDate,\n          description: event.summary || 'Vacation',\n        });\n      }\n      \n      const updatedVacations = await getVacations();\n      setVacations(updatedVacations);\n      \n      return true;\n    } catch (err) {\n      console.error('Failed to import vacations:', err);\n      setError(err instanceof Error ? err.message : 'Failed to import vacations');\n      return false;\n    } finally {\n      setIsSubmitting(false);\n    }\n  }, [staffId, parsedEvents, setVacations]);\n  \n  const handleSave = useCallback(async () => {\n    const success = importMode ? await importVacations() : await saveVacation();\n    if (success) {\n      handleClose();\n    }\n  }, [importMode, importVacations, saveVacation, handleClose]);\n  \n  const exportICS = useCallback(() => {\n    const staffName = staffMember?.name || 'Staff';\n    const description = descriptionRef.current?.value || 'Vacation';\n    \n    const icsContent = generateICS({\n      summary: description,\n      description: `${staffName} - Time Off`,\n      startDate: new Date(startDate),\n      endDate: new Date(endDate),\n      isAllDay: true,\n    });\n    \n    const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `vacation-${staffName.replace(/\\s+/g, '-').toLowerCase()}-${startDate}.ics`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  }, [staffMember?.name, startDate, endDate]);\n  \n  const handleSaveAndExport = useCallback(async () => {\n    const success = await saveVacation();\n    if (success) {\n      exportICS();\n      handleClose();\n    }\n  }, [saveVacation, exportICS, handleClose]);\n  \n  // Cancel import mode\n  const handleCancelImport = useCallback(() => {\n    setImportMode(false);\n    setParsedEvents([]);\n    setError(null);\n  }, []);\n  \n  const canSubmit = importMode \n    ? !!staffId && selectedEventsCount > 0 \n    : !!staffId && !!startDate && !!endDate;\n  \n  // Memoize the footer component props\n  const footerElement = useMemo(() => (\n    <ModalFooter\n      onCancel={handleClose}\n      onSaveAndExport={handleSaveAndExport}\n      onSave={handleSave}\n      isSubmitting={isSubmitting}\n      canSubmit={canSubmit}\n      isImportMode={importMode}\n      importCount={selectedEventsCount}\n    />\n  ), [handleClose, handleSaveAndExport, handleSave, isSubmitting, canSubmit, importMode, selectedEventsCount]);\n  \n  if (!isOpen) return null;\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={handleClose}\n      title={isEditing ? 'Edit Vacation' : importMode ? 'Import Vacations from ICS' : 'Add Vacation'}\n      size=\"md\"\n      footer={footerElement}\n    >\n      <div className={styles.content}>\n        {error && (\n          <div className={styles.error}>{error}</div>\n        )}\n        \n        {/* Staff Member Display or Selector */}\n        {canManageResources && !isEditing ? (\n          <div className={styles.section}>\n            <label className={styles.sectionLabel}>Staff Member</label>\n            <select\n              className={styles.select}\n              value={staffId || ''}\n              onChange={(e) => setStaffId(e.target.value ? Number(e.target.value) : null)}\n            >\n              <option value=\"\">Select staff member...</option>\n              {staff.map(s => (\n                <option key={s.id} value={s.id}>{s.name}</option>\n              ))}\n            </select>\n          </div>\n        ) : staffMember ? (\n          <div className={styles.staffDisplay}>\n            <div className={styles.staffAvatar}>\n              {staffMember.name?.charAt(0).toUpperCase() || '?'}\n            </div>\n            <div className={styles.staffInfo}>\n              <div className={styles.staffName}>{staffMember.name}</div>\n              {staffMember.role && (\n                <div className={styles.staffRole}>{staffMember.role}</div>\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className={styles.noStaff}>\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <circle cx=\"12\" cy=\"8\" r=\"4\" />\n              <path d=\"M20 21a8 8 0 1 0-16 0\" />\n            </svg>\n            <span>No staff member selected</span>\n          </div>\n        )}\n        \n        {importMode ? (\n          /* Import Mode: Show parsed events */\n          <>\n            <div className={styles.section}>\n              <div className={styles.importHeader}>\n                <label className={styles.sectionLabel}>\n                  Events to Import ({selectedEventsCount} of {parsedEvents.length} selected)\n                </label>\n                <div className={styles.importActions}>\n                  <button \n                    type=\"button\" \n                    className={styles.linkBtn}\n                    onClick={() => toggleAllEvents(true)}\n                  >\n                    Select All\n                  </button>\n                  <span className={styles.actionSeparator}>|</span>\n                  <button \n                    type=\"button\" \n                    className={styles.linkBtn}\n                    onClick={() => toggleAllEvents(false)}\n                  >\n                    Deselect All\n                  </button>\n                  <span className={styles.actionSeparator}>|</span>\n                  <button \n                    type=\"button\" \n                    className={styles.linkBtn}\n                    onClick={handleCancelImport}\n                  >\n                    Cancel Import\n                  </button>\n                </div>\n              </div>\n              \n              <div className={styles.eventsList}>\n                {parsedEvents.map((event, index) => (\n                  <label key={index} className={`${styles.eventItem} ${event.selected ? styles.selected : ''}`}>\n                    <input\n                      type=\"checkbox\"\n                      checked={event.selected}\n                      onChange={() => toggleEventSelection(index)}\n                      className={styles.eventCheckbox}\n                    />\n                    <div className={styles.eventInfo}>\n                      <div className={styles.eventSummary}>{event.summary}</div>\n                      <div className={styles.eventDates}>\n                        {formatEventDate(event.startDate)} - {formatEventDate(event.endDate)}\n                        <span className={styles.eventDuration}>\n                          ({calculateDays(event.startDate, event.endDate)} day{calculateDays(event.startDate, event.endDate) !== 1 ? 's' : ''})\n                        </span>\n                      </div>\n                    </div>\n                  </label>\n                ))}\n              </div>\n            </div>\n          </>\n        ) : (\n          /* Normal Mode: Date selection and ICS upload */\n          <>\n            {/* ICS Import Drop Zone - only show when creating new */}\n            {!isEditing && (\n              <div \n                className={`${styles.dropZone} ${isDragging ? styles.dragging : ''}`}\n                onDragOver={handleDragOver}\n                onDragLeave={handleDragLeave}\n                onDrop={handleDrop}\n                onClick={() => fileInputRef.current?.click()}\n              >\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\".ics\"\n                  onChange={handleFileInputChange}\n                  className={styles.fileInput}\n                />\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n                  <polyline points=\"17 8 12 3 7 8\" />\n                  <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\" />\n                </svg>\n                <span className={styles.dropZoneText}>\n                  Drop ICS file here or click to browse\n                </span>\n                <span className={styles.dropZoneHint}>\n                  Import vacation dates from Outlook or other calendar apps\n                </span>\n              </div>\n            )}\n            \n            <div className={styles.dividerRow}>\n              <span className={styles.dividerLine}></span>\n              <span className={styles.dividerText}>{isEditing ? '' : 'or enter manually'}</span>\n              <span className={styles.dividerLine}></span>\n            </div>\n            \n            {/* Date Selection */}\n            <div className={styles.section}>\n              <label className={styles.sectionLabel}>Duration</label>\n              <div className={styles.dateRow}>\n                <div className={styles.dateField}>\n                  <label className={styles.label}>From</label>\n                  <input\n                    type=\"date\"\n                    className={styles.input}\n                    value={startDate}\n                    onChange={(e) => setStartDate(e.target.value)}\n                  />\n                </div>\n                \n                <div className={styles.dateSeparator}>\n                  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                    <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n                    <polyline points=\"12 5 19 12 12 19\" />\n                  </svg>\n                </div>\n                \n                <div className={styles.dateField}>\n                  <label className={styles.label}>To</label>\n                  <input\n                    type=\"date\"\n                    className={styles.input}\n                    value={endDate}\n                    onChange={(e) => setEndDate(e.target.value)}\n                  />\n                </div>\n              </div>\n              \n              {duration > 0 && (\n                <div className={styles.duration}>\n                  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                    <rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\n                    <line x1=\"16\" y1=\"2\" x2=\"16\" y2=\"6\" />\n                    <line x1=\"8\" y1=\"2\" x2=\"8\" y2=\"6\" />\n                    <line x1=\"3\" y1=\"10\" x2=\"21\" y2=\"10\" />\n                  </svg>\n                  {duration} day{duration !== 1 ? 's' : ''}\n                </div>\n              )}\n            </div>\n            \n            {/* Recurring Toggle */}\n            <div className={styles.section}>\n              <label className={styles.recurringToggle}>\n                <input\n                  type=\"checkbox\"\n                  checked={isRecurring}\n                  onChange={(e) => {\n                    setIsRecurring(e.target.checked);\n                    if (!e.target.checked) {\n                      setSelectedDays([]);\n                    }\n                  }}\n                  className={styles.checkbox}\n                />\n                <span className={styles.recurringLabel}>\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                    <path d=\"M17 1l4 4-4 4\" />\n                    <path d=\"M3 11V9a4 4 0 0 1 4-4h14\" />\n                    <path d=\"M7 23l-4-4 4-4\" />\n                    <path d=\"M21 13v2a4 4 0 0 1-4 4H3\" />\n                  </svg>\n                  Recurring Absence\n                </span>\n              </label>\n              \n              {isRecurring && (\n                <div className={styles.recurringOptions}>\n                  <div className={styles.recurringHint}>\n                    Select which days of the week this person is unavailable within the date range above\n                  </div>\n                  <div className={styles.daySelector}>\n                    {DAY_NAMES.map((day, index) => (\n                      <button\n                        key={day}\n                        type=\"button\"\n                        className={`${styles.dayButton} ${selectedDays.includes(index) ? styles.selected : ''}`}\n                        onClick={() => {\n                          setSelectedDays(prev => \n                            prev.includes(index)\n                              ? prev.filter(d => d !== index)\n                              : [...prev, index].sort((a, b) => a - b)\n                          );\n                        }}\n                      >\n                        {day}\n                      </button>\n                    ))}\n                  </div>\n                  {selectedDays.length > 0 && (\n                    <div className={styles.recurringPreview}>\n                      {getRecurringDaysDisplay(selectedDays)}\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n            \n            {/* Description - using uncontrolled input with ref */}\n            <div className={styles.section}>\n              <label className={styles.sectionLabel} htmlFor=\"vacation-description\">\n                Description <span className={styles.optional}>(optional)</span>\n              </label>\n              <input\n                ref={descriptionRef}\n                id=\"vacation-description\"\n                type=\"text\"\n                className={styles.input}\n                defaultValue={editingVacation?.description || ''}\n                placeholder={isRecurring ? \"e.g., Part-time, Childcare...\" : \"e.g., Annual Leave, Personal Day...\"}\n                autoComplete=\"off\"\n              />\n            </div>\n          </>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\n// Helper function to format event date for display\nfunction formatEventDate(dateStr: string): string {\n  const date = new Date(dateStr);\n  return date.toLocaleDateString(undefined, { \n    month: 'short', \n    day: 'numeric',\n    year: 'numeric'\n  });\n}\n\n// Helper function to calculate days between dates\nfunction calculateDays(start: string, end: string): number {\n  const s = new Date(start);\n  const e = new Date(end);\n  return Math.ceil((e.getTime() - s.getTime()) / (1000 * 60 * 60 * 24)) + 1;\n}\n\n// Helper function to generate ICS file content\nfunction generateICS(options: {\n  summary: string;\n  description: string;\n  startDate: Date;\n  endDate: Date;\n  isAllDay: boolean;\n}): string {\n  const { summary, description, startDate, endDate, isAllDay } = options;\n  \n  const formatDate = (date: Date, allDay: boolean): string => {\n    const year = date.getFullYear();\n    const month = String(date.getMonth() + 1).padStart(2, '0');\n    const day = String(date.getDate()).padStart(2, '0');\n    \n    if (allDay) {\n      return `${year}${month}${day}`;\n    }\n    \n    const hours = String(date.getUTCHours()).padStart(2, '0');\n    const minutes = String(date.getUTCMinutes()).padStart(2, '0');\n    const seconds = String(date.getUTCSeconds()).padStart(2, '0');\n    return `${year}${month}${day}T${hours}${minutes}${seconds}Z`;\n  };\n  \n  const adjustedEndDate = new Date(endDate);\n  if (isAllDay) {\n    adjustedEndDate.setDate(adjustedEndDate.getDate() + 1);\n  }\n  \n  const uid = `vacation-${Date.now()}-${Array.from(crypto.getRandomValues(new Uint8Array(16))).map(b => b.toString(36)).join('').slice(0, 9)}@milestone`;\n  const now = formatDate(new Date(), false);\n  \n  const lines = [\n    'BEGIN:VCALENDAR',\n    'VERSION:2.0',\n    'PRODID:-//Milestone//Vacation Export//EN',\n    'CALSCALE:GREGORIAN',\n    'METHOD:PUBLISH',\n    'BEGIN:VEVENT',\n    `UID:${uid}`,\n    `DTSTAMP:${now}`,\n    isAllDay \n      ? `DTSTART;VALUE=DATE:${formatDate(startDate, true)}`\n      : `DTSTART:${formatDate(startDate, false)}`,\n    isAllDay\n      ? `DTEND;VALUE=DATE:${formatDate(adjustedEndDate, true)}`\n      : `DTEND:${formatDate(adjustedEndDate, false)}`,\n    `SUMMARY:${escapeICS(summary)}`,\n    `DESCRIPTION:${escapeICS(description)}`,\n    'STATUS:CONFIRMED',\n    'TRANSP:OPAQUE',\n    'X-MICROSOFT-CDO-BUSYSTATUS:OOF',\n    'X-MICROSOFT-CDO-ALLDAYEVENT:TRUE',\n    'END:VEVENT',\n    'END:VCALENDAR',\n  ];\n  \n  return lines.join('\\r\\n');\n}\n\nfunction escapeICS(text: string): string {\n  return text\n    .replace(/\\\\/g, '\\\\\\\\')\n    .replace(/;/g, '\\\\;')\n    .replace(/,/g, '\\\\,')\n    .replace(/\\n/g, '\\\\n');\n}\n","/**\n * BankHolidayModal - View and manage bank holidays for a site\n * Supports custom holiday creation, deletion, and ICS export\n */\n\nimport { useState, useEffect, useMemo } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { \n  getBankHolidays,\n  createBankHoliday,\n  deleteBankHoliday,\n  refreshBankHolidays,\n  buildHolidayDateSet,\n} from '@/api';\nimport type { BankHoliday } from '@/types';\nimport styles from './BankHolidayModal.module.css';\n\nexport function BankHolidayModal() {\n  const { activeModal, closeModal } = useUIStore();\n  const { currentSite, bankHolidays, setBankHolidays } = useAppStore();\n  \n  const isOpen = activeModal === 'bankHoliday';\n  \n  // State\n  const [selectedYear, setSelectedYear] = useState(new Date().getFullYear());\n  const [isLoading, setIsLoading] = useState(false);\n  const [isAdding, setIsAdding] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Add form state\n  const [newHolidayDate, setNewHolidayDate] = useState('');\n  const [newHolidayEndDate, setNewHolidayEndDate] = useState('');\n  const [newHolidayName, setNewHolidayName] = useState('');\n  \n  // Get available years\n  const years = useMemo(() => {\n    const currentYear = new Date().getFullYear();\n    return [currentYear - 1, currentYear, currentYear + 1, currentYear + 2];\n  }, []);\n  \n  // Filter holidays by selected year\n  const filteredHolidays = useMemo(() => {\n    return bankHolidays\n      .filter(h => {\n        const holidayYear = new Date(h.date).getFullYear();\n        return holidayYear === selectedYear;\n      })\n      .sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime());\n  }, [bankHolidays, selectedYear]);\n  \n  // Separate custom and standard holidays\n  const customHolidays = filteredHolidays.filter(h => h.is_custom);\n  const standardHolidays = filteredHolidays.filter(h => !h.is_custom);\n  \n  // Load holidays when modal opens or year changes\n  useEffect(() => {\n    if (isOpen && currentSite) {\n      loadHolidays();\n    }\n  }, [isOpen, currentSite, selectedYear]);\n  \n  const loadHolidays = async () => {\n    if (!currentSite) return;\n    \n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const holidays = await getBankHolidays(currentSite.id, selectedYear);\n      setBankHolidays(holidays, buildHolidayDateSet(holidays));\n    } catch (err) {\n      console.error('Failed to load holidays:', err);\n      setError('Failed to load holidays');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  const handleRefresh = async () => {\n    if (!currentSite) return;\n    \n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      const holidays = await refreshBankHolidays(currentSite.id);\n      setBankHolidays(holidays, buildHolidayDateSet(holidays));\n    } catch (err) {\n      console.error('Failed to refresh holidays:', err);\n      setError('Failed to refresh holidays from API');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  const handleAddCustomHoliday = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!currentSite || !newHolidayDate || !newHolidayName) return;\n    \n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      await createBankHoliday(currentSite.id, {\n        date: newHolidayDate,\n        end_date: newHolidayEndDate || undefined,\n        name: newHolidayName,\n      });\n      \n      // Reload holidays\n      const holidays = await getBankHolidays(currentSite.id);\n      setBankHolidays(holidays, buildHolidayDateSet(holidays));\n      \n      // Reset form\n      setNewHolidayDate('');\n      setNewHolidayEndDate('');\n      setNewHolidayName('');\n      setIsAdding(false);\n    } catch (err) {\n      console.error('Failed to add holiday:', err);\n      setError('Failed to add custom holiday');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  const handleDeleteHoliday = async (holiday: BankHoliday) => {\n    if (!currentSite) return;\n    \n    if (!window.confirm(`Delete \"${holiday.name}\"?`)) return;\n    \n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      await deleteBankHoliday(currentSite.id, holiday.id);\n      \n      // Reload holidays\n      const holidays = await getBankHolidays(currentSite.id);\n      setBankHolidays(holidays, buildHolidayDateSet(holidays));\n    } catch (err) {\n      console.error('Failed to delete holiday:', err);\n      setError('Failed to delete holiday');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  const handleExportICS = () => {\n    if (filteredHolidays.length === 0) return;\n    \n    const icsContent = generateHolidaysICS(filteredHolidays, currentSite?.name || 'Site');\n    \n    const blob = new Blob([icsContent], { type: 'text/calendar;charset=utf-8' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `bank-holidays-${currentSite?.name?.toLowerCase().replace(/\\s+/g, '-') || 'site'}-${selectedYear}.ics`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n  \n  const handleClose = () => {\n    closeModal();\n    setIsAdding(false);\n    setError(null);\n  };\n  \n  const formatDate = (dateStr: string): string => {\n    const date = new Date(dateStr);\n    return date.toLocaleDateString(undefined, { \n      weekday: 'short',\n      day: 'numeric', \n      month: 'short',\n    });\n  };\n  \n  if (!isOpen) return null;\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={handleClose}\n      title={`Bank Holidays - ${currentSite?.name || ''}`}\n      size=\"md\"\n    >\n      <div className={styles.container}>\n        {error && (\n          <div className={styles.error}>{error}</div>\n        )}\n        \n        {/* Year selector and actions */}\n        <div className={styles.toolbar}>\n          <div className={styles.yearSelector}>\n            <label className={styles.label}>Year:</label>\n            <select\n              className={styles.select}\n              value={selectedYear}\n              onChange={(e) => setSelectedYear(parseInt(e.target.value, 10))}\n            >\n              {years.map((year) => (\n                <option key={year} value={year}>{year}</option>\n              ))}\n            </select>\n          </div>\n          \n          <div className={styles.toolbarActions}>\n            <Button\n              variant=\"secondary\"\n              size=\"sm\"\n              onClick={handleRefresh}\n              disabled={isLoading}\n              title=\"Refresh from Nager.Date API\"\n            >\n              {isLoading ? 'Refreshing...' : 'Refresh'}\n            </Button>\n            <Button\n              variant=\"secondary\"\n              size=\"sm\"\n              onClick={handleExportICS}\n              disabled={filteredHolidays.length === 0}\n              title=\"Export all holidays to ICS\"\n            >\n              Export ICS\n            </Button>\n            <Button\n              variant=\"primary\"\n              size=\"sm\"\n              onClick={() => setIsAdding(true)}\n              disabled={isAdding}\n            >\n              Add Custom\n            </Button>\n          </div>\n        </div>\n        \n        {/* Add custom holiday form */}\n        {isAdding && (\n          <form onSubmit={handleAddCustomHoliday} className={styles.addForm}>\n            <div className={styles.addFormRow}>\n              <input\n                type=\"text\"\n                className={styles.input}\n                placeholder=\"Holiday name...\"\n                value={newHolidayName}\n                onChange={(e) => setNewHolidayName(e.target.value)}\n                required\n              />\n              <input\n                type=\"date\"\n                className={styles.input}\n                value={newHolidayDate}\n                onChange={(e) => setNewHolidayDate(e.target.value)}\n                required\n              />\n              <input\n                type=\"date\"\n                className={styles.input}\n                value={newHolidayEndDate}\n                onChange={(e) => setNewHolidayEndDate(e.target.value)}\n                placeholder=\"End date (optional)\"\n              />\n            </div>\n            <div className={styles.addFormActions}>\n              <Button\n                type=\"button\"\n                variant=\"secondary\"\n                size=\"sm\"\n                onClick={() => setIsAdding(false)}\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                variant=\"primary\"\n                size=\"sm\"\n                disabled={isLoading || !newHolidayName || !newHolidayDate}\n              >\n                Add\n              </Button>\n            </div>\n          </form>\n        )}\n        \n        {/* Holidays list */}\n        <div className={styles.holidaysList}>\n          {isLoading && filteredHolidays.length === 0 ? (\n            <div className={styles.loading}>Loading holidays...</div>\n          ) : filteredHolidays.length === 0 ? (\n            <div className={styles.empty}>No holidays for {selectedYear}</div>\n          ) : (\n            <>\n              {/* Standard holidays */}\n              {standardHolidays.length > 0 && (\n                <div className={styles.section}>\n                  <h3 className={styles.sectionTitle}>\n                    Public Holidays ({standardHolidays.length})\n                  </h3>\n                  <div className={styles.holidayItems}>\n                    {standardHolidays.map((holiday) => (\n                      <div key={holiday.id} className={styles.holidayItem}>\n                        <div className={styles.holidayDate}>\n                          {formatDate(holiday.date)}\n                          {holiday.end_date && holiday.end_date !== holiday.date && (\n                            <span> - {formatDate(holiday.end_date)}</span>\n                          )}\n                        </div>\n                        <div className={styles.holidayName}>{holiday.name}</div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n              \n              {/* Custom holidays */}\n              {customHolidays.length > 0 && (\n                <div className={styles.section}>\n                  <h3 className={styles.sectionTitle}>\n                    Custom Holidays ({customHolidays.length})\n                  </h3>\n                  <div className={styles.holidayItems}>\n                    {customHolidays.map((holiday) => (\n                      <div key={holiday.id} className={`${styles.holidayItem} ${styles.custom}`}>\n                        <div className={styles.holidayDate}>\n                          {formatDate(holiday.date)}\n                          {holiday.end_date && holiday.end_date !== holiday.date && (\n                            <span> - {formatDate(holiday.end_date)}</span>\n                          )}\n                        </div>\n                        <div className={styles.holidayName}>{holiday.name}</div>\n                        <button\n                          className={styles.deleteBtn}\n                          onClick={() => handleDeleteHoliday(holiday)}\n                          title=\"Delete custom holiday\"\n                        >\n                          \n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n        \n        {/* Footer */}\n        <div className={styles.footer}>\n          <span className={styles.footerInfo}>\n            {currentSite?.country_code \n              ? `Country: ${currentSite.country_code}`\n              : 'No country configured'}\n          </span>\n          <Button variant=\"secondary\" onClick={handleClose}>\n            Close\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\n// Generate ICS file for multiple holidays\nfunction generateHolidaysICS(holidays: BankHoliday[], siteName: string): string {\n  const lines = [\n    'BEGIN:VCALENDAR',\n    'VERSION:2.0',\n    `PRODID:-//Milestone//${siteName} Holidays//EN`,\n    'CALSCALE:GREGORIAN',\n    'METHOD:PUBLISH',\n  ];\n  \n  holidays.forEach((holiday) => {\n    const startDate = new Date(holiday.date);\n    const endDate = holiday.end_date ? new Date(holiday.end_date) : startDate;\n    \n    // For all-day events, end date should be the day AFTER\n    const adjustedEndDate = new Date(endDate);\n    adjustedEndDate.setDate(adjustedEndDate.getDate() + 1);\n    \n    const formatDate = (date: Date): string => {\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, '0');\n      const day = String(date.getDate()).padStart(2, '0');\n      return `${year}${month}${day}`;\n    };\n    \n    const uid = `holiday-${holiday.id}-${Date.now()}@milestone`;\n    const now = new Date().toISOString().replace(/[-:]/g, '').replace(/\\.\\d{3}/, '');\n    \n    lines.push(\n      'BEGIN:VEVENT',\n      `UID:${uid}`,\n      `DTSTAMP:${now}`,\n      `DTSTART;VALUE=DATE:${formatDate(startDate)}`,\n      `DTEND;VALUE=DATE:${formatDate(adjustedEndDate)}`,\n      `SUMMARY:${escapeICS(holiday.name)}`,\n      `DESCRIPTION:${escapeICS(`${siteName} - Bank Holiday`)}`,\n      'STATUS:CONFIRMED',\n      'TRANSP:TRANSPARENT',\n      'END:VEVENT'\n    );\n  });\n  \n  lines.push('END:VCALENDAR');\n  \n  return lines.join('\\r\\n');\n}\n\nfunction escapeICS(text: string): string {\n  return text\n    .replace(/\\\\/g, '\\\\\\\\')\n    .replace(/;/g, '\\\\;')\n    .replace(/,/g, '\\\\,')\n    .replace(/\\n/g, '\\\\n');\n}\n","/**\n * Custom Holiday Modal\n * Modal for adding custom bank holidays to the current site\n * Accessed from the Bank Holidays section in Staff View\n */\n\nimport { useState, useEffect } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { addCustomHoliday, getBankHolidays, buildHolidayDateSet } from '@/api';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport styles from './CustomHolidayModal.module.css';\n\nexport function CustomHolidayModal() {\n  const { activeModal, closeModal } = useUIStore();\n  const currentSite = useAppStore((s) => s.currentSite);\n  const setBankHolidays = useAppStore((s) => s.setBankHolidays);\n  \n  const isOpen = activeModal === 'customHoliday';\n  \n  // Form state\n  const [name, setName] = useState('');\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  \n  // Status\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      setName('');\n      setStartDate('');\n      setEndDate('');\n      setError(null);\n    }\n  }, [isOpen]);\n  \n  // Handle save\n  const handleSave = async () => {\n    if (!currentSite) {\n      setError('No site selected');\n      return;\n    }\n    \n    if (!name.trim()) {\n      setError('Please enter a holiday name');\n      return;\n    }\n    \n    if (!startDate) {\n      setError('Please select a start date');\n      return;\n    }\n    \n    // Validate end date if provided\n    if (endDate && endDate < startDate) {\n      setError('End date must be on or after start date');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      await addCustomHoliday(currentSite.id, {\n        name: name.trim(),\n        date: startDate,\n        end_date: endDate || undefined,\n      });\n      \n      // Reload holidays\n      const holidays = await getBankHolidays(currentSite.id);\n      const holidayDates = buildHolidayDateSet(holidays);\n      setBankHolidays(holidays, holidayDates);\n      \n      closeModal();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to add custom holiday');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  // Footer buttons\n  const footer = (\n    <div className={styles.footer}>\n      <Button variant=\"secondary\" onClick={closeModal}>\n        Cancel\n      </Button>\n      <Button \n        variant=\"primary\" \n        onClick={handleSave}\n        disabled={isSubmitting}\n      >\n        {isSubmitting ? 'Adding...' : 'Add Holiday'}\n      </Button>\n    </div>\n  );\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={closeModal}\n      title=\"Add Custom Holiday\"\n      size=\"sm\"\n      footer={footer}\n    >\n      {error && (\n        <div className={styles.error}>{error}</div>\n      )}\n      \n      <div className={styles.formGroup}>\n        <label className={styles.label}>Holiday Name</label>\n        <input\n          type=\"text\"\n          className={styles.input}\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          placeholder=\"e.g., Company Anniversary\"\n          autoFocus\n        />\n      </div>\n      \n      <div className={styles.formRow}>\n        <div className={styles.formGroup}>\n          <label className={styles.label}>Start Date</label>\n          <input\n            type=\"date\"\n            className={styles.input}\n            value={startDate}\n            onChange={(e) => setStartDate(e.target.value)}\n          />\n        </div>\n        <div className={styles.formGroup}>\n          <label className={styles.label}>End Date</label>\n          <input\n            type=\"date\"\n            className={styles.input}\n            value={endDate}\n            onChange={(e) => setEndDate(e.target.value)}\n          />\n        </div>\n      </div>\n      \n      <p className={styles.help}>\n        Leave end date empty for a single-day holiday. Custom holidays will be applied to {currentSite?.name || 'the current site'} only.\n      </p>\n    </Modal>\n  );\n}\n","/**\n * Company Event Modal\n * Modal for adding company events (non-working-day markers like ISO audits, meetings, etc.)\n * Accessed from the Company Events section in Staff View\n */\n\nimport { useState, useEffect } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { createCompanyEvent, getCompanyEvents, buildEventDateSet } from '@/api';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport styles from './CustomHolidayModal.module.css'; // Reuse same styles\n\nexport function CompanyEventModal() {\n  const { activeModal, closeModal } = useUIStore();\n  const currentSite = useAppStore((s) => s.currentSite);\n  const setCompanyEvents = useAppStore((s) => s.setCompanyEvents);\n  \n  const isOpen = activeModal === 'companyEvent';\n  \n  // Form state\n  const [name, setName] = useState('');\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  \n  // Status\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Reset form when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      setName('');\n      setStartDate('');\n      setEndDate('');\n      setError(null);\n    }\n  }, [isOpen]);\n  \n  // Handle save\n  const handleSave = async () => {\n    if (!currentSite) {\n      setError('No site selected');\n      return;\n    }\n    \n    if (!name.trim()) {\n      setError('Please enter an event name');\n      return;\n    }\n    \n    if (!startDate) {\n      setError('Please select a start date');\n      return;\n    }\n    \n    // Validate end date if provided\n    if (endDate && endDate < startDate) {\n      setError('End date must be on or after start date');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      await createCompanyEvent(currentSite.id, {\n        name: name.trim(),\n        date: startDate,\n        end_date: endDate || undefined,\n      });\n      \n      // Reload events\n      const events = await getCompanyEvents(currentSite.id);\n      const eventDates = buildEventDateSet(events);\n      setCompanyEvents(events, eventDates);\n      \n      closeModal();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to add company event');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  // Footer buttons\n  const footer = (\n    <div className={styles.footer}>\n      <Button variant=\"secondary\" onClick={closeModal}>\n        Cancel\n      </Button>\n      <Button \n        variant=\"primary\" \n        onClick={handleSave}\n        disabled={isSubmitting}\n      >\n        {isSubmitting ? 'Adding...' : 'Add Event'}\n      </Button>\n    </div>\n  );\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={closeModal}\n      title=\"Add Company Event\"\n      size=\"sm\"\n      footer={footer}\n    >\n      {error && (\n        <div className={styles.error}>{error}</div>\n      )}\n      \n      <div className={styles.formGroup}>\n        <label className={styles.label}>Event Name</label>\n        <input\n          type=\"text\"\n          className={styles.input}\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          placeholder=\"e.g., ISO Audit, All-Hands Meeting\"\n          autoFocus\n        />\n      </div>\n      \n      <div className={styles.formRow}>\n        <div className={styles.formGroup}>\n          <label className={styles.label}>Start Date</label>\n          <input\n            type=\"date\"\n            className={styles.input}\n            value={startDate}\n            onChange={(e) => setStartDate(e.target.value)}\n          />\n        </div>\n        <div className={styles.formGroup}>\n          <label className={styles.label}>End Date</label>\n          <input\n            type=\"date\"\n            className={styles.input}\n            value={endDate}\n            onChange={(e) => setEndDate(e.target.value)}\n          />\n        </div>\n      </div>\n      \n      <p className={styles.help}>\n        Company events are shown as red markers on the timeline. Unlike holidays, they do not affect working day calculations. Leave end date empty for a single-day event.\n      </p>\n    </Modal>\n  );\n}\n","/**\n * Site Modal\n * Modal for editing site settings (name, city, country, region, active status)\n * Bank holidays can be refreshed from here via the Nager.Date API\n * Custom holidays are managed separately in the Staff View bank holidays section\n */\n\nimport { useState, useEffect } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { updateSite, refreshBankHolidays, buildHolidayDateSet } from '@/api';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport styles from './SiteModal.module.css';\n\n// Country list organized by region\nconst COUNTRIES = {\n  europe: [\n    { code: 'AT', name: 'Austria' },\n    { code: 'BE', name: 'Belgium' },\n    { code: 'CH', name: 'Switzerland' },\n    { code: 'CZ', name: 'Czech Republic' },\n    { code: 'DE', name: 'Germany' },\n    { code: 'DK', name: 'Denmark' },\n    { code: 'ES', name: 'Spain' },\n    { code: 'FI', name: 'Finland' },\n    { code: 'FR', name: 'France' },\n    { code: 'GB', name: 'United Kingdom' },\n    { code: 'GR', name: 'Greece' },\n    { code: 'HR', name: 'Croatia' },\n    { code: 'HU', name: 'Hungary' },\n    { code: 'IE', name: 'Ireland' },\n    { code: 'IT', name: 'Italy' },\n    { code: 'NL', name: 'Netherlands' },\n    { code: 'NO', name: 'Norway' },\n    { code: 'PL', name: 'Poland' },\n    { code: 'PT', name: 'Portugal' },\n    { code: 'RO', name: 'Romania' },\n    { code: 'SE', name: 'Sweden' },\n  ],\n  americas: [\n    { code: 'AR', name: 'Argentina' },\n    { code: 'BR', name: 'Brazil' },\n    { code: 'CA', name: 'Canada' },\n    { code: 'CL', name: 'Chile' },\n    { code: 'CO', name: 'Colombia' },\n    { code: 'MX', name: 'Mexico' },\n    { code: 'US', name: 'United States' },\n  ],\n  asiaPacific: [\n    { code: 'AU', name: 'Australia' },\n    { code: 'CN', name: 'China' },\n    { code: 'IN', name: 'India' },\n    { code: 'JP', name: 'Japan' },\n    { code: 'KR', name: 'South Korea' },\n    { code: 'NZ', name: 'New Zealand' },\n    { code: 'SG', name: 'Singapore' },\n  ],\n  africaMiddleEast: [\n    { code: 'AE', name: 'United Arab Emirates' },\n    { code: 'IL', name: 'Israel' },\n    { code: 'SA', name: 'Saudi Arabia' },\n    { code: 'ZA', name: 'South Africa' },\n  ],\n};\n\nexport function SiteModal() {\n  const { activeModal, editingSite, openModal } = useUIStore();\n  const currentSite = useAppStore((s) => s.currentSite);\n  const bankHolidays = useAppStore((s) => s.bankHolidays);\n  const setBankHolidays = useAppStore((s) => s.setBankHolidays);\n  const setCurrentSite = useAppStore((s) => s.setCurrentSite);\n  const sites = useAppStore((s) => s.sites);\n  const setSites = useAppStore((s) => s.setSites);\n  \n  const isOpen = activeModal === 'site';\n  \n  // Use editingSite if available, otherwise fall back to currentSite\n  const site = editingSite || currentSite;\n  \n  // Form state\n  const [name, setName] = useState('');\n  const [city, setCity] = useState('');\n  const [countryCode, setCountryCode] = useState('');\n  const [regionCode, setRegionCode] = useState('');\n  const [isActive, setIsActive] = useState(true);\n  \n  // Status\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isRefreshing, setIsRefreshing] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Load site data\n  useEffect(() => {\n    if (isOpen && site) {\n      setName(site.name || '');\n      setCity(site.city || '');\n      setCountryCode(site.country_code || '');\n      setRegionCode(site.region_code || '');\n      setIsActive(site.active !== false && site.active !== 0);\n      setError(null);\n    }\n  }, [isOpen, site]);\n  \n  // Get holidays count for the site being edited\n  const siteHolidayCount = bankHolidays.filter((h) => \n    site && h.site_id === site.id\n  ).length;\n  \n  // Handle save\n  const handleSave = async () => {\n    if (!site) return;\n    if (!name.trim()) {\n      setError('Site name is required');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      const updatedSite = await updateSite(site.id, {\n        name: name.trim(),\n        city: city.trim() || undefined,\n        country_code: countryCode || undefined,\n        region_code: regionCode.trim() || undefined,\n        active: isActive,\n      });\n      \n      // Update sites list\n      const updatedSites = sites.map((s) => \n        s.id === site.id ? { ...s, ...updatedSite } : s\n      );\n      setSites(updatedSites);\n      \n      // Update current site if it was edited\n      if (currentSite?.id === site.id) {\n        setCurrentSite({ ...currentSite, ...updatedSite });\n      }\n      \n      // Go back to site management modal\n      openModal('manageSites');\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to save site');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  // Handle refresh holidays from Nager.Date API\n  const handleRefreshHolidays = async () => {\n    if (!site) return;\n    \n    if (!confirm('This will refresh bank holidays from the Nager.Date API. Continue?')) {\n      return;\n    }\n    \n    setIsRefreshing(true);\n    setError(null);\n    \n    try {\n      const holidays = await refreshBankHolidays(site.id);\n      const holidayDates = buildHolidayDateSet(holidays);\n      setBankHolidays(holidays, holidayDates);\n      \n      // Update the site's last_holiday_fetch timestamp\n      const updatedSites = sites.map((s) => \n        s.id === site.id ? { ...s, last_holiday_fetch: new Date().toISOString() } : s\n      );\n      setSites(updatedSites);\n      \n      if (currentSite?.id === site.id) {\n        setCurrentSite({ ...currentSite, last_holiday_fetch: new Date().toISOString() });\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to refresh holidays');\n    } finally {\n      setIsRefreshing(false);\n    }\n  };\n  \n  // Handle going back to site management\n  const handleBack = () => {\n    openModal('manageSites');\n  };\n  \n  // Footer buttons\n  const footer = (\n    <div className={styles.footer}>\n      <Button variant=\"secondary\" onClick={handleBack}>\n        Back\n      </Button>\n      <Button \n        variant=\"primary\" \n        onClick={handleSave}\n        disabled={isSubmitting}\n      >\n        {isSubmitting ? 'Saving...' : 'Save Changes'}\n      </Button>\n    </div>\n  );\n  \n  if (!site) {\n    return null;\n  }\n  \n  // Format last fetch date\n  const lastFetchDate = site.last_holiday_fetch \n    ? new Date(site.last_holiday_fetch).toLocaleDateString()\n    : 'Never';\n  \n  return (\n    <Modal \n      isOpen={isOpen} \n      onClose={handleBack} \n      title={`Edit Site: ${site.name}`}\n      size=\"lg\"\n      footer={footer}\n    >\n      {error && (\n        <div className={styles.error}>{error}</div>\n      )}\n      \n      {/* Site Details Section */}\n      <div className={styles.section}>\n        <h3 className={styles.sectionTitle}>Site Details</h3>\n        \n        <div className={styles.formGroup}>\n          <label className={styles.label}>Site Name</label>\n          <input\n            type=\"text\"\n            className={styles.input}\n            value={name}\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) => setName(e.target.value)}\n            placeholder=\"e.g., Winterthur HQ\"\n          />\n        </div>\n        \n        <div className={styles.formGroup}>\n          <label className={styles.label}>City</label>\n          <input\n            type=\"text\"\n            className={styles.input}\n            value={city}\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) => setCity(e.target.value)}\n            placeholder=\"e.g., Winterthur\"\n          />\n        </div>\n        \n        <div className={styles.formRow}>\n          <div className={styles.formGroup}>\n            <label className={styles.label}>Country</label>\n            <select \n              className={styles.select}\n              value={countryCode}\n              onChange={(e: React.ChangeEvent<HTMLSelectElement>) => setCountryCode(e.target.value)}\n            >\n              <option value=\"\">Select country...</option>\n              <optgroup label=\"Europe\">\n                {COUNTRIES.europe.map((c) => (\n                  <option key={c.code} value={c.code}>{c.name} ({c.code})</option>\n                ))}\n              </optgroup>\n              <optgroup label=\"Americas\">\n                {COUNTRIES.americas.map((c) => (\n                  <option key={c.code} value={c.code}>{c.name} ({c.code})</option>\n                ))}\n              </optgroup>\n              <optgroup label=\"Asia & Pacific\">\n                {COUNTRIES.asiaPacific.map((c) => (\n                  <option key={c.code} value={c.code}>{c.name} ({c.code})</option>\n                ))}\n              </optgroup>\n              <optgroup label=\"Africa & Middle East\">\n                {COUNTRIES.africaMiddleEast.map((c) => (\n                  <option key={c.code} value={c.code}>{c.name} ({c.code})</option>\n                ))}\n              </optgroup>\n            </select>\n          </div>\n          \n          <div className={styles.formGroup}>\n            <label className={styles.label}>Region/State Code</label>\n            <input\n              type=\"text\"\n              className={styles.input}\n              value={regionCode}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => setRegionCode(e.target.value)}\n              placeholder=\"e.g., ZH, HE, ARA\"\n            />\n          </div>\n        </div>\n        \n        <p className={styles.help}>\n          Region codes vary by country. For Switzerland: ZH, BE, GE, etc. For Germany: BY, HE, NW, etc.\n        </p>\n        \n        <div className={styles.checkbox}>\n          <label>\n            <input\n              type=\"checkbox\"\n              checked={isActive}\n              onChange={(e: React.ChangeEvent<HTMLInputElement>) => setIsActive(e.target.checked)}\n            />\n            <span>Active</span>\n          </label>\n        </div>\n      </div>\n      \n      {/* Bank Holidays Status Section */}\n      <div className={styles.section}>\n        <h3 className={styles.sectionTitle}>Bank Holidays</h3>\n        \n        {!countryCode ? (\n          <div className={styles.warning}>\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\" />\n              <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\" />\n              <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\" />\n            </svg>\n            Set a country code above to enable automatic bank holiday fetching\n          </div>\n        ) : (\n          <div className={styles.holidayStatusBox}>\n            <div className={styles.holidayInfo}>\n              <span className={styles.holidayCount}>\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <polyline points=\"20 6 9 17 4 12\" />\n                </svg>\n                {siteHolidayCount} bank holidays\n              </span>\n              <span className={styles.lastFetch}>\n                Last updated: {lastFetchDate}\n              </span>\n            </div>\n            <Button\n              variant=\"secondary\"\n              size=\"sm\"\n              onClick={handleRefreshHolidays}\n              disabled={isRefreshing}\n            >\n              <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ marginRight: 4 }}>\n                <polyline points=\"23 4 23 10 17 10\" />\n                <polyline points=\"1 20 1 14 7 14\" />\n                <path d=\"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15\" />\n              </svg>\n              {isRefreshing ? 'Refreshing...' : 'Refresh'}\n            </Button>\n          </div>\n        )}\n        \n        <p className={styles.help}>\n          Bank holidays are fetched from the Nager.Date public API. Custom holidays can be added in the Staff View under the Bank Holidays section.\n        </p>\n      </div>\n    </Modal>\n  );\n}\n","/**\n * Site Management Modal\n * Lists all sites and allows adding new ones\n * Opens SiteEditModal for editing individual sites\n */\n\nimport { useState } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { createSite } from '@/api';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport type { Site } from '@/types';\nimport styles from './SiteManagementModal.module.css';\n\n// Country lookup for display\nconst COUNTRIES: Record<string, string> = {\n  AT: 'Austria', BE: 'Belgium', CH: 'Switzerland', CZ: 'Czech Republic',\n  DE: 'Germany', DK: 'Denmark', ES: 'Spain', FI: 'Finland', FR: 'France',\n  GB: 'United Kingdom', GR: 'Greece', HR: 'Croatia', HU: 'Hungary',\n  IE: 'Ireland', IT: 'Italy', NL: 'Netherlands', NO: 'Norway', PL: 'Poland',\n  PT: 'Portugal', RO: 'Romania', SE: 'Sweden', AR: 'Argentina', BR: 'Brazil',\n  CA: 'Canada', CL: 'Chile', CO: 'Colombia', MX: 'Mexico', US: 'United States',\n  AU: 'Australia', CN: 'China', IN: 'India', JP: 'Japan', KR: 'South Korea',\n  NZ: 'New Zealand', SG: 'Singapore', AE: 'UAE', IL: 'Israel', SA: 'Saudi Arabia',\n  ZA: 'South Africa',\n};\n\nfunction getCountryName(code: string | undefined): string {\n  if (!code) return '';\n  return COUNTRIES[code] || code;\n}\n\nexport function SiteManagementModal() {\n  const { activeModal, closeModal, setEditingSite, openModal } = useUIStore();\n  const sites = useAppStore((s) => s.sites);\n  const setSites = useAppStore((s) => s.setSites);\n  \n  const isOpen = activeModal === 'manageSites' || activeModal === 'siteManagement';\n  \n  // New site form\n  const [newSiteName, setNewSiteName] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Handle add new site\n  const handleAddSite = async () => {\n    if (!newSiteName.trim()) {\n      setError('Please enter a site name');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    setError(null);\n    \n    try {\n      const newSite = await createSite({ name: newSiteName.trim() });\n      setSites([...sites, newSite]);\n      setNewSiteName('');\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to add site');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  // Handle edit site - open the site edit modal\n  const handleEditSite = (site: Site) => {\n    setEditingSite(site);\n    openModal('site');\n  };\n  \n  // Handle close\n  const handleClose = () => {\n    setNewSiteName('');\n    setError(null);\n    closeModal();\n  };\n  \n  // Footer with Close button\n  const footer = (\n    <div className={styles.footer}>\n      <Button variant=\"secondary\" onClick={handleClose}>\n        Close\n      </Button>\n    </div>\n  );\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={handleClose}\n      title=\"Site Management\"\n      footer={footer}\n      size=\"md\"\n    >\n      {/* Error display */}\n      {error && (\n        <div className={styles.error}>{error}</div>\n      )}\n      \n      {/* Site list */}\n      <div className={styles.siteList}>\n        {sites.length === 0 ? (\n          <div className={styles.empty}>No sites configured. Add one below.</div>\n        ) : (\n          sites.map((site) => (\n            <div \n              key={site.id} \n              className={`${styles.siteRow} ${!site.active && site.active !== undefined ? styles.inactive : ''}`}\n            >\n              <div className={styles.siteInfo}>\n                <div className={styles.siteName}>{site.name}</div>\n                <div className={styles.siteCountry}>\n                  {getCountryName(site.country_code) || site.country_code || ''}\n                </div>\n              </div>\n              <div className={styles.siteActions}>\n                {!site.active && site.active !== undefined && (\n                  <span className={styles.inactiveBadge}>Inactive</span>\n                )}\n                <button \n                  className={styles.editBtn}\n                  onClick={() => handleEditSite(site)}\n                  title=\"Edit site\"\n                >\n                  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                    <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\" />\n                    <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n      \n      {/* Add new site section */}\n      <div className={styles.addSection}>\n        <div className={styles.addForm}>\n          <input\n            type=\"text\"\n            className={styles.input}\n            placeholder=\"New site name\"\n            value={newSiteName}\n            onChange={(e) => setNewSiteName(e.target.value)}\n            onKeyDown={(e) => e.key === 'Enter' && handleAddSite()}\n          />\n          <Button \n            variant=\"primary\" \n            onClick={handleAddSite}\n            disabled={isSubmitting}\n          >\n            Add\n          </Button>\n        </div>\n        <p className={styles.help}>\n          After adding, click the edit button to set country and region codes for automatic bank holidays.\n        </p>\n      </div>\n    </Modal>\n  );\n}\n","/**\n * SkillsManagementModal\n * \n * Modal for managing skills (CRUD operations).\n * Only accessible to SuperUsers and Admins.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { useAppStore } from '@/stores/appStore';\nimport { skillsApi } from '@/api/endpoints/skills';\nimport type { Skill } from '@/types';\nimport styles from './SkillsManagementModal.module.css';\n\n// Default colors for skills\nconst SKILL_COLORS = [\n  '#3b82f6', // Blue\n  '#8b5cf6', // Purple\n  '#10b981', // Green\n  '#f59e0b', // Amber\n  '#ef4444', // Red\n  '#06b6d4', // Cyan\n  '#ec4899', // Pink\n  '#84cc16', // Lime\n  '#f97316', // Orange\n  '#6366f1', // Indigo\n];\n\ninterface SkillsManagementModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function SkillsManagementModal({ isOpen, onClose }: SkillsManagementModalProps) {\n  const setSkills = useAppStore((s) => s.setSkills);\n  \n  // State\n  const [skills, setLocalSkills] = useState<Skill[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [editingSkill, setEditingSkill] = useState<Skill | null>(null);\n  const [isCreating, setIsCreating] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Load skills\n  const loadSkills = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const data = await skillsApi.getAll();\n      setLocalSkills(data);\n      setSkills(data); // Update global state\n    } catch (err) {\n      console.error('Failed to load skills:', err);\n      setError('Failed to load skills');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [setSkills]);\n  \n  useEffect(() => {\n    if (isOpen) {\n      loadSkills();\n    }\n  }, [isOpen, loadSkills]);\n  \n  // Handle edit\n  const handleEdit = (skill: Skill) => {\n    setEditingSkill(skill);\n    setIsCreating(false);\n  };\n  \n  // Handle create\n  const handleCreate = () => {\n    setEditingSkill(null);\n    setIsCreating(true);\n  };\n  \n  // Handle close form\n  const handleCloseForm = () => {\n    setEditingSkill(null);\n    setIsCreating(false);\n  };\n  \n  // Handle save\n  const handleSave = async () => {\n    await loadSkills();\n    handleCloseForm();\n  };\n  \n  // Handle delete\n  const handleDelete = async (skillId: number) => {\n    const skill = skills.find(s => s.id === skillId);\n    if (!skill) return;\n    \n    const confirmed = window.confirm(\n      `Are you sure you want to delete \"${skill.name}\"?\\n\\nThis will remove the skill from all users who have it assigned.`\n    );\n    \n    if (!confirmed) return;\n    \n    try {\n      await skillsApi.delete(skillId);\n      await loadSkills();\n    } catch (err) {\n      console.error('Failed to delete skill:', err);\n      setError('Failed to delete skill');\n    }\n  };\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      title=\"Manage Skills\"\n      size=\"md\"\n    >\n      <div className={styles.container}>\n        {(editingSkill || isCreating) ? (\n          <SkillForm\n            skill={editingSkill}\n            onSave={handleSave}\n            onCancel={handleCloseForm}\n          />\n        ) : (\n          <>\n            {/* Toolbar */}\n            <div className={styles.toolbar}>\n              <span className={styles.count}>{skills.length} skills</span>\n              <Button onClick={handleCreate}>\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n                  <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n                </svg>\n                Add Skill\n              </Button>\n            </div>\n            \n            {error && (\n              <div className={styles.error}>{error}</div>\n            )}\n            \n            {/* Skills list */}\n            <div className={styles.listWrapper}>\n              {isLoading ? (\n                <div className={styles.loading}>Loading skills...</div>\n              ) : skills.length === 0 ? (\n                <div className={styles.empty}>\n                  <p>No skills defined yet</p>\n                  <p className={styles.emptyHint}>Click \"Add Skill\" to create your first skill</p>\n                </div>\n              ) : (\n                <div className={styles.list}>\n                  {skills.map((skill) => (\n                    <div key={skill.id} className={styles.skillItem}>\n                      <div className={styles.skillInfo}>\n                        <span \n                          className={styles.colorDot}\n                          style={{ backgroundColor: skill.color }}\n                        />\n                        <div className={styles.skillText}>\n                          <span className={styles.skillName}>{skill.name}</span>\n                          {skill.description && (\n                            <span className={styles.skillDesc}>{skill.description}</span>\n                          )}\n                        </div>\n                      </div>\n                      <div className={styles.skillActions}>\n                        <button \n                          className={styles.actionBtn}\n                          onClick={() => handleEdit(skill)}\n                          title=\"Edit skill\"\n                        >\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                            <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\" />\n                            <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\" />\n                          </svg>\n                        </button>\n                        <button \n                          className={`${styles.actionBtn} ${styles.deleteBtn}`}\n                          onClick={() => handleDelete(skill.id)}\n                          title=\"Delete skill\"\n                        >\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                            <polyline points=\"3 6 5 6 21 6\" />\n                            <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\n                          </svg>\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\n// =============================================================================\n// SKILL FORM COMPONENT\n// =============================================================================\n\ninterface SkillFormProps {\n  skill: Skill | null;\n  onSave: () => void;\n  onCancel: () => void;\n}\n\nfunction SkillForm({ skill, onSave, onCancel }: SkillFormProps) {\n  const isEditing = !!skill;\n  \n  // Form state\n  const [name, setName] = useState(skill?.name || '');\n  const [description, setDescription] = useState(skill?.description || '');\n  const [color, setColor] = useState(skill?.color || SKILL_COLORS[0]);\n  \n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Handle form submit\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    \n    if (!name.trim()) {\n      setError('Skill name is required');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    \n    try {\n      if (isEditing && skill) {\n        await skillsApi.update(skill.id, {\n          name: name.trim(),\n          description: description.trim() || undefined,\n          color,\n        });\n      } else {\n        await skillsApi.create({\n          name: name.trim(),\n          description: description.trim() || undefined,\n          color,\n        });\n      }\n      onSave();\n    } catch (err) {\n      console.error('Failed to save skill:', err);\n      let message = 'Failed to save skill';\n      if (err instanceof Error) {\n        message = err.message;\n      }\n      setError(message);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  return (\n    <form onSubmit={handleSubmit} className={styles.form}>\n      <div className={styles.formHeader}>\n        <h3>{isEditing ? 'Edit Skill' : 'Add Skill'}</h3>\n        <button \n          type=\"button\" \n          className={styles.backBtn}\n          onClick={onCancel}\n        >\n           Back to list\n        </button>\n      </div>\n      \n      {error && (\n        <div className={styles.error}>{error}</div>\n      )}\n      \n      {/* Skill Name */}\n      <div className={styles.field}>\n        <label htmlFor=\"skillName\">Name *</label>\n        <input\n          type=\"text\"\n          id=\"skillName\"\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          placeholder=\"e.g., Project Management\"\n          required\n          maxLength={100}\n        />\n      </div>\n      \n      {/* Description */}\n      <div className={styles.field}>\n        <label htmlFor=\"skillDesc\">Description</label>\n        <input\n          type=\"text\"\n          id=\"skillDesc\"\n          value={description}\n          onChange={(e) => setDescription(e.target.value)}\n          placeholder=\"Optional description\"\n        />\n      </div>\n      \n      {/* Color Picker */}\n      <div className={styles.field}>\n        <label>Color</label>\n        <div className={styles.colorPicker}>\n          {SKILL_COLORS.map((c) => (\n            <button\n              key={c}\n              type=\"button\"\n              className={`${styles.colorOption} ${color === c ? styles.selected : ''}`}\n              style={{ backgroundColor: c }}\n              onClick={() => setColor(c)}\n              title={c}\n            />\n          ))}\n          <input\n            type=\"color\"\n            value={color}\n            onChange={(e) => setColor(e.target.value)}\n            className={styles.customColor}\n            title=\"Custom color\"\n          />\n        </div>\n        <div className={styles.colorPreview}>\n          <span \n            className={styles.previewDot}\n            style={{ backgroundColor: color }}\n          />\n          <span className={styles.previewText}>{name || 'Skill Name'}</span>\n        </div>\n      </div>\n      \n      {/* Form Actions */}\n      <div className={styles.formActions}>\n        <Button\n          type=\"button\"\n          variant=\"secondary\"\n          onClick={onCancel}\n          disabled={isSubmitting}\n        >\n          Cancel\n        </Button>\n        <Button\n          type=\"submit\"\n          disabled={isSubmitting}\n        >\n          {isSubmitting ? 'Saving...' : (isEditing ? 'Save Changes' : 'Create Skill')}\n        </Button>\n      </div>\n    </form>\n  );\n}\n","/**\n * UserManagementModal\n * \n * Admin modal for managing users - list, create, edit, delete.\n * Displays users in a table with role badges, job title, skills, and site assignments.\n * Includes comprehensive filtering by role, job title, status, site, and skills.\n * \n * Permissions:\n * - Admin: Full CRUD on all users\n * - SuperUser: CRU + Disable users (no delete), can promote users to SuperUser\n */\n\nimport { useState, useEffect, useCallback, useMemo, useRef } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { useDataLoader } from '@/hooks/useDataLoader';\nimport { getUsers, createUser, updateUser, deleteUser } from '@/api/endpoints/users';\nimport { SkillsManagementModal } from './SkillsManagementModal';\nimport type { User, UserRole, CreateUserRequest, UpdateUserRequest, Skill } from '@/types';\nimport styles from './UserManagementModal.module.css';\n\n// Role display configuration\nconst ROLE_CONFIG: Record<UserRole, { label: string; color: string }> = {\n  admin: { label: 'Admin', color: '#ef4444' },\n  superuser: { label: 'SuperUser', color: '#f97316' },\n  user: { label: 'User', color: '#3b82f6' },\n};\n\nexport function UserManagementModal() {\n  const activeModal = useUIStore((s) => s.activeModal);\n  const closeModal = useUIStore((s) => s.closeModal);\n  const sites = useAppStore((s) => s.sites);\n  const skills = useAppStore((s) => s.skills);\n  const currentUser = useAppStore((s) => s.currentUser);\n  const { refreshStaff } = useDataLoader();\n  \n  const isOpen = activeModal === 'userManagement';\n  \n  // Track if any changes were made\n  const [hasChanges, setHasChanges] = useState(false);\n  \n  // State\n  const [users, setUsers] = useState<User[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [editingUser, setEditingUser] = useState<User | null>(null);\n  const [isCreating, setIsCreating] = useState(false);\n  const [showSkillsModal, setShowSkillsModal] = useState(false);\n  \n  // Filter state\n  const [filterRole, setFilterRole] = useState<string>('all');\n  const [filterJobTitle, setFilterJobTitle] = useState<string>('all');\n  const [filterStatus, setFilterStatus] = useState<string>('active');\n  const [filterSite, setFilterSite] = useState<string>('all');\n  const [filterSkill, setFilterSkill] = useState<string>('all');\n  const [isFilterOpen, setIsFilterOpen] = useState(false);\n  const filterRef = useRef<HTMLDivElement>(null);\n  \n  // Permission checks\n  const isAdmin = currentUser?.role === 'admin';\n  const isSuperUser = currentUser?.role === 'superuser';\n  const canManageUsers = isAdmin || isSuperUser;\n  \n  // Load users when modal opens\n  const loadUsers = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      const data = await getUsers(true); // Always load all including disabled\n      setUsers(data);\n    } catch (err) {\n      console.error('Failed to load users:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n  \n  useEffect(() => {\n    if (isOpen) {\n      loadUsers();\n    }\n  }, [isOpen, loadUsers]);\n  \n  // Close filter dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (filterRef.current && !filterRef.current.contains(e.target as Node)) {\n        setIsFilterOpen(false);\n      }\n    };\n    if (isFilterOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, [isFilterOpen]);\n  \n  // Extract unique job titles\n  const jobTitles = useMemo(() => {\n    const titles = new Set<string>();\n    users.forEach((u) => { if (u.job_title) titles.add(u.job_title); });\n    return Array.from(titles).sort();\n  }, [users]);\n  \n  // Filter users\n  const filteredUsers = useMemo(() => {\n    return users.filter((user) => {\n      if (filterRole !== 'all' && user.role !== filterRole) return false;\n      if (filterJobTitle !== 'all' && user.job_title !== filterJobTitle) return false;\n      if (filterStatus === 'active' && !user.active) return false;\n      if (filterStatus === 'disabled' && user.active) return false;\n      if (filterSite !== 'all' && !user.site_ids.includes(parseInt(filterSite))) return false;\n      if (filterSkill !== 'all') {\n        const skillId = parseInt(filterSkill);\n        if (!user.skills?.some((s) => s.id === skillId)) return false;\n      }\n      return true;\n    });\n  }, [users, filterRole, filterJobTitle, filterStatus, filterSite, filterSkill]);\n  \n  // Count active filters\n  const activeFilterCount = useMemo(() => {\n    let count = 0;\n    if (filterRole !== 'all') count++;\n    if (filterJobTitle !== 'all') count++;\n    if (filterStatus !== 'active') count++;\n    if (filterSite !== 'all') count++;\n    if (filterSkill !== 'all') count++;\n    return count;\n  }, [filterRole, filterJobTitle, filterStatus, filterSite, filterSkill]);\n  \n  const clearFilters = () => {\n    setFilterRole('all');\n    setFilterJobTitle('all');\n    setFilterStatus('active');\n    setFilterSite('all');\n    setFilterSkill('all');\n  };\n  \n  const getSiteNames = (siteIds: number[]) => {\n    if (!siteIds || siteIds.length === 0) return '';\n    return siteIds.map(id => sites.find(s => s.id === id)?.name).filter(Boolean).join(', ');\n  };\n  \n  const handleEdit = (user: User) => { setEditingUser(user); setIsCreating(false); };\n  const handleCreate = () => { setEditingUser(null); setIsCreating(true); };\n  const handleCloseForm = () => { setEditingUser(null); setIsCreating(false); };\n  const handleSave = async () => { await loadUsers(); setHasChanges(true); handleCloseForm(); };\n  const handleDelete = async () => { await loadUsers(); setHasChanges(true); handleCloseForm(); };\n  \n  // Handle modal close - refresh staff data if changes were made\n  const handleClose = async () => {\n    if (hasChanges) {\n      await refreshStaff();\n      setHasChanges(false);\n    }\n    closeModal();\n  };\n  \n  return (\n    <>\n      <Modal isOpen={isOpen} onClose={handleClose} title=\"User Management\" size=\"xxl\">\n        <div className={styles.container}>\n          {(editingUser || isCreating) ? (\n            <UserForm\n              user={editingUser}\n              sites={sites}\n              skills={skills}\n              currentUser={currentUser}\n              onSave={handleSave}\n              onDelete={handleDelete}\n              onCancel={handleCloseForm}\n            />\n          ) : (\n            <>\n              {/* Toolbar */}\n              <div className={styles.toolbar}>\n                <div className={styles.toolbarLeft}>\n                  <div ref={filterRef} className={styles.filterWrapper}>\n                    <button \n                      className={`${styles.filterTrigger} ${activeFilterCount > 0 ? styles.hasFilters : ''}`}\n                      onClick={() => setIsFilterOpen(!isFilterOpen)}\n                    >\n                      <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <polygon points=\"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\" />\n                      </svg>\n                      <span>{activeFilterCount > 0 ? `${activeFilterCount} filter${activeFilterCount > 1 ? 's' : ''}` : 'Filter'}</span>\n                      <svg className={`${styles.chevron} ${isFilterOpen ? styles.open : ''}`} width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <polyline points=\"6 9 12 15 18 9\" />\n                      </svg>\n                    </button>\n                    \n                    {isFilterOpen && (\n                      <div className={styles.filterDropdown}>\n                        {activeFilterCount > 0 && (\n                          <div className={styles.filterActions}>\n                            <button className={styles.clearFilters} onClick={clearFilters}>Clear all filters</button>\n                          </div>\n                        )}\n                        <div className={styles.filterGrid}>\n                          <div className={styles.filterField}>\n                            <label>Status</label>\n                            <select value={filterStatus} onChange={(e) => setFilterStatus(e.target.value)}>\n                              <option value=\"all\">All</option>\n                              <option value=\"active\">Active</option>\n                              <option value=\"disabled\">Disabled</option>\n                            </select>\n                          </div>\n                          <div className={styles.filterField}>\n                            <label>Role</label>\n                            <select value={filterRole} onChange={(e) => setFilterRole(e.target.value)}>\n                              <option value=\"all\">All Roles</option>\n                              <option value=\"admin\">Admin</option>\n                              <option value=\"superuser\">SuperUser</option>\n                              <option value=\"user\">User</option>\n                            </select>\n                          </div>\n                          <div className={styles.filterField}>\n                            <label>Job Title</label>\n                            <select value={filterJobTitle} onChange={(e) => setFilterJobTitle(e.target.value)}>\n                              <option value=\"all\">All Job Titles</option>\n                              {jobTitles.map((t) => <option key={t} value={t}>{t}</option>)}\n                            </select>\n                          </div>\n                          <div className={styles.filterField}>\n                            <label>Site</label>\n                            <select value={filterSite} onChange={(e) => setFilterSite(e.target.value)}>\n                              <option value=\"all\">All Sites</option>\n                              {sites.map((s) => <option key={s.id} value={s.id}>{s.name}</option>)}\n                            </select>\n                          </div>\n                          <div className={styles.filterField}>\n                            <label>Skill</label>\n                            <select value={filterSkill} onChange={(e) => setFilterSkill(e.target.value)}>\n                              <option value=\"all\">All Skills</option>\n                              {skills.map((s) => <option key={s.id} value={s.id}>{s.name}</option>)}\n                            </select>\n                          </div>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                  <span className={styles.resultCount}>\n                    {filteredUsers.length} user{filteredUsers.length !== 1 ? 's' : ''}\n                    {activeFilterCount > 0 && ` (filtered from ${users.length})`}\n                  </span>\n                </div>\n                \n                <div className={styles.toolbarRight}>\n                  {canManageUsers && (\n                    <>\n                      <Button variant=\"secondary\" onClick={() => setShowSkillsModal(true)}>\n                        <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ marginRight: '6px' }}>\n                          <circle cx=\"12\" cy=\"12\" r=\"3\" />\n                          <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\" />\n                        </svg>\n                        Manage Skills\n                      </Button>\n                      <Button onClick={handleCreate}>\n                        <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ marginRight: '6px' }}>\n                          <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n                          <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n                        </svg>\n                        Add User\n                      </Button>\n                    </>\n                  )}\n                </div>\n              </div>\n              \n              {/* User Table */}\n              <div className={styles.tableWrapper}>\n                {isLoading ? (\n                  <div className={styles.loading}>Loading users...</div>\n                ) : filteredUsers.length === 0 ? (\n                  <div className={styles.empty}>\n                    {activeFilterCount > 0 ? 'No users match the selected filters' : 'No users found'}\n                  </div>\n                ) : (\n                  <table className={styles.table}>\n                    <thead>\n                      <tr>\n                        <th>Name</th>\n                        <th>Job Title</th>\n                        <th>Role</th>\n                        <th>Skills</th>\n                        <th>Sites</th>\n                        <th style={{ width: 60 }}></th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {filteredUsers.map((user) => (\n                        <tr key={user.id} className={!user.active ? styles.disabled : ''}>\n                          <td>\n                            <div className={styles.nameCell}>\n                              <div className={styles.nameInfo}>\n                                <span className={styles.userName}>{user.first_name} {user.last_name}</span>\n                                <span className={styles.userEmail}>{user.email}</span>\n                              </div>\n                              {!user.active && <span className={styles.disabledBadge}>Disabled</span>}\n                            </div>\n                          </td>\n                          <td className={styles.jobTitleCell}>\n                            {user.job_title || <span className={styles.noValue}></span>}\n                          </td>\n                          <td>\n                            <span className={styles.roleBadge} style={{ backgroundColor: `${ROLE_CONFIG[user.role].color}20`, color: ROLE_CONFIG[user.role].color }}>\n                              {ROLE_CONFIG[user.role].label}\n                            </span>\n                          </td>\n                          <td>\n                            <div className={styles.skillsCell}>\n                              {user.skills && user.skills.length > 0 ? (\n                                <>\n                                  {user.skills.slice(0, 3).map((skill) => (\n                                    <span key={skill.id} className={styles.skillBadge} style={{ backgroundColor: `${skill.color}20`, color: skill.color }} title={skill.name}>\n                                      {skill.name}\n                                    </span>\n                                  ))}\n                                  {user.skills.length > 3 && <span className={styles.moreSkills}>+{user.skills.length - 3}</span>}\n                                </>\n                              ) : (\n                                <span className={styles.noValue}></span>\n                              )}\n                            </div>\n                          </td>\n                          <td className={styles.sitesCell} title={getSiteNames(user.site_ids)}>{getSiteNames(user.site_ids)}</td>\n                          <td>\n                            <button className={styles.editBtn} onClick={() => handleEdit(user)} title=\"Edit user\">\n                              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\" />\n                                <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\" />\n                              </svg>\n                            </button>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                )}\n              </div>\n            </>\n          )}\n        </div>\n      </Modal>\n      <SkillsManagementModal isOpen={showSkillsModal} onClose={() => setShowSkillsModal(false)} />\n    </>\n  );\n}\n\n// =============================================================================\n// USER FORM COMPONENT\n// =============================================================================\n\ninterface UserFormProps {\n  user: User | null;\n  sites: { id: number; name: string }[];\n  skills: Skill[];\n  currentUser: User | null;\n  onSave: () => void;\n  onDelete: () => void;\n  onCancel: () => void;\n}\n\nfunction UserForm({ user, sites, skills, currentUser, onSave, onDelete, onCancel }: UserFormProps) {\n  const isEditing = !!user;\n  const isAdmin = currentUser?.role === 'admin';\n  const isSuperUser = currentUser?.role === 'superuser';\n  \n  const [firstName, setFirstName] = useState(user?.first_name || '');\n  const [lastName, setLastName] = useState(user?.last_name || '');\n  const [email, setEmail] = useState(user?.email || '');\n  const [password, setPassword] = useState('');\n  const [jobTitle, setJobTitle] = useState(user?.job_title || '');\n  const [role, setRole] = useState<UserRole>(user?.role || 'user');\n  const [maxCapacity, setMaxCapacity] = useState(user?.max_capacity ?? 100);\n  const [active, setActive] = useState(user?.active ?? true);\n  const [selectedSiteIds, setSelectedSiteIds] = useState<number[]>(user?.site_ids || []);\n  const [selectedSkillIds, setSelectedSkillIds] = useState<number[]>(user?.skills?.map(s => s.id) || []);\n  \n  // Quick skill add state\n  const [isAddingNewSkill, setIsAddingNewSkill] = useState(false);\n  const [newSkillName, setNewSkillName] = useState('');\n  const [isCreatingSkill, setIsCreatingSkill] = useState(false);\n  \n  // Access to update global skills\n  const setGlobalSkills = useAppStore((s) => s.setSkills);\n  \n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  const canAssignAdmin = isAdmin;\n  const canAssignSuperUser = isAdmin || isSuperUser;\n  const canDelete = isAdmin;\n  const canToggleActive = isEditing && ((isAdmin && user?.id !== currentUser?.id) || (isSuperUser && user?.role !== 'admin'));\n  \n  const toggleSite = (siteId: number) => {\n    setSelectedSiteIds(prev => prev.includes(siteId) ? prev.filter(id => id !== siteId) : [...prev, siteId]);\n  };\n  \n  const toggleSkill = (skillId: number) => {\n    setSelectedSkillIds(prev => prev.includes(skillId) ? prev.filter(id => id !== skillId) : [...prev, skillId]);\n  };\n  \n  // Quick skill creation\n  const confirmNewSkill = async () => {\n    if (!newSkillName.trim()) return;\n    \n    setIsCreatingSkill(true);\n    try {\n      const { skillsApi } = await import('@/api/endpoints/skills');\n      const newSkill = await skillsApi.create({\n        name: newSkillName.trim(),\n        color: '#6366f1', // Default color\n      });\n      \n      // Update global skills\n      const allSkills = await skillsApi.getAll();\n      setGlobalSkills(allSkills);\n      \n      // Select the new skill\n      setSelectedSkillIds(prev => [...prev, newSkill.id]);\n      \n      setIsAddingNewSkill(false);\n      setNewSkillName('');\n    } catch (err) {\n      console.error('Failed to create skill:', err);\n      setError(err instanceof Error ? err.message : 'Failed to create skill');\n    } finally {\n      setIsCreatingSkill(false);\n    }\n  };\n  \n  const cancelNewSkill = () => {\n    setIsAddingNewSkill(false);\n    setNewSkillName('');\n  };\n  \n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    \n    if (!firstName.trim() || !lastName.trim() || !email.trim()) {\n      setError('Please fill in all required fields');\n      return;\n    }\n    if (!isEditing && !password) {\n      setError('Password is required for new users');\n      return;\n    }\n    if (!isEditing && password.length < 6) {\n      setError('Password must be at least 6 characters');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    try {\n      if (isEditing && user) {\n        const data: UpdateUserRequest = {\n          first_name: firstName.trim(),\n          last_name: lastName.trim(),\n          email: email.trim(),\n          job_title: jobTitle.trim() || undefined,\n          role,\n          max_capacity: maxCapacity,\n          active,\n          site_ids: selectedSiteIds,\n          skill_ids: selectedSkillIds,\n        };\n        if (password) data.password = password;\n        await updateUser(user.id, data);\n      } else {\n        const data: CreateUserRequest = {\n          first_name: firstName.trim(),\n          last_name: lastName.trim(),\n          email: email.trim(),\n          password,\n          job_title: jobTitle.trim() || undefined,\n          role,\n          max_capacity: maxCapacity,\n          site_ids: selectedSiteIds,\n          skill_ids: selectedSkillIds,\n        };\n        await createUser(data);\n      }\n      onSave();\n    } catch (err) {\n      console.error('Failed to save user:', err);\n      setError(err instanceof Error ? err.message : 'Failed to save user');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  const handleDelete = async () => {\n    if (!user) return;\n    const confirmed = window.confirm(`Are you sure you want to delete \"${user.first_name} ${user.last_name}\"?\\n\\nThis action cannot be undone.`);\n    if (!confirmed) return;\n    \n    setIsSubmitting(true);\n    try {\n      await deleteUser(user.id);\n      onDelete();\n    } catch (err) {\n      console.error('Failed to delete user:', err);\n      setError(err instanceof Error ? err.message : 'Failed to delete user');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  return (\n    <form onSubmit={handleSubmit} className={styles.form}>\n      <div className={styles.formHeader}>\n        <h3>{isEditing ? 'Edit User' : 'Add User'}</h3>\n        <button type=\"button\" className={styles.backBtn} onClick={onCancel}> Back to list</button>\n      </div>\n      \n      {error && <div className={styles.error}>{error}</div>}\n      \n      <div className={styles.formGrid}>\n        <div className={styles.field}>\n          <label htmlFor=\"firstName\">First Name *</label>\n          <input type=\"text\" id=\"firstName\" value={firstName} onChange={(e) => setFirstName(e.target.value)} placeholder=\"Enter first name\" required />\n        </div>\n        <div className={styles.field}>\n          <label htmlFor=\"lastName\">Last Name *</label>\n          <input type=\"text\" id=\"lastName\" value={lastName} onChange={(e) => setLastName(e.target.value)} placeholder=\"Enter last name\" required />\n        </div>\n        <div className={styles.field}>\n          <label htmlFor=\"email\">Email *</label>\n          <input type=\"email\" id=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} placeholder=\"Enter email address\" required />\n        </div>\n        <div className={styles.field}>\n          <label htmlFor=\"password\">Password {isEditing ? '(leave blank to keep)' : '*'}</label>\n          <input type=\"password\" id=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} placeholder={isEditing ? '' : 'Min 6 characters'} required={!isEditing} minLength={6} />\n        </div>\n        <div className={styles.field}>\n          <label htmlFor=\"jobTitle\">Job Title</label>\n          <input type=\"text\" id=\"jobTitle\" value={jobTitle} onChange={(e) => setJobTitle(e.target.value)} placeholder=\"e.g., Project Manager\" />\n        </div>\n        <div className={styles.field}>\n          <label htmlFor=\"maxCapacity\">Max Capacity: {maxCapacity}%</label>\n          <div className={styles.sliderContainer}>\n            <input\n              type=\"range\"\n              className={styles.slider}\n              id=\"maxCapacity\"\n              min=\"5\"\n              max=\"100\"\n              step=\"5\"\n              value={maxCapacity}\n              onChange={(e) => setMaxCapacity(parseInt(e.target.value))}\n            />\n            <div className={styles.sliderLabels}>\n              <span>5%</span>\n              <span>50%</span>\n              <span>100%</span>\n            </div>\n          </div>\n          <span className={styles.hint}>\n            {maxCapacity < 100 ? `Part-time worker (${maxCapacity}% capacity)` : 'Full-time worker'}\n          </span>\n        </div>\n        <div className={styles.field}>\n          <label htmlFor=\"role\">Role *</label>\n          <select id=\"role\" value={role} onChange={(e) => setRole(e.target.value as UserRole)}>\n            <option value=\"user\">User</option>\n            <option value=\"superuser\" disabled={!canAssignSuperUser}>SuperUser</option>\n            <option value=\"admin\" disabled={!canAssignAdmin}>Admin {!canAssignAdmin ? '(admin only)' : ''}</option>\n          </select>\n        </div>\n        {isEditing && (\n          <div className={styles.field}>\n            <label>Status</label>\n            <label className={styles.toggleLabel}>\n              <input type=\"checkbox\" checked={active} onChange={(e) => setActive(e.target.checked)} disabled={!canToggleActive} />\n              <span>Active</span>\n            </label>\n            {!canToggleActive && <span className={styles.hint}>{user?.id === currentUser?.id ? \"Can't disable yourself\" : \"Insufficient permissions\"}</span>}\n          </div>\n        )}\n      </div>\n      \n      {/* Site Assignments - Button Style */}\n      <div className={styles.field}>\n        <label>Site Assignments</label>\n        <div className={styles.optionButtons}>\n          {sites.map((site) => (\n            <button\n              key={site.id}\n              type=\"button\"\n              className={`${styles.optionButton} ${selectedSiteIds.includes(site.id) ? styles.selected : ''}`}\n              onClick={() => toggleSite(site.id)}\n            >\n              {site.name}\n            </button>\n          ))}\n          {sites.length === 0 && <span className={styles.noOptions}>No sites available</span>}\n        </div>\n        <span className={styles.hint}>Select which sites this user can access</span>\n      </div>\n      \n      {/* Skills - Button Style with Quick Add */}\n      <div className={styles.field}>\n        <label>Skills</label>\n        <div className={styles.optionButtons}>\n          {skills.map((skill) => (\n            <button\n              key={skill.id}\n              type=\"button\"\n              className={`${styles.optionButton} ${styles.skillOption} ${selectedSkillIds.includes(skill.id) ? styles.selected : ''}`}\n              onClick={() => toggleSkill(skill.id)}\n              style={{\n                '--skill-color': skill.color,\n              } as React.CSSProperties}\n            >\n              <span className={styles.skillColorDot} style={{ backgroundColor: skill.color }} />\n              {skill.name}\n            </button>\n          ))}\n          {isAddingNewSkill ? (\n            <div className={styles.newItemInput}>\n              <input\n                type=\"text\"\n                value={newSkillName}\n                onChange={(e) => setNewSkillName(e.target.value)}\n                placeholder=\"New skill name\"\n                autoFocus\n                disabled={isCreatingSkill}\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') {\n                    e.preventDefault();\n                    confirmNewSkill();\n                  } else if (e.key === 'Escape') {\n                    cancelNewSkill();\n                  }\n                }}\n              />\n              <button type=\"button\" className={styles.confirmBtn} onClick={confirmNewSkill} disabled={isCreatingSkill}>\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <polyline points=\"20 6 9 17 4 12\" />\n                </svg>\n              </button>\n              <button type=\"button\" className={styles.cancelBtn} onClick={cancelNewSkill} disabled={isCreatingSkill}>\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n                </svg>\n              </button>\n            </div>\n          ) : (\n            <button\n              type=\"button\"\n              className={`${styles.optionButton} ${styles.addNew}`}\n              onClick={() => setIsAddingNewSkill(true)}\n            >\n              + New skill\n            </button>\n          )}\n        </div>\n        <span className={styles.hint}>Click to toggle skills. Skills are shared across all users.</span>\n      </div>\n      \n      <div className={styles.formActions}>\n        {isEditing && canDelete && (\n          <Button type=\"button\" variant=\"danger\" onClick={handleDelete} disabled={isSubmitting}>Delete User</Button>\n        )}\n        <div className={styles.rightActions}>\n          <Button type=\"button\" variant=\"secondary\" onClick={onCancel} disabled={isSubmitting}>Cancel</Button>\n          <Button type=\"submit\" disabled={isSubmitting}>{isSubmitting ? 'Saving...' : (isEditing ? 'Save Changes' : 'Create User')}</Button>\n        </div>\n      </div>\n    </form>\n  );\n}\n","/**\n * SSOConfigModal\n * \n * Admin modal for configuring Microsoft Entra SSO settings.\n * Only admins can access this modal.\n */\n\nimport { useState, useEffect } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { apiGet, apiPut } from '@/api/client';\nimport styles from './SSOConfigModal.module.css';\n\ninterface SSOFullConfig {\n  enabled: boolean;\n  tenant_id: string;\n  client_id: string;\n  client_secret_masked?: string;\n  redirect_uri: string;\n  auto_create_users: boolean;\n  default_role: 'user' | 'superuser' | 'admin';\n}\n\nexport function SSOConfigModal() {\n  const activeModal = useUIStore((s) => s.activeModal);\n  const closeModal = useUIStore((s) => s.closeModal);\n  const currentUser = useAppStore((s) => s.currentUser);\n  \n  const isOpen = activeModal === 'ssoConfig';\n  const isAdmin = currentUser?.role === 'admin';\n  \n  // Form state\n  const [enabled, setEnabled] = useState(false);\n  const [tenantId, setTenantId] = useState('');\n  const [clientId, setClientId] = useState('');\n  const [clientSecret, setClientSecret] = useState('');\n  const [clientSecretPlaceholder, setClientSecretPlaceholder] = useState('');\n  const [redirectUri, setRedirectUri] = useState('');\n  const [autoCreateUsers, setAutoCreateUsers] = useState(false);\n  const [defaultRole, setDefaultRole] = useState<'user' | 'superuser' | 'admin'>('user');\n  \n  const [isLoading, setIsLoading] = useState(false);\n  const [isSaving, setIsSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n  \n  // Generate redirect URI hint\n  const redirectHint = typeof window !== 'undefined' \n    ? `${window.location.origin}/api/auth/sso/callback`\n    : '/api/auth/sso/callback';\n  \n  // Load config when modal opens\n  useEffect(() => {\n    if (isOpen && isAdmin) {\n      loadConfig();\n    }\n  }, [isOpen, isAdmin]);\n  \n  const loadConfig = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const config = await apiGet<SSOFullConfig>('/api/sso/config/full');\n      setEnabled(config.enabled);\n      setTenantId(config.tenant_id || '');\n      setClientId(config.client_id || '');\n      setClientSecretPlaceholder(config.client_secret_masked || 'Enter client secret');\n      setRedirectUri(config.redirect_uri || redirectHint);\n      setAutoCreateUsers(config.auto_create_users);\n      setDefaultRole(config.default_role || 'user');\n    } catch (err) {\n      console.error('Failed to load SSO config:', err);\n      setError(err instanceof Error ? err.message : 'Failed to load configuration');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  const handleSave = async () => {\n    setError(null);\n    setSuccess(null);\n    \n    // Validation\n    if (enabled) {\n      if (!tenantId.trim() || !clientId.trim() || !redirectUri.trim()) {\n        setError('Please fill in Tenant ID, Client ID, and Redirect URI to enable SSO');\n        return;\n      }\n    }\n    \n    setIsSaving(true);\n    \n    try {\n      const config: Record<string, unknown> = {\n        enabled,\n        tenant_id: tenantId.trim(),\n        client_id: clientId.trim(),\n        redirect_uri: redirectUri.trim(),\n        auto_create_users: autoCreateUsers,\n        default_role: defaultRole,\n      };\n      \n      // Only send client_secret if it was changed\n      if (clientSecret) {\n        config.client_secret = clientSecret;\n      }\n      \n      await apiPut('/api/sso/config', config);\n      setSuccess('SSO configuration saved successfully');\n      setClientSecret(''); // Clear the secret field\n      \n      // Reload to get updated masked secret\n      await loadConfig();\n    } catch (err) {\n      console.error('Failed to save SSO config:', err);\n      setError(err instanceof Error ? err.message : 'Failed to save configuration');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  \n  // Non-admin users can't access this modal\n  if (!isAdmin) {\n    return null;\n  }\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={closeModal}\n      title=\"SSO Configuration\"\n      size=\"md\"\n    >\n      <div className={styles.container}>\n        {isLoading ? (\n          <div className={styles.loading}>Loading configuration...</div>\n        ) : (\n          <>\n            {error && <div className={styles.error}>{error}</div>}\n            {success && <div className={styles.success}>{success}</div>}\n            \n            {/* Enable SSO Toggle */}\n            <div className={styles.toggleSection}>\n              <label className={styles.toggle}>\n                <input\n                  type=\"checkbox\"\n                  checked={enabled}\n                  onChange={(e) => setEnabled(e.target.checked)}\n                />\n                <span className={styles.toggleSwitch}></span>\n                <span className={styles.toggleLabel}>Enable SSO</span>\n              </label>\n              <p className={styles.hint}>\n                When enabled, users can sign in using Microsoft Entra (Azure AD).\n              </p>\n            </div>\n            \n            {/* Microsoft Entra Settings */}\n            <div className={styles.section}>\n              <h4>Microsoft Entra Settings</h4>\n              \n              <div className={styles.field}>\n                <label htmlFor=\"tenantId\">Tenant ID *</label>\n                <input\n                  type=\"text\"\n                  id=\"tenantId\"\n                  value={tenantId}\n                  onChange={(e) => setTenantId(e.target.value)}\n                  placeholder=\"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\"\n                  disabled={!enabled}\n                />\n                <span className={styles.hint}>\n                  Found in Azure Portal  Microsoft Entra ID  Overview\n                </span>\n              </div>\n              \n              <div className={styles.field}>\n                <label htmlFor=\"clientId\">Client ID (Application ID) *</label>\n                <input\n                  type=\"text\"\n                  id=\"clientId\"\n                  value={clientId}\n                  onChange={(e) => setClientId(e.target.value)}\n                  placeholder=\"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\"\n                  disabled={!enabled}\n                />\n                <span className={styles.hint}>\n                  Found in App Registration  Overview  Application (client) ID\n                </span>\n              </div>\n              \n              <div className={styles.field}>\n                <label htmlFor=\"clientSecret\">Client Secret</label>\n                <input\n                  type=\"password\"\n                  id=\"clientSecret\"\n                  value={clientSecret}\n                  onChange={(e) => setClientSecret(e.target.value)}\n                  placeholder={clientSecretPlaceholder || 'Enter client secret'}\n                  disabled={!enabled}\n                />\n                <span className={styles.hint}>\n                  Leave blank to keep existing secret. Create in App Registration  Certificates & secrets\n                </span>\n              </div>\n              \n              <div className={styles.field}>\n                <label htmlFor=\"redirectUri\">Redirect URI *</label>\n                <input\n                  type=\"text\"\n                  id=\"redirectUri\"\n                  value={redirectUri}\n                  onChange={(e) => setRedirectUri(e.target.value)}\n                  placeholder={redirectHint}\n                  disabled={!enabled}\n                />\n                <span className={styles.hint}>\n                  Must be registered in App Registration  Authentication  Redirect URIs\n                </span>\n              </div>\n            </div>\n            \n            {/* User Management Settings */}\n            <div className={styles.section}>\n              <h4>User Management</h4>\n              \n              <label className={styles.checkbox}>\n                <input\n                  type=\"checkbox\"\n                  checked={autoCreateUsers}\n                  onChange={(e) => setAutoCreateUsers(e.target.checked)}\n                  disabled={!enabled}\n                />\n                <span>Auto-create users on first SSO login</span>\n              </label>\n              \n              <div className={styles.field}>\n                <label htmlFor=\"defaultRole\">Default role for new users</label>\n                <select\n                  id=\"defaultRole\"\n                  value={defaultRole}\n                  onChange={(e) => setDefaultRole(e.target.value as 'user' | 'superuser' | 'admin')}\n                  disabled={!enabled || !autoCreateUsers}\n                >\n                  <option value=\"user\">User</option>\n                  <option value=\"superuser\">SuperUser</option>\n                  <option value=\"admin\">Admin</option>\n                </select>\n              </div>\n            </div>\n            \n            {/* Actions */}\n            <div className={styles.actions}>\n              <Button variant=\"secondary\" onClick={closeModal}>\n                Cancel\n              </Button>\n              <Button onClick={handleSave} disabled={isSaving}>\n                {isSaving ? 'Saving...' : 'Save Configuration'}\n              </Button>\n            </div>\n          </>\n        )}\n      </div>\n    </Modal>\n  );\n}\n","/**\n * EquipmentTypesManagementModal\n * \n * Modal for managing equipment types (CRUD operations).\n * Types are derived from equipment - this modal allows renaming and viewing usage.\n * Only accessible to SuperUsers and Admins.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { apiGet, apiPut } from '@/api/client';\nimport type { Equipment } from '@/types';\nimport styles from './EquipmentTypesManagementModal.module.css';\n\ninterface EquipmentTypesManagementModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onTypesChanged?: () => void;\n}\n\ninterface TypeInfo {\n  name: string;\n  count: number;\n}\n\nexport function EquipmentTypesManagementModal({ \n  isOpen, \n  onClose,\n  onTypesChanged \n}: EquipmentTypesManagementModalProps) {\n  // State\n  const [types, setTypes] = useState<TypeInfo[]>([]);\n  const [allEquipment, setAllEquipment] = useState<Equipment[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [editingType, setEditingType] = useState<string | null>(null);\n  const [isCreating, setIsCreating] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Load types and equipment\n  const loadData = useCallback(async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      // Load all equipment to get types and counts\n      const equipment = await apiGet<Equipment[]>('/api/equipment/all');\n      setAllEquipment(equipment);\n      \n      // Calculate type counts\n      const typeCounts = new Map<string, number>();\n      equipment.forEach(eq => {\n        if (eq.type) {\n          typeCounts.set(eq.type, (typeCounts.get(eq.type) || 0) + 1);\n        }\n      });\n      \n      // Convert to array and sort\n      const typeInfos: TypeInfo[] = Array.from(typeCounts.entries())\n        .map(([name, count]) => ({ name, count }))\n        .sort((a, b) => a.name.localeCompare(b.name));\n      \n      setTypes(typeInfos);\n    } catch (err) {\n      console.error('Failed to load equipment types:', err);\n      setError('Failed to load equipment types');\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n  \n  useEffect(() => {\n    if (isOpen) {\n      loadData();\n    }\n  }, [isOpen, loadData]);\n  \n  // Handle edit\n  const handleEdit = (typeName: string) => {\n    setEditingType(typeName);\n    setIsCreating(false);\n  };\n  \n  // Handle create\n  const handleCreate = () => {\n    setEditingType(null);\n    setIsCreating(true);\n  };\n  \n  // Handle close form\n  const handleCloseForm = () => {\n    setEditingType(null);\n    setIsCreating(false);\n  };\n  \n  // Handle save\n  const handleSave = async () => {\n    await loadData();\n    onTypesChanged?.();\n    handleCloseForm();\n  };\n  \n  // Handle delete\n  const handleDelete = async (typeName: string) => {\n    const typeInfo = types.find(t => t.name === typeName);\n    if (!typeInfo) return;\n    \n    if (typeInfo.count > 0) {\n      setError(`Cannot delete \"${typeName}\": ${typeInfo.count} equipment item(s) still use this type. Change their type first.`);\n      return;\n    }\n    \n    // Type has no equipment - just remove from local list\n    // (It was derived from equipment, so if no equipment uses it, it's effectively deleted)\n    setTypes(prev => prev.filter(t => t.name !== typeName));\n  };\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      title=\"Manage Equipment Types\"\n      size=\"md\"\n    >\n      <div className={styles.container}>\n        {(editingType || isCreating) ? (\n          <TypeForm\n            typeName={editingType}\n            existingTypes={types.map(t => t.name)}\n            allEquipment={allEquipment}\n            onSave={handleSave}\n            onCancel={handleCloseForm}\n          />\n        ) : (\n          <>\n            {/* Toolbar */}\n            <div className={styles.toolbar}>\n              <span className={styles.count}>{types.length} type{types.length !== 1 ? 's' : ''}</span>\n              <Button onClick={handleCreate}>\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ marginRight: '6px' }}>\n                  <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n                  <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n                </svg>\n                Add Type\n              </Button>\n            </div>\n            \n            {error && (\n              <div className={styles.error}>{error}</div>\n            )}\n            \n            {/* Types list */}\n            <div className={styles.listWrapper}>\n              {isLoading ? (\n                <div className={styles.loading}>Loading types...</div>\n              ) : types.length === 0 ? (\n                <div className={styles.empty}>\n                  <p>No equipment types defined yet</p>\n                  <p className={styles.emptyHint}>Types are created when you add equipment</p>\n                </div>\n              ) : (\n                <div className={styles.list}>\n                  {types.map((typeInfo) => (\n                    <div key={typeInfo.name} className={styles.typeItem}>\n                      <div className={styles.typeInfo}>\n                        <span className={styles.typeName}>{typeInfo.name}</span>\n                        <span className={styles.typeCount}>\n                          {typeInfo.count} equipment item{typeInfo.count !== 1 ? 's' : ''}\n                        </span>\n                      </div>\n                      <div className={styles.typeActions}>\n                        <button \n                          className={styles.actionBtn}\n                          onClick={() => handleEdit(typeInfo.name)}\n                          title=\"Rename type\"\n                        >\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                            <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\" />\n                            <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\" />\n                          </svg>\n                        </button>\n                        <button \n                          className={`${styles.actionBtn} ${styles.deleteBtn}`}\n                          onClick={() => handleDelete(typeInfo.name)}\n                          title={typeInfo.count > 0 ? 'Cannot delete: type is in use' : 'Delete type'}\n                          disabled={typeInfo.count > 0}\n                        >\n                          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                            <polyline points=\"3 6 5 6 21 6\" />\n                            <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\n                          </svg>\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n            \n            <div className={styles.infoNote}>\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\" />\n                <line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\" />\n                <line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\" />\n              </svg>\n              <span>Equipment types are shared across all sites</span>\n            </div>\n          </>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\n// =============================================================================\n// TYPE FORM COMPONENT\n// =============================================================================\n\ninterface TypeFormProps {\n  typeName: string | null; // null = creating new\n  existingTypes: string[];\n  allEquipment: Equipment[];\n  onSave: () => void;\n  onCancel: () => void;\n}\n\nfunction TypeForm({ typeName, existingTypes, allEquipment, onSave, onCancel }: TypeFormProps) {\n  const isEditing = !!typeName;\n  \n  // Form state\n  const [name, setName] = useState(typeName || '');\n  \n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Equipment using this type (for editing)\n  const equipmentCount = isEditing\n    ? allEquipment.filter(eq => eq.type === typeName).length\n    : 0;\n  \n  // Handle form submit\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    \n    const trimmedName = name.trim();\n    \n    if (!trimmedName) {\n      setError('Type name is required');\n      return;\n    }\n    \n    // Check for duplicate (case-insensitive, excluding current type)\n    const isDuplicate = existingTypes.some(\n      t => t.toLowerCase() === trimmedName.toLowerCase() && t !== typeName\n    );\n    if (isDuplicate) {\n      setError('A type with this name already exists');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    \n    try {\n      if (isEditing && typeName) {\n        // Rename type - updates all equipment with this type\n        await apiPut(`/api/equipment-types/${encodeURIComponent(typeName)}?new_type=${encodeURIComponent(trimmedName)}`);\n      } else {\n        // Creating a new type - we don't actually create it in DB\n        // It will be created when equipment uses it\n        // For now, just close the form - the user will see it when they create equipment\n        // Actually, let's add it to local state via callback\n      }\n      onSave();\n    } catch (err) {\n      console.error('Failed to save type:', err);\n      let message = 'Failed to save type';\n      if (err instanceof Error) {\n        message = err.message;\n      }\n      setError(message);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  return (\n    <form onSubmit={handleSubmit} className={styles.form}>\n      <div className={styles.formHeader}>\n        <h3>{isEditing ? 'Rename Type' : 'Add Type'}</h3>\n        <button \n          type=\"button\" \n          className={styles.backBtn}\n          onClick={onCancel}\n        >\n           Back to list\n        </button>\n      </div>\n      \n      {error && (\n        <div className={styles.error}>{error}</div>\n      )}\n      \n      {/* Type Name */}\n      <div className={styles.field}>\n        <label htmlFor=\"typeName\">Name *</label>\n        <input\n          type=\"text\"\n          id=\"typeName\"\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          placeholder=\"e.g., Pilot Plant, Analytical Device\"\n          required\n          autoFocus\n        />\n      </div>\n      \n      {isEditing && equipmentCount > 0 && (\n        <div className={styles.renameWarning}>\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\" />\n            <line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\" />\n            <line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\" />\n          </svg>\n          <span>\n            Renaming will update {equipmentCount} equipment item{equipmentCount !== 1 ? 's' : ''}\n          </span>\n        </div>\n      )}\n      \n      {!isEditing && (\n        <div className={styles.createNote}>\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <circle cx=\"12\" cy=\"12\" r=\"10\" />\n            <line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\" />\n            <line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\" />\n          </svg>\n          <span>New types become available when creating equipment</span>\n        </div>\n      )}\n      \n      {/* Form Actions */}\n      <div className={styles.formActions}>\n        <Button\n          type=\"button\"\n          variant=\"secondary\"\n          onClick={onCancel}\n          disabled={isSubmitting}\n        >\n          Cancel\n        </Button>\n        <Button\n          type=\"submit\"\n          disabled={isSubmitting}\n        >\n          {isSubmitting ? 'Saving...' : (isEditing ? 'Rename Type' : 'Add Type')}\n        </Button>\n      </div>\n    </form>\n  );\n}\n","/**\n * EquipmentManagementModal\n * \n * Admin/SuperUser modal for managing equipment - list, create, edit, delete.\n * Equipment is site-specific. Equipment types are shared across all sites.\n */\n\nimport { useState, useEffect, useCallback, useMemo } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { apiGet, apiPost, apiPut, apiDelete } from '@/api/client';\nimport { EquipmentTypesManagementModal } from './EquipmentTypesManagementModal';\nimport type { Equipment, Site } from '@/types';\nimport styles from './EquipmentManagementModal.module.css';\n\nexport function EquipmentManagementModal() {\n  const activeModal = useUIStore((s) => s.activeModal);\n  const closeModal = useUIStore((s) => s.closeModal);\n  const sites = useAppStore((s) => s.sites);\n  const currentUser = useAppStore((s) => s.currentUser);\n  const currentSite = useAppStore((s) => s.currentSite);\n  const setEquipment = useAppStore((s) => s.setEquipment);\n  \n  const isOpen = activeModal === 'manageEquipment';\n  const canManage = currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n  \n  // State\n  const [equipment, setLocalEquipment] = useState<Equipment[]>([]);\n  const [selectedSiteId, setSelectedSiteId] = useState<number | 'all'>(currentSite?.id || 'all');\n  const [showInactive, setShowInactive] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [editingEquipment, setEditingEquipment] = useState<Equipment | null>(null);\n  const [isCreating, setIsCreating] = useState(false);\n  const [showTypesModal, setShowTypesModal] = useState(false);\n  \n  // Extract unique equipment types from existing equipment\n  const existingTypes = useMemo(() => {\n    const types = new Set<string>();\n    equipment.forEach(eq => {\n      if (eq.type) types.add(eq.type);\n    });\n    return Array.from(types).sort();\n  }, [equipment]);\n  \n  // Load equipment when modal opens\n  const loadEquipment = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      const data = await apiGet<Equipment[]>('/api/equipment/all');\n      setLocalEquipment(data);\n    } catch (err) {\n      console.error('Failed to load equipment:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n  \n  useEffect(() => {\n    if (isOpen) {\n      loadEquipment();\n      setSelectedSiteId(currentSite?.id || 'all');\n    }\n  }, [isOpen, loadEquipment, currentSite?.id]);\n  \n  // Filter equipment by site and active status\n  const filteredEquipment = equipment.filter(eq => {\n    if (selectedSiteId !== 'all' && eq.site_id !== selectedSiteId) return false;\n    if (!showInactive && !eq.active) return false;\n    return true;\n  });\n  \n  // Get site name\n  const getSiteName = (siteId: number) => {\n    return sites.find(s => s.id === siteId)?.name || 'Unknown';\n  };\n  \n  // Handle edit\n  const handleEdit = (eq: Equipment) => {\n    setEditingEquipment(eq);\n    setIsCreating(false);\n  };\n  \n  // Handle create\n  const handleCreate = () => {\n    setEditingEquipment(null);\n    setIsCreating(true);\n  };\n  \n  // Handle close form\n  const handleCloseForm = () => {\n    setEditingEquipment(null);\n    setIsCreating(false);\n  };\n  \n  // Handle save\n  const handleSave = async () => {\n    await loadEquipment();\n    // Also update global store\n    const allEquipment = await apiGet<Equipment[]>('/api/equipment/all');\n    setEquipment(allEquipment);\n    handleCloseForm();\n  };\n  \n  // Handle delete\n  const handleDelete = async () => {\n    await loadEquipment();\n    const allEquipment = await apiGet<Equipment[]>('/api/equipment/all');\n    setEquipment(allEquipment);\n    handleCloseForm();\n  };\n  \n  return (\n    <>\n      <Modal\n        isOpen={isOpen}\n        onClose={closeModal}\n        title=\"Equipment Management\"\n        size=\"lg\"\n      >\n        <div className={styles.container}>\n          {(editingEquipment || isCreating) ? (\n            <EquipmentForm\n              equipment={editingEquipment}\n              sites={sites}\n              existingTypes={existingTypes}\n              defaultSiteId={selectedSiteId !== 'all' ? selectedSiteId : (currentSite?.id || null)}\n              onSave={handleSave}\n              onDelete={handleDelete}\n              onCancel={handleCloseForm}\n              canDelete={currentUser?.role === 'admin' || currentUser?.role === 'superuser'}\n            />\n          ) : (\n          <>\n            {/* Toolbar */}\n            <div className={styles.toolbar}>\n              <div className={styles.filters}>\n                <div className={styles.filterGroup}>\n                  <label>Site</label>\n                  <select\n                    value={selectedSiteId}\n                    onChange={(e) => setSelectedSiteId(e.target.value === 'all' ? 'all' : parseInt(e.target.value))}\n                  >\n                    <option value=\"all\">All Sites</option>\n                    {sites.map(site => (\n                      <option key={site.id} value={site.id}>{site.name}</option>\n                    ))}\n                  </select>\n                </div>\n                \n                <label className={styles.checkbox}>\n                  <input\n                    type=\"checkbox\"\n                    checked={showInactive}\n                    onChange={(e) => setShowInactive(e.target.checked)}\n                  />\n                  <span>Show inactive</span>\n                </label>\n              </div>\n              \n              {canManage && (\n                <div className={styles.toolbarButtons}>\n                  <Button variant=\"secondary\" onClick={() => setShowTypesModal(true)}>\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ marginRight: '6px' }}>\n                      <circle cx=\"12\" cy=\"12\" r=\"3\" />\n                      <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\" />\n                    </svg>\n                    Manage Types\n                  </Button>\n                  <Button onClick={handleCreate}>\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ marginRight: '6px' }}>\n                      <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n                      <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n                    </svg>\n                    Add Equipment\n                  </Button>\n                </div>\n              )}\n            </div>\n            \n            {/* Equipment list */}\n            <div className={styles.tableWrapper}>\n              {isLoading ? (\n                <div className={styles.loading}>Loading equipment...</div>\n              ) : filteredEquipment.length === 0 ? (\n                <div className={styles.empty}>\n                  {equipment.length === 0 \n                    ? 'No equipment found' \n                    : 'No equipment matching filters'}\n                </div>\n              ) : (\n                <table className={styles.table}>\n                  <thead>\n                    <tr>\n                      <th>Name</th>\n                      <th>Type</th>\n                      <th>Site</th>\n                      <th style={{ width: 60 }}></th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {filteredEquipment.map((eq) => (\n                      <tr \n                        key={eq.id} \n                        className={!eq.active ? styles.inactive : ''}\n                      >\n                        <td>\n                          <div className={styles.nameCell}>\n                            <span className={styles.equipName}>{eq.name}</span>\n                            {!eq.active && (\n                              <span className={styles.inactiveBadge}>Inactive</span>\n                            )}\n                          </div>\n                        </td>\n                        <td>\n                          <span className={styles.typeBadge}>{eq.type}</span>\n                        </td>\n                        <td className={styles.siteCell}>{getSiteName(eq.site_id)}</td>\n                        <td>\n                          <button \n                            className={styles.editBtn}\n                            onClick={() => handleEdit(eq)}\n                            title=\"Edit equipment\"\n                          >\n                            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                              <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\" />\n                              <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\" />\n                            </svg>\n                          </button>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n    </Modal>\n    \n    {/* Equipment Types Management Modal */}\n    <EquipmentTypesManagementModal\n      isOpen={showTypesModal}\n      onClose={() => setShowTypesModal(false)}\n      onTypesChanged={loadEquipment}\n    />\n    </>\n  );\n}\n\n// =============================================================================\n// EQUIPMENT FORM COMPONENT\n// =============================================================================\n\ninterface EquipmentFormProps {\n  equipment: Equipment | null;\n  sites: Site[];\n  existingTypes: string[];\n  defaultSiteId: number | null;\n  onSave: () => void;\n  onDelete: () => void;\n  onCancel: () => void;\n  canDelete: boolean;\n}\n\nfunction EquipmentForm({ \n  equipment, \n  sites, \n  existingTypes,\n  defaultSiteId, \n  onSave, \n  onDelete, \n  onCancel,\n  canDelete \n}: EquipmentFormProps) {\n  const isEditing = !!equipment;\n  \n  // Form state\n  const [name, setName] = useState(equipment?.name || '');\n  const [type, setType] = useState(equipment?.type || '');\n  const [isAddingNewType, setIsAddingNewType] = useState(false);\n  const [newTypeName, setNewTypeName] = useState('');\n  const [siteId, setSiteId] = useState<number | null>(equipment?.site_id || defaultSiteId);\n  const [active, setActive] = useState(equipment?.active ?? true);\n  \n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Handle new type confirmation\n  const confirmNewType = () => {\n    if (newTypeName.trim()) {\n      setType(newTypeName.trim());\n      setIsAddingNewType(false);\n    }\n  };\n  \n  // Cancel new type\n  const cancelNewType = () => {\n    setIsAddingNewType(false);\n    setNewTypeName('');\n  };\n  \n  // Handle submit\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    \n    if (!name.trim()) {\n      setError('Equipment name is required');\n      return;\n    }\n    \n    if (!type.trim()) {\n      setError('Equipment type is required');\n      return;\n    }\n    \n    if (!siteId) {\n      setError('Please select a site');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    \n    try {\n      const data = {\n        name: name.trim(),\n        type: type.trim(),\n        site_id: siteId,\n        active,\n      };\n      \n      if (isEditing && equipment) {\n        await apiPut(`/api/equipment/${equipment.id}`, data);\n      } else {\n        await apiPost('/api/equipment', data);\n      }\n      \n      onSave();\n    } catch (err) {\n      console.error('Failed to save equipment:', err);\n      setError(err instanceof Error ? err.message : 'Failed to save equipment');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  // Handle delete\n  const handleDelete = async () => {\n    if (!equipment) return;\n    \n    const confirmed = window.confirm(\n      `Are you sure you want to delete \"${equipment.name}\"?\\n\\nThis will also remove all assignments for this equipment.`\n    );\n    \n    if (!confirmed) return;\n    \n    setIsSubmitting(true);\n    try {\n      await apiDelete(`/api/equipment/${equipment.id}`);\n      onDelete();\n    } catch (err) {\n      console.error('Failed to delete equipment:', err);\n      setError(err instanceof Error ? err.message : 'Failed to delete equipment');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  \n  return (\n    <form onSubmit={handleSubmit} className={styles.form}>\n      <div className={styles.formHeader}>\n        <h3>{isEditing ? 'Edit Equipment' : 'Add Equipment'}</h3>\n        <button \n          type=\"button\" \n          className={styles.backBtn}\n          onClick={onCancel}\n        >\n           Back to list\n        </button>\n      </div>\n      \n      {error && <div className={styles.error}>{error}</div>}\n      \n      <div className={styles.formFields}>\n        {/* Name */}\n        <div className={styles.field}>\n          <label htmlFor=\"equipName\">Name *</label>\n          <input\n            type=\"text\"\n            id=\"equipName\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            placeholder=\"e.g., Pilot Plant A, Mass Spec 1\"\n            required\n          />\n        </div>\n        \n        {/* Type */}\n        <div className={styles.field}>\n          <label>Type *</label>\n          {isAddingNewType ? (\n            <div className={styles.newTypeInput}>\n              <input\n                type=\"text\"\n                value={newTypeName}\n                onChange={(e) => setNewTypeName(e.target.value)}\n                placeholder=\"Enter new equipment type\"\n                autoFocus\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') {\n                    e.preventDefault();\n                    confirmNewType();\n                  } else if (e.key === 'Escape') {\n                    cancelNewType();\n                  }\n                }}\n              />\n              <button type=\"button\" className={styles.confirmBtn} onClick={confirmNewType}>\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <polyline points=\"20 6 9 17 4 12\" />\n                </svg>\n              </button>\n              <button type=\"button\" className={styles.cancelBtn} onClick={cancelNewType}>\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n                </svg>\n              </button>\n            </div>\n          ) : type ? (\n            // Show selected type with change button\n            <div className={styles.selectedTypeDisplay}>\n              <span className={styles.selectedTypeBadge}>{type}</span>\n              <button \n                type=\"button\" \n                className={styles.changeTypeBtn}\n                onClick={() => setType('')}\n              >\n                Change\n              </button>\n            </div>\n          ) : (\n            // Show type selection options\n            <div className={styles.typeOptions}>\n              {existingTypes.map(t => (\n                <button\n                  key={t}\n                  type=\"button\"\n                  className={styles.typeOption}\n                  onClick={() => setType(t)}\n                >\n                  {t}\n                </button>\n              ))}\n              <button\n                type=\"button\"\n                className={`${styles.typeOption} ${styles.addNew}`}\n                onClick={() => {\n                  setIsAddingNewType(true);\n                  setNewTypeName('');\n                }}\n              >\n                + New type\n              </button>\n            </div>\n          )}\n          <span className={styles.hint}>\n            Equipment types are shared across all sites\n          </span>\n        </div>\n        \n        {/* Site */}\n        <div className={styles.field}>\n          <label>Site *</label>\n          <div className={styles.siteOptions}>\n            {sites.map(site => (\n              <label \n                key={site.id} \n                className={`${styles.siteOption} ${siteId === site.id ? styles.selected : ''}`}\n              >\n                <input\n                  type=\"radio\"\n                  name=\"equipSite\"\n                  value={site.id}\n                  checked={siteId === site.id}\n                  onChange={() => setSiteId(site.id)}\n                  required\n                />\n                <span className={styles.siteOptionLabel}>{site.name}</span>\n              </label>\n            ))}\n          </div>\n        </div>\n        \n        {/* Active Status (only for editing) */}\n        {isEditing && (\n          <div className={styles.field}>\n            <label>Status</label>\n            <label className={styles.toggleLabel}>\n              <input\n                type=\"checkbox\"\n                checked={active}\n                onChange={(e) => setActive(e.target.checked)}\n              />\n              <span>Active</span>\n            </label>\n            <span className={styles.hint}>\n              Inactive equipment won't appear in booking lists\n            </span>\n          </div>\n        )}\n      </div>\n      \n      {/* Form Actions */}\n      <div className={styles.formActions}>\n        {isEditing && canDelete && (\n          <Button\n            type=\"button\"\n            variant=\"danger\"\n            onClick={handleDelete}\n            disabled={isSubmitting}\n          >\n            Delete Equipment\n          </Button>\n        )}\n        \n        <div className={styles.rightActions}>\n          <Button\n            type=\"button\"\n            variant=\"secondary\"\n            onClick={onCancel}\n            disabled={isSubmitting}\n          >\n            Cancel\n          </Button>\n          <Button\n            type=\"submit\"\n            disabled={isSubmitting}\n          >\n            {isSubmitting ? 'Saving...' : (isEditing ? 'Save Changes' : 'Create Equipment')}\n          </Button>\n        </div>\n      </div>\n    </form>\n  );\n}\n","/**\n * PredefinedPhasesModal\n * \n * Admin/SuperUser modal for managing predefined phase templates.\n * Phases can be reordered, renamed, activated/deactivated, and deleted.\n */\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { apiGet, apiPost, apiPut, apiDelete } from '@/api/client';\nimport type { PredefinedPhase } from '@/types';\nimport styles from './PredefinedPhasesModal.module.css';\n\nexport function PredefinedPhasesModal() {\n  const activeModal = useUIStore((s) => s.activeModal);\n  const closeModal = useUIStore((s) => s.closeModal);\n  const currentUser = useAppStore((s) => s.currentUser);\n  \n  const isOpen = activeModal === 'predefinedPhases';\n  const canManage = currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n  \n  // State\n  const [phases, setPhases] = useState<PredefinedPhase[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [newPhaseName, setNewPhaseName] = useState('');\n  const [isAdding, setIsAdding] = useState(false);\n  const [editingId, setEditingId] = useState<number | null>(null);\n  const [editingName, setEditingName] = useState('');\n  \n  // Drag state\n  const [draggedId, setDraggedId] = useState<number | null>(null);\n  const [dragOverId, setDragOverId] = useState<number | null>(null);\n  const [dragOverPosition, setDragOverPosition] = useState<'before' | 'after' | null>(null);\n  \n  // Load phases\n  const loadPhases = useCallback(async () => {\n    setIsLoading(true);\n    try {\n      const data = await apiGet<PredefinedPhase[]>('/api/predefined-phases/all');\n      setPhases(data);\n    } catch (err) {\n      console.error('Failed to load predefined phases:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n  \n  useEffect(() => {\n    if (isOpen) {\n      loadPhases();\n    }\n  }, [isOpen, loadPhases]);\n  \n  // Add new phase\n  const handleAdd = async () => {\n    if (!newPhaseName.trim()) return;\n    \n    setIsAdding(true);\n    try {\n      await apiPost('/api/predefined-phases', { name: newPhaseName.trim() });\n      setNewPhaseName('');\n      await loadPhases();\n    } catch (err) {\n      console.error('Failed to add phase:', err);\n      alert(err instanceof Error ? err.message : 'Failed to add phase');\n    } finally {\n      setIsAdding(false);\n    }\n  };\n  \n  // Update phase name\n  const handleUpdateName = async (id: number) => {\n    if (!editingName.trim()) {\n      setEditingId(null);\n      return;\n    }\n    \n    try {\n      await apiPut(`/api/predefined-phases/${id}`, { name: editingName.trim() });\n      setEditingId(null);\n      await loadPhases();\n    } catch (err) {\n      console.error('Failed to update phase:', err);\n      alert(err instanceof Error ? err.message : 'Failed to update phase');\n    }\n  };\n  \n  // Toggle active status\n  const handleToggleActive = async (phase: PredefinedPhase) => {\n    try {\n      await apiPut(`/api/predefined-phases/${phase.id}`, { \n        is_active: !phase.is_active \n      });\n      await loadPhases();\n    } catch (err) {\n      console.error('Failed to toggle phase:', err);\n      alert(err instanceof Error ? err.message : 'Failed to update phase');\n    }\n  };\n  \n  // Delete phase\n  const handleDelete = async (phase: PredefinedPhase) => {\n    const confirmed = window.confirm(\n      `Are you sure you want to delete \"${phase.name}\"?`\n    );\n    if (!confirmed) return;\n    \n    try {\n      await apiDelete(`/api/predefined-phases/${phase.id}`);\n      await loadPhases();\n    } catch (err) {\n      console.error('Failed to delete phase:', err);\n      alert(err instanceof Error ? err.message : 'Failed to delete phase');\n    }\n  };\n  \n  // Start editing\n  const startEditing = (phase: PredefinedPhase) => {\n    setEditingId(phase.id);\n    setEditingName(phase.name);\n  };\n  \n  // Drag handlers\n  const handleDragStart = (e: React.DragEvent, id: number) => {\n    setDraggedId(id);\n    e.dataTransfer.effectAllowed = 'move';\n  };\n  \n  const handleDragOver = (e: React.DragEvent, id: number) => {\n    e.preventDefault();\n    if (draggedId === id) return;\n    \n    const rect = (e.currentTarget as HTMLElement).getBoundingClientRect();\n    const midY = rect.top + rect.height / 2;\n    const position = e.clientY < midY ? 'before' : 'after';\n    \n    setDragOverId(id);\n    setDragOverPosition(position);\n  };\n  \n  const handleDragLeave = () => {\n    setDragOverId(null);\n    setDragOverPosition(null);\n  };\n  \n  const handleDrop = async (e: React.DragEvent) => {\n    e.preventDefault();\n    \n    if (!draggedId || !dragOverId || draggedId === dragOverId) {\n      setDraggedId(null);\n      setDragOverId(null);\n      setDragOverPosition(null);\n      return;\n    }\n    \n    // Calculate new order\n    const currentOrder = phases.map(p => p.id);\n    const draggedIndex = currentOrder.indexOf(draggedId);\n    let dropIndex = currentOrder.indexOf(dragOverId);\n    \n    // Remove dragged item\n    currentOrder.splice(draggedIndex, 1);\n    \n    // Recalculate drop index after removal\n    dropIndex = currentOrder.indexOf(dragOverId);\n    if (dragOverPosition === 'after') {\n      dropIndex += 1;\n    }\n    \n    // Insert at new position\n    currentOrder.splice(dropIndex, 0, draggedId);\n    \n    // Reset drag state\n    setDraggedId(null);\n    setDragOverId(null);\n    setDragOverPosition(null);\n    \n    // Save new order\n    try {\n      await apiPut('/api/predefined-phases/reorder', { phase_order: currentOrder });\n      await loadPhases();\n    } catch (err) {\n      console.error('Failed to reorder phases:', err);\n      await loadPhases(); // Reload to reset\n    }\n  };\n  \n  const handleDragEnd = () => {\n    setDraggedId(null);\n    setDragOverId(null);\n    setDragOverPosition(null);\n  };\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={closeModal}\n      title=\"Predefined Phases\"\n      size=\"md\"\n    >\n      <div className={styles.container}>\n        <p className={styles.description}>\n          Predefined phases appear as quick-add options when creating new projects.\n          Drag to reorder. Inactive phases won't appear in the list.\n        </p>\n        \n        {/* Phase List */}\n        <div className={styles.phaseList}>\n          {isLoading ? (\n            <div className={styles.loading}>Loading phases...</div>\n          ) : phases.length === 0 ? (\n            <div className={styles.empty}>No predefined phases. Add one below.</div>\n          ) : (\n            phases.map((phase) => (\n              <div\n                key={phase.id}\n                className={`\n                  ${styles.phaseItem} \n                  ${!phase.is_active ? styles.inactive : ''}\n                  ${draggedId === phase.id ? styles.dragging : ''}\n                  ${dragOverId === phase.id && dragOverPosition === 'before' ? styles.dropBefore : ''}\n                  ${dragOverId === phase.id && dragOverPosition === 'after' ? styles.dropAfter : ''}\n                `}\n                draggable={canManage}\n                onDragStart={(e) => handleDragStart(e, phase.id)}\n                onDragOver={(e) => handleDragOver(e, phase.id)}\n                onDragLeave={handleDragLeave}\n                onDrop={handleDrop}\n                onDragEnd={handleDragEnd}\n              >\n                {/* Drag Handle */}\n                {canManage && (\n                  <div className={styles.dragHandle}>\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                      <line x1=\"8\" y1=\"6\" x2=\"16\" y2=\"6\" />\n                      <line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\" />\n                      <line x1=\"8\" y1=\"18\" x2=\"16\" y2=\"18\" />\n                    </svg>\n                  </div>\n                )}\n                \n                {/* Phase Name */}\n                <div className={styles.phaseName}>\n                  {editingId === phase.id ? (\n                    <input\n                      type=\"text\"\n                      value={editingName}\n                      onChange={(e) => setEditingName(e.target.value)}\n                      onBlur={() => handleUpdateName(phase.id)}\n                      onKeyDown={(e) => {\n                        if (e.key === 'Enter') handleUpdateName(phase.id);\n                        if (e.key === 'Escape') setEditingId(null);\n                      }}\n                      autoFocus\n                    />\n                  ) : (\n                    <span \n                      onClick={() => canManage && startEditing(phase)}\n                      className={canManage ? styles.editable : ''}\n                    >\n                      {phase.name}\n                    </span>\n                  )}\n                </div>\n                \n                {/* Actions */}\n                {canManage && (\n                  <div className={styles.phaseActions}>\n                    <button\n                      className={`${styles.actionBtn} ${phase.is_active ? styles.active : ''}`}\n                      onClick={() => handleToggleActive(phase)}\n                      title={phase.is_active ? 'Deactivate' : 'Activate'}\n                    >\n                      {phase.is_active ? (\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                          <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\" />\n                          <polyline points=\"22 4 12 14.01 9 11.01\" />\n                        </svg>\n                      ) : (\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                          <circle cx=\"12\" cy=\"12\" r=\"10\" />\n                        </svg>\n                      )}\n                    </button>\n                    <button\n                      className={`${styles.actionBtn} ${styles.delete}`}\n                      onClick={() => handleDelete(phase)}\n                      title=\"Delete\"\n                    >\n                      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <polyline points=\"3 6 5 6 21 6\" />\n                        <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\n                      </svg>\n                    </button>\n                  </div>\n                )}\n              </div>\n            ))\n          )}\n        </div>\n        \n        {/* Add New Phase */}\n        {canManage && (\n          <div className={styles.addSection}>\n            <input\n              type=\"text\"\n              value={newPhaseName}\n              onChange={(e) => setNewPhaseName(e.target.value)}\n              placeholder=\"New phase name...\"\n              onKeyDown={(e) => {\n                if (e.key === 'Enter') handleAdd();\n              }}\n            />\n            <Button onClick={handleAdd} disabled={isAdding || !newPhaseName.trim()}>\n              {isAdding ? 'Adding...' : 'Add Phase'}\n            </Button>\n          </div>\n        )}\n        \n        {/* Close Button */}\n        <div className={styles.footer}>\n          <Button variant=\"secondary\" onClick={closeModal}>\n            Close\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","/**\n * ImportProjectModal\n * \n * Modal for importing projects from MPP (Microsoft Project) or CSV files.\n * Uses backend endpoint to parse and create project with full hierarchy.\n */\n\nimport { useState, useRef } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { loadAllProjects } from '@/api/endpoints/projects';\nimport styles from './ImportProjectModal.module.css';\n\ninterface ImportResult {\n  success: boolean;\n  project_id?: number;\n  project_name?: string;\n  phases_created?: number;\n  subphases_created?: number;\n  error?: string;\n  java_error?: boolean;\n  setup_instructions?: string;\n}\n\ninterface ImportProgress {\n  percent: number;\n  message: string;\n}\n\nexport function ImportProjectModal() {\n  const activeModal = useUIStore((s) => s.activeModal);\n  const closeModal = useUIStore((s) => s.closeModal);\n  const setProjects = useAppStore((s) => s.setProjects);\n  const currentSite = useAppStore((s) => s.currentSite);\n  \n  const isOpen = activeModal === 'importProject';\n  \n  // State\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [isImporting, setIsImporting] = useState(false);\n  const [progress, setProgress] = useState<ImportProgress | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [result, setResult] = useState<ImportResult | null>(null);\n  \n  const fileInputRef = useRef<HTMLInputElement>(null);\n  \n  // Handle file selection\n  const handleFileSelect = (file: File) => {\n    const fileName = file.name.toLowerCase();\n    if (!fileName.endsWith('.mpp') && !fileName.endsWith('.csv') && \n        !fileName.endsWith('.mpt') && !fileName.endsWith('.mpx') && \n        !fileName.endsWith('.xml')) {\n      setError('Please select an MPP, CSV, or XML file');\n      return;\n    }\n    setSelectedFile(file);\n    setError(null);\n    setResult(null);\n  };\n  \n  // Handle drag events\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(true);\n  };\n  \n  const handleDragLeave = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n  };\n  \n  const handleDrop = (e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragging(false);\n    \n    const file = e.dataTransfer.files[0];\n    if (file) {\n      handleFileSelect(file);\n    }\n  };\n  \n  // Handle file input change\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      handleFileSelect(file);\n    }\n  };\n  \n  // Handle import\n  const handleImport = async () => {\n    if (!selectedFile) return;\n    \n    setIsImporting(true);\n    setError(null);\n    setResult(null);\n    \n    try {\n      setProgress({ percent: 10, message: 'Uploading file...' });\n      \n      // Create form data\n      const formData = new FormData();\n      formData.append('file', selectedFile);\n      if (currentSite?.id) {\n        formData.append('site_id', currentSite.id.toString());\n      }\n      \n      setProgress({ percent: 30, message: 'Parsing and creating project...' });\n      \n      // Build API URL - handle dev mode (port 3333 -> 8485)\n      let apiUrl = '/api/import/project';\n      if (window.location.port === '3333') {\n        apiUrl = `${window.location.protocol}//${window.location.hostname}:8485/api/import/project`;\n      }\n      \n      // Check for tenant prefix\n      const tenantMatch = window.location.pathname.match(/^(\\/t\\/[a-z0-9][a-z0-9-]*)/);\n      if (tenantMatch) {\n        apiUrl = apiUrl.replace('/api/', `${tenantMatch[1]}/api/`);\n      }\n      \n      console.log('Import URL:', apiUrl);\n      \n      // Send to backend - it handles everything\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        body: formData,\n        credentials: 'include',\n      });\n      \n      // Handle empty or non-JSON responses\n      const responseText = await response.text();\n      let data: ImportResult;\n      \n      try {\n        data = responseText ? JSON.parse(responseText) : { success: false, error: 'Empty response from server' };\n      } catch {\n        console.error('Server response:', responseText);\n        throw new Error(`Server error: ${response.status} ${response.statusText}. Check server logs.`);\n      }\n      \n      if (!response.ok || !data.success) {\n        // Check if it's a Java/JVM error or MPXJ package error\n        const errorMsg = data.error || '';\n        const isJavaError = data.java_error || \n          errorMsg.includes('JVM') || \n          errorMsg.includes('Java') || \n          errorMsg.includes('libjvm') ||\n          errorMsg.includes('package') && errorMsg.includes('not found');\n          \n        if (isJavaError) {\n          // Store the full error with setup instructions\n          setError(data.error || 'Java/JVM not found');\n          setResult({\n            success: false,\n            java_error: true,\n            setup_instructions: data.setup_instructions || `\nMPXJ Setup Required\n===================\n\nMPP file import requires the mpxj Python package.\n\nInstall with:\n  pip install mpxj\n\nThis package includes the MPXJ Java library needed to parse\nMicrosoft Project files.\n\nNote: Java must also be installed:\n  sudo apt install default-jre-headless  (Ubuntu/WSL)\n  brew install openjdk                    (macOS)\n`,\n            error: data.error\n          });\n          return;\n        }\n        throw new Error(data.error || `Import failed: ${response.status}`);\n      }\n      \n      setProgress({ percent: 90, message: 'Refreshing project list...' });\n      \n      // Reload projects\n      const updatedProjects = await loadAllProjects();\n      setProjects(updatedProjects);\n      \n      setProgress({ percent: 100, message: 'Import complete!' });\n      setResult(data);\n      \n    } catch (err) {\n      console.error('Import error:', err);\n      setError(err instanceof Error ? err.message : 'Failed to import project');\n      setProgress(null);\n    } finally {\n      setIsImporting(false);\n    }\n  };\n  \n  // Reset state when closing\n  const handleClose = () => {\n    setSelectedFile(null);\n    setProgress(null);\n    setError(null);\n    setResult(null);\n    setIsImporting(false);\n    closeModal();\n  };\n  \n  // Clear selection\n  const handleClear = () => {\n    setSelectedFile(null);\n    setError(null);\n    setResult(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n  \n  // Get file icon based on type\n  const getFileIcon = (filename: string) => {\n    const ext = filename.toLowerCase().split('.').pop();\n    if (ext === 'csv') {\n      return (\n        <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n          <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" />\n          <polyline points=\"14 2 14 8 20 8\" />\n          <line x1=\"8\" y1=\"13\" x2=\"16\" y2=\"13\" />\n          <line x1=\"8\" y1=\"17\" x2=\"16\" y2=\"17\" />\n          <line x1=\"8\" y1=\"9\" x2=\"10\" y2=\"9\" />\n        </svg>\n      );\n    }\n    // MPP/MPT/MPX/XML\n    return (\n      <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n        <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" />\n        <polyline points=\"14 2 14 8 20 8\" />\n        <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\" />\n        <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\" />\n        <polyline points=\"10 9 9 9 8 9\" />\n      </svg>\n    );\n  };\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={handleClose}\n      title=\"Import Project\"\n      size=\"md\"\n    >\n      <div className={styles.container}>\n        {/* File Drop Zone */}\n        {!isImporting && !result && (\n          <>\n            <div\n              className={`${styles.dropZone} ${isDragging ? styles.dragging : ''} ${selectedFile ? styles.hasFile : ''}`}\n              onDragOver={handleDragOver}\n              onDragLeave={handleDragLeave}\n              onDrop={handleDrop}\n              onClick={() => fileInputRef.current?.click()}\n            >\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\".mpp,.mpt,.mpx,.xml,.csv\"\n                onChange={handleInputChange}\n                className={styles.fileInput}\n              />\n              \n              {selectedFile ? (\n                <div className={styles.selectedFile}>\n                  <div className={styles.fileIcon}>\n                    {getFileIcon(selectedFile.name)}\n                  </div>\n                  <div className={styles.fileName}>{selectedFile.name}</div>\n                  <div className={styles.fileSize}>\n                    {(selectedFile.size / 1024).toFixed(1)} KB\n                  </div>\n                </div>\n              ) : (\n                <div className={styles.dropContent}>\n                  <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n                    <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n                    <polyline points=\"17 8 12 3 7 8\" />\n                    <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\" />\n                  </svg>\n                  <div className={styles.dropText}>\n                    Drop file here or click to browse\n                  </div>\n                  <div className={styles.dropHint}>\n                    Supports MPP, MPT, MPX, XML, and CSV files\n                  </div>\n                </div>\n              )}\n            </div>\n            \n            {selectedFile && (\n              <button className={styles.clearBtn} onClick={handleClear}>\n                Choose different file\n              </button>\n            )}\n          </>\n        )}\n        \n        {/* Progress */}\n        {isImporting && progress && (\n          <div className={styles.progressSection}>\n            <div className={styles.progressBar}>\n              <div \n                className={styles.progressFill}\n                style={{ width: `${progress.percent}%` }}\n              />\n            </div>\n            <div className={styles.progressMessage}>{progress.message}</div>\n          </div>\n        )}\n        \n        {/* Error */}\n        {error && !result?.java_error && (\n          <div className={styles.error}>{error}</div>\n        )}\n        \n        {/* Java Error with Instructions */}\n        {result?.java_error && (\n          <div className={styles.javaError}>\n            <div className={styles.javaErrorHeader}>\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <circle cx=\"12\" cy=\"12\" r=\"10\" />\n                <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\" />\n                <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\" />\n              </svg>\n              <span>Java Required for MPP Import</span>\n            </div>\n            <div className={styles.javaErrorMessage}>\n              {result.error || 'Java/JVM not found. MPP import requires Java to be installed.'}\n            </div>\n            <div className={styles.javaErrorTip}>\n              <strong>Tip:</strong> CSV files don't require Java and can be imported without additional setup.\n            </div>\n            {result.setup_instructions && (\n              <details className={styles.setupInstructions}>\n                <summary>Setup Instructions</summary>\n                <pre>{result.setup_instructions}</pre>\n              </details>\n            )}\n          </div>\n        )}\n        \n        {/* Success */}\n        {result && result.success && !result.java_error && (\n          <div className={styles.success}>\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\" />\n              <polyline points=\"22 4 12 14.01 9 11.01\" />\n            </svg>\n            <div className={styles.successContent}>\n              <div className={styles.successTitle}>Import Complete!</div>\n              <div className={styles.successDetails}>\n                <strong>{result.project_name}</strong>\n                <span>\n                  {result.phases_created} phase{result.phases_created !== 1 ? 's' : ''}\n                  {result.subphases_created ? `, ${result.subphases_created} subphase${result.subphases_created !== 1 ? 's' : ''}` : ''}\n                </span>\n              </div>\n            </div>\n          </div>\n        )}\n        \n        {/* Actions */}\n        <div className={styles.actions}>\n          <Button variant=\"secondary\" onClick={handleClose}>\n            {result && result.success ? 'Close' : 'Cancel'}\n          </Button>\n          {(!result || result.java_error) && (\n            <Button \n              onClick={handleImport} \n              disabled={!selectedFile || isImporting}\n            >\n              {isImporting ? 'Importing...' : 'Import Project'}\n            </Button>\n          )}\n        </div>\n      </div>\n    </Modal>\n  );\n}\n\n","/**\n * SettingsModal\n * \n * Modal for configuring instance-level settings like title, \n * default views, custom logos, and other application preferences.\n */\n\nimport { useState, useEffect, useCallback, useMemo, useRef } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { getSetting, updateSetting } from '@/api/endpoints/settings';\nimport { \n  getThemeFamily, \n  setThemeFamily, \n  THEME_FAMILIES,\n  type ThemeFamily \n} from '@/utils/storage';\nimport styles from './SettingsModal.module.css';\n\ninterface SettingsData {\n  instance_title: string;\n  default_view: string;\n  week_start: string;\n  show_weekends: string;\n  auto_expand_projects: string;\n  header_logo_dark: string;\n  header_logo_light: string;\n}\n\nconst DEFAULT_SETTINGS: SettingsData = {\n  instance_title: '',\n  default_view: 'month',\n  week_start: 'monday',\n  show_weekends: 'true',\n  auto_expand_projects: 'false',\n  header_logo_dark: '',\n  header_logo_light: '',\n};\n\nconst VIEW_OPTIONS = [\n  { value: 'week', label: 'Week' },\n  { value: 'month', label: 'Month' },\n  { value: 'quarter', label: 'Quarter' },\n  { value: 'year', label: 'Year' },\n];\n\nconst WEEK_START_OPTIONS = [\n  { value: 'monday', label: 'Monday' },\n  { value: 'sunday', label: 'Sunday' },\n];\n\nexport function SettingsModal() {\n  const activeModal = useUIStore((s) => s.activeModal);\n  const closeModal = useUIStore((s) => s.closeModal);\n  const instanceSettings = useAppStore((s) => s.instanceSettings);\n  const setInstanceSettings = useAppStore((s) => s.setInstanceSettings);\n  \n  const isOpen = activeModal === 'settings';\n  \n  // State\n  const [settings, setSettings] = useState<SettingsData>(DEFAULT_SETTINGS);\n  const [originalSettings, setOriginalSettings] = useState<SettingsData>(DEFAULT_SETTINGS);\n  const [themeFamily, setThemeFamilyState] = useState<ThemeFamily>(() => getThemeFamily());\n  const [isLoading, setIsLoading] = useState(true);\n  const [isSaving, setIsSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n  \n  // Load settings when modal opens\n  useEffect(() => {\n    if (isOpen) {\n      loadSettings();\n    }\n  }, [isOpen]);\n  \n  const loadSettings = async () => {\n    setIsLoading(true);\n    setError(null);\n    \n    try {\n      // Load each setting\n      const loaded: SettingsData = { ...DEFAULT_SETTINGS };\n      \n      for (const key of Object.keys(DEFAULT_SETTINGS) as (keyof SettingsData)[]) {\n        try {\n          const response = await getSetting(key);\n          if (response.value !== null) {\n            loaded[key] = response.value;\n          }\n        } catch {\n          // Use default if setting doesn't exist\n        }\n      }\n      \n      setSettings(loaded);\n      setOriginalSettings(loaded);\n    } catch (err) {\n      setError('Failed to load settings');\n      console.error('Load settings error:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n  // Memoize hasChanges to prevent unnecessary re-renders\n  const hasChanges = useMemo(() => {\n    return JSON.stringify(settings) !== JSON.stringify(originalSettings);\n  }, [settings, originalSettings]);\n  \n  const handleSave = async () => {\n    setIsSaving(true);\n    setError(null);\n    setSuccess(null);\n    \n    try {\n      // Save changed settings\n      for (const key of Object.keys(settings) as (keyof SettingsData)[]) {\n        if (settings[key] !== originalSettings[key]) {\n          await updateSetting(key, settings[key]);\n        }\n      }\n      \n      // Update instance settings in app state\n      const newInstanceSettings = {\n        ...instanceSettings,\n        instance_title: settings.instance_title,\n      };\n      setInstanceSettings(newInstanceSettings);\n      \n      // Update browser tab title\n      const title = settings.instance_title || 'Milestone';\n      document.title = title;\n      \n      setOriginalSettings(settings);\n      setSuccess('Settings saved successfully');\n    } catch (err) {\n      setError('Failed to save settings');\n      console.error('Save settings error:', err);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n  \n  const handleReset = useCallback(() => {\n    setSettings(originalSettings);\n    setSuccess(null);\n    setError(null);\n  }, [originalSettings]);\n  \n  const handleClose = useCallback(() => {\n    if (hasChanges) {\n      if (!confirm('You have unsaved changes. Are you sure you want to close?')) {\n        return;\n      }\n    }\n    closeModal();\n  }, [hasChanges, closeModal]);\n  \n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={handleClose}\n      title=\"Settings\"\n      size=\"md\"\n    >\n      <div className={styles.container}>\n        {isLoading ? (\n          <div className={styles.loading}>Loading settings...</div>\n        ) : (\n          <>\n            {/* Instance Settings Section */}\n            <section className={styles.section}>\n              <h3 className={styles.sectionTitle}>Instance</h3>\n              \n              <div className={styles.field}>\n                <label className={styles.label} htmlFor=\"instance-title\">\n                  Application Title\n                </label>\n                <input\n                  id=\"instance-title\"\n                  type=\"text\"\n                  className={styles.input}\n                  value={settings.instance_title}\n                  onChange={(e) => {\n                    const value = e.target.value;\n                    setSettings(prev => ({ ...prev, instance_title: value }));\n                    setSuccess(null);\n                  }}\n                  placeholder=\"Milestone\"\n                  autoComplete=\"off\"\n                />\n                <span className={styles.hint}>\n                  Displayed in the header and browser tab\n                </span>\n              </div>\n            </section>\n            \n            {/* Appearance Section */}\n            <section className={styles.section}>\n              <h3 className={styles.sectionTitle}>Appearance</h3>\n              \n              <div className={styles.field}>\n                <label className={styles.label}>Theme</label>\n                <div className={styles.themeOptions}>\n                  {THEME_FAMILIES.map(family => (\n                    <button\n                      key={family.id}\n                      type=\"button\"\n                      className={`${styles.themeOption} ${themeFamily === family.id ? styles.selected : ''}`}\n                      onClick={() => {\n                        setThemeFamilyState(family.id);\n                        setThemeFamily(family.id);\n                      }}\n                    >\n                      <span className={styles.themeName}>{family.name}</span>\n                      <span className={styles.themeDescription}>{family.description}</span>\n                    </button>\n                  ))}\n                </div>\n                <span className={styles.hint}>\n                  Use the sun/moon toggle in the header to switch between light and dark modes\n                </span>\n              </div>\n            </section>\n            \n            {/* Branding Section - Logo Upload */}\n            <section className={styles.section}>\n              <h3 className={styles.sectionTitle}>Branding</h3>\n              \n              <div className={styles.logoSection}>\n                <div className={styles.logoField}>\n                  <label className={styles.label}>Dark Theme Logo</label>\n                  <LogoUploader\n                    value={settings.header_logo_dark}\n                    onChange={(value) => {\n                      setSettings(prev => ({ ...prev, header_logo_dark: value }));\n                      setSuccess(null);\n                    }}\n                    theme=\"dark\"\n                  />\n                  <span className={styles.hint}>\n                    Used when dark theme is active\n                  </span>\n                </div>\n                \n                <div className={styles.logoField}>\n                  <label className={styles.label}>Light Theme Logo</label>\n                  <LogoUploader\n                    value={settings.header_logo_light}\n                    onChange={(value) => {\n                      setSettings(prev => ({ ...prev, header_logo_light: value }));\n                      setSuccess(null);\n                    }}\n                    theme=\"light\"\n                  />\n                  <span className={styles.hint}>\n                    Used when light theme is active\n                  </span>\n                </div>\n              </div>\n            </section>\n            \n            {/* Display Settings Section */}\n            <section className={styles.section}>\n              <h3 className={styles.sectionTitle}>Display</h3>\n              \n              <div className={styles.field}>\n                <label className={styles.label}>Default View</label>\n                <div className={styles.buttonGroup}>\n                  {VIEW_OPTIONS.map(opt => (\n                    <button\n                      key={opt.value}\n                      type=\"button\"\n                      className={`${styles.optionButton} ${settings.default_view === opt.value ? styles.selected : ''}`}\n                      onClick={() => {\n                        setSettings(prev => ({ ...prev, default_view: opt.value }));\n                        setSuccess(null);\n                      }}\n                    >\n                      {opt.label}\n                    </button>\n                  ))}\n                </div>\n              </div>\n              \n              <div className={styles.field}>\n                <label className={styles.label}>Week Starts On</label>\n                <div className={styles.buttonGroup}>\n                  {WEEK_START_OPTIONS.map(opt => (\n                    <button\n                      key={opt.value}\n                      type=\"button\"\n                      className={`${styles.optionButton} ${settings.week_start === opt.value ? styles.selected : ''}`}\n                      onClick={() => {\n                        setSettings(prev => ({ ...prev, week_start: opt.value }));\n                        setSuccess(null);\n                      }}\n                    >\n                      {opt.label}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            </section>\n            \n            {/* Gantt Settings Section */}\n            <section className={styles.section}>\n              <h3 className={styles.sectionTitle}>Gantt Chart</h3>\n              \n              <div className={styles.toggleField}>\n                <div className={styles.toggleInfo}>\n                  <label className={styles.label}>Show Weekends</label>\n                  <span className={styles.hint}>\n                    Display Saturday and Sunday columns in the timeline\n                  </span>\n                </div>\n                <button\n                  type=\"button\"\n                  className={`${styles.toggle} ${settings.show_weekends === 'true' ? styles.toggleOn : ''}`}\n                  onClick={() => {\n                    setSettings(prev => ({\n                      ...prev,\n                      show_weekends: prev.show_weekends === 'true' ? 'false' : 'true'\n                    }));\n                    setSuccess(null);\n                  }}\n                >\n                  <span className={styles.toggleSlider} />\n                </button>\n              </div>\n              \n              <div className={styles.toggleField}>\n                <div className={styles.toggleInfo}>\n                  <label className={styles.label}>Auto-expand Projects</label>\n                  <span className={styles.hint}>\n                    Automatically expand projects to show phases on load\n                  </span>\n                </div>\n                <button\n                  type=\"button\"\n                  className={`${styles.toggle} ${settings.auto_expand_projects === 'true' ? styles.toggleOn : ''}`}\n                  onClick={() => {\n                    setSettings(prev => ({\n                      ...prev,\n                      auto_expand_projects: prev.auto_expand_projects === 'true' ? 'false' : 'true'\n                    }));\n                    setSuccess(null);\n                  }}\n                >\n                  <span className={styles.toggleSlider} />\n                </button>\n              </div>\n            </section>\n            \n            {/* Messages */}\n            {error && (\n              <div className={styles.error}>{error}</div>\n            )}\n            \n            {success && (\n              <div className={styles.success}>{success}</div>\n            )}\n            \n            {/* Actions */}\n            <div className={styles.actions}>\n              <Button variant=\"secondary\" onClick={handleClose}>\n                Cancel\n              </Button>\n              <div className={styles.rightActions}>\n                {hasChanges && (\n                  <Button variant=\"ghost\" onClick={handleReset}>\n                    Reset\n                  </Button>\n                )}\n                <Button \n                  onClick={handleSave} \n                  disabled={!hasChanges || isSaving}\n                >\n                  {isSaving ? 'Saving...' : 'Save Changes'}\n                </Button>\n              </div>\n            </div>\n          </>\n        )}\n      </div>\n    </Modal>\n  );\n}\n\n// =============================================================================\n// LOGO UPLOADER COMPONENT\n// =============================================================================\n\ninterface LogoUploaderProps {\n  value: string;\n  onChange: (value: string) => void;\n  theme: 'dark' | 'light';\n}\n\nfunction LogoUploader({ value, onChange, theme }: LogoUploaderProps) {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [dragActive, setDragActive] = useState(false);\n  \n  const defaultLogo = theme === 'dark'\n    ? '/img/milestone_logo_dark_theme.svg'\n    : '/img/milestone_logo_light_theme.svg';\n  \n  const handleFile = useCallback((file: File) => {\n    // Validate file type\n    const validTypes = ['image/png', 'image/jpeg', 'image/svg+xml', 'image/webp'];\n    if (!validTypes.includes(file.type)) {\n      alert('Please upload a PNG, JPG, SVG, or WebP image');\n      return;\n    }\n    \n    // Validate file size (max 500KB)\n    if (file.size > 500 * 1024) {\n      alert('Logo must be smaller than 500KB');\n      return;\n    }\n    \n    // Convert to base64\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      const result = e.target?.result as string;\n      onChange(result);\n    };\n    reader.readAsDataURL(file);\n  }, [onChange]);\n  \n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setDragActive(false);\n    \n    const file = e.dataTransfer.files[0];\n    if (file) {\n      handleFile(file);\n    }\n  }, [handleFile]);\n  \n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setDragActive(true);\n  }, []);\n  \n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setDragActive(false);\n  }, []);\n  \n  const handleInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      handleFile(file);\n    }\n  }, [handleFile]);\n  \n  const handleRemove = useCallback(() => {\n    onChange('');\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  }, [onChange]);\n  \n  const displaySrc = value || defaultLogo;\n  const hasCustomLogo = !!value;\n  \n  return (\n    <div className={styles.logoUploader}>\n      <div \n        className={`${styles.logoPreview} ${styles[theme]} ${dragActive ? styles.dragActive : ''}`}\n        onDrop={handleDrop}\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onClick={() => fileInputRef.current?.click()}\n      >\n        <img \n          src={displaySrc} \n          alt={`${theme} theme logo`}\n          className={styles.logoImage}\n        />\n        <div className={styles.logoOverlay}>\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n            <polyline points=\"17 8 12 3 7 8\" />\n            <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\" />\n          </svg>\n          <span>Upload</span>\n        </div>\n      </div>\n      \n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\"image/png,image/jpeg,image/svg+xml,image/webp\"\n        onChange={handleInputChange}\n        className={styles.logoInput}\n      />\n      \n      {hasCustomLogo && (\n        <button\n          type=\"button\"\n          className={styles.logoRemoveBtn}\n          onClick={(e) => {\n            e.stopPropagation();\n            handleRemove();\n          }}\n          title=\"Remove custom logo\"\n        >\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n            <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n          </svg>\n          Remove\n        </button>\n      )}\n    </div>\n  );\n}\n","import { forwardRef, InputHTMLAttributes, ReactNode } from 'react';\nimport styles from './Input.module.css';\n\nexport interface InputProps extends InputHTMLAttributes<HTMLInputElement> {\n  label?: string;\n  error?: string;\n  hint?: string;\n  leftIcon?: ReactNode;\n  rightIcon?: ReactNode;\n  fullWidth?: boolean;\n}\n\nexport const Input = forwardRef<HTMLInputElement, InputProps>(\n  (\n    {\n      label,\n      error,\n      hint,\n      leftIcon,\n      rightIcon,\n      fullWidth = false,\n      className,\n      id,\n      ...props\n    },\n    ref\n  ) => {\n    const inputId = id || `input-${Math.random().toString(36).substr(2, 9)}`;\n\n    const wrapperClasses = [\n      styles.wrapper,\n      fullWidth && styles.fullWidth,\n      className,\n    ]\n      .filter(Boolean)\n      .join(' ');\n\n    const inputClasses = [\n      styles.input,\n      error && styles.error,\n      leftIcon && styles.hasLeftIcon,\n      rightIcon && styles.hasRightIcon,\n    ]\n      .filter(Boolean)\n      .join(' ');\n\n    return (\n      <div className={wrapperClasses}>\n        {label && (\n          <label htmlFor={inputId} className={styles.label}>\n            {label}\n          </label>\n        )}\n        <div className={styles.inputWrapper}>\n          {leftIcon && <span className={styles.leftIcon}>{leftIcon}</span>}\n          <input\n            ref={ref}\n            id={inputId}\n            className={inputClasses}\n            {...props}\n          />\n          {rightIcon && <span className={styles.rightIcon}>{rightIcon}</span>}\n        </div>\n        {error && <span className={styles.errorText}>{error}</span>}\n        {hint && !error && <span className={styles.hint}>{hint}</span>}\n      </div>\n    );\n  }\n);\n\nInput.displayName = 'Input';\n","import { forwardRef, SelectHTMLAttributes, ReactNode } from 'react';\nimport styles from './Select.module.css';\n\nexport interface SelectOption {\n  value: string | number;\n  label: string;\n  disabled?: boolean;\n}\n\nexport interface SelectProps extends Omit<SelectHTMLAttributes<HTMLSelectElement>, 'children'> {\n  label?: string;\n  error?: string;\n  hint?: string;\n  options: SelectOption[];\n  placeholder?: string;\n  fullWidth?: boolean;\n  icon?: ReactNode;\n}\n\nexport const Select = forwardRef<HTMLSelectElement, SelectProps>(\n  (\n    {\n      label,\n      error,\n      hint,\n      options,\n      placeholder,\n      fullWidth = false,\n      icon,\n      className,\n      id,\n      ...props\n    },\n    ref\n  ) => {\n    const selectId = id || `select-${Math.random().toString(36).substr(2, 9)}`;\n\n    const wrapperClasses = [\n      styles.wrapper,\n      fullWidth && styles.fullWidth,\n      className,\n    ]\n      .filter(Boolean)\n      .join(' ');\n\n    const selectClasses = [\n      styles.select,\n      error && styles.error,\n      icon && styles.hasIcon,\n    ]\n      .filter(Boolean)\n      .join(' ');\n\n    return (\n      <div className={wrapperClasses}>\n        {label && (\n          <label htmlFor={selectId} className={styles.label}>\n            {label}\n          </label>\n        )}\n        <div className={styles.selectWrapper}>\n          {icon && <span className={styles.icon}>{icon}</span>}\n          <select\n            ref={ref}\n            id={selectId}\n            className={selectClasses}\n            {...props}\n          >\n            {placeholder && (\n              <option value=\"\" disabled>\n                {placeholder}\n              </option>\n            )}\n            {options.map((option) => (\n              <option\n                key={option.value}\n                value={option.value}\n                disabled={option.disabled}\n              >\n                {option.label}\n              </option>\n            ))}\n          </select>\n          <span className={styles.chevron}>\n            <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <polyline points=\"6 9 12 15 18 9\" />\n            </svg>\n          </span>\n        </div>\n        {error && <span className={styles.errorText}>{error}</span>}\n        {hint && !error && <span className={styles.hint}>{hint}</span>}\n      </div>\n    );\n  }\n);\n\nSelect.displayName = 'Select';\n","/**\n * Custom Column Modal\n * Modal for creating and editing custom columns\n */\n\nimport { useState, useEffect } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { Input } from '@/components/common/Input';\nimport { Select } from '@/components/common/Select';\nimport { useAppStore } from '@/stores/appStore';\nimport { \n  createCustomColumn, \n  updateCustomColumn, \n  deleteCustomColumn,\n  type CustomColumn,\n  type CustomColumnCreate,\n} from '@/api';\nimport styles from './CustomColumnModal.module.css';\n\ninterface CustomColumnModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  column?: CustomColumn | null; // If provided, we're editing\n  onSave: () => void;\n}\n\nexport function CustomColumnModal({ \n  isOpen, \n  onClose, \n  column, \n  onSave \n}: CustomColumnModalProps) {\n  const currentSite = useAppStore((s) => s.currentSite);\n  \n  const [name, setName] = useState('');\n  const [columnType, setColumnType] = useState<'text' | 'boolean' | 'list'>('text');\n  const [isGlobal, setIsGlobal] = useState(false);\n  const [listOptions, setListOptions] = useState<string[]>(['']);\n  const [width, setWidth] = useState(120);\n  const [isSaving, setIsSaving] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const isEditing = !!column;\n\n  // Reset form when modal opens or column changes\n  useEffect(() => {\n    if (isOpen) {\n      if (column) {\n        setName(column.name);\n        setColumnType(column.column_type);\n        setIsGlobal(column.site_id === null);\n        setListOptions(column.list_options?.length ? column.list_options : ['']);\n        setWidth(column.width);\n      } else {\n        setName('');\n        setColumnType('text');\n        setIsGlobal(false);\n        setListOptions(['']);\n        setWidth(120);\n      }\n      setError(null);\n    }\n  }, [isOpen, column]);\n\n  const handleAddOption = () => {\n    setListOptions([...listOptions, '']);\n  };\n\n  const handleRemoveOption = (index: number) => {\n    if (listOptions.length > 1) {\n      setListOptions(listOptions.filter((_, i) => i !== index));\n    }\n  };\n\n  const handleOptionChange = (index: number, value: string) => {\n    const newOptions = [...listOptions];\n    newOptions[index] = value;\n    setListOptions(newOptions);\n  };\n\n  const handleSave = async () => {\n    if (!name.trim()) {\n      setError('Column name is required');\n      return;\n    }\n\n    if (columnType === 'list') {\n      const validOptions = listOptions.filter(o => o.trim());\n      if (validOptions.length === 0) {\n        setError('At least one list option is required');\n        return;\n      }\n    }\n\n    setIsSaving(true);\n    setError(null);\n\n    try {\n      if (isEditing && column) {\n        // Update existing column\n        await updateCustomColumn(column.id, {\n          name: name.trim(),\n          list_options: columnType === 'list' ? listOptions.filter(o => o.trim()) : undefined,\n          width,\n        });\n      } else {\n        // Create new column\n        const data: CustomColumnCreate = {\n          name: name.trim(),\n          column_type: columnType,\n          site_id: isGlobal ? null : currentSite?.id,\n          width,\n        };\n\n        if (columnType === 'list') {\n          data.list_options = listOptions.filter(o => o.trim());\n        }\n\n        await createCustomColumn(data);\n      }\n\n      onSave();\n      onClose();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to save column');\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    if (!column || !confirm('Are you sure you want to delete this column? All values will be lost.')) {\n      return;\n    }\n\n    setIsDeleting(true);\n    setError(null);\n\n    try {\n      await deleteCustomColumn(column.id);\n      onSave();\n      onClose();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to delete column');\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      onClose={onClose}\n      title={isEditing ? 'Edit Custom Column' : 'Add Custom Column'}\n      size=\"md\"\n    >\n      <div className={styles.form}>\n        {error && (\n          <div className={styles.error}>{error}</div>\n        )}\n\n        <div className={styles.field}>\n          <Input\n            label=\"Column Name\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            placeholder=\"e.g., Priority, Status, Owner\"\n            fullWidth\n          />\n        </div>\n\n        {!isEditing && (\n          <>\n            <div className={styles.field}>\n              <Select\n                label=\"Column Type\"\n                value={columnType}\n                onChange={(e) => setColumnType(e.target.value as 'text' | 'boolean' | 'list')}\n                options={[\n                  { value: 'text', label: 'Text' },\n                  { value: 'boolean', label: 'Checkbox' },\n                  { value: 'list', label: 'Dropdown List' },\n                ]}\n                fullWidth\n              />\n            </div>\n\n            <div className={styles.checkboxField}>\n              <label className={styles.checkboxLabel}>\n                <input\n                  type=\"checkbox\"\n                  checked={isGlobal}\n                  onChange={(e) => setIsGlobal(e.target.checked)}\n                />\n                <span className={styles.checkboxText}>\n                  Global column (available to all sites)\n                </span>\n              </label>\n              <span className={styles.hint}>\n                {isGlobal \n                  ? 'This column will be visible across all sites' \n                  : `This column will only be visible to ${currentSite?.name || 'this site'}`}\n              </span>\n            </div>\n          </>\n        )}\n\n        {columnType === 'list' && (\n          <div className={styles.field}>\n            <label className={styles.label}>List Options</label>\n            <div className={styles.listOptions}>\n              {listOptions.map((option, index) => (\n                <div key={index} className={styles.listOptionRow}>\n                  <Input\n                    value={option}\n                    onChange={(e) => handleOptionChange(index, e.target.value)}\n                    placeholder={`Option ${index + 1}`}\n                    fullWidth\n                  />\n                  {listOptions.length > 1 && (\n                    <button\n                      type=\"button\"\n                      className={styles.removeOptionBtn}\n                      onClick={() => handleRemoveOption(index)}\n                      title=\"Remove option\"\n                    >\n                      <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n                        <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n                      </svg>\n                    </button>\n                  )}\n                </div>\n              ))}\n              <button\n                type=\"button\"\n                className={styles.addOptionBtn}\n                onClick={handleAddOption}\n              >\n                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n                  <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n                </svg>\n                Add Option\n              </button>\n            </div>\n          </div>\n        )}\n\n        <div className={styles.field}>\n          <label className={styles.label}>Column Width</label>\n          <div className={styles.widthControl}>\n            <input\n              type=\"range\"\n              min=\"60\"\n              max=\"300\"\n              value={width}\n              onChange={(e) => setWidth(parseInt(e.target.value))}\n              className={styles.widthSlider}\n            />\n            <span className={styles.widthValue}>{width}px</span>\n          </div>\n        </div>\n      </div>\n\n      <div className={styles.actions}>\n        {isEditing && (\n          <Button\n            variant=\"danger\"\n            onClick={handleDelete}\n            disabled={isDeleting || isSaving}\n          >\n            {isDeleting ? 'Deleting...' : 'Delete'}\n          </Button>\n        )}\n        <div className={styles.rightActions}>\n          <Button variant=\"ghost\" onClick={onClose} disabled={isSaving || isDeleting}>\n            Cancel\n          </Button>\n          <Button onClick={handleSave} disabled={isSaving || isDeleting}>\n            {isSaving ? 'Saving...' : isEditing ? 'Update' : 'Create'}\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  );\n}\n","/**\n * Custom Columns Manager Modal\n * Modal for viewing, reordering, editing, and deleting custom columns\n */\n\nimport { useState, useCallback, useRef } from 'react';\nimport { Modal } from '@/components/common/Modal';\nimport { Button } from '@/components/common/Button';\nimport { useAppStore } from '@/stores/appStore';\nimport { \n  updateCustomColumn,\n  deleteCustomColumn,\n  getCustomColumnsWithValues,\n  type CustomColumn,\n} from '@/api';\nimport { CustomColumnModal } from './CustomColumnModal';\nimport styles from './CustomColumnsManagerModal.module.css';\n\ninterface CustomColumnsManagerModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function CustomColumnsManagerModal({ \n  isOpen, \n  onClose,\n}: CustomColumnsManagerModalProps) {\n  const customColumns = useAppStore((s) => s.customColumns);\n  const currentSite = useAppStore((s) => s.currentSite);\n  const setCustomColumns = useAppStore((s) => s.setCustomColumns);\n  const setCustomColumnValues = useAppStore((s) => s.setCustomColumnValues);\n  \n  const [editingColumn, setEditingColumn] = useState<CustomColumn | null>(null);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [draggedColumn, setDraggedColumn] = useState<CustomColumn | null>(null);\n  const [dragOverIndex, setDragOverIndex] = useState<number | null>(null);\n  \n  const dragItemRef = useRef<number | null>(null);\n\n  const refreshColumns = useCallback(async () => {\n    if (!currentSite) return;\n    try {\n      const data = await getCustomColumnsWithValues(currentSite.id);\n      setCustomColumns(data.columns);\n      setCustomColumnValues(data.values);\n    } catch (err) {\n      console.error('Failed to refresh columns:', err);\n    }\n  }, [currentSite, setCustomColumns, setCustomColumnValues]);\n\n  const handleDragStart = (e: React.DragEvent, column: CustomColumn, index: number) => {\n    setDraggedColumn(column);\n    dragItemRef.current = index;\n    e.dataTransfer.effectAllowed = 'move';\n    // Set drag image (optional - makes it look better)\n    const target = e.target as HTMLElement;\n    target.style.opacity = '0.5';\n  };\n\n  const handleDragEnd = (e: React.DragEvent) => {\n    const target = e.target as HTMLElement;\n    target.style.opacity = '1';\n    setDraggedColumn(null);\n    setDragOverIndex(null);\n    dragItemRef.current = null;\n  };\n\n  const handleDragOver = (e: React.DragEvent, index: number) => {\n    e.preventDefault();\n    if (dragItemRef.current === index) return;\n    setDragOverIndex(index);\n  };\n\n  const handleDragLeave = () => {\n    setDragOverIndex(null);\n  };\n\n  const handleDrop = async (e: React.DragEvent, targetIndex: number) => {\n    e.preventDefault();\n    \n    if (!draggedColumn || dragItemRef.current === null || dragItemRef.current === targetIndex) {\n      setDragOverIndex(null);\n      return;\n    }\n    \n    try {\n      // Create new array with reordered columns\n      const newColumns = [...customColumns];\n      const [removed] = newColumns.splice(dragItemRef.current, 1);\n      newColumns.splice(targetIndex, 0, removed);\n      \n      // Update display_order for all affected columns\n      const updates = newColumns.map((col, idx) => ({\n        id: col.id,\n        display_order: idx,\n      }));\n      \n      // Update locally first for responsiveness\n      const updatedColumns = newColumns.map((col, idx) => ({\n        ...col,\n        display_order: idx,\n      }));\n      setCustomColumns(updatedColumns);\n      \n      // Persist to server\n      for (const update of updates) {\n        await updateCustomColumn(update.id, { display_order: update.display_order });\n      }\n    } catch (err) {\n      console.error('Failed to reorder columns:', err);\n      // Refresh to restore correct order\n      refreshColumns();\n    } finally {\n      setDragOverIndex(null);\n    }\n  };\n\n  const handleDelete = async (column: CustomColumn) => {\n    if (!confirm(`Delete column \"${column.name}\"? All values will be lost.`)) {\n      return;\n    }\n\n    try {\n      await deleteCustomColumn(column.id);\n      refreshColumns();\n    } catch (err) {\n      console.error('Failed to delete column:', err);\n    }\n  };\n\n  const getColumnTypeLabel = (type: string) => {\n    switch (type) {\n      case 'boolean': return 'Checkbox';\n      case 'list': return 'Dropdown';\n      default: return 'Text';\n    }\n  };\n\n  const getColumnTypeIcon = (type: string) => {\n    switch (type) {\n      case 'boolean':\n        return (\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <polyline points=\"9 11 12 14 22 4\" />\n            <path d=\"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11\" />\n          </svg>\n        );\n      case 'list':\n        return (\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <polyline points=\"6 9 12 15 18 9\" />\n          </svg>\n        );\n      default:\n        return (\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <line x1=\"17\" y1=\"10\" x2=\"3\" y2=\"10\" />\n            <line x1=\"21\" y1=\"6\" x2=\"3\" y2=\"6\" />\n            <line x1=\"21\" y1=\"14\" x2=\"3\" y2=\"14\" />\n            <line x1=\"17\" y1=\"18\" x2=\"3\" y2=\"18\" />\n          </svg>\n        );\n    }\n  };\n\n  return (\n    <>\n      <Modal\n        isOpen={isOpen}\n        onClose={onClose}\n        title=\"Manage Custom Columns\"\n        size=\"lg\"\n      >\n        <div className={styles.content}>\n          {customColumns.length === 0 ? (\n            <div className={styles.empty}>\n              <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\">\n                <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\n                <line x1=\"3\" y1=\"9\" x2=\"21\" y2=\"9\" />\n                <line x1=\"9\" y1=\"21\" x2=\"9\" y2=\"9\" />\n              </svg>\n              <p>No custom columns yet</p>\n              <span className={styles.emptyHint}>\n                Add columns to track additional properties on phases and subphases\n              </span>\n            </div>\n          ) : (\n            <div className={styles.columnList}>\n              <div className={styles.listHeader}>\n                <span className={styles.colDrag}></span>\n                <span className={styles.colName}>Name</span>\n                <span className={styles.colType}>Type</span>\n                <span className={styles.colScope}>Scope</span>\n                <span className={styles.colWidth}>Width</span>\n                <span className={styles.colActions}>Actions</span>\n              </div>\n              \n              {customColumns.map((column, index) => (\n                <div\n                  key={column.id}\n                  className={`${styles.columnItem} ${dragOverIndex === index ? styles.dragOver : ''} ${draggedColumn?.id === column.id ? styles.dragging : ''}`}\n                  draggable\n                  onDragStart={(e) => handleDragStart(e, column, index)}\n                  onDragEnd={handleDragEnd}\n                  onDragOver={(e) => handleDragOver(e, index)}\n                  onDragLeave={handleDragLeave}\n                  onDrop={(e) => handleDrop(e, index)}\n                >\n                  <span className={styles.colDrag}>\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                      <line x1=\"8\" y1=\"6\" x2=\"8\" y2=\"6\" />\n                      <line x1=\"16\" y1=\"6\" x2=\"16\" y2=\"6\" />\n                      <line x1=\"8\" y1=\"12\" x2=\"8\" y2=\"12\" />\n                      <line x1=\"16\" y1=\"12\" x2=\"16\" y2=\"12\" />\n                      <line x1=\"8\" y1=\"18\" x2=\"8\" y2=\"18\" />\n                      <line x1=\"16\" y1=\"18\" x2=\"16\" y2=\"18\" />\n                    </svg>\n                  </span>\n                  <span className={styles.colName}>{column.name}</span>\n                  <span className={styles.colType}>\n                    {getColumnTypeIcon(column.column_type)}\n                    {getColumnTypeLabel(column.column_type)}\n                  </span>\n                  <span className={styles.colScope}>\n                    {column.site_id === null ? (\n                      <span className={styles.scopeGlobal}>Global</span>\n                    ) : (\n                      <span className={styles.scopeLocal}>Local</span>\n                    )}\n                  </span>\n                  <span className={styles.colWidth}>{column.width}px</span>\n                  <span className={styles.colActions}>\n                    <button\n                      className={styles.actionBtn}\n                      onClick={() => setEditingColumn(column)}\n                      title=\"Edit column\"\n                    >\n                      <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\" />\n                        <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\" />\n                      </svg>\n                    </button>\n                    <button\n                      className={`${styles.actionBtn} ${styles.deleteBtn}`}\n                      onClick={() => handleDelete(column)}\n                      title=\"Delete column\"\n                    >\n                      <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <polyline points=\"3 6 5 6 21 6\" />\n                        <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\n                      </svg>\n                    </button>\n                  </span>\n                </div>\n              ))}\n            </div>\n          )}\n\n          <div className={styles.addSection}>\n            <Button \n              variant=\"primary\"\n              onClick={() => setShowAddModal(true)}\n            >\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n                <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n              </svg>\n              Add Column\n            </Button>\n          </div>\n        </div>\n\n        <div className={styles.footer}>\n          <div className={styles.hint}>\n            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <circle cx=\"12\" cy=\"12\" r=\"10\" />\n              <line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\" />\n              <line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\" />\n            </svg>\n            Drag columns to reorder. Changes apply to phases and subphases.\n          </div>\n          <Button variant=\"ghost\" onClick={onClose}>\n            Close\n          </Button>\n        </div>\n      </Modal>\n\n      {/* Edit column modal */}\n      <CustomColumnModal\n        isOpen={!!editingColumn}\n        onClose={() => setEditingColumn(null)}\n        column={editingColumn}\n        onSave={refreshColumns}\n      />\n\n      {/* Add column modal */}\n      <CustomColumnModal\n        isOpen={showAddModal}\n        onClose={() => setShowAddModal(false)}\n        onSave={refreshColumns}\n      />\n    </>\n  );\n}\n","/**\n * ModalContainer - Renders all application modals\n * Centralized modal management based on uiStore activeModal state\n */\n\nimport { \n  ProjectModal, \n  PhaseModal, \n  SubphaseModal,\n  StaffAssignmentModal,\n  EquipmentAssignmentModal,\n  VacationModal,\n  BankHolidayModal,\n  CustomHolidayModal,\n  CompanyEventModal,\n  SiteModal,\n  SiteManagementModal,\n  UserManagementModal,\n  SSOConfigModal,\n  EquipmentManagementModal,\n  PredefinedPhasesModal,\n  ImportProjectModal,\n  SettingsModal,\n} from '@/components/modals';\n\nexport function ModalContainer() {\n  return (\n    <>\n      <ProjectModal />\n      <PhaseModal />\n      <SubphaseModal />\n      <StaffAssignmentModal />\n      <EquipmentAssignmentModal />\n      <VacationModal />\n      <BankHolidayModal />\n      <CustomHolidayModal />\n      <CompanyEventModal />\n      <SiteModal />\n      <SiteManagementModal />\n      <UserManagementModal />\n      <SSOConfigModal />\n      <EquipmentManagementModal />\n      <PredefinedPhasesModal />\n      <ImportProjectModal />\n      <SettingsModal />\n    </>\n  );\n}\n","/**\n * ProjectPanel\n * Left panel containing the project tree hierarchy with custom columns support\n */\n\nimport { forwardRef, useState, useCallback, useRef, useEffect } from 'react';\nimport { ProjectRow } from './ProjectRow';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { useDataLoader } from '@/hooks';\nimport { ReorderProvider } from '@/contexts/ReorderContext';\nimport { CustomColumnModal, CustomColumnsManagerModal } from '@/components/modals';\nimport { CustomColumnHeader } from '@/components/gantt/CustomColumns';\nimport type { Project, CustomColumn } from '@/types';\nimport styles from './ProjectPanel.module.css';\n\ninterface ProjectPanelProps {\n  projects: Project[];\n  width: number;  // Width of the name/info column\n  onProjectReorder?: (fromId: number, toId: number) => void;\n}\n\nexport const ProjectPanel = forwardRef<HTMLDivElement, ProjectPanelProps>(\n  function ProjectPanel({ projects, width, onProjectReorder }, ref) {\n    const openProjectModal = useUIStore((s) => s.openProjectModal);\n    const setActiveModal = useUIStore((s) => s.setActiveModal);\n    const currentUser = useAppStore((s) => s.currentUser);\n    const currentSite = useAppStore((s) => s.currentSite);\n    const customColumns = useAppStore((s) => s.customColumns);\n    const setCustomColumns = useAppStore((s) => s.setCustomColumns);\n    const showAssignments = useAppStore((s) => s.showAssignments);\n    const toggleShowAssignments = useAppStore((s) => s.toggleShowAssignments);\n    const showAllCustomColumns = useAppStore((s) => s.showAllCustomColumns);\n    const hiddenCustomColumns = useAppStore((s) => s.hiddenCustomColumns);\n    const setShowAllCustomColumns = useAppStore((s) => s.setShowAllCustomColumns);\n    const toggleCustomColumnVisibility = useAppStore((s) => s.toggleCustomColumnVisibility);\n    \n    const { refreshCustomColumns } = useDataLoader();\n    \n    const [showManagerModal, setShowManagerModal] = useState(false);\n    const [showColumnModal, setShowColumnModal] = useState(false);\n    const [showVisibilityDropdown, setShowVisibilityDropdown] = useState(false);\n    const [editingColumn, setEditingColumn] = useState<CustomColumn | null>(null);\n    const visibilityDropdownRef = useRef<HTMLDivElement>(null);\n    \n    const canEdit = currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n    \n    // Filter columns based on visibility settings\n    const visibleColumns = showAllCustomColumns\n      ? customColumns.filter(col => !hiddenCustomColumns.has(col.id))\n      : [];\n    \n    // Close dropdown when clicking outside\n    useEffect(() => {\n      const handleClickOutside = (e: MouseEvent) => {\n        if (visibilityDropdownRef.current && !visibilityDropdownRef.current.contains(e.target as Node)) {\n          setShowVisibilityDropdown(false);\n        }\n      };\n      if (showVisibilityDropdown) {\n        document.addEventListener('mousedown', handleClickOutside);\n      }\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }, [showVisibilityDropdown]);\n    \n    const handleManageColumns = () => {\n      setShowManagerModal(true);\n    };\n    \n    const handleEditColumn = (column: CustomColumn) => {\n      setEditingColumn(column);\n      setShowColumnModal(true);\n    };\n    \n    const handleColumnSave = () => {\n      if (currentSite) {\n        refreshCustomColumns(currentSite.id);\n      }\n    };\n    \n    const handleWidthChange = useCallback((columnId: number, newWidth: number) => {\n      setCustomColumns(\n        customColumns.map(col => \n          col.id === columnId ? { ...col, width: newWidth } : col\n        )\n      );\n    }, [customColumns, setCustomColumns]);\n    \n    const handleToggleAll = () => {\n      setShowAllCustomColumns(!showAllCustomColumns);\n    };\n    \n    // Calculate total custom columns width\n    const customColumnsWidth = visibleColumns.reduce((sum, col) => sum + col.width, 0);\n    const totalWidth = width + customColumnsWidth;\n    \n    // Count hidden columns\n    const hiddenCount = customColumns.length - visibleColumns.length;\n    \n    return (\n      <ReorderProvider>\n        <div className={styles.panel} style={{ width: totalWidth }}>\n          {/* Header */}\n          <div className={styles.header}>\n            <div className={styles.headerContent} style={{ width }}>\n              <div className={styles.headerLeft}>\n                <span className={styles.headerTitle}>Projects</span>\n                <span className={styles.headerCount}>{projects.length}</span>\n              </div>\n              <div className={styles.headerActions}>\n                {/* Toggle staff/equipment visibility */}\n                <button \n                  className={`${styles.toggleBtn} ${!showAssignments ? styles.toggleOff : ''}`}\n                  onClick={toggleShowAssignments}\n                  title={showAssignments ? 'Hide Staff & Equipment' : 'Show Staff & Equipment'}\n                >\n                  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                    <path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\" />\n                    <circle cx=\"9\" cy=\"7\" r=\"4\" />\n                    <path d=\"M23 21v-2a4 4 0 0 0-3-3.87\" />\n                    <path d=\"M16 3.13a4 4 0 0 1 0 7.75\" />\n                  </svg>\n                </button>\n                \n                {/* Column visibility dropdown (only if columns exist) */}\n                {customColumns.length > 0 && (\n                  <div ref={visibilityDropdownRef} className={styles.visibilityWrapper}>\n                    <button \n                      className={`${styles.toggleBtn} ${hiddenCount > 0 || !showAllCustomColumns ? styles.hasHidden : ''}`}\n                      onClick={() => setShowVisibilityDropdown(!showVisibilityDropdown)}\n                      title=\"Column Visibility\"\n                    >\n                      <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        {showAllCustomColumns && hiddenCount === 0 ? (\n                          <>\n                            <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\" />\n                            <circle cx=\"12\" cy=\"12\" r=\"3\" />\n                          </>\n                        ) : (\n                          <>\n                            <path d=\"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24\" />\n                            <line x1=\"1\" y1=\"1\" x2=\"23\" y2=\"23\" />\n                          </>\n                        )}\n                      </svg>\n                    </button>\n                    \n                    {showVisibilityDropdown && (\n                      <div className={styles.visibilityDropdown}>\n                        <div className={styles.visibilityHeader}>\n                          <span>Column Visibility</span>\n                        </div>\n                        \n                        {/* Master toggle */}\n                        <label className={`${styles.visibilityOption} ${styles.masterToggle}`}>\n                          <input\n                            type=\"checkbox\"\n                            checked={showAllCustomColumns}\n                            onChange={handleToggleAll}\n                          />\n                          <span className={styles.visibilityCheckbox}>\n                            <svg className={styles.visibilityCheckIcon} width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\">\n                              <polyline points=\"20 6 9 17 4 12\" />\n                            </svg>\n                          </span>\n                          <span>Show All Columns</span>\n                        </label>\n                        \n                        {showAllCustomColumns && customColumns.length > 0 && (\n                          <>\n                            <div className={styles.visibilityDivider} />\n                            <div className={styles.visibilityList}>\n                              {customColumns.map(col => (\n                                <label key={col.id} className={styles.visibilityOption}>\n                                  <input\n                                    type=\"checkbox\"\n                                    checked={!hiddenCustomColumns.has(col.id)}\n                                    onChange={() => toggleCustomColumnVisibility(col.id)}\n                                  />\n                                  <span className={styles.visibilityCheckbox}>\n                                    <svg className={styles.visibilityCheckIcon} width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\">\n                                      <polyline points=\"20 6 9 17 4 12\" />\n                                    </svg>\n                                  </span>\n                                  <span>{col.name}</span>\n                                </label>\n                              ))}\n                            </div>\n                          </>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                )}\n                \n                {canEdit && (\n                  <>\n                    <button \n                      className={styles.columnsBtn}\n                      onClick={handleManageColumns}\n                      title=\"Manage Custom Columns\"\n                    >\n                      {/* Table/spreadsheet icon - more explicit for columns */}\n                      <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" />\n                        <line x1=\"3\" y1=\"9\" x2=\"21\" y2=\"9\" />\n                        <line x1=\"9\" y1=\"21\" x2=\"9\" y2=\"9\" />\n                      </svg>\n                    </button>\n                    <button \n                      className={styles.importBtn}\n                      onClick={() => setActiveModal('importProject')}\n                      title=\"Import Project\"\n                    >\n                      <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n                        <polyline points=\"17 8 12 3 7 8\" />\n                        <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\" />\n                      </svg>\n                    </button>\n                    <button \n                      className={styles.newProjectBtn}\n                      onClick={() => openProjectModal()}\n                      title=\"New Project\"\n                    >\n                      <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n                        <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n                      </svg>\n                      <span>New</span>\n                    </button>\n                  </>\n                )}\n              </div>\n            </div>\n            {/* Custom column header placeholders in main header row */}\n            {visibleColumns.length > 0 && (\n              <div className={styles.headerColumns}>\n                {visibleColumns.map(col => (\n                  <div key={col.id} className={styles.headerColumnPlaceholder} style={{ width: col.width }} />\n                ))}\n              </div>\n            )}\n          </div>\n          \n          {/* Custom Column Headers (if any) */}\n          {visibleColumns.length > 0 && (\n            <div className={styles.columnHeaders}>\n              <div className={styles.nameColumnHeader} style={{ width }} />\n              {visibleColumns.map(column => (\n                <CustomColumnHeader\n                  key={column.id}\n                  column={column}\n                  onEdit={handleEditColumn}\n                  onWidthChange={handleWidthChange}\n                />\n              ))}\n            </div>\n          )}\n\n          {/* Scrollable body */}\n          <div ref={ref} className={styles.body}>\n            {projects.length === 0 ? (\n              <div className={styles.empty}>\n                <p>No projects found</p>\n                <p className={styles.emptyHint}>\n                  {canEdit ? 'Click \"New\" to create a project' : 'No projects available for this site'}\n                </p>\n              </div>\n            ) : (\n              projects.map((project, index) => (\n                <ProjectRow \n                  key={project.id} \n                  project={project}\n                  customColumns={visibleColumns}\n                  nameColumnWidth={width}\n                  onReorder={onProjectReorder}\n                  siblingIds={projects.map(p => p.id)}\n                  index={index}\n                />\n              ))\n            )}\n          </div>\n        </div>\n        \n        {/* Custom Columns Manager Modal */}\n        <CustomColumnsManagerModal\n          isOpen={showManagerModal}\n          onClose={() => setShowManagerModal(false)}\n        />\n        \n        {/* Custom Column Edit Modal (from header click) */}\n        <CustomColumnModal\n          isOpen={showColumnModal}\n          onClose={() => setShowColumnModal(false)}\n          column={editingColumn}\n          onSave={handleColumnSave}\n        />\n      </ReorderProvider>\n    );\n  }\n);\n","/**\n * TimelineHeader\n * Displays the time period headers above the timeline\n */\n\nimport { memo } from 'react';\nimport type { TimelineCell, TimelineHeader as TimelineHeaderType } from '../utils';\nimport styles from './TimelineHeader.module.css';\n\ninterface TimelineHeaderProps {\n  headers: {\n    primary: TimelineHeaderType[];\n    secondary: TimelineHeaderType[];\n  };\n  cells: TimelineCell[];\n  cellWidth: number;\n  totalWidth: number;\n  viewMode: 'week' | 'month' | 'quarter' | 'year';\n  hasCustomColumns?: boolean;\n}\n\nexport const TimelineHeader = memo(function TimelineHeader({\n  headers,\n  cells,\n  cellWidth,\n  totalWidth,\n  viewMode,\n  hasCustomColumns = false,\n}: TimelineHeaderProps) {\n  // Only show week numbers in week and month views (not quarter or year)\n  const showWeekNumbers = viewMode === 'week' || viewMode === 'month' || viewMode === 'quarter';\n  // Only show weekend/holiday highlighting in week and month views\n  const showHighlighting = viewMode === 'week' || viewMode === 'month';\n\n  return (\n    <div className={styles.header}>\n      <div className={styles.headerContent} style={{ width: totalWidth }}>\n        {/* Primary row (months/quarters/years) */}\n        <div className={styles.primaryRow}>\n          {headers.primary.map((header, index) => (\n            <div\n              key={index}\n              className={`${styles.primaryCell} ${header.isCurrentPeriod ? styles.current : ''}`}\n              style={{ width: header.span * cellWidth }}\n            >\n              {header.label}\n            </div>\n          ))}\n        </div>\n\n        {/* Secondary row (days/weeks/months) */}\n        <div \n          className={styles.secondaryRow}\n          style={{ '--cell-width': `${cellWidth}px` } as React.CSSProperties}\n        >\n          {/* Background markers for highlighting - positioned absolutely like body grid */}\n          {showHighlighting && (\n            <div className={styles.bgLayer}>\n              {cells.map((cell, index) => {\n                // Determine background type - priority: today > holiday > event > weekend\n                let bgClass = '';\n                if (cell.isToday) {\n                  bgClass = styles.todayBg;\n                } else if (cell.isBankHoliday) {\n                  // All holidays (public and custom) use orange - matching body\n                  bgClass = styles.holidayBg;\n                } else if (cell.isCompanyEvent) {\n                  bgClass = styles.eventBg;\n                } else if (cell.isWeekend) {\n                  bgClass = styles.weekendBg;\n                }\n                \n                if (!bgClass) return null;\n                \n                return (\n                  <div\n                    key={`bg-${index}`}\n                    className={`${styles.bgCell} ${bgClass}`}\n                    style={{ left: index * cellWidth, width: cellWidth }}\n                  />\n                );\n              })}\n            </div>\n          )}\n          \n          {/* Cell labels */}\n          {cells.map((cell, index) => {\n            // Determine text color class\n            let textClass = '';\n            if (cell.isToday) {\n              textClass = styles.todayText;\n            } else if (cell.isBankHoliday) {\n              textClass = styles.holidayText;\n            } else if (cell.isCompanyEvent) {\n              textClass = styles.eventText;\n            }\n            \n            const tooltipText = cell.isBankHoliday \n              ? cell.bankHolidayName \n              : cell.isCompanyEvent \n                ? cell.companyEventName \n                : undefined;\n            \n            return (\n              <div\n                key={index}\n                className={`${styles.secondaryCell} ${textClass}`}\n                style={{ width: cellWidth }}\n                title={tooltipText}\n                data-date={cell.dateStr}\n                data-date-end={cell.dateEnd || undefined}\n              >\n                <span className={styles.dayLabel}>{cell.label}</span>\n                {/* Week number on first day of week - position varies by view */}\n                {showWeekNumbers && cell.isFirstOfWeek && (\n                  <span className={viewMode === 'month' ? styles.weekLabelBottom : styles.weekLabelTop}>\n                    W{cell.weekNumber}\n                  </span>\n                )}\n                {cell.isFirstOfMonth && cellWidth < 40 && (\n                  <span className={styles.monthLabel}>{cell.monthLabel}</span>\n                )}\n              </div>\n            );\n          })}\n        </div>\n        \n        {/* Spacer row to align with custom column headers in ProjectPanel */}\n        {hasCustomColumns && (\n          <div className={styles.customColumnSpacer} />\n        )}\n      </div>\n    </div>\n  );\n});\n","/**\n * ProjectBar\n * Visual bar representing a project on the timeline with confirmed/unconfirmed styling\n * Supports dragging to move entire project (with confirmation on release)\n */\n\nimport { memo } from 'react';\nimport styles from './ProjectBar.module.css';\n\ninterface ProjectBarProps {\n  left: number;\n  width: number;\n  name: string;\n  confirmed: boolean;\n  completion?: number | null;\n  projectId: number;\n  startDate: string;\n  endDate: string;\n  onDragStart?: (e: React.MouseEvent) => void;\n}\n\nexport const ProjectBar = memo(function ProjectBar({\n  left,\n  width,\n  name,\n  confirmed,\n  completion,\n  projectId,\n  startDate,\n  endDate,\n  onDragStart,\n}: ProjectBarProps) {\n  return (\n    <div\n      className={`${styles.bar} ${confirmed ? styles.confirmed : styles.unconfirmed} gantt-bar`}\n      style={{ left, width }}\n      title={`${name}${completion != null ? ` (${completion}%)` : ''}\\nDrag to move project`}\n      data-project-id={projectId}\n      data-start={startDate}\n      data-end={endDate}\n      onMouseDown={onDragStart}\n    >\n      {width > 60 && <span className={styles.label}>{name}</span>}\n    </div>\n  );\n});\n","/**\n * PhaseBar\n * Visual bar representing a phase on the timeline\n * Supports drag to move, resize handles, and click to edit\n * Touch-enabled for tablet/mobile devices\n */\n\nimport { memo, useRef, useCallback } from 'react';\nimport styles from './PhaseBar.module.css';\n\ninterface PhaseBarProps {\n  left: number;\n  width: number;\n  color: string;\n  name: string;\n  isSubphase?: boolean;\n  isMilestone?: boolean;\n  completion?: number | null;  // 0-100 percentage\n  isCriticalPath?: boolean;  // Whether this item is on the critical path\n  changedBy?: string | null;  // Name of user who just changed this (for real-time indicator)\n  // Interaction props\n  phaseId?: number;\n  projectId?: number;\n  startDate?: string;\n  endDate?: string;\n  onDragStart?: (e: React.MouseEvent, element: HTMLElement) => void;\n  onResizeStart?: (e: React.MouseEvent, edge: 'left' | 'right', element: HTMLElement) => void;\n  onClick?: (e: React.MouseEvent) => void;\n  // Dependency linking props\n  onLinkZoneClick?: (e: React.MouseEvent, zone: 'start' | 'end') => void;\n  isLinkingSource?: boolean;  // Is this the source of a pending link\n  isLinkingActive?: boolean;  // Is linking mode active globally\n  // Phantom sibling props\n  onPhantomStart?: (zone: 'start' | 'end') => void;\n}\n\n// Minimum drag distance before we consider it a drag (vs a click)\nconst DRAG_THRESHOLD = 5;\n\n// Get coordinates from mouse or touch event\nfunction getEventCoordinates(e: MouseEvent | TouchEvent | React.MouseEvent | React.TouchEvent): { clientX: number; clientY: number } {\n  if ('touches' in e && e.touches.length > 0) {\n    return { clientX: e.touches[0].clientX, clientY: e.touches[0].clientY };\n  }\n  if ('changedTouches' in e && e.changedTouches.length > 0) {\n    return { clientX: e.changedTouches[0].clientX, clientY: e.changedTouches[0].clientY };\n  }\n  return { clientX: (e as MouseEvent).clientX, clientY: (e as MouseEvent).clientY };\n}\n\n// Create a synthetic mouse event from touch event for compatibility\nfunction createSyntheticMouseEvent(e: React.TouchEvent, type: string = 'mousedown'): React.MouseEvent {\n  const touch = e.touches[0] || e.changedTouches[0];\n  return {\n    ...e,\n    type,\n    clientX: touch.clientX,\n    clientY: touch.clientY,\n    screenX: touch.screenX,\n    screenY: touch.screenY,\n    pageX: touch.pageX,\n    pageY: touch.pageY,\n    button: 0,\n    buttons: 1,\n  } as unknown as React.MouseEvent;\n}\n\nexport const PhaseBar = memo(function PhaseBar({\n  left,\n  width,\n  color,\n  name,\n  isSubphase = false,\n  isMilestone = false,\n  completion = null,\n  isCriticalPath = false,\n  changedBy = null,\n  phaseId,\n  projectId,\n  onDragStart,\n  onResizeStart,\n  onClick,\n  onLinkZoneClick,\n  isLinkingSource = false,\n  isLinkingActive = false,\n  onPhantomStart,\n}: PhaseBarProps) {\n  const barRef = useRef<HTMLDivElement>(null);\n  const dragStateRef = useRef<{\n    isDragging: boolean;\n    startX: number;\n    startY: number;\n    hasMoved: boolean;\n    originalEvent: React.MouseEvent | null;\n    isTouch: boolean;\n  }>({\n    isDragging: false,\n    startX: 0,\n    startY: 0,\n    hasMoved: false,\n    originalEvent: null,\n    isTouch: false,\n  });\n  const height = isSubphase ? 16 : 20;\n\n  const handlePointerDown = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    // Check if clicking on resize handle\n    const target = e.target as HTMLElement;\n    if (target.classList.contains(styles.resizeHandle)) {\n      return; // Let resize handle its own event\n    }\n    \n    // Prevent default to avoid text selection / scrolling\n    e.preventDefault();\n    \n    const isTouch = 'touches' in e;\n    const coords = getEventCoordinates(e);\n    \n    // Convert touch to synthetic mouse event for compatibility\n    const mouseEvent = isTouch ? createSyntheticMouseEvent(e as React.TouchEvent) : (e as React.MouseEvent);\n    \n    // Store start position and original event\n    dragStateRef.current = {\n      isDragging: true,\n      startX: coords.clientX,\n      startY: coords.clientY,\n      hasMoved: false,\n      originalEvent: mouseEvent,\n      isTouch,\n    };\n    \n    // Create handlers\n    const handleMove = (moveEvent: MouseEvent | TouchEvent) => {\n      const state = dragStateRef.current;\n      if (!state.isDragging) return;\n      \n      const moveCoords = getEventCoordinates(moveEvent);\n      const dx = Math.abs(moveCoords.clientX - state.startX);\n      const dy = Math.abs(moveCoords.clientY - state.startY);\n      \n      // If moved more than threshold, start actual drag\n      if (!state.hasMoved && (dx > DRAG_THRESHOLD || dy > DRAG_THRESHOLD)) {\n        state.hasMoved = true;\n        \n        // Prevent scrolling on touch devices during drag\n        if ('touches' in moveEvent) {\n          moveEvent.preventDefault();\n        }\n        \n        // Start the drag operation with the original event\n        if (onDragStart && barRef.current && state.originalEvent) {\n          onDragStart(state.originalEvent, barRef.current);\n        }\n      }\n    };\n    \n    const handleUp = () => {\n      const state = dragStateRef.current;\n      \n      // Clean up\n      document.removeEventListener('mousemove', handleMove);\n      document.removeEventListener('mouseup', handleUp);\n      document.removeEventListener('touchmove', handleMove);\n      document.removeEventListener('touchend', handleUp);\n      document.removeEventListener('touchcancel', handleUp);\n      \n      // If we didn't move enough, treat as click\n      if (!state.hasMoved && onClick && state.originalEvent) {\n        onClick(state.originalEvent);\n      }\n      \n      // Reset state\n      dragStateRef.current = {\n        isDragging: false,\n        startX: 0,\n        startY: 0,\n        hasMoved: false,\n        originalEvent: null,\n        isTouch: false,\n      };\n    };\n    \n    document.addEventListener('mousemove', handleMove);\n    document.addEventListener('mouseup', handleUp);\n    document.addEventListener('touchmove', handleMove, { passive: false });\n    document.addEventListener('touchend', handleUp);\n    document.addEventListener('touchcancel', handleUp);\n  }, [onDragStart, onClick]);\n\n  const handleLeftResizePointerDown = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    // Mark as moved to prevent click\n    dragStateRef.current.hasMoved = true;\n    \n    const isTouch = 'touches' in e;\n    const mouseEvent = isTouch ? createSyntheticMouseEvent(e as React.TouchEvent) : (e as React.MouseEvent);\n    \n    if (onResizeStart && barRef.current) {\n      onResizeStart(mouseEvent, 'left', barRef.current);\n    }\n  }, [onResizeStart]);\n\n  const handleRightResizePointerDown = useCallback((e: React.MouseEvent | React.TouchEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    // Mark as moved to prevent click\n    dragStateRef.current.hasMoved = true;\n    \n    const isTouch = 'touches' in e;\n    const mouseEvent = isTouch ? createSyntheticMouseEvent(e as React.TouchEvent) : (e as React.MouseEvent);\n    \n    if (onResizeStart && barRef.current) {\n      onResizeStart(mouseEvent, 'right', barRef.current);\n    }\n  }, [onResizeStart]);\n\n  // Link zone click handlers\n  const handleStartLinkZoneClick = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    \n    // Shift+click starts phantom sibling mode\n    if (e.shiftKey && onPhantomStart) {\n      onPhantomStart('start');\n      return;\n    }\n    \n    if (onLinkZoneClick) {\n      onLinkZoneClick(e, 'start');\n    }\n  }, [onLinkZoneClick, onPhantomStart]);\n\n  const handleEndLinkZoneClick = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    \n    // Shift+click starts phantom sibling mode\n    if (e.shiftKey && onPhantomStart) {\n      onPhantomStart('end');\n      return;\n    }\n    \n    if (onLinkZoneClick) {\n      onLinkZoneClick(e, 'end');\n    }\n  }, [onLinkZoneClick, onPhantomStart]);\n\n  // Milestone diamond style\n  if (isMilestone) {\n    // Use appropriate data attribute based on whether this is a phase or subphase\n    const dataAttrs = isSubphase \n      ? { 'data-subphase-id': phaseId, 'data-project-id': projectId }\n      : { 'data-phase-id': phaseId, 'data-project-id': projectId };\n    \n    return (\n      <div\n        ref={barRef}\n        className={`${styles.milestone} ${isSubphase ? styles.subphase : ''} ${isLinkingSource ? styles.linkingSource : ''} ${isCriticalPath ? styles.criticalPath : ''} ${changedBy ? styles.recentlyChanged : ''}`}\n        style={{\n          left: left + width / 2 - 12, // Center on the date\n        }}\n        title={isCriticalPath ? `${name} (Critical Path)` : name}\n        onMouseDown={handlePointerDown}\n        onTouchStart={handlePointerDown}\n        {...dataAttrs}\n      >\n        {/* Start link zone */}\n        {onLinkZoneClick && (\n          <div \n            className={`${styles.linkZone} ${styles.start} ${styles.milestoneZone} ${isLinkingActive ? styles.linkingActive : ''}`}\n            onClick={handleStartLinkZoneClick}\n            onMouseDown={(e) => e.stopPropagation()}\n            onTouchStart={(e) => e.stopPropagation()}\n            title=\"Click to start linking (SS or SF)\"\n          />\n        )}\n        \n        <div \n          className={`${styles.milestoneDiamond} ${isCriticalPath ? styles.criticalPathDiamond : ''}`}\n          style={{ backgroundColor: color }}\n        />\n        {name && <span className={styles.milestoneLabel}>{name}</span>}\n        \n        {/* Changed by indicator */}\n        {changedBy && (\n          <span className={styles.changedByBadge}> {changedBy}</span>\n        )}\n        \n        {/* End link zone */}\n        {onLinkZoneClick && (\n          <div \n            className={`${styles.linkZone} ${styles.end} ${styles.milestoneZone} ${isLinkingActive ? styles.linkingActive : ''}`}\n            onClick={handleEndLinkZoneClick}\n            onMouseDown={(e) => e.stopPropagation()}\n            onTouchStart={(e) => e.stopPropagation()}\n            title=\"Click to start linking (FS or FF)\"\n          />\n        )}\n      </div>\n    );\n  }\n\n  // Calculate completion bar width\n  const hasCompletion = completion !== null && completion >= 0;\n  const completionWidth = hasCompletion ? Math.min(100, Math.max(0, completion)) : 0;\n\n  // Use appropriate data attribute based on whether this is a phase or subphase\n  const dataAttrs = isSubphase \n    ? { 'data-subphase-id': phaseId, 'data-project-id': projectId }\n    : { 'data-phase-id': phaseId, 'data-project-id': projectId };\n\n  // Build title with completion and critical path info\n  let barTitle = name;\n  if (hasCompletion) barTitle += ` (${completion}%)`;\n  if (isCriticalPath) barTitle += ' - Critical Path';\n\n  return (\n    <div\n      ref={barRef}\n      className={`${styles.bar} ${isSubphase ? styles.subphase : ''} ${isLinkingSource ? styles.linkingSource : ''} ${isCriticalPath ? styles.criticalPath : ''} ${changedBy ? styles.recentlyChanged : ''}`}\n      style={{\n        left,\n        width,\n        height,\n        backgroundColor: color,\n      }}\n      title={barTitle}\n      onMouseDown={handlePointerDown}\n      onTouchStart={handlePointerDown}\n      {...dataAttrs}\n    >\n      {/* Completion bar */}\n      {hasCompletion && completionWidth > 0 && (\n        <div \n          className={styles.completionBar}\n          style={{ width: `${completionWidth}%` }}\n        />\n      )}\n      \n      {/* Start link zone */}\n      {onLinkZoneClick && (\n        <div \n          className={`${styles.linkZone} ${styles.start} ${isLinkingActive ? styles.linkingActive : ''}`}\n          onClick={handleStartLinkZoneClick}\n          onMouseDown={(e) => e.stopPropagation()}\n          onTouchStart={(e) => e.stopPropagation()}\n          title=\"Click to start linking (SS or SF)\"\n        />\n      )}\n      \n      {/* Left resize handle - enabled for both phases and subphases */}\n      {!isMilestone && onResizeStart && (\n        <div \n          className={`${styles.resizeHandle} ${styles.left}`}\n          onMouseDown={handleLeftResizePointerDown}\n          onTouchStart={handleLeftResizePointerDown}\n        />\n      )}\n      \n      {/* Label */}\n      {width > 40 && (\n        <span className={styles.label}>\n          {name}\n        </span>\n      )}\n      \n      {/* Changed by indicator */}\n      {changedBy && (\n        <span className={styles.changedByBadge}> {changedBy}</span>\n      )}\n      \n      {/* Right resize handle - enabled for both phases and subphases */}\n      {!isMilestone && onResizeStart && (\n        <div \n          className={`${styles.resizeHandle} ${styles.right}`}\n          onMouseDown={handleRightResizePointerDown}\n          onTouchStart={handleRightResizePointerDown}\n        />\n      )}\n      \n      {/* End link zone */}\n      {onLinkZoneClick && (\n        <div \n          className={`${styles.linkZone} ${styles.end} ${isLinkingActive ? styles.linkingActive : ''}`}\n          onClick={handleEndLinkZoneClick}\n          onMouseDown={(e) => e.stopPropagation()}\n          onTouchStart={(e) => e.stopPropagation()}\n          title=\"Click to start linking (FS or FF)\"\n        />\n      )}\n    </div>\n  );\n});\n","/**\n * ProjectTimeline\n * Timeline row for a project with its phases and assignments\n */\n\nimport { memo, useMemo, useCallback, Fragment } from 'react';\nimport { ProjectBar } from './ProjectBar';\nimport { PhaseBar } from './PhaseBar';\nimport { calculateBarPosition } from '../utils';\nimport type { TimelineCell } from '../utils';\nimport type { Project, Phase, Subphase, ViewMode } from '@/types';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { useDragAndDrop } from '@/hooks/useDragAndDrop';\nimport { useResize } from '@/hooks/useResize';\nimport { useDependencyLinking } from '@/hooks/useDependencyLinking';\nimport { usePhantomSibling } from '@/hooks/usePhantomSibling';\nimport { useWebSocketContext } from '@/contexts/WebSocketContext';\nimport { parseRecurringPattern } from '@/utils/recurringVacation';\nimport styles from './ProjectTimeline.module.css';\n\ninterface ProjectTimelineProps {\n  project: Project;\n  cells: TimelineCell[];\n  cellWidth: number;\n  isExpanded: boolean;\n  expandedPhases: Set<number>;\n  expandedSubphases: Set<number>;\n}\n\n/**\n * Calculate completion for a subphase, considering its children if it has any.\n * If the subphase has its own completion set and no children have completion, use that.\n * Otherwise, calculate from children's completion (weighted by duration).\n * If at least one child has completion, unset siblings count as 0%.\n */\nfunction calculateSubphaseCompletion(subphase: Subphase): number | null {\n  const children = subphase.children ?? [];\n  \n  // Check if any children have completion (direct or calculated)\n  let hasChildrenWithCompletion = false;\n  for (const child of children) {\n    const childCompletion = calculateSubphaseCompletion(child);\n    if (childCompletion !== null) {\n      hasChildrenWithCompletion = true;\n      break;\n    }\n  }\n  \n  if (hasChildrenWithCompletion) {\n    // Calculate weighted average from children's effective completion\n    // Children without completion count as 0%\n    let totalWeight = 0;\n    let weightedSum = 0;\n    \n    for (const child of children) {\n      const childCompletion = calculateSubphaseCompletion(child);\n      const days = Math.max(1, Math.ceil((new Date(child.end_date).getTime() - new Date(child.start_date).getTime()) / (1000*60*60*24)));\n      \n      // Unset completion counts as 0% when at least one sibling has a value\n      const completion = childCompletion ?? 0;\n      weightedSum += completion * days;\n      totalWeight += days;\n    }\n    \n    if (totalWeight > 0) {\n      return Math.round(weightedSum / totalWeight);\n    }\n  }\n  \n  // No children with completion, return item's own completion\n  return subphase.completion ?? null;\n}\n\n/**\n * Calculate completion for a phase, considering its children (subphases) if it has any.\n * If the phase has its own completion set and no children have completion, use that.\n * Otherwise, calculate from children's completion (weighted by duration).\n * If at least one child has completion, unset siblings count as 0%.\n */\nfunction calculatePhaseCompletion(phase: Phase): number | null {\n  const children = phase.children ?? [];\n  \n  // Check if any children have completion (direct or calculated)\n  let hasChildrenWithCompletion = false;\n  for (const child of children) {\n    const childCompletion = calculateSubphaseCompletion(child);\n    if (childCompletion !== null) {\n      hasChildrenWithCompletion = true;\n      break;\n    }\n  }\n  \n  if (hasChildrenWithCompletion) {\n    // Calculate weighted average from children's effective completion\n    // Children without completion count as 0%\n    let totalWeight = 0;\n    let weightedSum = 0;\n    \n    for (const child of children) {\n      const childCompletion = calculateSubphaseCompletion(child);\n      const days = Math.max(1, Math.ceil((new Date(child.end_date).getTime() - new Date(child.start_date).getTime()) / (1000*60*60*24)));\n      \n      // Unset completion counts as 0% when at least one sibling has a value\n      const completion = childCompletion ?? 0;\n      weightedSum += completion * days;\n      totalWeight += days;\n    }\n    \n    if (totalWeight > 0) {\n      return Math.round(weightedSum / totalWeight);\n    }\n  }\n  \n  // No children with completion, return item's own completion\n  return phase.completion ?? null;\n}\n\n// Calculate project completion from phases\nfunction calculateProjectCompletion(project: Project): number | null {\n  const phases = project.phases ?? [];\n  if (phases.length === 0) return null;\n\n  let weightedSum = 0;\n  let totalWeight = 0;\n\n  phases.forEach((phase) => {\n    // Use calculated completion which considers children\n    const completion = calculatePhaseCompletion(phase);\n    if (completion != null) {\n      const start = new Date(phase.start_date);\n      const end = new Date(phase.end_date);\n      const days = Math.max(1, (end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24));\n      weightedSum += completion * days;\n      totalWeight += days;\n    }\n  });\n\n  if (totalWeight > 0) {\n    return Math.round(weightedSum / totalWeight);\n  }\n  return null;\n}\n\nexport const ProjectTimeline = memo(function ProjectTimeline({\n  project,\n  cells,\n  cellWidth,\n  isExpanded,\n  expandedPhases,\n  expandedSubphases,\n}: ProjectTimelineProps) {\n  // Get UI store actions for opening modals\n  const { openPhaseModal, openSubphaseModal, setEditingPhase, setEditingSubphase } = useUIStore();\n  const phantomSiblingMode = useUIStore((s) => s.phantomSiblingMode);\n  \n  // Get viewMode and filter state from app store\n  const viewMode = useAppStore((s) => s.viewMode);\n  const customColumnFilters = useAppStore((s) => s.customColumnFilters);\n  const customColumnValues = useAppStore((s) => s.customColumnValues);\n  const showAssignments = useAppStore((s) => s.showAssignments);\n  \n  // Get critical path state\n  const criticalPathEnabled = useAppStore((s) => s.criticalPathEnabled);\n  const criticalPathItems = useAppStore((s) => s.criticalPathItems);\n  \n  // Get critical path items for this project (empty set if not enabled)\n  const projectCriticalItems = criticalPathEnabled.has(project.id) \n    ? (criticalPathItems.get(project.id) || new Set<string>())\n    : new Set<string>();\n  \n  // Get drag and resize hooks\n  const { startProjectDrag, startPhaseDrag, startSubphaseDrag, startStaffAssignmentDrag, startEquipmentAssignmentDrag } = useDragAndDrop();\n  const { startPhaseResize, startSubphaseResize, startStaffAssignmentResize, startEquipmentAssignmentResize } = useResize();\n  \n  // Get dependency linking hook\n  const { isLinkingDependency, linkingFrom, handleLinkZoneClick } = useDependencyLinking();\n  \n  // Get phantom sibling hook\n  const { startPhantom, isPhantomMode } = usePhantomSibling();\n  \n  // Helper to check if entity passes filters\n  const entityPassesFilters = useCallback((entityType: string, entityId: number): boolean => {\n    const activeFilterColumns = Object.keys(customColumnFilters).filter(\n      colId => customColumnFilters[Number(colId)]?.length > 0\n    );\n    \n    if (activeFilterColumns.length === 0) return true;\n    \n    for (const colIdStr of activeFilterColumns) {\n      const colId = Number(colIdStr);\n      const filterValues = customColumnFilters[colId];\n      const valueKey = `${colId}-${entityType}-${entityId}`;\n      const cellValue = customColumnValues[valueKey] ?? null;\n      \n      if (cellValue === null) {\n        if (!filterValues.includes('__empty__')) return false;\n      } else {\n        if (!filterValues.includes(cellValue)) return false;\n      }\n    }\n    return true;\n  }, [customColumnFilters, customColumnValues]);\n  \n  // Check if any descendant subphase matches filters\n  const anyDescendantMatches = useCallback((subphases: Subphase[]): boolean => {\n    for (const sp of subphases) {\n      if (entityPassesFilters('subphase', sp.id)) return true;\n      if (sp.children && sp.children.length > 0) {\n        if (anyDescendantMatches(sp.children)) return true;\n      }\n    }\n    return false;\n  }, [entityPassesFilters]);\n  \n  // Filter phases: show if phase matches OR any descendant matches\n  const visiblePhases = useMemo(() => \n    (project.phases ?? []).filter(phase => \n      entityPassesFilters('phase', phase.id) || \n      anyDescendantMatches(phase.children ?? [])\n    ),\n    [project.phases, entityPassesFilters, anyDescendantMatches]\n  );\n\n  // Calculate project bar position (spanning all phases)\n  const projectBar = useMemo(() => {\n    if (!project.start_date || !project.end_date) {\n      // Calculate from phases\n      let minDate: string | null = null;\n      let maxDate: string | null = null;\n\n      (project.phases ?? []).forEach((phase) => {\n        if (!minDate || phase.start_date < minDate) minDate = phase.start_date;\n        if (!maxDate || phase.end_date > maxDate) maxDate = phase.end_date;\n      });\n\n      if (minDate && maxDate) {\n        return calculateBarPosition(minDate, maxDate, cells, cellWidth, viewMode);\n      }\n      return null;\n    }\n    return calculateBarPosition(project.start_date, project.end_date, cells, cellWidth, viewMode);\n  }, [project, cells, cellWidth, viewMode]);\n\n  // Calculate project completion\n  const completion = useMemo(() => calculateProjectCompletion(project), [project]);\n\n  // Project drag handler\n  const handleProjectDragStart = useCallback((e: React.MouseEvent) => {\n    if (!project.start_date || !project.end_date) {\n      console.warn('Project has no dates, cannot drag');\n      return;\n    }\n    startProjectDrag(e, project.id, project.start_date, project.end_date);\n  }, [startProjectDrag, project.id, project.start_date, project.end_date]);\n\n  // Phase interaction handlers\n  const handlePhaseDragStart = useCallback((e: React.MouseEvent, phase: Phase, element: HTMLElement) => {\n    startPhaseDrag(e, phase.id, project.id, phase.start_date, phase.end_date, phase.is_milestone, element);\n  }, [startPhaseDrag, project.id]);\n\n  const handlePhaseResizeStart = useCallback((e: React.MouseEvent, phase: Phase, edge: 'left' | 'right', element: HTMLElement) => {\n    startPhaseResize(e, phase.id, project.id, edge, phase.start_date, phase.end_date, element);\n  }, [startPhaseResize, project.id]);\n\n  const handlePhaseClick = useCallback((phase: Phase) => {\n    setEditingPhase(phase);\n    openPhaseModal(phase, project.id);\n  }, [setEditingPhase, openPhaseModal, project.id]);\n\n  // Subphase interaction handlers\n  const handleSubphaseDragStart = useCallback((e: React.MouseEvent, subphase: Subphase, phaseId: number, element: HTMLElement) => {\n    startSubphaseDrag(e, subphase.id, project.id, phaseId, subphase.start_date, subphase.end_date, subphase.is_milestone, element);\n  }, [startSubphaseDrag, project.id]);\n\n  const handleSubphaseResizeStart = useCallback((e: React.MouseEvent, subphase: Subphase, edge: 'left' | 'right', element: HTMLElement) => {\n    startSubphaseResize(e, subphase.id, project.id, edge, subphase.start_date, subphase.end_date, element);\n  }, [startSubphaseResize, project.id]);\n\n  const handleSubphaseClick = useCallback((subphase: Subphase, phaseId: number) => {\n    setEditingSubphase(subphase);\n    openSubphaseModal(subphase, phaseId, project.id);\n  }, [setEditingSubphase, openSubphaseModal, project.id]);\n\n  // Staff assignment handlers (project-level)\n  const handleStaffAssignmentDragStart = useCallback((e: React.MouseEvent, assignmentId: number, startDate: string, endDate: string) => {\n    startStaffAssignmentDrag(e, assignmentId, project.id, startDate, endDate);\n  }, [startStaffAssignmentDrag, project.id]);\n\n  const handleStaffAssignmentResizeStart = useCallback((e: React.MouseEvent, assignmentId: number, edge: 'left' | 'right', startDate: string, endDate: string) => {\n    startStaffAssignmentResize(e, assignmentId, project.id, edge, startDate, endDate);\n  }, [startStaffAssignmentResize, project.id]);\n\n  // Equipment assignment handlers (project-level)\n  const handleEquipmentAssignmentDragStart = useCallback((e: React.MouseEvent, assignmentId: number, startDate: string, endDate: string) => {\n    startEquipmentAssignmentDrag(e, assignmentId, project.id, startDate, endDate);\n  }, [startEquipmentAssignmentDrag, project.id]);\n\n  const handleEquipmentAssignmentResizeStart = useCallback((e: React.MouseEvent, assignmentId: number, edge: 'left' | 'right', startDate: string, endDate: string) => {\n    startEquipmentAssignmentResize(e, assignmentId, project.id, edge, startDate, endDate);\n  }, [startEquipmentAssignmentResize, project.id]);\n\n  // Dependency linking handler\n  const handleLinkZone = useCallback((e: React.MouseEvent, itemId: number, itemType: 'phase' | 'subphase', zone: 'start' | 'end') => {\n    handleLinkZoneClick(e, project.id, itemId, itemType, zone);\n  }, [handleLinkZoneClick, project.id]);\n  \n  // Phantom sibling handler\n  const handlePhantomStart = useCallback((itemId: number, itemType: 'phase' | 'subphase', zone: 'start' | 'end') => {\n    // Don't start if already in phantom mode or linking mode\n    if (isPhantomMode || isLinkingDependency) return;\n    \n    startPhantom({\n      projectId: project.id,\n      sourceId: itemId,\n      type: itemType,\n      zone,\n    });\n  }, [startPhantom, project.id, isPhantomMode, isLinkingDependency]);\n\n  // Get linking state for this project\n  const linkingFromId = linkingFrom?.projectId === project.id ? linkingFrom.itemId : null;\n  const linkingFromType = linkingFrom?.projectId === project.id ? linkingFrom.itemType : null;\n\n  return (\n    <>\n      {/* Project row */}\n      <div\n        className={`${styles.row} ${styles.projectRow}`}\n        data-project-id={project.id}\n      >\n        {/* Project bar with confirmed/unconfirmed styling */}\n        {projectBar && (\n          <ProjectBar\n            left={projectBar.left}\n            width={projectBar.width}\n            name={project.name}\n            confirmed={project.confirmed}\n            completion={completion}\n            projectId={project.id}\n            startDate={project.start_date || ''}\n            endDate={project.end_date || ''}\n            onDragStart={handleProjectDragStart}\n          />\n        )}\n      </div>\n\n      {/* Expanded content */}\n      {isExpanded && (\n        <>\n          {/* Phases with phantom row support - filtered */}\n          {visiblePhases.map((phase) => {\n            // Check if this phase is the source for phantom mode\n            const isPhantomSource = phantomSiblingMode?.type === 'phase' && \n              phantomSiblingMode.projectId === project.id &&\n              phantomSiblingMode.sourceId === phase.id;\n            \n            return (\n              <Fragment key={phase.id}>\n                <PhaseTimeline\n                  phase={phase}\n                  projectId={project.id}\n                  cells={cells}\n                  cellWidth={cellWidth}\n                  viewMode={viewMode}\n                  isExpanded={expandedPhases.has(phase.id)}\n                  expandedSubphases={expandedSubphases}\n                  depth={1}\n                  onPhaseDragStart={handlePhaseDragStart}\n                  onPhaseResizeStart={handlePhaseResizeStart}\n                  onPhaseClick={handlePhaseClick}\n                  onSubphaseDragStart={handleSubphaseDragStart}\n                  onSubphaseResizeStart={handleSubphaseResizeStart}\n                  onSubphaseClick={handleSubphaseClick}\n                  onLinkZoneClick={handleLinkZone}\n                  isLinkingDependency={isLinkingDependency}\n                  linkingFromId={linkingFromId}\n                  linkingFromType={linkingFromType}\n                  onPhantomStart={handlePhantomStart}\n                  entityPassesFilters={entityPassesFilters}\n                  anyDescendantMatches={anyDescendantMatches}\n                  showAssignments={showAssignments}\n                  criticalPathItems={projectCriticalItems}\n                />\n                {isPhantomSource && (\n                  <div className={styles.phantomRow} />\n                )}\n              </Fragment>\n            );\n          })}\n\n          {/* Project-level staff assignments (interactive) - filtered by showAssignments */}\n          {showAssignments && (project.staffAssignments ?? []).map((assignment) => (\n            <div key={`staff-${assignment.id}`} className={styles.row}>\n              <AssignmentBar\n                assignmentId={assignment.id}\n                assignmentType=\"staff\"\n                projectId={project.id}\n                startDate={assignment.start_date}\n                endDate={assignment.end_date}\n                cells={cells}\n                cellWidth={cellWidth}\n                viewMode={viewMode}\n                type=\"staff\"\n                name={assignment.staff_name}\n                allocation={assignment.allocation}\n                staffId={assignment.staff_id}\n                interactive={true}\n                onDragStart={(e) => handleStaffAssignmentDragStart(e, assignment.id, assignment.start_date, assignment.end_date)}\n                onResizeStart={(e, edge) => handleStaffAssignmentResizeStart(e, assignment.id, edge, assignment.start_date, assignment.end_date)}\n              />\n            </div>\n          ))}\n\n          {/* Project-level equipment assignments (interactive) - filtered by showAssignments */}\n          {showAssignments && (project.equipmentAssignments ?? []).map((assignment) => (\n            <div key={`equip-${assignment.id}`} className={styles.row}>\n              <AssignmentBar\n                assignmentId={assignment.id}\n                assignmentType=\"equipment\"\n                projectId={project.id}\n                startDate={assignment.start_date}\n                endDate={assignment.end_date}\n                cells={cells}\n                cellWidth={cellWidth}\n                viewMode={viewMode}\n                type=\"equipment\"\n                name={assignment.equipment_name}\n                equipmentId={assignment.equipment_id}\n                interactive={true}\n                onDragStart={(e) => handleEquipmentAssignmentDragStart(e, assignment.id, assignment.start_date, assignment.end_date)}\n                onResizeStart={(e, edge) => handleEquipmentAssignmentResizeStart(e, assignment.id, edge, assignment.start_date, assignment.end_date)}\n              />\n            </div>\n          ))}\n        </>\n      )}\n    </>\n  );\n});\n\n// Phase timeline sub-component\ninterface PhaseTimelineProps {\n  phase: Phase;\n  projectId: number;\n  cells: TimelineCell[];\n  cellWidth: number;\n  viewMode: ViewMode;\n  isExpanded: boolean;\n  expandedSubphases: Set<number>;\n  depth: number;\n  onPhaseDragStart: (e: React.MouseEvent, phase: Phase, element: HTMLElement) => void;\n  onPhaseResizeStart: (e: React.MouseEvent, phase: Phase, edge: 'left' | 'right', element: HTMLElement) => void;\n  onPhaseClick: (phase: Phase) => void;\n  onSubphaseDragStart: (e: React.MouseEvent, subphase: Subphase, phaseId: number, element: HTMLElement) => void;\n  onSubphaseResizeStart: (e: React.MouseEvent, subphase: Subphase, edge: 'left' | 'right', element: HTMLElement) => void;\n  onSubphaseClick: (subphase: Subphase, phaseId: number) => void;\n  // Dependency linking\n  onLinkZoneClick: (e: React.MouseEvent, itemId: number, itemType: 'phase' | 'subphase', zone: 'start' | 'end') => void;\n  isLinkingDependency: boolean;\n  linkingFromId: number | null;\n  linkingFromType: 'phase' | 'subphase' | null;\n  // Phantom sibling\n  onPhantomStart: (itemId: number, itemType: 'phase' | 'subphase', zone: 'start' | 'end') => void;\n  // Filtering\n  entityPassesFilters: (entityType: string, entityId: number) => boolean;\n  anyDescendantMatches: (subphases: Subphase[]) => boolean;\n  showAssignments: boolean;\n  // Critical path\n  criticalPathItems: Set<string>;\n}\n\nconst PhaseTimeline = memo(function PhaseTimeline({\n  phase,\n  projectId,\n  cells,\n  cellWidth,\n  viewMode,\n  isExpanded,\n  expandedSubphases,\n  depth,\n  onPhaseDragStart,\n  onPhaseResizeStart,\n  onPhaseClick,\n  onSubphaseDragStart,\n  onSubphaseResizeStart,\n  onSubphaseClick,\n  onLinkZoneClick,\n  isLinkingDependency,\n  linkingFromId,\n  linkingFromType,\n  onPhantomStart,\n  entityPassesFilters,\n  anyDescendantMatches,\n  showAssignments,\n  criticalPathItems,\n}: PhaseTimelineProps) {\n  // Access phantom mode for subphase phantom rows\n  const phantomSiblingMode = useUIStore((s) => s.phantomSiblingMode);\n  \n  // Access WebSocket context for real-time change indicators\n  const { recentChanges } = useWebSocketContext();\n  \n  // Get changedBy for this phase (if recently changed by another user)\n  const phaseChange = useMemo(() => \n    recentChanges.find(c => c.entity_type === 'phase' && c.entity_id === phase.id),\n    [recentChanges, phase.id]\n  );\n  const changedBy = phaseChange?.user_name ?? null;\n  \n  // Filter subphases: show if subphase matches OR any descendant matches\n  const visibleSubphases = useMemo(() => \n    (phase.children ?? []).filter(sp => \n      entityPassesFilters('subphase', sp.id) || \n      anyDescendantMatches(sp.children ?? [])\n    ),\n    [phase.children, entityPassesFilters, anyDescendantMatches]\n  );\n  \n  const barPosition = useMemo(\n    () => calculateBarPosition(phase.start_date, phase.end_date, cells, cellWidth, viewMode),\n    [phase.start_date, phase.end_date, cells, cellWidth, viewMode]\n  );\n\n  // Calculate completion including children's completion\n  const phaseCompletion = useMemo(\n    () => calculatePhaseCompletion(phase),\n    [phase]\n  );\n\n  const handleDragStart = useCallback((e: React.MouseEvent, element: HTMLElement) => {\n    onPhaseDragStart(e, phase, element);\n  }, [onPhaseDragStart, phase]);\n\n  const handleResizeStart = useCallback((e: React.MouseEvent, edge: 'left' | 'right', element: HTMLElement) => {\n    onPhaseResizeStart(e, phase, edge, element);\n  }, [onPhaseResizeStart, phase]);\n\n  const handleClick = useCallback((e: React.MouseEvent) => {\n    // Only open modal on double-click or if not dragging\n    e.stopPropagation();\n    onPhaseClick(phase);\n  }, [onPhaseClick, phase]);\n\n  const handleLinkClick = useCallback((e: React.MouseEvent, zone: 'start' | 'end') => {\n    onLinkZoneClick(e, phase.id, 'phase', zone);\n  }, [onLinkZoneClick, phase.id]);\n  \n  const handlePhantom = useCallback((zone: 'start' | 'end') => {\n    onPhantomStart(phase.id, 'phase', zone);\n  }, [onPhantomStart, phase.id]);\n\n  const isLinkingSource = isLinkingDependency && linkingFromType === 'phase' && linkingFromId === phase.id;\n\n  return (\n    <>\n      {/* Phase row */}\n      <div className={styles.row} data-phase-id={phase.id}>\n        {barPosition && (\n          <PhaseBar\n            left={barPosition.left}\n            width={barPosition.width}\n            color={phase.color}\n            name={phase.name}\n            isMilestone={Boolean(phase.is_milestone)}\n            completion={phaseCompletion}\n            isCriticalPath={criticalPathItems.has(`phase-${phase.id}`)}\n            changedBy={changedBy}\n            phaseId={phase.id}\n            projectId={projectId}\n            startDate={phase.start_date}\n            endDate={phase.end_date}\n            onDragStart={handleDragStart}\n            onResizeStart={phase.is_milestone ? undefined : handleResizeStart}\n            onClick={handleClick}\n            onLinkZoneClick={handleLinkClick}\n            isLinkingSource={isLinkingSource}\n            isLinkingActive={isLinkingDependency}\n            onPhantomStart={handlePhantom}\n          />\n        )}\n      </div>\n\n      {/* Expanded content */}\n      {isExpanded && (\n        <>\n          {/* Subphases with phantom row support - filtered */}\n          {visibleSubphases.map((subphase: Subphase) => {\n            // Check if this subphase is the source for phantom mode (direct child of this phase)\n            const isPhantomSource = phantomSiblingMode?.type === 'subphase' && \n              phantomSiblingMode.projectId === projectId &&\n              phantomSiblingMode.parentType === 'phase' &&\n              phantomSiblingMode.parentId === phase.id &&\n              phantomSiblingMode.sourceId === subphase.id;\n            \n            return (\n              <Fragment key={subphase.id}>\n                <SubphaseTimeline\n                  subphase={subphase}\n                  phaseId={phase.id}\n                  projectId={projectId}\n                  cells={cells}\n                  cellWidth={cellWidth}\n                  viewMode={viewMode}\n                  isExpanded={expandedSubphases.has(subphase.id)}\n                  expandedSubphases={expandedSubphases}\n                  depth={depth + 1}\n                  onSubphaseDragStart={onSubphaseDragStart}\n                  onSubphaseResizeStart={onSubphaseResizeStart}\n                  onSubphaseClick={onSubphaseClick}\n                  onLinkZoneClick={onLinkZoneClick}\n                  isLinkingDependency={isLinkingDependency}\n                  linkingFromId={linkingFromId}\n                  linkingFromType={linkingFromType}\n                  onPhantomStart={onPhantomStart}\n                  entityPassesFilters={entityPassesFilters}\n                  anyDescendantMatches={anyDescendantMatches}\n                  showAssignments={showAssignments}\n                  criticalPathItems={criticalPathItems}\n                />\n                {isPhantomSource && (\n                  <div className={styles.phantomRow} />\n                )}\n              </Fragment>\n            );\n          })}\n\n          {/* Phase-level assignments - use phase dates since phase assignments don't have their own - filtered */}\n          {showAssignments && (phase.staffAssignments ?? []).map((assignment: any) => (\n            <div key={`staff-${assignment.id}`} className={styles.row}>\n              <AssignmentBar\n                assignmentId={assignment.id}\n                assignmentType=\"staff\"\n                projectId={projectId}\n                phaseId={phase.id}\n                startDate={phase.start_date}\n                endDate={phase.end_date}\n                cells={cells}\n                cellWidth={cellWidth}\n                viewMode={viewMode}\n                type=\"phase-staff\"\n                name={assignment.staff_name}\n                allocation={assignment.allocation}\n                phaseColor={phase.color}\n                staffId={assignment.staff_id}\n              />\n            </div>\n          ))}\n\n          {showAssignments && (phase.equipmentAssignments ?? []).map((assignment: any) => (\n            <div key={`equip-${assignment.id}`} className={styles.row}>\n              <AssignmentBar\n                assignmentId={assignment.id}\n                assignmentType=\"equipment\"\n                projectId={projectId}\n                phaseId={phase.id}\n                startDate={phase.start_date}\n                endDate={phase.end_date}\n                cells={cells}\n                cellWidth={cellWidth}\n                viewMode={viewMode}\n                type=\"equipment\"\n                name={assignment.equipment_name}\n                equipmentId={assignment.equipment_id}\n              />\n            </div>\n          ))}\n        </>\n      )}\n    </>\n  );\n});\n\n// Subphase timeline sub-component\ninterface SubphaseTimelineProps {\n  subphase: Subphase;\n  phaseId: number;\n  projectId: number;\n  cells: TimelineCell[];\n  cellWidth: number;\n  viewMode: ViewMode;\n  isExpanded: boolean;\n  expandedSubphases: Set<number>;\n  depth: number;\n  onSubphaseDragStart: (e: React.MouseEvent, subphase: Subphase, phaseId: number, element: HTMLElement) => void;\n  onSubphaseResizeStart: (e: React.MouseEvent, subphase: Subphase, edge: 'left' | 'right', element: HTMLElement) => void;\n  onSubphaseClick: (subphase: Subphase, phaseId: number) => void;\n  // Dependency linking\n  onLinkZoneClick: (e: React.MouseEvent, itemId: number, itemType: 'phase' | 'subphase', zone: 'start' | 'end') => void;\n  isLinkingDependency: boolean;\n  linkingFromId: number | null;\n  linkingFromType: 'phase' | 'subphase' | null;\n  // Phantom sibling\n  onPhantomStart: (itemId: number, itemType: 'phase' | 'subphase', zone: 'start' | 'end') => void;\n  // Filtering\n  entityPassesFilters: (entityType: string, entityId: number) => boolean;\n  anyDescendantMatches: (subphases: Subphase[]) => boolean;\n  showAssignments: boolean;\n  // Critical path\n  criticalPathItems: Set<string>;\n}\n\nconst SubphaseTimeline = memo(function SubphaseTimeline({\n  subphase,\n  phaseId,\n  projectId,\n  cells,\n  cellWidth,\n  viewMode,\n  isExpanded,\n  expandedSubphases,\n  depth,\n  onSubphaseDragStart,\n  onSubphaseResizeStart,\n  onSubphaseClick,\n  onLinkZoneClick,\n  isLinkingDependency,\n  linkingFromId,\n  linkingFromType,\n  onPhantomStart,\n  entityPassesFilters,\n  anyDescendantMatches,\n  showAssignments,\n  criticalPathItems,\n}: SubphaseTimelineProps) {\n  // Access phantom mode for nested subphase phantom rows\n  const phantomSiblingMode = useUIStore((s) => s.phantomSiblingMode);\n  \n  // Access WebSocket context for real-time change indicators\n  const { recentChanges } = useWebSocketContext();\n  \n  // Get changedBy for this subphase (if recently changed by another user)\n  const subphaseChange = useMemo(() => \n    recentChanges.find(c => c.entity_type === 'subphase' && c.entity_id === subphase.id),\n    [recentChanges, subphase.id]\n  );\n  const changedBy = subphaseChange?.user_name ?? null;\n  \n  // Filter nested subphases: show if matches OR any descendant matches\n  const visibleChildren = useMemo(() => \n    (subphase.children ?? []).filter(sp => \n      entityPassesFilters('subphase', sp.id) || \n      anyDescendantMatches(sp.children ?? [])\n    ),\n    [subphase.children, entityPassesFilters, anyDescendantMatches]\n  );\n  \n  const barPosition = useMemo(\n    () => calculateBarPosition(subphase.start_date, subphase.end_date, cells, cellWidth, viewMode),\n    [subphase.start_date, subphase.end_date, cells, cellWidth, viewMode]\n  );\n\n  // Calculate completion including children's completion\n  const subphaseCompletion = useMemo(\n    () => calculateSubphaseCompletion(subphase),\n    [subphase]\n  );\n\n  const handleDragStart = useCallback((e: React.MouseEvent, element: HTMLElement) => {\n    onSubphaseDragStart(e, subphase, phaseId, element);\n  }, [onSubphaseDragStart, subphase, phaseId]);\n\n  const handleResizeStart = useCallback((e: React.MouseEvent, edge: 'left' | 'right', element: HTMLElement) => {\n    onSubphaseResizeStart(e, subphase, edge, element);\n  }, [onSubphaseResizeStart, subphase]);\n\n  const handleClick = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    onSubphaseClick(subphase, phaseId);\n  }, [onSubphaseClick, subphase, phaseId]);\n\n  const handleLinkClick = useCallback((e: React.MouseEvent, zone: 'start' | 'end') => {\n    onLinkZoneClick(e, subphase.id, 'subphase', zone);\n  }, [onLinkZoneClick, subphase.id]);\n  \n  const handlePhantom = useCallback((zone: 'start' | 'end') => {\n    onPhantomStart(subphase.id, 'subphase', zone);\n  }, [onPhantomStart, subphase.id]);\n\n  const isLinkingSource = isLinkingDependency && linkingFromType === 'subphase' && linkingFromId === subphase.id;\n\n  return (\n    <>\n      {/* Subphase row */}\n      <div className={styles.row} data-subphase-id={subphase.id}>\n        {barPosition && (\n          <PhaseBar\n            left={barPosition.left}\n            width={barPosition.width}\n            color={subphase.color}\n            name={subphase.name}\n            isSubphase\n            isMilestone={Boolean(subphase.is_milestone)}\n            completion={subphaseCompletion}\n            isCriticalPath={criticalPathItems.has(`subphase-${subphase.id}`)}\n            changedBy={changedBy}\n            phaseId={subphase.id}\n            projectId={projectId}\n            startDate={subphase.start_date}\n            endDate={subphase.end_date}\n            onDragStart={handleDragStart}\n            onResizeStart={subphase.is_milestone ? undefined : handleResizeStart}\n            onClick={handleClick}\n            onLinkZoneClick={handleLinkClick}\n            isLinkingSource={isLinkingSource}\n            isLinkingActive={isLinkingDependency}\n            onPhantomStart={handlePhantom}\n          />\n        )}\n      </div>\n\n      {/* Expanded content */}\n      {isExpanded && (\n        <>\n          {/* Nested subphases with phantom row support - filtered */}\n          {visibleChildren.map((child: Subphase) => {\n            // Check if this child subphase is the source for phantom mode\n            const isPhantomSource = phantomSiblingMode?.type === 'subphase' && \n              phantomSiblingMode.projectId === projectId &&\n              phantomSiblingMode.sourceId === child.id;\n            \n            return (\n              <Fragment key={child.id}>\n                <SubphaseTimeline\n                  subphase={child}\n                  phaseId={phaseId}\n                  projectId={projectId}\n                  cells={cells}\n                  cellWidth={cellWidth}\n                  viewMode={viewMode}\n                  isExpanded={expandedSubphases.has(child.id)}\n                  expandedSubphases={expandedSubphases}\n                  depth={depth + 1}\n                  onSubphaseDragStart={onSubphaseDragStart}\n                  onSubphaseResizeStart={onSubphaseResizeStart}\n                  onSubphaseClick={onSubphaseClick}\n                  onLinkZoneClick={onLinkZoneClick}\n                  isLinkingDependency={isLinkingDependency}\n                  linkingFromId={linkingFromId}\n                  linkingFromType={linkingFromType}\n                  onPhantomStart={onPhantomStart}\n                  entityPassesFilters={entityPassesFilters}\n                  anyDescendantMatches={anyDescendantMatches}\n                  showAssignments={showAssignments}\n                  criticalPathItems={criticalPathItems}\n                />\n                {isPhantomSource && (\n                  <div className={styles.phantomRow} />\n                )}\n              </Fragment>\n            );\n          })}\n\n          {/* Subphase-level assignments - use subphase dates - filtered */}\n          {showAssignments && (subphase.staffAssignments ?? []).map((assignment: any) => (\n            <div key={`staff-${assignment.id}`} className={styles.row}>\n              <AssignmentBar\n                assignmentId={assignment.id}\n                assignmentType=\"staff\"\n                projectId={projectId}\n                phaseId={phaseId}\n                subphaseId={subphase.id}\n                startDate={subphase.start_date}\n                endDate={subphase.end_date}\n                cells={cells}\n                cellWidth={cellWidth}\n                viewMode={viewMode}\n                type=\"subphase-staff\"\n                name={assignment.staff_name}\n                allocation={assignment.allocation}\n                phaseColor={subphase.color}\n                staffId={assignment.staff_id}\n              />\n            </div>\n          ))}\n\n          {showAssignments && (subphase.equipmentAssignments ?? []).map((assignment: any) => (\n            <div key={`equip-${assignment.id}`} className={styles.row}>\n              <AssignmentBar\n                assignmentId={assignment.id}\n                assignmentType=\"equipment\"\n                projectId={projectId}\n                phaseId={phaseId}\n                subphaseId={subphase.id}\n                startDate={subphase.start_date}\n                endDate={subphase.end_date}\n                cells={cells}\n                cellWidth={cellWidth}\n                viewMode={viewMode}\n                type=\"equipment\"\n                name={assignment.equipment_name}\n                equipmentId={assignment.equipment_id}\n              />\n            </div>\n          ))}\n        </>\n      )}\n    </>\n  );\n});\n\n// Assignment bar sub-component\ninterface AssignmentBarProps {\n  assignmentId: number;\n  assignmentType: 'staff' | 'equipment';\n  projectId: number;  // Add projectId for context\n  phaseId?: number;   // Add phaseId for context  \n  subphaseId?: number; // Add subphaseId for context\n  startDate: string;\n  endDate: string;\n  cells: TimelineCell[];\n  cellWidth: number;\n  viewMode: ViewMode;\n  type: 'staff' | 'equipment' | 'phase-staff' | 'subphase-staff';\n  name?: string;\n  allocation?: number;\n  phaseColor?: string;\n  staffId?: number;  // For looking up vacations\n  equipmentId?: number; // For equipment assignments\n  // Interaction handlers (optional - only for project-level assignments)\n  onDragStart?: (e: React.MouseEvent) => void;\n  onResizeStart?: (e: React.MouseEvent, edge: 'left' | 'right') => void;\n  interactive?: boolean;\n}\n\nconst AssignmentBar = memo(function AssignmentBar({\n  assignmentId,\n  assignmentType,\n  projectId: _projectId,\n  phaseId: _phaseId,\n  subphaseId: _subphaseId,\n  startDate,\n  endDate,\n  cells,\n  cellWidth,\n  viewMode,\n  type,\n  name,\n  allocation,\n  phaseColor,\n  staffId,\n  equipmentId: _equipmentId,\n  onDragStart,\n  onResizeStart,\n  interactive = false,\n}: AssignmentBarProps) {\n  // Get vacations from store to show vacation indicators\n  const vacations = useAppStore((s) => s.vacations);\n  \n  const barPosition = useMemo(\n    () => calculateBarPosition(startDate, endDate, cells, cellWidth, viewMode),\n    [startDate, endDate, cells, cellWidth, viewMode]\n  );\n\n  // Calculate vacation cell markers for this staff member across the entire visible timeline\n  const vacationCellMarkers = useMemo(() => {\n    if (!staffId || assignmentType !== 'staff') return [];\n    \n    // Filter out recurring vacations - only show regular (non-recurring) vacations\n    const staffVacations = vacations.filter(v => {\n      if (v.staff_id !== staffId) return false;\n      // Skip recurring vacations\n      if (parseRecurringPattern(v.description)) return false;\n      return true;\n    });\n    if (staffVacations.length === 0) return [];\n    \n    const markers: Array<{ left: number; width: number; title: string }> = [];\n    \n    // Check each cell to see if it falls within a vacation period\n    cells.forEach((cell, index) => {\n      const cellDate = new Date(cell.date);\n      const cellEnd = new Date(cellDate);\n      cellEnd.setDate(cellEnd.getDate() + 1);\n      \n      // Check if any vacation overlaps with this cell\n      const overlappingVacation = staffVacations.find(v => {\n        const vacStart = new Date(v.start_date);\n        const vacEnd = new Date(v.end_date);\n        vacEnd.setDate(vacEnd.getDate() + 1); // Make end date inclusive\n        return vacStart < cellEnd && vacEnd > cellDate;\n      });\n      \n      if (overlappingVacation) {\n        // Check if we can merge with the previous marker\n        const lastMarker = markers[markers.length - 1];\n        const cellLeft = index * cellWidth;\n        \n        if (lastMarker && lastMarker.left + lastMarker.width === cellLeft && lastMarker.title === (overlappingVacation.description || 'Vacation')) {\n          // Extend the previous marker\n          lastMarker.width += cellWidth;\n        } else {\n          // Create a new marker\n          markers.push({\n            left: cellLeft,\n            width: cellWidth,\n            title: overlappingVacation.description || 'Vacation',\n          });\n        }\n      }\n    });\n    \n    return markers;\n  }, [staffId, assignmentType, vacations, cells, cellWidth]);\n\n  if (!barPosition) return null;\n\n  // Determine class and style based on type\n  const isPhaseStaff = type === 'phase-staff';\n  const isSubphaseStaff = type === 'subphase-staff';\n  const barType = (type === 'phase-staff' || type === 'subphase-staff') ? 'staff' : type;\n  \n  const barStyle: React.CSSProperties = {\n    left: barPosition.left,\n    width: barPosition.width,\n  };\n  \n  // Phase staff uses phase color with dashed border and reduced opacity\n  if (isPhaseStaff) {\n    barStyle.opacity = 0.7;\n    if (phaseColor) {\n      barStyle.background = phaseColor;\n    }\n    barStyle.border = '1px dashed rgba(255,255,255,0.4)';\n  }\n  \n  // Subphase staff is more transparent and smaller\n  if (isSubphaseStaff) {\n    barStyle.opacity = 0.7;\n    barStyle.height = '14px';\n    if (phaseColor) {\n      barStyle.background = phaseColor;\n    }\n  }\n\n  // Build label: \"Name (allocation%)\" for staff, just \"Name\" for equipment\n  const label = name \n    ? (allocation ? `${name} (${allocation}%)` : name)\n    : (allocation ? `${allocation}%` : '');\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    // Check if clicking on resize handle\n    const target = e.target as HTMLElement;\n    if (target.classList.contains('resize-handle')) return;\n    \n    if (onDragStart) {\n      onDragStart(e);\n    }\n  };\n\n  const handleResizeMouseDown = (e: React.MouseEvent, edge: 'left' | 'right') => {\n    e.stopPropagation();\n    if (onResizeStart) {\n      onResizeStart(e, edge);\n    }\n  };\n\n  return (\n    <>\n      {/* Vacation cell markers - purple background strips across the row */}\n      {vacationCellMarkers.map((marker, idx) => (\n        <div\n          key={`vac-${idx}`}\n          className={styles.vacationCellMarker}\n          style={{\n            left: marker.left,\n            width: marker.width,\n          }}\n          title={marker.title}\n        />\n      ))}\n      \n      {/* Assignment bar */}\n      <div\n        className={`${styles.assignmentBar} ${styles[barType]} ${isPhaseStaff ? styles.phaseStaff : ''} ${isSubphaseStaff ? styles.subphaseStaff : ''} ${interactive ? styles.interactive : ''}`}\n        style={barStyle}\n        title={label}\n        data-assignment-id={assignmentId}\n        data-assignment-type={assignmentType}\n        data-start={startDate}\n        data-end={endDate}\n        onMouseDown={interactive ? handleMouseDown : undefined}\n      >\n        {/* Left resize handle */}\n        {interactive && (\n          <div\n            className={`${styles.resizeHandle} ${styles.left} resize-handle`}\n            onMouseDown={(e) => handleResizeMouseDown(e, 'left')}\n          />\n        )}\n        \n        <span className={styles.barLabel}>{label}</span>\n        \n        {/* Right resize handle */}\n        {interactive && (\n          <div\n            className={`${styles.resizeHandle} ${styles.right} resize-handle`}\n            onMouseDown={(e) => handleResizeMouseDown(e, 'right')}\n          />\n        )}\n      </div>\n    </>\n  );\n});\n","/**\n * TodayLine\n * Visual indicator for the current date\n */\n\nimport { memo } from 'react';\nimport styles from './TodayLine.module.css';\n\ninterface TodayLineProps {\n  position: number;\n}\n\nexport const TodayLine = memo(function TodayLine({ position }: TodayLineProps) {\n  return (\n    <div className={styles.line} style={{ left: position }}>\n      <div className={styles.marker} />\n    </div>\n  );\n});\n","/**\n * DependencyPopup\n * Popup for viewing or deleting a dependency\n * Shows on click of a dependency arrow\n */\n\nimport { memo, useCallback, useEffect, useRef } from 'react';\nimport styles from './DependencyPopup.module.css';\nimport type { DependencyType } from '@/types';\n\ninterface DependencyPopupProps {\n  visible: boolean;\n  x: number;\n  y: number;\n  dependencyType: DependencyType;\n  fromName: string;\n  toName: string;\n  onClose: () => void;\n  onDelete: () => void;\n}\n\nconst DEPENDENCY_TYPE_LABELS: Record<DependencyType, string> = {\n  FS: 'Finish-to-Start',\n  SS: 'Start-to-Start',\n  FF: 'Finish-to-Finish',\n  SF: 'Start-to-Finish',\n};\n\nexport const DependencyPopup = memo(function DependencyPopup({\n  visible,\n  x,\n  y,\n  dependencyType,\n  fromName,\n  toName,\n  onClose,\n  onDelete,\n}: DependencyPopupProps) {\n  const popupRef = useRef<HTMLDivElement>(null);\n\n  // Close on click outside\n  useEffect(() => {\n    if (!visible) return;\n\n    const handleClickOutside = (e: MouseEvent) => {\n      if (popupRef.current && !popupRef.current.contains(e.target as Node)) {\n        onClose();\n      }\n    };\n\n    // Delay to prevent immediate close from the click that opened it\n    const timeoutId = setTimeout(() => {\n      document.addEventListener('mousedown', handleClickOutside);\n    }, 100);\n\n    return () => {\n      clearTimeout(timeoutId);\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [visible, onClose]);\n\n  // Close on Escape\n  useEffect(() => {\n    if (!visible) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [visible, onClose]);\n\n  const handleDelete = useCallback(() => {\n    if (confirm(`Remove this ${dependencyType} dependency?`)) {\n      onDelete();\n    }\n  }, [dependencyType, onDelete]);\n\n  if (!visible) return null;\n\n  // Adjust position to keep popup in viewport\n  const adjustedX = Math.min(x, window.innerWidth - 250);\n  const adjustedY = Math.min(y, window.innerHeight - 180);\n\n  return (\n    <div\n      ref={popupRef}\n      className={styles.popup}\n      style={{\n        left: adjustedX,\n        top: adjustedY,\n      }}\n    >\n      <div className={styles.header}>\n        <span className={styles.typeLabel}>{DEPENDENCY_TYPE_LABELS[dependencyType]}</span>\n        <button className={styles.closeButton} onClick={onClose} title=\"Close\">\n          \n        </button>\n      </div>\n\n      <div className={styles.content}>\n        <div className={styles.connection}>\n          <span className={styles.fromTo}>From:</span>\n          <span className={styles.name}>{fromName}</span>\n        </div>\n        <div className={styles.connection}>\n          <span className={styles.fromTo}>To:</span>\n          <span className={styles.name}>{toName}</span>\n        </div>\n      </div>\n\n      <div className={styles.footer}>\n        <button className={styles.deleteButton} onClick={handleDelete}>\n          Delete Dependency\n        </button>\n      </div>\n    </div>\n  );\n});\n","/**\n * DependencyLayer\n * SVG overlay that renders dependency arrows between phases/subphases\n */\n\nimport { memo, useMemo, useEffect, useState, useRef, useCallback } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { \n  extractDependencies, \n  calculateDependencyPath, \n  getDependencyEdges,\n  DEPENDENCY_STYLES \n} from '../utils/dependencies';\nimport { calculateBarPosition } from '../utils/timeline';\nimport { getPhaseColor } from '@/utils/themeColors';\nimport type { TimelineCell } from '../utils/timeline';\nimport type { Project, DependencyType } from '@/types';\nimport { DependencyPopup } from './DependencyPopup';\nimport { updatePhase, updateSubphase, loadAllProjects } from '@/api/endpoints/projects';\nimport styles from './DependencyLayer.module.css';\n\ninterface DependencyLayerProps {\n  projects: Project[];\n  cells: TimelineCell[];\n  cellWidth: number;\n  rowPositions: Map<string, { top: number; height: number }>;\n}\n\ninterface SelectedDependency {\n  id: string;\n  type: DependencyType;\n  fromId: number;\n  toId: number;\n  fromType: 'phase' | 'subphase';\n  toType: 'phase' | 'subphase';\n  projectId: number;\n  fromName: string;\n  toName: string;\n  x: number;\n  y: number;\n}\n\nexport const DependencyLayer = memo(function DependencyLayer({\n  projects,\n  cells,\n  cellWidth,\n  rowPositions,\n}: DependencyLayerProps) {\n  // Get viewMode and setProjects from store\n  const viewMode = useAppStore((s) => s.viewMode);\n  const setProjects = useAppStore((s) => s.setProjects);\n  const showAssignments = useAppStore((s) => s.showAssignments);\n  const customColumnFilters = useAppStore((s) => s.customColumnFilters);\n  \n  // Get drag state to re-measure after drag ends\n  const isDragging = useUIStore((s) => s.isDragging);\n  \n  // Ref to measure actual DOM positions\n  const containerRef = useRef<SVGSVGElement>(null);\n  const [domPositions, setDomPositions] = useState<Map<string, { top: number; height: number }>>(new Map());\n  // Counter to force re-measurement during drag\n  const [measureCounter, setMeasureCounter] = useState(0);\n  \n  // Selected dependency for popup\n  const [selectedDep, setSelectedDep] = useState<SelectedDependency | null>(null);\n  \n  // Force re-measurement during drag with throttling\n  useEffect(() => {\n    if (!isDragging) return;\n    \n    // Throttle measurements to ~30fps during drag\n    const intervalId = setInterval(() => {\n      setMeasureCounter(c => c + 1);\n    }, 33);\n    \n    return () => clearInterval(intervalId);\n  }, [isDragging]);\n  \n  // Measure actual DOM positions after render\n  useEffect(() => {\n    // Use RAF to ensure DOM has fully rendered\n    const rafId = requestAnimationFrame(() => {\n      if (!containerRef.current) return;\n      \n      // Find the rows container (sibling of this SVG)\n      const rowsContainer = containerRef.current.parentElement?.querySelector('[class*=\"rows\"]');\n      if (!rowsContainer) return;\n      \n      const newPositions = new Map<string, { top: number; height: number }>();\n      \n      // Find all phase and subphase rows by data attribute\n      const phaseRows = rowsContainer.querySelectorAll('[data-phase-id]');\n      phaseRows.forEach((row) => {\n        const phaseId = row.getAttribute('data-phase-id');\n        if (phaseId) {\n          const rect = row.getBoundingClientRect();\n          const containerRect = rowsContainer.getBoundingClientRect();\n          newPositions.set(`phase-${phaseId}`, {\n            top: rect.top - containerRect.top,\n            height: rect.height,\n          });\n        }\n      });\n      \n      const subphaseRows = rowsContainer.querySelectorAll('[data-subphase-id]');\n      subphaseRows.forEach((row) => {\n        const subphaseId = row.getAttribute('data-subphase-id');\n        if (subphaseId) {\n          const rect = row.getBoundingClientRect();\n          const containerRect = rowsContainer.getBoundingClientRect();\n          newPositions.set(`subphase-${subphaseId}`, {\n            top: rect.top - containerRect.top,\n            height: rect.height,\n          });\n        }\n      });\n      \n      setDomPositions(newPositions);\n    });\n    \n    return () => cancelAnimationFrame(rafId);\n  }, [projects, rowPositions, showAssignments, customColumnFilters, isDragging, measureCounter]); // Re-measure when drag ends or measureCounter changes\n  \n  // Use DOM positions if available, fall back to calculated\n  const effectivePositions = domPositions.size > 0 ? domPositions : rowPositions;\n  \n  // Extract all dependencies from projects\n  const dependencies = useMemo(\n    () => extractDependencies(projects),\n    [projects]\n  );\n\n  // Calculate visible dependencies (only show if both source and target are visible)\n  const visibleDependencies = useMemo(() => {\n    return dependencies.filter((dep) => {\n      // Check if source is visible\n      const sourceKey = `${dep.fromType}-${dep.fromId}`;\n      const targetKey = `${dep.toType}-${dep.toId}`;\n      \n      // Both must have positions (meaning they're rendered)\n      return rowPositions.has(sourceKey) && rowPositions.has(targetKey);\n    });\n  }, [dependencies, rowPositions]);\n\n  // Build a map of phase/subphase to their dates and color for position calculation\n  const itemDatesMap = useMemo(() => {\n    const map = new Map<string, { start_date: string; end_date: string; color: string }>();\n    \n    projects.forEach((project) => {\n      // Add phases\n      (project.phases ?? []).forEach((phase) => {\n        map.set(`phase-${phase.id}`, { \n          start_date: phase.start_date, \n          end_date: phase.end_date,\n          color: phase.color\n        });\n        \n        // Add subphases recursively\n        const addSubphases = (subphases: typeof phase.children, parentColor: string) => {\n          (subphases ?? []).forEach((sp) => {\n            map.set(`subphase-${sp.id}`, { \n              start_date: sp.start_date, \n              end_date: sp.end_date,\n              color: sp.color || parentColor\n            });\n            if (sp.children?.length) {\n              addSubphases(sp.children, sp.color || parentColor);\n            }\n          });\n        };\n        addSubphases(phase.children, phase.color);\n      });\n    });\n    \n    return map;\n  }, [projects]);\n\n  // Calculate arrow paths\n  const arrowPaths = useMemo(() => {\n    return visibleDependencies.map((dep) => {\n      const sourceKey = `${dep.fromType}-${dep.fromId}`;\n      const targetKey = `${dep.toType}-${dep.toId}`;\n      \n      // Use DOM-measured positions if available\n      const sourcePos = effectivePositions.get(sourceKey);\n      const targetPos = effectivePositions.get(targetKey);\n      const sourceDates = itemDatesMap.get(sourceKey);\n      const targetDates = itemDatesMap.get(targetKey);\n      \n      if (!sourcePos || !targetPos || !sourceDates || !targetDates) {\n        return null;\n      }\n\n      // Calculate bar positions\n      const sourceBar = calculateBarPosition(\n        sourceDates.start_date,\n        sourceDates.end_date,\n        cells,\n        cellWidth,\n        viewMode\n      );\n      const targetBar = calculateBarPosition(\n        targetDates.start_date,\n        targetDates.end_date,\n        cells,\n        cellWidth,\n        viewMode\n      );\n\n      if (!sourceBar || !targetBar) {\n        return null;\n      }\n\n      // Get which edges to use based on dependency type\n      const { sourceEdge, targetEdge } = getDependencyEdges(dep.type);\n\n      // Calculate X positions\n      const fromX = sourceEdge === 'start' ? sourceBar.left : sourceBar.left + sourceBar.width;\n      const toX = targetEdge === 'start' ? targetBar.left : targetBar.left + targetBar.width;\n\n      // Calculate Y positions (center of the row)\n      const fromY = sourcePos.top + sourcePos.height / 2;\n      const toY = targetPos.top + targetPos.height / 2;\n\n      // Calculate the path\n      const path = calculateDependencyPath(fromX, fromY, toX, toY, dep.type);\n\n      return {\n        ...dep,\n        path,\n        fromX,\n        fromY,\n        toX,\n        toY,\n        sourceColor: sourceDates.color,\n      };\n    }).filter((x): x is NonNullable<typeof x> & { sourceColor: string } => x !== null);\n  }, [visibleDependencies, effectivePositions, itemDatesMap, cells, cellWidth, viewMode]);\n\n  // Build a map of item names for the popup\n  const itemNamesMap = useMemo(() => {\n    const map = new Map<string, string>();\n    \n    projects.forEach((project) => {\n      (project.phases ?? []).forEach((phase) => {\n        map.set(`phase-${phase.id}`, phase.name);\n        \n        const addSubphaseNames = (subphases: typeof phase.children) => {\n          (subphases ?? []).forEach((sp) => {\n            map.set(`subphase-${sp.id}`, sp.name);\n            if (sp.children?.length) {\n              addSubphaseNames(sp.children);\n            }\n          });\n        };\n        addSubphaseNames(phase.children);\n      });\n    });\n    \n    return map;\n  }, [projects]);\n\n  // Handle arrow click\n  const handleArrowClick = useCallback((\n    e: React.MouseEvent,\n    arrow: typeof arrowPaths[0]\n  ) => {\n    if (!arrow) return;\n    \n    const fromName = itemNamesMap.get(`${arrow.fromType}-${arrow.fromId}`) || 'Unknown';\n    const toName = itemNamesMap.get(`${arrow.toType}-${arrow.toId}`) || 'Unknown';\n    \n    setSelectedDep({\n      id: arrow.id,\n      type: arrow.type,\n      fromId: arrow.fromId,\n      toId: arrow.toId,\n      fromType: arrow.fromType,\n      toType: arrow.toType,\n      projectId: arrow.projectId,\n      fromName,\n      toName,\n      x: e.clientX,\n      y: e.clientY,\n    });\n  }, [itemNamesMap]);\n\n  // Close popup\n  const handleClosePopup = useCallback(() => {\n    setSelectedDep(null);\n  }, []);\n\n  // Delete dependency\n  const handleDeleteDependency = useCallback(async () => {\n    if (!selectedDep) return;\n    \n    try {\n      // Find the target item and remove the dependency\n      const updatedProjects = projects.map(project => {\n        if (project.id !== selectedDep.projectId) return project;\n\n        if (selectedDep.toType === 'phase') {\n          return {\n            ...project,\n            phases: (project.phases ?? []).map(phase => {\n              if (phase.id !== selectedDep.toId) return phase;\n              \n              const newDeps = (phase.dependencies ?? []).filter(\n                d => !(d.id === selectedDep.fromId && d.type === selectedDep.type)\n              );\n              return { ...phase, dependencies: newDeps };\n            })\n          };\n        } else {\n          // Update subphase recursively\n          const updateSubphaseInTree = (subphases: any[]): any[] => {\n            return subphases.map(sp => {\n              if (sp.id === selectedDep.toId) {\n                const newDeps = (sp.dependencies ?? []).filter(\n                  (d: any) => !(d.id === selectedDep.fromId && d.type === selectedDep.type)\n                );\n                return { ...sp, dependencies: newDeps };\n              }\n              if (sp.children?.length) {\n                return { ...sp, children: updateSubphaseInTree(sp.children) };\n              }\n              return sp;\n            });\n          };\n\n          return {\n            ...project,\n            phases: (project.phases ?? []).map(phase => ({\n              ...phase,\n              children: updateSubphaseInTree(phase.children ?? [])\n            }))\n          };\n        }\n      });\n\n      // Optimistic update\n      setProjects(updatedProjects);\n      setSelectedDep(null);\n\n      // Find the target item to get its current data for the API call\n      const targetProject = projects.find(p => p.id === selectedDep.projectId);\n      if (!targetProject) return;\n\n      if (selectedDep.toType === 'phase') {\n        const targetPhase = (targetProject.phases ?? []).find(p => p.id === selectedDep.toId);\n        if (targetPhase) {\n          const newDeps = (targetPhase.dependencies ?? []).filter(\n            d => !(d.id === selectedDep.fromId && d.type === selectedDep.type)\n          );\n          await updatePhase(selectedDep.toId, {\n            start_date: targetPhase.start_date,\n            end_date: targetPhase.end_date,\n            dependencies: newDeps,\n          });\n        }\n      } else {\n        // Find subphase\n        const findSubphase = (subphases: any[]): any | null => {\n          for (const sp of subphases) {\n            if (sp.id === selectedDep.toId) return sp;\n            if (sp.children?.length) {\n              const found = findSubphase(sp.children);\n              if (found) return found;\n            }\n          }\n          return null;\n        };\n\n        let targetSubphase: any = null;\n        for (const phase of targetProject.phases ?? []) {\n          targetSubphase = findSubphase(phase.children ?? []);\n          if (targetSubphase) break;\n        }\n\n        if (targetSubphase) {\n          const newDeps = (targetSubphase.dependencies ?? []).filter(\n            (d: any) => !(d.id === selectedDep.fromId && d.type === selectedDep.type)\n          );\n          await updateSubphase(selectedDep.toId, {\n            start_date: targetSubphase.start_date,\n            end_date: targetSubphase.end_date,\n            dependencies: newDeps,\n          });\n        }\n      }\n    } catch (err) {\n      console.error('Failed to delete dependency:', err);\n      // Reload on error\n      const reloadedProjects = await loadAllProjects();\n      setProjects(reloadedProjects);\n    }\n  }, [selectedDep, projects, setProjects]);\n\n  // Always render the SVG to allow DOM measurement, but hide if no arrows\n  return (\n    <>\n      <svg ref={containerRef} className={styles.layer} style={arrowPaths.length === 0 ? { display: 'none' } : undefined}>\n        {/* Render dependency arrows */}\n        {arrowPaths.map((arrow) => {\n          if (!arrow) return null;\n          \n          const style = DEPENDENCY_STYLES[arrow.type];\n          const color = arrow.sourceColor || getPhaseColor();\n          // Create unique marker ID for this color\n          const markerId = `arrow-${arrow.id}`;\n\n          return (\n            <g key={arrow.id} className={styles.dependency}>\n              {/* Dynamic marker for this arrow */}\n              <defs>\n                <marker\n                  id={markerId}\n                  markerWidth=\"6\"\n                  markerHeight=\"5\"\n                  refX=\"5\"\n                  refY=\"2.5\"\n                  orient=\"auto\"\n                  markerUnits=\"strokeWidth\"\n                >\n                  <polygon points=\"0 0, 6 2.5, 0 5\" fill={color} />\n                </marker>\n              </defs>\n              <path\n                d={arrow.path}\n                stroke={color}\n                strokeWidth=\"1.5\"\n                fill=\"none\"\n                strokeLinejoin=\"round\"\n                strokeLinecap=\"round\"\n                strokeDasharray={style.dashArray}\n                markerEnd={`url(#${markerId})`}\n                className={styles.arrow}\n              />\n              {/* Invisible wider path for easier clicking */}\n              <path\n                d={arrow.path}\n                stroke=\"transparent\"\n                strokeWidth=\"10\"\n                fill=\"none\"\n                className={styles.hitArea}\n                data-dependency-id={arrow.id}\n                onClick={(e) => handleArrowClick(e, arrow)}\n              />\n            </g>\n          );\n        })}\n      </svg>\n      \n      {/* Dependency popup */}\n      <DependencyPopup\n        visible={selectedDep !== null}\n        x={selectedDep?.x ?? 0}\n        y={selectedDep?.y ?? 0}\n        dependencyType={selectedDep?.type ?? 'FS'}\n        fromName={selectedDep?.fromName ?? ''}\n        toName={selectedDep?.toName ?? ''}\n        onClose={handleClosePopup}\n        onDelete={handleDeleteDependency}\n      />\n    </>\n  );\n});\n","/**\n * DragIndicator\n * Shows real-time feedback during drag and resize operations\n * - During drag: shows days lag/lead relative to dependencies\n * - During resize: shows new date and duration\n * \n * Positioned absolutely within the timeline body, above the bar being manipulated\n */\n\nimport { memo } from 'react';\nimport styles from './DragIndicator.module.css';\n\ninterface DragIndicatorProps {\n  visible: boolean;\n  left: number;       // Position from left of timeline body\n  top: number;        // Position from top of timeline body\n  type: 'drag' | 'resize';\n  // For drag - lag indicator\n  lagDays?: number;\n  // For resize - date and duration\n  date?: string;\n  duration?: number;\n  edge?: 'left' | 'right';\n}\n\n// Format date for display using browser locale\nfunction formatDisplayDate(dateStr: string): string {\n  const date = new Date(dateStr);\n  return date.toLocaleDateString(undefined, {\n    day: 'numeric',\n    month: 'short',\n    year: 'numeric',\n  });\n}\n\nexport const DragIndicator = memo(function DragIndicator({\n  visible,\n  left,\n  top,\n  type,\n  lagDays,\n  date,\n  duration,\n  edge,\n}: DragIndicatorProps) {\n  if (!visible) return null;\n\n  if (type === 'drag' && lagDays !== undefined) {\n    // Lag indicator during drag\n    const isPositive = lagDays >= 0;\n    const lagText = isPositive ? `+${lagDays}d` : `${lagDays}d`;\n    \n    return (\n      <div \n        className={`${styles.lagIndicator} ${isPositive ? styles.positive : styles.negative}`}\n        style={{ left, top }}\n      >\n        {lagText}\n      </div>\n    );\n  }\n\n  if (type === 'resize' && date) {\n    // Resize indicator - transform based on edge\n    const transform = edge === 'left' ? 'translateX(-100%)' : 'translateX(0)';\n    \n    return (\n      <div \n        className={styles.resizeIndicator}\n        style={{ left, top, transform }}\n      >\n        <span className={styles.duration}>{duration}d</span>\n        <span className={styles.date}>{formatDisplayDate(date)}</span>\n      </div>\n    );\n  }\n\n  return null;\n});\n","/**\n * PhantomOverlay\n * \n * Overlay component for phantom sibling mode visualization.\n * Renders the phantom row, bar, arrow, and lag indicator.\n * Handles mouse tracking for bar position updates.\n */\n\nimport { useEffect, useCallback, useState, useMemo } from 'react';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { usePhantomSibling } from '@/hooks/usePhantomSibling';\nimport { calculateBarPosition, type TimelineCell } from '@/components/gantt/utils';\nimport type { ViewMode, Phase, Subphase } from '@/types';\nimport { format, addDays, differenceInDays } from 'date-fns';\nimport styles from './PhantomOverlay.module.css';\n\ninterface PhantomOverlayProps {\n  cells: TimelineCell[];\n  cellWidth: number;\n  viewMode: ViewMode;\n  timelineRef: React.RefObject<HTMLDivElement>;\n  containerWidth: number;\n  containerHeight: number;\n  phantomRowTop?: number; // Calculated position for the phantom row\n}\n\n// Helper to find phase/subphase position in the timeline\nfunction findSourceBarPosition(\n  sourceId: number,\n  sourceType: 'phase' | 'subphase',\n  timelineEl: HTMLElement\n): { left: number; width: number; top: number; height: number } | null {\n  const dataAttr = sourceType === 'phase' ? 'data-phase-id' : 'data-subphase-id';\n  const barRow = timelineEl.querySelector(`[${dataAttr}=\"${sourceId}\"]`) as HTMLElement | null;\n  if (!barRow) return null;\n\n  // Look for regular bar or milestone\n  const bar = barRow.querySelector('[class*=\"phaseBar\"], [class*=\"bar\"], [class*=\"milestone\"]') as HTMLElement;\n  if (!bar) return null;\n\n  // Get position relative to timeline container\n  const barRect = bar.getBoundingClientRect();\n  const containerRect = timelineEl.getBoundingClientRect();\n\n  return {\n    left: barRect.left - containerRect.left + timelineEl.scrollLeft,\n    width: barRect.width,\n    top: barRow.offsetTop,\n    height: barRow.clientHeight || 32,\n  };\n}\n\n// Helper to find subphase by ID\nfunction findSubphaseById(phases: Phase[], subphaseId: number): Subphase | null {\n  for (const phase of phases) {\n    const found = findSubphaseInChildren(phase.children || [], subphaseId);\n    if (found) return found;\n  }\n  return null;\n}\n\nfunction findSubphaseInChildren(children: Subphase[], targetId: number): Subphase | null {\n  for (const child of children) {\n    if (child.id === targetId) return child;\n    if (child.children && child.children.length > 0) {\n      const found = findSubphaseInChildren(child.children, targetId);\n      if (found) return found;\n    }\n  }\n  return null;\n}\n\n// Parse date string\nfunction parseDate(dateStr: string): Date {\n  const cleanDate = dateStr.split('T')[0];\n  return new Date(cleanDate + 'T12:00:00');\n}\n\nexport function PhantomOverlay({\n  cells,\n  cellWidth,\n  viewMode,\n  timelineRef,\n  containerWidth,\n  containerHeight,\n  phantomRowTop: calculatedPhantomRowTop,\n}: PhantomOverlayProps) {\n  const phantomSiblingMode = useUIStore((s) => s.phantomSiblingMode);\n  const updatePhantomPosition = useUIStore((s) => s.updatePhantomPosition);\n  const projects = useAppStore((s) => s.projects);\n  const { completePhantom } = usePhantomSibling();\n\n  // Track source bar position (state for reactivity)\n  const [sourceBar, setSourceBar] = useState<{ left: number; width: number; top: number; height: number } | null>(null);\n\n  // Update source bar position when phantom mode changes\n  useEffect(() => {\n    if (!phantomSiblingMode || !timelineRef.current) {\n      setSourceBar(null);\n      return;\n    }\n\n    const { sourceId, type } = phantomSiblingMode;\n    \n    // Small delay to let DOM update after collapse\n    const updatePosition = () => {\n      if (timelineRef.current) {\n        const pos = findSourceBarPosition(sourceId, type, timelineRef.current);\n        setSourceBar(pos);\n      }\n    };\n    \n    // Update after a frame to ensure DOM is ready\n    const rafId = requestAnimationFrame(() => {\n      updatePosition();\n      // And again to be safe\n      requestAnimationFrame(updatePosition);\n    });\n    \n    return () => cancelAnimationFrame(rafId);\n  }, [phantomSiblingMode, timelineRef]);\n\n  // Mouse move handler\n  const handleMouseMove = useCallback(\n    (e: MouseEvent) => {\n      if (!phantomSiblingMode || !timelineRef.current) return;\n\n      const { siblingDurationDays } = phantomSiblingMode;\n      const timelineRect = timelineRef.current.getBoundingClientRect();\n      const scrollLeft = timelineRef.current.scrollLeft;\n\n      // Calculate position relative to timeline content\n      const relativeX = e.clientX - timelineRect.left + scrollLeft;\n\n      if (cells.length === 0) return;\n\n      // Get timeline date range\n      const firstCellDate = new Date(cells[0].date);\n      firstCellDate.setHours(0, 0, 0, 0);\n\n      const lastCell = cells[cells.length - 1];\n      const lastCellDate = new Date(lastCell.date);\n      lastCellDate.setHours(23, 59, 59, 999);\n\n      const totalWidth = cells.length * cellWidth;\n      const totalMs = lastCellDate.getTime() - firstCellDate.getTime();\n      const msPerPixel = totalMs / totalWidth;\n\n      // Calculate duration in pixels\n      const durationMs = (siblingDurationDays - 1) * 24 * 60 * 60 * 1000;\n      const halfDurationPx = durationMs / msPerPixel / 2;\n\n      // Calculate bar left position (centered on cursor)\n      const barLeftPx = relativeX - halfDurationPx;\n      const clampedBarLeft = Math.max(0, Math.min(barLeftPx, totalWidth - (durationMs / msPerPixel)));\n\n      // Calculate start date from pixel position\n      const startMs = firstCellDate.getTime() + clampedBarLeft * msPerPixel;\n      const startDate = new Date(startMs);\n      startDate.setHours(0, 0, 0, 0);\n\n      const endDate = addDays(startDate, siblingDurationDays - 1);\n\n      // Update state\n      updatePhantomPosition(format(startDate, 'yyyy-MM-dd'), format(endDate, 'yyyy-MM-dd'));\n    },\n    [phantomSiblingMode, timelineRef, cells, cellWidth, updatePhantomPosition]\n  );\n\n  // Click handler to complete phantom\n  const handleClick = useCallback(\n    (e: MouseEvent) => {\n      if (!phantomSiblingMode) return;\n\n      // Check if click is on phantom elements\n      const target = e.target as HTMLElement;\n      const isPhantomClick =\n        target.closest(`.${styles.phantomRow}`) ||\n        target.closest(`.${styles.phantomBar}`);\n\n      if (isPhantomClick) {\n        e.preventDefault();\n        e.stopPropagation();\n        completePhantom();\n      }\n    },\n    [phantomSiblingMode, completePhantom]\n  );\n\n  // Set up event listeners\n  useEffect(() => {\n    if (!phantomSiblingMode || !timelineRef.current) return;\n\n    const timeline = timelineRef.current;\n    timeline.addEventListener('mousemove', handleMouseMove);\n    timeline.addEventListener('click', handleClick, true);\n\n    return () => {\n      timeline.removeEventListener('mousemove', handleMouseMove);\n      timeline.removeEventListener('click', handleClick, true);\n    };\n  }, [phantomSiblingMode, handleMouseMove, handleClick, timelineRef]);\n\n  // Calculate bar and lag info\n  const phantomData = useMemo(() => {\n    if (!phantomSiblingMode) return null;\n\n    const { phantomStart, phantomEnd, phantomColor, type, dependencyType, sourceId, projectId } =\n      phantomSiblingMode;\n\n    // Calculate bar position\n    const barPosition = calculateBarPosition(phantomStart, phantomEnd, cells, cellWidth, viewMode);\n    if (!barPosition) return null;\n\n    // Find source item to calculate lag\n    const project = projects.find((p) => p.id === projectId);\n    if (!project) return null;\n\n    let sourceItem: Phase | Subphase | undefined;\n    if (type === 'phase') {\n      sourceItem = (project.phases || []).find((p) => p.id === sourceId);\n    } else {\n      sourceItem = findSubphaseById(project.phases || [], sourceId) || undefined;\n    }\n\n    if (!sourceItem) return null;\n\n    // Calculate lag\n    const newStart = parseDate(phantomStart);\n    const sourceStart = parseDate(sourceItem.start_date);\n    const sourceEnd = parseDate(sourceItem.end_date);\n\n    let lagDays: number;\n    if (dependencyType === 'SS') {\n      lagDays = differenceInDays(newStart, sourceStart);\n    } else {\n      const expectedStart = addDays(sourceEnd, 1);\n      lagDays = differenceInDays(newStart, expectedStart);\n    }\n\n    return {\n      barPosition,\n      phantomColor,\n      type,\n      dependencyType,\n      lagDays,\n      sourceBar,\n    };\n  }, [phantomSiblingMode, cells, cellWidth, viewMode, projects, sourceBar]);\n\n  if (!phantomSiblingMode || !phantomData) return null;\n  \n  // Don't render until we have source bar position\n  if (!phantomData.sourceBar) return null;\n\n  const { barPosition, phantomColor, type, dependencyType, lagDays, sourceBar: sourceBarPos } = phantomData;\n  const lagText = lagDays >= 0 ? `+${lagDays}d` : `${lagDays}d`;\n\n  // Use calculated phantom row position if available, otherwise fall back to source position\n  const phantomRowTop = calculatedPhantomRowTop ?? (sourceBarPos.top + sourceBarPos.height);\n  const phantomBarHeight = 24;\n  const phantomBarTop = phantomRowTop + (32 - phantomBarHeight) / 2;\n\n  return (\n    <div className={styles.overlay}>\n      {/* Phantom row background */}\n      <div\n        className={styles.phantomRow}\n        style={{\n          top: phantomRowTop,\n          width: containerWidth,\n        }}\n        onClick={(e) => {\n          e.stopPropagation();\n          completePhantom();\n        }}\n      />\n\n      {/* Phantom bar */}\n      <div\n        className={styles.phantomBar}\n        style={{\n          left: barPosition.left,\n          top: phantomBarTop,\n          width: barPosition.width,\n          height: phantomBarHeight,\n          backgroundColor: `${phantomColor}80`,\n          borderColor: phantomColor,\n        }}\n        onClick={(e) => {\n          e.stopPropagation();\n          completePhantom();\n        }}\n      >\n        <span className={styles.barLabel}>\n          New {type === 'phase' ? 'Phase' : 'Subphase'}\n        </span>\n      </div>\n\n      {/* Lag indicator */}\n      <div\n        className={`${styles.indicator} ${lagDays >= 0 ? styles.positive : styles.negative}`}\n        style={{\n          left: barPosition.left + barPosition.width / 2,\n          top: phantomRowTop - 28,\n          borderColor: phantomColor,\n        }}\n      >\n        <span className={styles.lag}>{lagText}</span>\n        <span className={styles.depType}>{dependencyType}</span>\n      </div>\n\n      {/* Phantom arrow */}\n      <svg\n        className={styles.arrowSvg}\n        width={containerWidth}\n        height={containerHeight}\n      >\n        <defs>\n          <marker\n            id=\"phantomArrowhead\"\n            markerWidth=\"8\"\n            markerHeight=\"6\"\n            refX=\"7\"\n            refY=\"3\"\n            orient=\"auto\"\n            markerUnits=\"strokeWidth\"\n          >\n            <path d=\"M0,0 L0,6 L8,3 z\" fill={phantomColor} />\n          </marker>\n        </defs>\n        <path\n          d={createArrowPath(\n            sourceBarPos,\n            { left: barPosition.left, top: phantomBarTop + phantomBarHeight / 2 },\n            dependencyType\n          )}\n            stroke={phantomColor}\n            strokeWidth=\"2\"\n            fill=\"none\"\n            strokeDasharray=\"5,3\"\n            markerEnd=\"url(#phantomArrowhead)\"\n            opacity=\"0.8\"\n          />\n        </svg>\n    </div>\n  );\n}\n\n/**\n * Create SVG path for the arrow\n */\nfunction createArrowPath(\n  sourceBar: { left: number; width: number; top: number; height: number },\n  target: { left: number; top: number },\n  depType: 'SS' | 'FS'\n): string {\n  const minHorizontal = 15;\n  const sourceY = sourceBar.top + sourceBar.height / 2;\n\n  let fromX: number;\n  if (depType === 'SS') {\n    fromX = sourceBar.left;\n  } else {\n    fromX = sourceBar.left + sourceBar.width;\n  }\n\n  const toX = target.left;\n  const toY = target.top;\n\n  if (depType === 'SS') {\n    const goLeftX = Math.min(fromX, toX) - minHorizontal;\n    return `M${fromX},${sourceY} H${goLeftX} V${toY} H${toX}`;\n  } else {\n    if (toX > fromX + minHorizontal) {\n      const midX = fromX + (toX - fromX) / 2;\n      return `M${fromX},${sourceY} H${midX} V${toY} H${toX}`;\n    } else {\n      const goRightX = fromX + minHorizontal;\n      const goAroundY = Math.max(sourceY, toY) + 20;\n      return `M${fromX},${sourceY} H${goRightX} V${goAroundY} H${toX - minHorizontal} V${toY} H${toX}`;\n    }\n  }\n}\n\nexport default PhantomOverlay;\n","/**\n * ResourceDropOverlay\n * \n * Overlay shown when dragging resources from ResourcePanel.\n * Shows drop zones and preview bar for assignment creation.\n * Uses HTML5 drag events for proper drag-drop handling.\n */\n\nimport { useCallback, useMemo, useEffect, useState, useRef } from 'react';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { createStaffAssignment, createEquipmentAssignment, loadAllProjects } from '@/api/endpoints/projects';\nimport { format, addDays } from 'date-fns';\nimport type { TimelineCell } from '../utils';\nimport type { Project } from '@/types';\nimport styles from './ResourceDropOverlay.module.css';\n\ninterface ResourceDropOverlayProps {\n  projects: Project[];\n  cells: TimelineCell[];\n  cellWidth: number;\n  totalWidth: number;\n  containerRef: React.RefObject<HTMLDivElement>;\n  rowPositions: Map<string, { top: number; height: number }>;\n}\n\nconst DEFAULT_DURATION_DAYS = 5;\n\nexport function ResourceDropOverlay({\n  projects,\n  cells,\n  cellWidth,\n  totalWidth,\n  containerRef,\n  rowPositions,\n}: ResourceDropOverlayProps) {\n  const resourceDrag = useUIStore((s) => s.resourceDrag);\n  const endResourceDrag = useUIStore((s) => s.endResourceDrag);\n  const setProjects = useAppStore((s) => s.setProjects);\n  const staff = useAppStore((s) => s.staff);\n  const ensureProjectExpanded = useAppStore((s) => s.ensureProjectExpanded);\n  const ensurePhaseExpanded = useAppStore((s) => s.ensurePhaseExpanded);\n  const ensureSubphaseExpanded = useAppStore((s) => s.ensureSubphaseExpanded);\n  const overlayRef = useRef<HTMLDivElement>(null);\n  \n  // Track position for preview bar\n  const [mouseX, setMouseX] = useState<number | null>(null);\n  const [hoveredTarget, setHoveredTarget] = useState<{\n    projectId: number;\n    phaseId: number | null;\n    subphaseId: number | null;\n    rowKey: string;\n  } | null>(null);\n\n  /**\n   * Get the default allocation for a staff member (their max_capacity or 100)\n   */\n  const getStaffDefaultAllocation = useCallback((staffId: number): number => {\n    const staffMember = staff.find(s => s.id === staffId);\n    return staffMember?.max_capacity ?? 100;\n  }, [staff]);\n\n  // Handle cancel\n  const handleCancel = useCallback(() => {\n    endResourceDrag();\n    document.body.classList.remove('resource-dragging');\n  }, [endResourceDrag]);\n\n  // Listen for Escape key\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        handleCancel();\n      }\n    };\n    \n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [handleCancel]);\n\n  // Calculate date from X position\n  const getDateFromX = useCallback((x: number): string => {\n    if (cells.length === 0) return format(new Date(), 'yyyy-MM-dd');\n    const cellIndex = Math.floor(x / cellWidth);\n    const clampedIndex = Math.max(0, Math.min(cellIndex, cells.length - 1));\n    return cells[clampedIndex]?.dateStr || format(new Date(), 'yyyy-MM-dd');\n  }, [cells, cellWidth]);\n\n  // Find target row from Y position\n  const findTargetFromY = useCallback((y: number): typeof hoveredTarget => {\n    for (const project of projects) {\n      const projectKey = `project-${project.id}`;\n      const projectPos = rowPositions.get(projectKey);\n      \n      if (projectPos && y >= projectPos.top && y < projectPos.top + projectPos.height) {\n        return {\n          projectId: project.id,\n          phaseId: null,\n          subphaseId: null,\n          rowKey: projectKey,\n        };\n      }\n\n      // Check phase rows\n      for (const phase of project.phases || []) {\n        const phaseKey = `phase-${phase.id}`;\n        const phasePos = rowPositions.get(phaseKey);\n        \n        if (phasePos && y >= phasePos.top && y < phasePos.top + phasePos.height) {\n          return {\n            projectId: project.id,\n            phaseId: phase.id,\n            subphaseId: null,\n            rowKey: phaseKey,\n          };\n        }\n\n        // Check subphase rows (recursive)\n        const checkSubphases = (subphases: typeof phase.children, parentPhaseId: number): typeof hoveredTarget => {\n          for (const sp of subphases || []) {\n            const spKey = `subphase-${sp.id}`;\n            const spPos = rowPositions.get(spKey);\n            \n            if (spPos && y >= spPos.top && y < spPos.top + spPos.height) {\n              return {\n                projectId: project.id,\n                phaseId: parentPhaseId,\n                subphaseId: sp.id,\n                rowKey: spKey,\n              };\n            }\n            \n            if (sp.children?.length) {\n              const result = checkSubphases(sp.children, parentPhaseId);\n              if (result) return result;\n            }\n          }\n          return null;\n        };\n        \n        const subphaseTarget = checkSubphases(phase.children, phase.id);\n        if (subphaseTarget) return subphaseTarget;\n      }\n    }\n    return null;\n  }, [projects, rowPositions]);\n\n  // Update position from event coordinates\n  const updatePositionFromEvent = useCallback((clientX: number, clientY: number) => {\n    if (!containerRef.current) return;\n    \n    const rect = containerRef.current.getBoundingClientRect();\n    const scrollLeft = containerRef.current.scrollLeft || 0;\n    const scrollTop = containerRef.current.scrollTop || 0;\n    \n    const x = clientX - rect.left + scrollLeft;\n    const y = clientY - rect.top + scrollTop;\n    \n    setMouseX(x);\n    setHoveredTarget(findTargetFromY(y));\n  }, [containerRef, findTargetFromY]);\n\n  // Handle drag over - required for drop to work\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    e.dataTransfer.dropEffect = 'copy';\n    updatePositionFromEvent(e.clientX, e.clientY);\n  }, [updatePositionFromEvent]);\n\n  // Handle drop - create the assignment\n  const handleDrop = useCallback(async (e: React.DragEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    if (!hoveredTarget || !resourceDrag.resourceId || mouseX === null) {\n      endResourceDrag();\n      document.body.classList.remove('resource-dragging');\n      return;\n    }\n\n    const startDate = getDateFromX(mouseX - (cellWidth * DEFAULT_DURATION_DAYS) / 2);\n    const endDate = format(addDays(new Date(startDate), DEFAULT_DURATION_DAYS - 1), 'yyyy-MM-dd');\n\n    // Determine the assignment target level\n    const isProjectLevel = !hoveredTarget.phaseId && !hoveredTarget.subphaseId;\n    const isPhaseLevel = hoveredTarget.phaseId && !hoveredTarget.subphaseId;\n    const isSubphaseLevel = !!hoveredTarget.subphaseId;\n\n    try {\n      if (resourceDrag.type === 'staff') {\n        // Use staff's max_capacity as default allocation\n        const allocation = getStaffDefaultAllocation(resourceDrag.resourceId);\n        await createStaffAssignment({\n          staff_id: resourceDrag.resourceId,\n          allocation,\n          start_date: startDate,\n          end_date: endDate,\n          // Always pass project_id for all levels\n          project_id: hoveredTarget.projectId,\n          phase_id: isPhaseLevel ? hoveredTarget.phaseId! : undefined,\n          subphase_id: isSubphaseLevel ? hoveredTarget.subphaseId! : undefined,\n        });\n      } else if (resourceDrag.type === 'equipment') {\n        await createEquipmentAssignment({\n          equipment_id: resourceDrag.resourceId,\n          start_date: startDate,\n          end_date: endDate,\n          // Always pass project_id for all levels\n          project_id: hoveredTarget.projectId,\n          phase_id: isPhaseLevel ? hoveredTarget.phaseId! : undefined,\n          subphase_id: isSubphaseLevel ? hoveredTarget.subphaseId! : undefined,\n        });\n      }\n\n      // Auto-expand the target to show the new assignment\n      if (isProjectLevel) {\n        ensureProjectExpanded(hoveredTarget.projectId);\n      } else if (isPhaseLevel && hoveredTarget.phaseId) {\n        ensureProjectExpanded(hoveredTarget.projectId);\n        ensurePhaseExpanded(hoveredTarget.phaseId);\n      } else if (isSubphaseLevel && hoveredTarget.subphaseId) {\n        ensureProjectExpanded(hoveredTarget.projectId);\n        if (hoveredTarget.phaseId) ensurePhaseExpanded(hoveredTarget.phaseId);\n        ensureSubphaseExpanded(hoveredTarget.subphaseId);\n      }\n\n      // Reload projects\n      const updatedProjects = await loadAllProjects();\n      setProjects(updatedProjects);\n    } catch (error) {\n      console.error('Failed to create assignment:', error);\n    } finally {\n      endResourceDrag();\n      document.body.classList.remove('resource-dragging');\n    }\n  }, [hoveredTarget, resourceDrag, mouseX, cellWidth, getDateFromX, endResourceDrag, setProjects, ensureProjectExpanded, ensurePhaseExpanded, ensureSubphaseExpanded, getStaffDefaultAllocation]);\n\n  // Handle drag leave - clean up when leaving\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    // Only handle if actually leaving the overlay\n    const relatedTarget = e.relatedTarget as HTMLElement;\n    if (overlayRef.current && !overlayRef.current.contains(relatedTarget)) {\n      setHoveredTarget(null);\n      setMouseX(null);\n    }\n  }, []);\n\n  // Calculate preview bar position\n  const previewBar = useMemo(() => {\n    if (!hoveredTarget || mouseX === null) return null;\n    \n    const rowPos = rowPositions.get(hoveredTarget.rowKey);\n    if (!rowPos) return null;\n\n    const barWidth = cellWidth * DEFAULT_DURATION_DAYS;\n    const barLeft = mouseX - barWidth / 2;\n    const barTop = rowPos.top + (rowPos.height - 20) / 2;\n\n    return {\n      left: Math.max(0, barLeft),\n      top: barTop,\n      width: barWidth,\n      height: 20,\n    };\n  }, [hoveredTarget, mouseX, cellWidth, rowPositions]);\n\n  // Only render when resource drag is active\n  if (!resourceDrag.active) return null;\n\n  return (\n    <div \n      ref={overlayRef}\n      className={styles.overlay}\n      onDragOver={handleDragOver}\n      onDrop={handleDrop}\n      onDragLeave={handleDragLeave}\n    >\n      {/* Drop zone highlights */}\n      {hoveredTarget && (\n        <div\n          className={styles.dropZone}\n          style={{\n            top: rowPositions.get(hoveredTarget.rowKey)?.top || 0,\n            height: rowPositions.get(hoveredTarget.rowKey)?.height || 32,\n            width: totalWidth,\n          }}\n        />\n      )}\n\n      {/* Preview bar */}\n      {previewBar && (\n        <div\n          className={`${styles.previewBar} ${resourceDrag.type === 'staff' ? styles.staff : styles.equipment}`}\n          style={{\n            left: previewBar.left,\n            top: previewBar.top,\n            width: previewBar.width,\n            height: previewBar.height,\n          }}\n        >\n          <span className={styles.previewLabel}>\n            {resourceDrag.resourceName} ({DEFAULT_DURATION_DAYS}d{resourceDrag.type === 'staff' && resourceDrag.resourceId ? `, ${getStaffDefaultAllocation(resourceDrag.resourceId)}%` : ''})\n          </span>\n        </div>\n      )}\n\n      {/* Instructions */}\n      <div className={styles.instructions}>\n        <span>Drop to place {resourceDrag.type === 'staff' ? 'staff' : 'equipment'} assignment</span>\n        <span className={styles.hint}>Press Esc to cancel</span>\n      </div>\n    </div>\n  );\n}\n","/**\n * TimelineBody\n * Contains the timeline grid and project bars\n */\n\nimport { forwardRef, useMemo, useRef, useCallback } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { ProjectTimeline } from './ProjectTimeline';\nimport { TodayLine } from './TodayLine';\nimport { DependencyLayer } from './DependencyLayer';\nimport { DragIndicator } from './DragIndicator';\nimport { PhantomOverlay } from './PhantomOverlay';\nimport { ResourceDropOverlay } from './ResourceDropOverlay';\nimport { calculateTodayPosition, calculateRowPositions } from '../utils';\nimport type { TimelineCell } from '../utils';\nimport type { Project, ViewMode, Subphase } from '@/types';\nimport styles from './TimelineBody.module.css';\n\ninterface TimelineBodyProps {\n  cells: TimelineCell[];\n  projects: Project[];\n  cellWidth: number;\n  totalWidth: number;\n  viewMode: ViewMode;\n}\n\nexport const TimelineBody = forwardRef<HTMLDivElement, TimelineBodyProps>(\n  function TimelineBody({ cells, projects, cellWidth, totalWidth, viewMode }, ref) {\n    const expandedProjects = useAppStore((s) => s.expandedProjects);\n    const expandedPhases = useAppStore((s) => s.expandedPhases);\n    const expandedSubphases = useAppStore((s) => s.expandedSubphases);\n    const showAssignments = useAppStore((s) => s.showAssignments);\n    const customColumnFilters = useAppStore((s) => s.customColumnFilters);\n    const customColumnValues = useAppStore((s) => s.customColumnValues);\n    const dragIndicator = useUIStore((s) => s.dragIndicator);\n    const phantomSiblingMode = useUIStore((s) => s.phantomSiblingMode);\n    const resourceDrag = useUIStore((s) => s.resourceDrag);\n    \n    // Internal ref for phantom overlay mouse tracking\n    const internalRef = useRef<HTMLDivElement>(null);\n    \n    // Combine refs - use callback ref pattern\n    const setRefs = (element: HTMLDivElement | null) => {\n      (internalRef as React.MutableRefObject<HTMLDivElement | null>).current = element;\n      if (typeof ref === 'function') {\n        ref(element);\n      } else if (ref) {\n        (ref as React.MutableRefObject<HTMLDivElement | null>).current = element;\n      }\n    };\n\n    // Calculate today line position\n    const todayPosition = useMemo(\n      () => calculateTodayPosition(cells, cellWidth),\n      [cells, cellWidth]\n    );\n    \n    // Filter functions for row position calculation\n    const entityPassesFilters = useCallback((entityType: 'phase' | 'subphase', entityId: number): boolean => {\n      const activeFilterColumns = Object.keys(customColumnFilters).filter(\n        colId => customColumnFilters[Number(colId)]?.length > 0\n      );\n      \n      if (activeFilterColumns.length === 0) return true;\n      \n      for (const colIdStr of activeFilterColumns) {\n        const colId = Number(colIdStr);\n        const filterValues = customColumnFilters[colId];\n        const valueKey = `${colId}-${entityType}-${entityId}`;\n        const cellValue = customColumnValues[valueKey] ?? null;\n        \n        if (cellValue === null) {\n          if (!filterValues.includes('__empty__')) return false;\n        } else {\n          if (!filterValues.includes(cellValue)) return false;\n        }\n      }\n      return true;\n    }, [customColumnFilters, customColumnValues]);\n    \n    const anyDescendantMatches = useCallback((subphases: Subphase[]): boolean => {\n      for (const sp of subphases) {\n        if (entityPassesFilters('subphase', sp.id)) return true;\n        if (sp.children && sp.children.length > 0) {\n          if (anyDescendantMatches(sp.children)) return true;\n        }\n      }\n      return false;\n    }, [entityPassesFilters]);\n\n    // Calculate row positions for dependency arrows (includes phantom row if active)\n    const phantomConfig = phantomSiblingMode ? {\n      projectId: phantomSiblingMode.projectId,\n      sourceId: phantomSiblingMode.sourceId,\n      type: phantomSiblingMode.type,\n      parentId: phantomSiblingMode.parentId,\n      parentType: phantomSiblingMode.parentType,\n    } : null;\n    \n    // Check if any filters are active\n    const hasActiveFilters = Object.keys(customColumnFilters).some(\n      colId => customColumnFilters[Number(colId)]?.length > 0\n    );\n    \n    const rowPositions = useMemo(\n      () => calculateRowPositions(\n        projects, \n        expandedProjects, \n        expandedPhases, \n        expandedSubphases, \n        phantomConfig,\n        showAssignments,\n        hasActiveFilters ? entityPassesFilters : undefined,\n        hasActiveFilters ? anyDescendantMatches : undefined\n      ),\n      [projects, expandedProjects, expandedPhases, expandedSubphases, phantomConfig, showAssignments, hasActiveFilters, entityPassesFilters, anyDescendantMatches]\n    );\n\n    // Only show weekend/holiday highlighting for week and month views\n    const showHighlighting = viewMode === 'week' || viewMode === 'month';\n    \n    // Calculate container dimensions for phantom overlay\n    const containerHeight = rowPositions.totalHeight + 100; // Add some padding\n\n    // Handle drag over for resource drop - MUST preventDefault to allow drop\n    const handleDragOver = useCallback((e: React.DragEvent) => {\n      // Check if this is a resource drag (has our data type)\n      if (e.dataTransfer.types.includes('application/json') || resourceDrag.active) {\n        e.preventDefault();\n        e.dataTransfer.dropEffect = 'copy';\n      }\n    }, [resourceDrag.active]);\n\n    // Handle drag enter\n    const handleDragEnter = useCallback((e: React.DragEvent) => {\n      if (e.dataTransfer.types.includes('application/json') || resourceDrag.active) {\n        e.preventDefault();\n      }\n    }, [resourceDrag.active]);\n\n    return (\n      <div ref={setRefs} className={styles.body}>\n        <div \n          className={`${styles.content} ${resourceDrag.active ? styles.dropTarget : ''}`}\n          style={{ \n            width: totalWidth,\n            '--cell-width': `${cellWidth}px`\n          } as React.CSSProperties}\n          onDragOver={handleDragOver}\n          onDragEnter={handleDragEnter}\n        >\n          {/* Grid background with CSS gradient + special cell markers */}\n          <div className={styles.grid}>\n            {/* Weekend markers */}\n            {showHighlighting && cells.map((cell, index) => \n              cell.isWeekend ? (\n                <div\n                  key={`weekend-${index}`}\n                  className={`${styles.gridCell} ${styles.weekend}`}\n                  style={{ left: index * cellWidth, width: cellWidth }}\n                />\n              ) : null\n            )}\n            \n            {/* Bank holiday background markers (orange - same for custom and public) */}\n            {showHighlighting && cells.map((cell, index) => \n              cell.isBankHoliday ? (\n                <div\n                  key={`holiday-bg-${index}`}\n                  className={`${styles.gridCell} ${styles.holiday}`}\n                  style={{ left: index * cellWidth, width: cellWidth }}\n                />\n              ) : null\n            )}\n            \n            {/* Company event background markers (red) */}\n            {showHighlighting && cells.map((cell, index) => \n              cell.isCompanyEvent ? (\n                <div\n                  key={`event-bg-${index}`}\n                  className={`${styles.gridCell} ${styles.companyEvent}`}\n                  style={{ left: index * cellWidth, width: cellWidth }}\n                />\n              ) : null\n            )}\n          </div>\n\n          {/* Today line */}\n          {todayPosition !== null && <TodayLine position={todayPosition} />}\n\n          {/* Project rows */}\n          <div className={styles.rows}>\n            {projects.map((project) => (\n              <ProjectTimeline\n                key={project.id}\n                project={project}\n                cells={cells}\n                cellWidth={cellWidth}\n                isExpanded={expandedProjects.has(project.id)}\n                expandedPhases={expandedPhases}\n                expandedSubphases={expandedSubphases}\n              />\n            ))}\n          </div>\n          \n          {/* Holiday/Event tooltip layer - top strip only, doesn't block bars */}\n          {showHighlighting && (\n            <div className={styles.tooltipLayer}>\n              {cells.map((cell, index) => {\n                // Priority: bank holidays first, then company events\n                if (cell.isBankHoliday) {\n                  return (\n                    <div\n                      key={`tooltip-${index}`}\n                      className={`${styles.tooltipCell} ${styles.holiday}`}\n                      style={{ left: index * cellWidth, width: cellWidth }}\n                      data-tooltip={cell.bankHolidayName || 'Holiday'}\n                    />\n                  );\n                }\n                if (cell.isCompanyEvent) {\n                  return (\n                    <div\n                      key={`tooltip-${index}`}\n                      className={`${styles.tooltipCell} ${styles.event}`}\n                      style={{ left: index * cellWidth, width: cellWidth }}\n                      data-tooltip={cell.companyEventName || 'Company Event'}\n                    />\n                  );\n                }\n                return null;\n              })}\n            </div>\n          )}\n\n          {/* Dependency arrows overlay */}\n          <DependencyLayer\n            projects={projects}\n            cells={cells}\n            cellWidth={cellWidth}\n            rowPositions={rowPositions.positions}\n          />\n          \n          {/* Phantom sibling mode overlay */}\n          {phantomSiblingMode && (\n            <PhantomOverlay\n              cells={cells}\n              cellWidth={cellWidth}\n              viewMode={viewMode}\n              timelineRef={internalRef}\n              containerWidth={totalWidth}\n              containerHeight={containerHeight}\n              phantomRowTop={rowPositions.phantomRowTop}\n            />\n          )}\n          \n          {/* Drag/Resize indicator */}\n          <DragIndicator\n            visible={dragIndicator.visible}\n            left={dragIndicator.left}\n            top={dragIndicator.top}\n            type={dragIndicator.type}\n            lagDays={dragIndicator.lagDays}\n            date={dragIndicator.date}\n            duration={dragIndicator.duration}\n            edge={dragIndicator.edge}\n          />\n          \n          {/* Resource drag-drop overlay */}\n          {resourceDrag.active && (\n            <ResourceDropOverlay\n              projects={projects}\n              cells={cells}\n              cellWidth={cellWidth}\n              totalWidth={totalWidth}\n              containerRef={internalRef}\n              rowPositions={rowPositions.positions}\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n);\n","/**\n * TimelineScrollContext\n * \n * Provides synchronized horizontal scrolling between multiple timeline components\n * (e.g., Gantt chart and Staff Overview).\n * \n * Uses direct DOM manipulation for smooth, lag-free synchronization.\n */\n\nimport { createContext, useContext, useCallback, useRef, useEffect, type ReactNode } from 'react';\n\ninterface TimelineScrollContextValue {\n  registerScrollContainer: (id: string, ref: React.RefObject<HTMLDivElement>) => void;\n  unregisterScrollContainer: (id: string) => void;\n  syncScroll: (sourceId: string, scrollLeft: number) => void;\n  getScrollLeft: () => number;\n}\n\nconst TimelineScrollContext = createContext<TimelineScrollContextValue | null>(null);\n\ninterface TimelineScrollProviderProps {\n  children: ReactNode;\n}\n\nexport function TimelineScrollProvider({ children }: TimelineScrollProviderProps) {\n  const containersRef = useRef<Map<string, React.RefObject<HTMLDivElement>>>(new Map());\n  const lastScrollLeftRef = useRef(0);\n  const scrollSourceRef = useRef<string | null>(null);\n  const scrollTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  // Register a scroll container\n  const registerScrollContainer = useCallback((id: string, ref: React.RefObject<HTMLDivElement>) => {\n    containersRef.current.set(id, ref);\n    \n    // Use requestAnimationFrame to ensure DOM is ready\n    requestAnimationFrame(() => {\n      // If this is a new container and we have existing ones, sync from the first one\n      if (containersRef.current.size > 1 && ref.current) {\n        // Find another container to sync from\n        for (const [otherId, otherRef] of containersRef.current) {\n          if (otherId !== id && otherRef.current) {\n            const scrollLeft = otherRef.current.scrollLeft;\n            if (scrollLeft > 0) {\n              lastScrollLeftRef.current = scrollLeft;\n              ref.current.scrollLeft = scrollLeft;\n            }\n            break;\n          }\n        }\n      } else if (ref.current && lastScrollLeftRef.current > 0) {\n        // Sync new container to stored scroll position\n        ref.current.scrollLeft = lastScrollLeftRef.current;\n      }\n    });\n  }, []);\n\n  // Unregister a scroll container\n  const unregisterScrollContainer = useCallback((id: string) => {\n    containersRef.current.delete(id);\n  }, []);\n\n  // Sync all containers to a scroll position (called by source container)\n  const syncScroll = useCallback((sourceId: string, scrollLeft: number) => {\n    // If we're currently syncing from a different source, ignore\n    // This prevents feedback loops\n    if (scrollSourceRef.current && scrollSourceRef.current !== sourceId) {\n      return;\n    }\n    \n    // Mark this container as the scroll source\n    scrollSourceRef.current = sourceId;\n    lastScrollLeftRef.current = scrollLeft;\n\n    // Sync all other containers directly via DOM\n    containersRef.current.forEach((ref, id) => {\n      if (id !== sourceId && ref.current) {\n        ref.current.scrollLeft = scrollLeft;\n      }\n    });\n\n    // Clear the scroll source after scrolling settles\n    if (scrollTimeoutRef.current) {\n      clearTimeout(scrollTimeoutRef.current);\n    }\n    scrollTimeoutRef.current = setTimeout(() => {\n      scrollSourceRef.current = null;\n    }, 100);\n  }, []);\n\n  // Get current scroll position\n  const getScrollLeft = useCallback(() => lastScrollLeftRef.current, []);\n\n  return (\n    <TimelineScrollContext.Provider value={{ \n      registerScrollContainer, \n      unregisterScrollContainer, \n      syncScroll,\n      getScrollLeft \n    }}>\n      {children}\n    </TimelineScrollContext.Provider>\n  );\n}\n\n/**\n * Hook to register a scroll container and get sync handler\n * Must be called unconditionally (React hooks rule)\n */\nexport function useTimelineScrollSync(id: string, scrollRef: React.RefObject<HTMLDivElement>, enabled: boolean = true) {\n  const context = useContext(TimelineScrollContext);\n  const syncScrollPositionRef = useRef<(scrollLeft: number) => void>(() => {});\n\n  // Update ref when context changes\n  useEffect(() => {\n    syncScrollPositionRef.current = (scrollLeft: number) => {\n      if (!context || !enabled) return;\n      context.syncScroll(id, scrollLeft);\n    };\n  }, [context, id, enabled]);\n\n  // Register/unregister this container and sync initial position\n  useEffect(() => {\n    if (!context || !enabled) return;\n    \n    context.registerScrollContainer(id, scrollRef);\n    \n    // Sync to current scroll position on mount (after DOM is ready)\n    requestAnimationFrame(() => {\n      const currentScrollLeft = context.getScrollLeft();\n      if (scrollRef.current && currentScrollLeft > 0) {\n        scrollRef.current.scrollLeft = currentScrollLeft;\n      }\n    });\n    \n    return () => context.unregisterScrollContainer(id);\n  }, [context, id, scrollRef, enabled]);\n\n  // Create scroll handler that syncs other containers\n  const handleScroll = useCallback((e: React.UIEvent<HTMLDivElement>) => {\n    if (!context || !enabled) return;\n    context.syncScroll(id, e.currentTarget.scrollLeft);\n  }, [context, id, enabled]);\n\n  // Stable function that uses ref internally\n  const syncScrollPosition = useCallback((scrollLeft: number) => {\n    syncScrollPositionRef.current(scrollLeft);\n  }, []);\n\n  return { handleScroll, syncScrollPosition };\n}\n\n/**\n * Hook to get scroll context value (safe to call outside provider)\n * Returns null functions if outside provider\n */\nexport function useTimelineScrollValue() {\n  const context = useContext(TimelineScrollContext);\n  \n  if (!context) {\n    return { \n      syncScroll: undefined as ((sourceId: string, scrollLeft: number) => void) | undefined,\n      getScrollLeft: () => 0 \n    };\n  }\n\n  return { \n    syncScroll: context.syncScroll, \n    getScrollLeft: context.getScrollLeft \n  };\n}\n","/**\n * Timeline\n * Right panel containing the timeline header and body\n * Structure: horizontal scroll wrapper containing header + vertically scrollable body\n * \n * When used within TimelineScrollProvider, syncs scroll with other timelines (e.g., StaffView).\n */\n\nimport { forwardRef, useRef, useEffect, useCallback, useState } from 'react';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { useCtrlScrollZoom } from '@/hooks/useCtrlScrollZoom';\nimport { TimelineHeader } from './TimelineHeader';\nimport { TimelineBody } from './TimelineBody';\nimport { useTimelineScrollSync } from '@/contexts/TimelineScrollContext';\nimport type { TimelineCell, TimelineHeader as TimelineHeaderType } from '../utils';\nimport type { Project, ViewMode } from '@/types';\nimport styles from './Timeline.module.css';\n\ninterface TimelineProps {\n  cells: TimelineCell[];\n  headers: {\n    primary: TimelineHeaderType[];\n    secondary: TimelineHeaderType[];\n  };\n  projects: Project[];\n  cellWidth: number;\n  viewMode: ViewMode;\n  hasCustomColumns?: boolean;\n}\n\n// Debounce delay for saving scroll position\nconst SCROLL_SAVE_DELAY = 200;\n\nexport const Timeline = forwardRef<HTMLDivElement, TimelineProps>(\n  function Timeline({ cells, headers, projects, cellWidth, viewMode, hasCustomColumns = false }, ref) {\n    const totalWidth = cells.length * cellWidth;\n    const horizontalScrollRef = useRef<HTMLDivElement>(null);\n    const scrollToTodayTrigger = useUIStore((s) => s.scrollToTodayTrigger);\n    const scrollToDateTrigger = useUIStore((s) => s.scrollToDateTrigger);\n    const clearScrollToDateTrigger = useUIStore((s) => s.clearScrollToDateTrigger);\n    const zoomTrigger = useUIStore((s) => s.zoomTrigger);\n    const clearZoomTrigger = useUIStore((s) => s.clearZoomTrigger);\n    const timelineScrollLeft = useAppStore((s) => s.timelineScrollLeft);\n    const setTimelineScrollLeft = useAppStore((s) => s.setTimelineScrollLeft);\n    const showStaffOverview = useAppStore((s) => s.showStaffOverview);\n    const showEquipmentOverview = useAppStore((s) => s.showEquipmentOverview);\n    const hasRestoredScroll = useRef(false);\n    const scrollSaveTimeout = useRef<ReturnType<typeof setTimeout> | null>(null);\n    const previousViewModeRef = useRef<ViewMode>(viewMode);\n    const previousCellWidthRef = useRef<number>(cellWidth);\n    const visibleDateRef = useRef<string | null>(null);\n    const lastZoomTimestampRef = useRef<number>(0);\n    \n    // Track current scroll position for print styles\n    const [currentScrollLeft, setCurrentScrollLeft] = useState(timelineScrollLeft);\n\n    // Enable Ctrl+Scroll zoom\n    useCtrlScrollZoom({ containerRef: horizontalScrollRef, cellWidth });\n    \n    // Register for scroll sync when any overview panel is shown\n    const showAnyOverview = showStaffOverview || showEquipmentOverview;\n    const { handleScroll: handleSyncScroll, syncScrollPosition } = useTimelineScrollSync(\n      'gantt-timeline', \n      horizontalScrollRef, \n      showAnyOverview\n    );\n\n    // Calculate which date is at the left edge of the viewport\n    const getVisibleDate = useCallback(() => {\n      const scrollContainer = horizontalScrollRef.current;\n      if (!scrollContainer || cells.length === 0) return null;\n      \n      const scrollLeft = scrollContainer.scrollLeft;\n      const cellIndex = Math.floor(scrollLeft / cellWidth);\n      const cell = cells[Math.min(cellIndex, cells.length - 1)];\n      return cell?.dateStr || null;\n    }, [cells, cellWidth]);\n    \n    // Calculate which date is at the center of the viewport\n    const getCenterDate = useCallback(() => {\n      const scrollContainer = horizontalScrollRef.current;\n      if (!scrollContainer || cells.length === 0) return null;\n      \n      const scrollCenter = scrollContainer.scrollLeft + (scrollContainer.clientWidth / 2);\n      const cellIndex = Math.floor(scrollCenter / cellWidth);\n      const cell = cells[Math.min(cellIndex, cells.length - 1)];\n      return cell?.dateStr || null;\n    }, [cells, cellWidth]);\n\n    // Scroll to show a specific date at the left edge\n    const scrollToDate = useCallback((dateStr: string) => {\n      const scrollContainer = horizontalScrollRef.current;\n      if (!scrollContainer || cells.length === 0) return;\n      \n      // Find the cell that contains or is closest to this date\n      let targetIndex = cells.findIndex(cell => cell.dateStr >= dateStr);\n      if (targetIndex === -1) {\n        // Date is after all cells, scroll to end\n        targetIndex = cells.length - 1;\n      } else if (targetIndex > 0 && cells[targetIndex].dateStr !== dateStr) {\n        // If exact match not found, use the previous cell\n        targetIndex = targetIndex - 1;\n      }\n      \n      const scrollTo = targetIndex * cellWidth;\n      scrollContainer.scrollLeft = scrollTo;\n    }, [cells, cellWidth]);\n    \n    // Scroll to center a specific date in the viewport\n    const scrollToCenterDate = useCallback((dateStr: string) => {\n      const scrollContainer = horizontalScrollRef.current;\n      if (!scrollContainer || cells.length === 0) return;\n      \n      // Find the cell that contains or is closest to this date\n      let targetIndex = cells.findIndex(cell => cell.dateStr >= dateStr);\n      if (targetIndex === -1) {\n        targetIndex = cells.length - 1;\n      }\n      \n      const cellCenterPosition = targetIndex * cellWidth + (cellWidth / 2);\n      const scrollTo = cellCenterPosition - (scrollContainer.clientWidth / 2);\n      scrollContainer.scrollLeft = Math.max(0, scrollTo);\n    }, [cells, cellWidth]);\n\n    // Restore scroll position on mount (only once)\n    useEffect(() => {\n      const scrollContainer = horizontalScrollRef.current;\n      if (!scrollContainer || hasRestoredScroll.current) return;\n      \n      if (timelineScrollLeft > 0) {\n        // Use requestAnimationFrame to ensure DOM is ready\n        requestAnimationFrame(() => {\n          scrollContainer.scrollLeft = timelineScrollLeft;\n          hasRestoredScroll.current = true;\n          // Store the visible date for view mode changes\n          visibleDateRef.current = getVisibleDate();\n          // Sync with other timelines\n          syncScrollPosition(timelineScrollLeft);\n        });\n      } else {\n        hasRestoredScroll.current = true;\n      }\n    }, [timelineScrollLeft, getVisibleDate]); // syncScrollPosition is stable, no need in deps\n\n    // Handle zoom trigger from buttons/keyboard (center around viewport center)\n    useEffect(() => {\n      if (!zoomTrigger || zoomTrigger.timestamp === lastZoomTimestampRef.current) return;\n      \n      lastZoomTimestampRef.current = zoomTrigger.timestamp;\n      const scrollContainer = horizontalScrollRef.current;\n      if (!scrollContainer) {\n        clearZoomTrigger();\n        return;\n      }\n      \n      // Get the date at the center of the viewport BEFORE zoom\n      const centerDate = getCenterDate();\n      \n      // Clear the trigger\n      clearZoomTrigger();\n      \n      // After cellWidth updates, re-center on the same date\n      if (centerDate) {\n        requestAnimationFrame(() => {\n          scrollToCenterDate(centerDate);\n          // Update the stored scroll position\n          setTimelineScrollLeft(scrollContainer.scrollLeft);\n          // Sync with other timelines\n          syncScrollPosition(scrollContainer.scrollLeft);\n        });\n      }\n    }, [zoomTrigger, clearZoomTrigger, getCenterDate, scrollToCenterDate, setTimelineScrollLeft]); // syncScrollPosition is stable\n\n    // Handle view mode changes - preserve visible date at left edge\n    useEffect(() => {\n      const viewModeChanged = previousViewModeRef.current !== viewMode;\n      \n      if (viewModeChanged && hasRestoredScroll.current && visibleDateRef.current) {\n        // Scroll to the same date that was visible before\n        requestAnimationFrame(() => {\n          scrollToDate(visibleDateRef.current!);\n          // Update the stored scroll position\n          const scrollContainer = horizontalScrollRef.current;\n          if (scrollContainer) {\n            setTimelineScrollLeft(scrollContainer.scrollLeft);\n            // Sync with other timelines\n            syncScrollPosition(scrollContainer.scrollLeft);\n          }\n        });\n      }\n      \n      previousViewModeRef.current = viewMode;\n      previousCellWidthRef.current = cellWidth;\n    }, [viewMode, cellWidth, scrollToDate, setTimelineScrollLeft]); // syncScrollPosition is stable\n\n    // Save scroll position on scroll (debounced)\n    // Also syncs with other timelines via the scroll sync hook\n    const handleScroll = useCallback((e: React.UIEvent<HTMLDivElement>) => {\n      const scrollContainer = horizontalScrollRef.current;\n      if (!scrollContainer || !hasRestoredScroll.current) return;\n      \n      // Update visible date immediately\n      visibleDateRef.current = getVisibleDate();\n      \n      // Update current scroll position for print styles (immediate)\n      setCurrentScrollLeft(scrollContainer.scrollLeft);\n      \n      // Clear existing timeout\n      if (scrollSaveTimeout.current) {\n        clearTimeout(scrollSaveTimeout.current);\n      }\n      \n      // Save after delay\n      scrollSaveTimeout.current = setTimeout(() => {\n        setTimelineScrollLeft(scrollContainer.scrollLeft);\n      }, SCROLL_SAVE_DELAY);\n      \n      // Sync with other timelines (Staff Overview)\n      handleSyncScroll(e);\n    }, [setTimelineScrollLeft, getVisibleDate, handleSyncScroll]);\n\n    // Find today's cell index and scroll to it when trigger changes\n    useEffect(() => {\n      if (scrollToTodayTrigger === 0) return; // Don't scroll on initial mount\n      \n      const scrollContainer = horizontalScrollRef.current;\n      if (!scrollContainer) return;\n      \n      // Find the index of today's cell\n      const todayIndex = cells.findIndex((cell) => cell.isToday);\n      \n      if (todayIndex !== -1) {\n        // Calculate scroll position to center today in view\n        const containerWidth = scrollContainer.clientWidth;\n        const todayPosition = todayIndex * cellWidth;\n        const scrollTo = Math.max(0, todayPosition - containerWidth / 2 + cellWidth / 2);\n        \n        // For smooth scroll with sync, we need to sync after animation completes\n        // Use scrollTo without smooth when panels are open to avoid conflicts\n        if (showAnyOverview) {\n          scrollContainer.scrollLeft = scrollTo;\n          // Manually sync to other panels\n          syncScrollPosition(scrollTo);\n        } else {\n          scrollContainer.scrollTo({\n            left: scrollTo,\n            behavior: 'smooth',\n          });\n        }\n      }\n    }, [scrollToTodayTrigger, cells, cellWidth, showAnyOverview, syncScrollPosition]);\n\n    // Scroll to specific date when trigger changes\n    useEffect(() => {\n      if (!scrollToDateTrigger) return;\n      \n      const scrollContainer = horizontalScrollRef.current;\n      if (!scrollContainer) return;\n      \n      // Find the cell index for this date\n      const targetDate = scrollToDateTrigger.date;\n      let targetIndex = cells.findIndex(cell => cell.dateStr >= targetDate);\n      \n      if (targetIndex === -1) {\n        // Date is after all cells, scroll to end\n        targetIndex = cells.length - 1;\n      }\n      \n      if (targetIndex !== -1) {\n        // Calculate scroll position to put target near the left third of the viewport\n        const containerWidth = scrollContainer.clientWidth;\n        const targetPosition = targetIndex * cellWidth;\n        const scrollTo = Math.max(0, targetPosition - containerWidth / 4);\n        \n        // Use instant scroll when panels are open to avoid conflicts\n        if (showAnyOverview) {\n          scrollContainer.scrollLeft = scrollTo;\n          syncScrollPosition(scrollTo);\n        } else {\n          scrollContainer.scrollTo({\n            left: scrollTo,\n            behavior: 'smooth',\n          });\n        }\n      }\n      \n      clearScrollToDateTrigger();\n    }, [scrollToDateTrigger, cells, cellWidth, clearScrollToDateTrigger, showAnyOverview, syncScrollPosition]);\n\n    // Cleanup timeout on unmount\n    useEffect(() => {\n      return () => {\n        if (scrollSaveTimeout.current) {\n          clearTimeout(scrollSaveTimeout.current);\n        }\n      };\n    }, []);\n\n    return (\n      <div className={styles.timeline}>\n        <div \n          ref={horizontalScrollRef} \n          className={styles.horizontalScroll}\n          onScroll={handleScroll}\n          style={{ '--print-scroll-left': `${-currentScrollLeft}px` } as React.CSSProperties}\n        >\n          <div className={styles.scrollContent} style={{ width: totalWidth }}>\n            <TimelineHeader\n              headers={headers}\n              cells={cells}\n              cellWidth={cellWidth}\n              totalWidth={totalWidth}\n              viewMode={viewMode}\n              hasCustomColumns={hasCustomColumns}\n            />\n            <TimelineBody\n              ref={ref}\n              cells={cells}\n              projects={projects}\n              cellWidth={cellWidth}\n              totalWidth={totalWidth}\n              viewMode={viewMode}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  }\n);\n","/**\n * useScrollSync Hook\n * Synchronizes vertical scroll between project panel and timeline\n * Both containers MUST have the same content height for proper alignment\n */\n\nimport { useEffect, useCallback, RefObject } from 'react';\n\nexport function useScrollSync(\n  projectPanelRef: RefObject<HTMLDivElement>,\n  timelineRef: RefObject<HTMLDivElement>\n) {\n  const syncScroll = useCallback(\n    (source: 'project' | 'timeline', scrollTop: number) => {\n      if (source === 'project' && timelineRef.current) {\n        timelineRef.current.scrollTop = scrollTop;\n      } else if (source === 'timeline' && projectPanelRef.current) {\n        projectPanelRef.current.scrollTop = scrollTop;\n      }\n    },\n    [projectPanelRef, timelineRef]\n  );\n\n  useEffect(() => {\n    const projectPanel = projectPanelRef.current;\n    const timeline = timelineRef.current;\n\n    if (!projectPanel || !timeline) return;\n\n    let isScrolling = false;\n\n    const handleProjectScroll = () => {\n      if (isScrolling) return;\n      isScrolling = true;\n      syncScroll('project', projectPanel.scrollTop);\n      requestAnimationFrame(() => {\n        isScrolling = false;\n      });\n    };\n\n    const handleTimelineScroll = () => {\n      if (isScrolling) return;\n      isScrolling = true;\n      syncScroll('timeline', timeline.scrollTop);\n      requestAnimationFrame(() => {\n        isScrolling = false;\n      });\n    };\n\n    projectPanel.addEventListener('scroll', handleProjectScroll, { passive: true });\n    timeline.addEventListener('scroll', handleTimelineScroll, { passive: true });\n\n    return () => {\n      projectPanel.removeEventListener('scroll', handleProjectScroll);\n      timeline.removeEventListener('scroll', handleTimelineScroll);\n    };\n  }, [projectPanelRef, timelineRef, syncScroll]);\n}\n","/**\n * StaffTimelineBody\n * Timeline body for staff view - shows stacked assignments and vacations\n * Uses same structure as TimelineBody from main Gantt\n * Supports expanded view with detail rows for vacations and assignments\n * Includes workload heatmap visualization per cell\n */\n\nimport { forwardRef, useMemo } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { calculateBarPosition, calculateTodayPosition } from '@/components/gantt/utils';\nimport { TodayLine } from '@/components/gantt/Timeline/TodayLine';\nimport { useWorkloadCalculation, getWorkloadTooltip, getWorkloadBackground } from '@/hooks';\nimport { parseRecurringPattern } from '@/utils/recurringVacation';\nimport { BAR_HEIGHT, BAR_GAP, ROW_PADDING, DETAIL_ROW_HEIGHT, INDICATOR_AREA_HEIGHT } from './StaffView';\nimport type { TimelineCell } from '@/components/gantt/utils';\nimport type { Staff, Vacation, ViewMode } from '@/types';\nimport type { StaffAssignmentWithContext } from './StaffView';\nimport styles from './StaffTimelineBody.module.css';\n\ninterface StaffTimelineBodyProps {\n  staff: Staff[];\n  assignmentsMap: Map<number, StaffAssignmentWithContext[]>;\n  vacationsMap: Map<number, Vacation[]>;\n  rowHeights: Map<number, number>;\n  expandedStaff: Set<number>;\n  expandedBankHolidays: boolean;\n  expandedCompanyEvents: boolean;\n  cells: TimelineCell[];\n  cellWidth: number;\n  totalWidth: number;\n  viewMode: ViewMode;\n}\n\nexport const StaffTimelineBody = forwardRef<HTMLDivElement, StaffTimelineBodyProps>(\n  function StaffTimelineBody({ \n    staff, \n    assignmentsMap, \n    vacationsMap,\n    rowHeights,\n    expandedStaff,\n    expandedBankHolidays,\n    expandedCompanyEvents,\n    cells, \n    cellWidth, \n    totalWidth,\n    viewMode\n  }, ref) {\n    \n    const bankHolidays = useAppStore((s) => s.bankHolidays);\n    const companyEvents = useAppStore((s) => s.companyEvents);\n    const currentUser = useAppStore((s) => s.currentUser);\n    \n    const showHighlighting = viewMode === 'week' || viewMode === 'month';\n    \n    // Calculate today line position\n    const todayPosition = useMemo(\n      () => calculateTodayPosition(cells, cellWidth),\n      [cells, cellWidth]\n    );\n    \n    // Check if user can add vacations for a staff member\n    const canManageVacation = (staffId: number) => {\n      if (!currentUser) return false;\n      if (currentUser.role === 'admin' || currentUser.role === 'superuser') return true;\n      return currentUser.id === staffId;\n    };\n    \n    return (\n      <div ref={ref} className={styles.body}>\n        <div \n          className={styles.content}\n          style={{ \n            width: totalWidth,\n            '--cell-width': `${cellWidth}px`\n          } as React.CSSProperties}\n        >\n          {/* Grid background */}\n          <div className={styles.grid}>\n            {showHighlighting && cells.map((cell, index) => \n              cell.isWeekend ? (\n                <div\n                  key={`weekend-${index}`}\n                  className={`${styles.gridCell} ${styles.weekend}`}\n                  style={{ left: index * cellWidth, width: cellWidth }}\n                />\n              ) : null\n            )}\n            {showHighlighting && cells.map((cell, index) => \n              cell.isBankHoliday ? (\n                <div\n                  key={`holiday-${index}`}\n                  className={`${styles.gridCell} ${styles.holiday}`}\n                  style={{ left: index * cellWidth, width: cellWidth }}\n                />\n              ) : null\n            )}\n            {showHighlighting && cells.map((cell, index) => \n              cell.isCompanyEvent ? (\n                <div\n                  key={`event-${index}`}\n                  className={`${styles.gridCell} ${styles.companyEvent}`}\n                  style={{ left: index * cellWidth, width: cellWidth }}\n                />\n              ) : null\n            )}\n          </div>\n          \n          {/* Today line */}\n          {todayPosition !== null && (\n            <TodayLine position={todayPosition} />\n          )}\n          \n          {/* Staff rows */}\n          <div className={styles.rows}>\n            {staff.map((staffMember) => {\n              const isExpanded = expandedStaff.has(staffMember.id);\n              const staffVacations = vacationsMap.get(staffMember.id) || [];\n              const staffAssignments = assignmentsMap.get(staffMember.id) || [];\n              const canManage = canManageVacation(staffMember.id);\n              \n              return (\n                <div key={staffMember.id} className={styles.staffWrapper}>\n                  {/* Main row with stacked bars */}\n                  <StaffRow\n                    staffMember={staffMember}\n                    assignments={staffAssignments}\n                    vacations={staffVacations}\n                    rowHeight={rowHeights.get(staffMember.id) || 44}\n                    cells={cells}\n                    cellWidth={cellWidth}\n                    viewMode={viewMode}\n                  />\n                  \n                  {/* Expanded detail rows */}\n                  {isExpanded && (\n                    <>\n                      {/* Vacation detail rows */}\n                      {staffVacations.map((vacation) => (\n                        <VacationDetailRow\n                          key={`v-${vacation.id}`}\n                          vacation={vacation}\n                          cells={cells}\n                          cellWidth={cellWidth}\n                          viewMode={viewMode}\n                        />\n                      ))}\n                      \n                      {/* Add vacation placeholder row */}\n                      {canManage && (\n                        <div className={styles.row} style={{ height: DETAIL_ROW_HEIGHT }} />\n                      )}\n                      \n                      {/* Assignment detail rows */}\n                      {staffAssignments.map((assignment) => (\n                        <AssignmentDetailRow\n                          key={`a-${assignment.id}-${assignment.level}`}\n                          assignment={assignment}\n                          cells={cells}\n                          cellWidth={cellWidth}\n                          viewMode={viewMode}\n                        />\n                      ))}\n                      \n                      {/* Empty placeholder if no items */}\n                      {staffAssignments.length === 0 && staffVacations.length === 0 && !canManage && (\n                        <div className={styles.row} style={{ height: DETAIL_ROW_HEIGHT }} />\n                      )}\n                    </>\n                  )}\n                </div>\n              );\n            })}\n            \n            {/* Bank holidays row */}\n            <BankHolidaysTimelineRow\n              isExpanded={expandedBankHolidays}\n              holidays={bankHolidays}\n              cells={cells}\n              cellWidth={cellWidth}\n              viewMode={viewMode}\n            />\n            \n            {/* Company events row */}\n            <CompanyEventsTimelineRow\n              isExpanded={expandedCompanyEvents}\n              events={companyEvents}\n              cells={cells}\n              cellWidth={cellWidth}\n              viewMode={viewMode}\n            />\n          </div>\n          \n          {/* Holiday and event tooltip layer - top strip only */}\n          {showHighlighting && (\n            <div className={styles.tooltipLayer}>\n              {cells.map((cell, index) => {\n                // Priority: bank holidays first, then company events\n                if (cell.isBankHoliday) {\n                  return (\n                    <div\n                      key={`tooltip-${index}`}\n                      className={`${styles.tooltipCell} ${styles.holiday}`}\n                      style={{ left: index * cellWidth, width: cellWidth }}\n                      data-tooltip={cell.bankHolidayName || 'Holiday'}\n                    />\n                  );\n                }\n                if (cell.isCompanyEvent) {\n                  return (\n                    <div\n                      key={`tooltip-${index}`}\n                      className={`${styles.tooltipCell} ${styles.event}`}\n                      style={{ left: index * cellWidth, width: cellWidth }}\n                      data-tooltip={cell.companyEventName || 'Company Event'}\n                    />\n                  );\n                }\n                return null;\n              })}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n);\n\n// Individual staff row with stacked bars and workload heatmap\ninterface StaffRowProps {\n  staffMember: Staff;\n  assignments: StaffAssignmentWithContext[];\n  vacations: Vacation[];\n  rowHeight: number;\n  cells: TimelineCell[];\n  cellWidth: number;\n  viewMode: ViewMode;\n}\n\nfunction StaffRow({ staffMember, assignments, vacations, rowHeight, cells, cellWidth, viewMode }: StaffRowProps) {\n  const { openVacationModal } = useUIStore();\n  \n  // Get max capacity for this staff member\n  const maxCapacity = staffMember.max_capacity ?? 100;\n  \n  // Calculate workload per cell\n  const workloadCells = useWorkloadCalculation(assignments, vacations, cells, maxCapacity);\n  \n  // Only show workload heatmap in week/month view (not quarter/year - cells too small)\n  const showWorkloadHeatmap = viewMode === 'week' || viewMode === 'month';\n  \n  // Calculate bar positions and stack them\n  const stackedBars = useMemo(() => {\n    // Combine all items with their positions\n    const allItems: Array<{\n      type: 'assignment' | 'vacation';\n      id: number;\n      startDate: string;\n      endDate: string;\n      label: string;\n      allocation?: number;\n      data: StaffAssignmentWithContext | Vacation;\n    }> = [];\n    \n    // Add assignments\n    assignments.forEach((assignment) => {\n      let label = assignment.projectName;\n      if (assignment.phaseName) {\n        label += ` - ${assignment.phaseName}`;\n      }\n      label += ` (${assignment.allocation}%)`;\n      \n      allItems.push({\n        type: 'assignment',\n        id: assignment.id,\n        startDate: assignment.start_date,\n        endDate: assignment.end_date,\n        label,\n        allocation: assignment.allocation,\n        data: assignment,\n      });\n    });\n    \n    // Add vacations (skip recurring - they show as individual \"OFF\" indicators instead)\n    vacations.forEach((vacation) => {\n      // Skip recurring vacations - they're shown as individual day markers\n      if (parseRecurringPattern(vacation.description)) {\n        return;\n      }\n      \n      allItems.push({\n        type: 'vacation',\n        id: vacation.id,\n        startDate: vacation.start_date,\n        endDate: vacation.end_date,\n        label: vacation.description || 'Vacation',\n        data: vacation,\n      });\n    });\n    \n    // Sort by start date\n    allItems.sort((a, b) => a.startDate.localeCompare(b.startDate));\n    \n    // Assign stack positions (greedy algorithm)\n    const stacks: Array<{ end: string; items: typeof allItems }> = [];\n    \n    allItems.forEach((item) => {\n      // Find a stack where this item can fit (no overlap)\n      let placed = false;\n      for (const stack of stacks) {\n        if (item.startDate > stack.end) {\n          stack.end = item.endDate;\n          stack.items.push(item);\n          placed = true;\n          break;\n        }\n      }\n      \n      if (!placed) {\n        // Need new stack\n        stacks.push({ end: item.endDate, items: [item] });\n      }\n    });\n    \n    // Calculate positions - bars are positioned from the top, leaving space for indicator at bottom\n    const positioned: Array<{\n      type: 'assignment' | 'vacation';\n      id: number;\n      left: number;\n      width: number;\n      top: number;\n      label: string;\n      allocation?: number;\n      data: StaffAssignmentWithContext | Vacation;\n    }> = [];\n    \n    stacks.forEach((stack, stackIndex) => {\n      stack.items.forEach((item) => {\n        const pos = calculateBarPosition(item.startDate, item.endDate, cells, cellWidth, viewMode);\n        if (pos) {\n          positioned.push({\n            type: item.type,\n            id: item.id,\n            left: pos.left,\n            width: pos.width,\n            top: ROW_PADDING + stackIndex * (BAR_HEIGHT + BAR_GAP),\n            label: item.label,\n            allocation: item.allocation,\n            data: item.data,\n          });\n        }\n      });\n    });\n    \n    return positioned;\n  }, [assignments, vacations, cells, cellWidth, viewMode]);\n  \n  const handleBarClick = (bar: typeof stackedBars[0]) => {\n    if (bar.type === 'vacation') {\n      openVacationModal(bar.data as Vacation);\n    }\n    // For assignments, we could open an assignment modal in the future\n  };\n  \n  // Calculate the top position for the indicator area (at the bottom of the row)\n  const indicatorTop = rowHeight - INDICATOR_AREA_HEIGHT;\n  \n  return (\n    <div className={styles.row} style={{ height: rowHeight }}>\n      {/* Workload heatmap cells - only in the indicator area at bottom */}\n      {showWorkloadHeatmap && workloadCells.map((workload, index) => {\n        // Only render cells with actual workload or vacation (skip empty cells)\n        if (workload.total === 0 && !workload.isOnVacation) return null;\n        \n        return (\n          <div\n            key={`workload-${index}`}\n            className={`${styles.workloadCell} ${styles[workload.state]}`}\n            style={{\n              left: index * cellWidth,\n              width: cellWidth,\n              top: indicatorTop,\n              height: INDICATOR_AREA_HEIGHT,\n              ...getWorkloadBackground(workload),\n            }}\n            title={getWorkloadTooltip(workload)}\n          >\n            {/* Workload indicator badge */}\n            <div className={`${styles.workloadIndicator} ${styles[workload.state]}`}>\n              {workload.state === 'vacation' ? 'OFF' : \n               workload.state === 'conflict' ? '0%' :\n               `${workload.total}%`}\n            </div>\n          </div>\n        );\n      })}\n      \n      {/* Stacked assignment/vacation bars - in the bars area above indicator */}\n      {stackedBars.map((bar, index) => (\n        <div\n          key={`${bar.type}-${bar.id}-${index}`}\n          className={`${styles.bar} ${bar.type === 'vacation' ? styles.vacationBar : styles.assignmentBar}`}\n          style={{ \n            left: bar.left, \n            width: bar.width,\n            top: bar.top,\n            height: BAR_HEIGHT,\n          }}\n          title={bar.label}\n          onClick={() => handleBarClick(bar)}\n        >\n          <span className={styles.barLabel}>{bar.label}</span>\n        </div>\n      ))}\n    </div>\n  );\n}\n\n// Vacation detail row (shown when staff is expanded)\ninterface VacationDetailRowProps {\n  vacation: Vacation;\n  cells: TimelineCell[];\n  cellWidth: number;\n  viewMode: ViewMode;\n}\n\nfunction VacationDetailRow({ vacation, cells, cellWidth, viewMode }: VacationDetailRowProps) {\n  const pos = useMemo(() => \n    calculateBarPosition(vacation.start_date, vacation.end_date, cells, cellWidth, viewMode),\n    [vacation, cells, cellWidth, viewMode]\n  );\n  \n  if (!pos) return <div className={styles.row} style={{ height: DETAIL_ROW_HEIGHT }} />;\n  \n  return (\n    <div className={styles.row} style={{ height: DETAIL_ROW_HEIGHT }}>\n      <div\n        className={`${styles.detailBar} ${styles.vacationDetailBar}`}\n        style={{\n          left: pos.left,\n          width: pos.width,\n          height: 20,\n          top: 6,\n        }}\n        title={vacation.description || 'Vacation'}\n      />\n    </div>\n  );\n}\n\n// Assignment detail row (shown when staff is expanded)\ninterface AssignmentDetailRowProps {\n  assignment: StaffAssignmentWithContext;\n  cells: TimelineCell[];\n  cellWidth: number;\n  viewMode: ViewMode;\n}\n\nfunction AssignmentDetailRow({ assignment, cells, cellWidth, viewMode }: AssignmentDetailRowProps) {\n  const pos = useMemo(() => \n    calculateBarPosition(assignment.start_date, assignment.end_date, cells, cellWidth, viewMode),\n    [assignment, cells, cellWidth, viewMode]\n  );\n  \n  if (!pos) return <div className={styles.row} style={{ height: DETAIL_ROW_HEIGHT }} />;\n  \n  return (\n    <div className={styles.row} style={{ height: DETAIL_ROW_HEIGHT }}>\n      <div\n        className={`${styles.detailBar} ${styles.assignmentDetailBar}`}\n        style={{\n          left: pos.left,\n          width: pos.width,\n          height: 20,\n          top: 6,\n        }}\n        title={`${assignment.projectName} (${assignment.allocation}%)`}\n      />\n    </div>\n  );\n}\n\n// Bank holidays timeline row\ninterface BankHolidaysTimelineRowProps {\n  isExpanded: boolean;\n  holidays: Array<{ id: number; name: string; date: string; end_date?: string | null; is_custom?: boolean }>;\n  cells: TimelineCell[];\n  cellWidth: number;\n  viewMode: ViewMode;\n}\n\nfunction BankHolidaysTimelineRow({ isExpanded, holidays, cells, cellWidth, viewMode }: BankHolidaysTimelineRowProps) {\n  const BASE_HEIGHT = 44;\n  const currentUser = useAppStore((s) => s.currentUser);\n  const canEdit = currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n  \n  return (\n    <div className={styles.bankHolidaysWrapper}>\n      {/* Main bank holidays row */}\n      <div className={styles.row} style={{ height: BASE_HEIGHT }} />\n      \n      {/* Expanded holiday rows */}\n      {isExpanded && (\n        <>\n          {holidays.map((holiday) => {\n            const pos = calculateBarPosition(holiday.date, holiday.end_date || holiday.date, cells, cellWidth, viewMode);\n            \n            return (\n              <div key={holiday.id} className={styles.row} style={{ height: DETAIL_ROW_HEIGHT }}>\n                {pos && (\n                  <div\n                    className={`${styles.detailBar} ${styles.holidayDetailBar} ${holiday.is_custom ? styles.customHolidayBar : ''}`}\n                    style={{\n                      left: pos.left,\n                      width: pos.width,\n                      height: 20,\n                      top: 6,\n                    }}\n                    title={holiday.name}\n                  />\n                )}\n              </div>\n            );\n          })}\n          \n          {/* Empty row if no holidays */}\n          {holidays.length === 0 && (\n            <div className={styles.row} style={{ height: DETAIL_ROW_HEIGHT }} />\n          )}\n          \n          {/* Placeholder row for \"Add custom holiday\" button */}\n          {canEdit && (\n            <div className={styles.row} style={{ height: DETAIL_ROW_HEIGHT }} />\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n\n// Company events timeline row\ninterface CompanyEventsTimelineRowProps {\n  isExpanded: boolean;\n  events: Array<{ id: number; name: string; date: string; end_date?: string | null }>;\n  cells: TimelineCell[];\n  cellWidth: number;\n  viewMode: ViewMode;\n}\n\nfunction CompanyEventsTimelineRow({ isExpanded, events, cells, cellWidth, viewMode }: CompanyEventsTimelineRowProps) {\n  const BASE_HEIGHT = 44;\n  const currentUser = useAppStore((s) => s.currentUser);\n  const canEdit = currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n  \n  return (\n    <div className={styles.companyEventsWrapper}>\n      {/* Main company events row */}\n      <div className={styles.row} style={{ height: BASE_HEIGHT }} />\n      \n      {/* Expanded event rows */}\n      {isExpanded && (\n        <>\n          {events.map((event) => {\n            const pos = calculateBarPosition(event.date, event.end_date || event.date, cells, cellWidth, viewMode);\n            \n            return (\n              <div key={event.id} className={styles.row} style={{ height: DETAIL_ROW_HEIGHT }}>\n                {pos && (\n                  <div\n                    className={`${styles.detailBar} ${styles.eventDetailBar}`}\n                    style={{\n                      left: pos.left,\n                      width: pos.width,\n                      height: 20,\n                      top: 6,\n                    }}\n                    title={event.name}\n                  />\n                )}\n              </div>\n            );\n          })}\n          \n          {/* Empty row if no events */}\n          {events.length === 0 && (\n            <div className={styles.row} style={{ height: DETAIL_ROW_HEIGHT }} />\n          )}\n          \n          {/* Placeholder row for \"Add event\" button */}\n          {canEdit && (\n            <div className={styles.row} style={{ height: DETAIL_ROW_HEIGHT }} />\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","/**\n * Bank Holidays Row Component\n * Expandable row showing all bank holidays with actions\n * - Add custom holiday button\n * - Delete custom holidays\n * - Export to ICS\n */\n\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { deleteCustomHoliday, getBankHolidays, buildHolidayDateSet } from '@/api';\nimport styles from './StaffView.module.css';\n\ninterface BankHolidaysRowProps {\n  isExpanded: boolean;\n  onToggle?: () => void;\n}\n\nexport function BankHolidaysRow({ isExpanded, onToggle }: BankHolidaysRowProps) {\n  const currentSite = useAppStore((s) => s.currentSite);\n  const currentUser = useAppStore((s) => s.currentUser);\n  const bankHolidays = useAppStore((s) => s.bankHolidays);\n  const setBankHolidays = useAppStore((s) => s.setBankHolidays);\n  const { openModal } = useUIStore();\n  \n  const canEdit = currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n  \n  // Group holidays by year\n  const holidaysByYear = bankHolidays.reduce((acc, h) => {\n    const year = h.year || new Date(h.date).getFullYear();\n    if (!acc[year]) acc[year] = [];\n    acc[year].push(h);\n    return acc;\n  }, {} as Record<number, typeof bankHolidays>);\n  \n  // Format date for display using browser locale\n  const formatHolidayDate = (dateStr: string) => {\n    const date = new Date(dateStr);\n    return date.toLocaleDateString(undefined, { \n      weekday: 'short',\n      day: 'numeric', \n      month: 'short' \n    });\n  };\n  \n  // Export holidays to ICS\n  const exportToICS = () => {\n    if (bankHolidays.length === 0) return;\n    \n    const lines = [\n      'BEGIN:VCALENDAR',\n      'VERSION:2.0',\n      'PRODID:-//Milestone//Bank Holidays//EN',\n      'CALSCALE:GREGORIAN',\n      'METHOD:PUBLISH',\n    ];\n    \n    bankHolidays.forEach((holiday) => {\n      const startDate = holiday.date.replace(/-/g, '');\n      // End date is the day after for all-day events\n      const endDateObj = new Date(holiday.end_date || holiday.date);\n      endDateObj.setDate(endDateObj.getDate() + 1);\n      const endDate = endDateObj.toISOString().split('T')[0].replace(/-/g, '');\n      \n      lines.push('BEGIN:VEVENT');\n      lines.push(`UID:bankholiday-${holiday.id}@milestone`);\n      lines.push(`DTSTART;VALUE=DATE:${startDate}`);\n      lines.push(`DTEND;VALUE=DATE:${endDate}`);\n      lines.push(`SUMMARY:${holiday.name.replace(/\\\\/g, '\\\\\\\\').replace(/;/g, '\\\\;').replace(/,/g, '\\\\,').replace(/\\n/g, '\\\\n')}`);\n      lines.push('TRANSP:TRANSPARENT');\n      lines.push('END:VEVENT');\n    });\n    \n    lines.push('END:VCALENDAR');\n    \n    const blob = new Blob([lines.join('\\r\\n')], { type: 'text/calendar' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `bank-holidays-${currentSite?.name || 'site'}.ics`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n  \n  // Handle opening add custom holiday modal\n  const handleAddCustom = () => {\n    openModal('customHoliday');\n  };\n  \n  // Handle deleting a custom holiday\n  const handleDeleteCustom = async (holidayId: number) => {\n    if (!currentSite) return;\n    if (!confirm('Delete this custom holiday?')) return;\n    \n    try {\n      await deleteCustomHoliday(currentSite.id, holidayId);\n      \n      // Reload holidays\n      const holidays = await getBankHolidays(currentSite.id);\n      const holidayDates = buildHolidayDateSet(holidays);\n      setBankHolidays(holidays, holidayDates);\n    } catch (err) {\n      console.error('Failed to delete custom holiday:', err);\n      alert('Failed to delete custom holiday');\n    }\n  };\n  \n  return (\n    <div className={styles.bankHolidaysWrapper}>\n      {/* Main bank holidays row */}\n      <div \n        className={`${styles.staffRow} ${styles.bankHolidaysRow} ${!onToggle ? styles.noExpand : ''}`}\n        onClick={onToggle}\n        style={{ cursor: onToggle ? 'pointer' : 'default' }}\n      >\n        {onToggle && (\n          <div className={`${styles.expandIcon} ${isExpanded ? styles.expanded : ''}`}>\n            <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <polyline points=\"9 18 15 12 9 6\" />\n            </svg>\n          </div>\n        )}\n        <div className={`${styles.status} ${styles.bankHolidayStatus}`} />\n        <div className={styles.staffInfo}>\n          <div className={styles.staffName}>Bank Holidays</div>\n          <div className={styles.staffMeta}>\n            <span>{currentSite?.name || 'Site'}</span>\n            <span>  </span>\n            <span>{bankHolidays.length} holidays</span>\n          </div>\n        </div>\n        <div className={styles.rowActions} onClick={(e) => e.stopPropagation()}>\n          <button \n            className={styles.iconBtn}\n            onClick={exportToICS}\n            title=\"Export to Outlook\"\n          >\n            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n              <polyline points=\"7 10 12 15 17 10\" />\n              <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\" />\n            </svg>\n          </button>\n          {canEdit && (\n            <button \n              className={styles.iconBtn}\n              onClick={handleAddCustom}\n              title=\"Add custom holiday\"\n            >\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n                <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n              </svg>\n            </button>\n          )}\n        </div>\n      </div>\n      \n      {/* Expanded content - Holiday details */}\n      {isExpanded && (\n        <div className={styles.expandedContent}>\n          {Object.keys(holidaysByYear).sort().map((year) => (\n            holidaysByYear[Number(year)].map((holiday) => {\n              const dateDisplay = holiday.end_date && holiday.end_date !== holiday.date\n                ? `${formatHolidayDate(holiday.date)} - ${formatHolidayDate(holiday.end_date)}`\n                : formatHolidayDate(holiday.date);\n              \n              return (\n                <div \n                  key={holiday.id}\n                  className={`${styles.detailRow} ${holiday.is_custom ? styles.customHoliday : ''}`}\n                >\n                  <span className={`${styles.detailType} ${styles.bankHoliday}`}>\n                    {holiday.is_custom ? 'Custom' : 'Holiday'}\n                  </span>\n                  <span className={styles.detailName}>{holiday.name}</span>\n                  <span className={styles.dateBadge}>{dateDisplay}</span>\n                  {canEdit && holiday.is_custom && (\n                    <button\n                      className={styles.deleteAction}\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleDeleteCustom(holiday.id);\n                      }}\n                      title=\"Delete custom holiday\"\n                    >\n                      <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n                        <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n                      </svg>\n                    </button>\n                  )}\n                </div>\n              );\n            })\n          ))}\n          \n          {bankHolidays.length === 0 && (\n            <div className={styles.detailRow}>\n              <span className={styles.noAssignments}>No holidays loaded</span>\n            </div>\n          )}\n          \n          {/* Add custom holiday row at bottom */}\n          {canEdit && (\n            <div \n              className={`${styles.detailRow} ${styles.addRow}`}\n              onClick={handleAddCustom}\n            >\n              <span className={styles.addIcon}>\n                <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n                  <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n                </svg>\n              </span>\n              <span className={styles.addText}>Add custom holiday</span>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * Company Events Row Component\n * Expandable row showing all company events with actions\n * - Add company event button\n * - Delete company events\n * - Export to ICS\n */\n\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { deleteCompanyEvent, getCompanyEvents, buildEventDateSet } from '@/api';\nimport styles from './StaffView.module.css';\n\ninterface CompanyEventsRowProps {\n  isExpanded: boolean;\n  onToggle?: () => void;\n}\n\nexport function CompanyEventsRow({ isExpanded, onToggle }: CompanyEventsRowProps) {\n  const currentSite = useAppStore((s) => s.currentSite);\n  const currentUser = useAppStore((s) => s.currentUser);\n  const companyEvents = useAppStore((s) => s.companyEvents);\n  const setCompanyEvents = useAppStore((s) => s.setCompanyEvents);\n  const { openModal } = useUIStore();\n  \n  const canEdit = currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n  \n  // Group events by year\n  const eventsByYear = companyEvents.reduce((acc, e) => {\n    const year = new Date(e.date).getFullYear();\n    if (!acc[year]) acc[year] = [];\n    acc[year].push(e);\n    return acc;\n  }, {} as Record<number, typeof companyEvents>);\n  \n  // Format date for display using browser locale\n  const formatEventDate = (dateStr: string) => {\n    const date = new Date(dateStr);\n    return date.toLocaleDateString(undefined, { \n      weekday: 'short',\n      day: 'numeric', \n      month: 'short' \n    });\n  };\n  \n  // Export events to ICS\n  const exportToICS = () => {\n    if (companyEvents.length === 0) return;\n    \n    const lines = [\n      'BEGIN:VCALENDAR',\n      'VERSION:2.0',\n      'PRODID:-//Milestone//Company Events//EN',\n      'CALSCALE:GREGORIAN',\n      'METHOD:PUBLISH',\n    ];\n    \n    companyEvents.forEach((event) => {\n      const startDate = event.date.replace(/-/g, '');\n      // End date is the day after for all-day events\n      const endDateObj = new Date(event.end_date || event.date);\n      endDateObj.setDate(endDateObj.getDate() + 1);\n      const endDate = endDateObj.toISOString().split('T')[0].replace(/-/g, '');\n      \n      lines.push('BEGIN:VEVENT');\n      lines.push(`UID:companyevent-${event.id}@milestone`);\n      lines.push(`DTSTART;VALUE=DATE:${startDate}`);\n      lines.push(`DTEND;VALUE=DATE:${endDate}`);\n      lines.push(`SUMMARY:${event.name.replace(/\\\\/g, '\\\\\\\\').replace(/;/g, '\\\\;').replace(/,/g, '\\\\,').replace(/\\n/g, '\\\\n')}`);\n      lines.push('TRANSP:TRANSPARENT');\n      lines.push('END:VEVENT');\n    });\n    \n    lines.push('END:VCALENDAR');\n    \n    const blob = new Blob([lines.join('\\r\\n')], { type: 'text/calendar' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `company-events-${currentSite?.name || 'site'}.ics`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n  \n  // Handle opening add company event modal\n  const handleAddEvent = () => {\n    openModal('companyEvent');\n  };\n  \n  // Handle deleting a company event\n  const handleDeleteEvent = async (eventId: number) => {\n    if (!currentSite) return;\n    if (!confirm('Delete this company event?')) return;\n    \n    try {\n      await deleteCompanyEvent(currentSite.id, eventId);\n      \n      // Reload events\n      const events = await getCompanyEvents(currentSite.id);\n      const eventDates = buildEventDateSet(events);\n      setCompanyEvents(events, eventDates);\n    } catch (err) {\n      console.error('Failed to delete company event:', err);\n      alert('Failed to delete company event');\n    }\n  };\n  \n  return (\n    <div className={styles.companyEventsWrapper}>\n      {/* Main company events row */}\n      <div \n        className={`${styles.staffRow} ${styles.companyEventsRow} ${!onToggle ? styles.noExpand : ''}`}\n        onClick={onToggle}\n        style={{ cursor: onToggle ? 'pointer' : 'default' }}\n      >\n        {onToggle && (\n          <div className={`${styles.expandIcon} ${isExpanded ? styles.expanded : ''}`}>\n            <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <polyline points=\"9 18 15 12 9 6\" />\n            </svg>\n          </div>\n        )}\n        <div className={`${styles.status} ${styles.companyEventStatus}`} />\n        <div className={styles.staffInfo}>\n          <div className={styles.staffName}>Company Events</div>\n          <div className={styles.staffMeta}>\n            <span>{currentSite?.name || 'Site'}</span>\n            <span>  </span>\n            <span>{companyEvents.length} event{companyEvents.length !== 1 ? 's' : ''}</span>\n          </div>\n        </div>\n        <div className={styles.rowActions} onClick={(e) => e.stopPropagation()}>\n          <button \n            className={styles.iconBtn}\n            onClick={exportToICS}\n            title=\"Export to Outlook\"\n          >\n            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\n              <polyline points=\"7 10 12 15 17 10\" />\n              <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\" />\n            </svg>\n          </button>\n          {canEdit && (\n            <button \n              className={styles.iconBtn}\n              onClick={handleAddEvent}\n              title=\"Add company event\"\n            >\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n                <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n              </svg>\n            </button>\n          )}\n        </div>\n      </div>\n      \n      {/* Expanded content - Event details */}\n      {isExpanded && (\n        <div className={styles.expandedContent}>\n          {Object.keys(eventsByYear).sort().map((year) => (\n            eventsByYear[Number(year)].map((event) => {\n              const dateDisplay = event.end_date && event.end_date !== event.date\n                ? `${formatEventDate(event.date)} - ${formatEventDate(event.end_date)}`\n                : formatEventDate(event.date);\n              \n              return (\n                <div \n                  key={event.id}\n                  className={styles.detailRow}\n                >\n                  <span className={`${styles.detailType} ${styles.companyEvent}`}>\n                    Event\n                  </span>\n                  <span className={styles.detailName}>{event.name}</span>\n                  <span className={styles.dateBadge}>{dateDisplay}</span>\n                  {canEdit && (\n                    <button\n                      className={styles.deleteAction}\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleDeleteEvent(event.id);\n                      }}\n                      title=\"Delete company event\"\n                    >\n                      <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n                        <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n                      </svg>\n                    </button>\n                  )}\n                </div>\n              );\n            })\n          ))}\n          \n          {companyEvents.length === 0 && (\n            <div className={styles.detailRow}>\n              <span className={styles.noAssignments}>No company events</span>\n            </div>\n          )}\n          \n          {/* Add event row at bottom */}\n          {canEdit && (\n            <div \n              className={`${styles.detailRow} ${styles.addRow}`}\n              onClick={handleAddEvent}\n            >\n              <span className={styles.addIcon}>\n                <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                  <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n                  <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n                </svg>\n              </span>\n              <span className={styles.addText}>Add company event</span>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * Staff View\n * Shows all staff members with their assignments on a timeline\n * Uses the same structure as GanttContainer but organized by staff\n * Supports stacked bars for overlapping assignments\n * Expandable rows show vacations and assignments\n * \n * Can be used standalone or embedded below Gantt chart with synchronized scrolling.\n */\n\nimport { useMemo, useRef, useState, useCallback, useEffect, useLayoutEffect } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useScrollSync, useCtrlScrollZoom, useResourceDragDrop } from '@/hooks';\nimport { generateTimelineCells, generateTimelineHeaders } from '@/components/gantt/utils/timeline';\nimport { TimelineHeader } from '@/components/gantt/Timeline/TimelineHeader';\nimport { StaffTimelineBody } from './StaffTimelineBody';\nimport { BankHolidaysRow } from './BankHolidaysRow';\nimport { CompanyEventsRow } from './CompanyEventsRow';\nimport { deleteVacation, getVacations } from '@/api/endpoints/vacations';\nimport { useTimelineScrollSync } from '@/contexts/TimelineScrollContext';\nimport { parseRecurringPattern, getRecurringDaysDisplay } from '@/utils/recurringVacation';\nimport type { Project, Phase, Subphase, StaffAssignment } from '@/types';\nimport styles from './StaffView.module.css';\n\n// Height constants matching Gantt rows\nconst BASE_ROW_HEIGHT = 44;  // Minimum row height\nconst DETAIL_ROW_HEIGHT = 32;\nconst BAR_HEIGHT = 14;  // Smaller bars to fit with indicator\nconst BAR_GAP = 2;\nconst ROW_PADDING = 4;  // Padding at top of row\nconst INDICATOR_AREA_HEIGHT = 18;  // Height for workload indicator at bottom\n\ninterface StaffViewProps {\n  /** When true, hides the header and syncs scroll with parent Gantt */\n  embedded?: boolean;\n  /** Panel width when embedded (controlled by parent) */\n  panelWidth?: number;\n  /** Callback when panel width changes in embedded mode */\n  onPanelWidthChange?: (width: number) => void;\n  /** Height when embedded (controlled by parent resizer) */\n  height?: number;\n}\n\nexport function StaffView({ embedded = false, panelWidth, onPanelWidthChange, height }: StaffViewProps) {\n  const panelRef = useRef<HTMLDivElement>(null);\n  const timelineBodyRef = useRef<HTMLDivElement>(null);\n  const timelineScrollRef = useRef<HTMLDivElement>(null);\n  const filterRef = useRef<HTMLDivElement>(null);\n  \n  // Refs for measuring actual row heights (keyed by staff ID)\n  const rowRefs = useRef<Map<number, HTMLDivElement>>(new Map());\n  const [measuredHeights, setMeasuredHeights] = useState<Map<number, number>>(new Map());\n  \n  // Local panel width state for standalone mode only\n  const [localPanelWidth, setLocalPanelWidth] = useState(320);\n  \n  // Resizer width constant\n  const RESIZER_WIDTH = 4;\n  \n  // Effective panel width: use prop in embedded mode, local state otherwise\n  // When embedded, panelWidth includes the resizer width, so subtract it for the panel itself\n  const effectivePanelWidth = embedded ? ((panelWidth || 324) - RESIZER_WIDTH) : localPanelWidth;\n  \n  const staff = useAppStore((s) => s.staff);\n  const projects = useAppStore((s) => s.projects);\n  const vacations = useAppStore((s) => s.vacations);\n  const setVacations = useAppStore((s) => s.setVacations);\n  const currentSite = useAppStore((s) => s.currentSite);\n  const currentUser = useAppStore((s) => s.currentUser);\n  const skills = useAppStore((s) => s.skills);\n  const viewMode = useAppStore((s) => s.viewMode);\n  const currentDate = useAppStore((s) => s.currentDate);\n  const cellWidth = useAppStore((s) => s.cellWidth);\n  const bankHolidayDates = useAppStore((s) => s.bankHolidayDates);\n  const bankHolidays = useAppStore((s) => s.bankHolidays);\n  const companyEventDates = useAppStore((s) => s.companyEventDates);\n  const companyEvents = useAppStore((s) => s.companyEvents);\n  \n  const { openVacationModal } = useUIStore();\n  const scrollToTodayTrigger = useUIStore((s) => s.scrollToTodayTrigger);\n  \n  // Drag and drop for staff assignment\n  const { handleDragStart, handleDragEnd } = useResourceDragDrop();\n  \n  // Enable Ctrl+Scroll zoom (only when not embedded)\n  useCtrlScrollZoom({ containerRef: timelineScrollRef, cellWidth, enabled: !embedded });\n  \n  // Register for scroll sync when embedded\n  const { handleScroll: handleSyncScroll } = useTimelineScrollSync(\n    'staff-view',\n    timelineScrollRef,\n    embedded\n  );\n  \n  // Track expanded staff and bank holidays row\n  const [expandedStaff, setExpandedStaff] = useState<Set<number>>(new Set());\n  const [expandedBankHolidays, setExpandedBankHolidays] = useState(false);\n  const [expandedCompanyEvents, setExpandedCompanyEvents] = useState(false);\n  \n  // Filter state\n  const [selectedRoles, setSelectedRoles] = useState<Set<string>>(new Set());\n  const [selectedSkills, setSelectedSkills] = useState<Set<number>>(new Set());\n  const [isFilterOpen, setIsFilterOpen] = useState(false);\n  \n  // Delete confirmation state\n  const [deleteConfirm, setDeleteConfirm] = useState<{\n    vacationId: number;\n    staffName: string;\n    description: string;\n  } | null>(null);\n  const [isDeleting, setIsDeleting] = useState(false);\n  \n  // Sync vertical scroll between panel and timeline body\n  useScrollSync(panelRef, timelineBodyRef);\n  \n  // Get all staff for current site (unfiltered for role extraction)\n  const allSiteStaff = useMemo(() => \n    staff.filter((s) => s.site_id === currentSite?.id && s.active !== false)\n      .sort((a, b) => a.name.localeCompare(b.name)),\n    [staff, currentSite]\n  );\n  \n  // Extract unique roles from staff\n  const staffRoles = useMemo(() => {\n    const roles = new Set<string>();\n    allSiteStaff.forEach((s) => {\n      if (s.role) roles.add(s.role);\n    });\n    return Array.from(roles).sort((a, b) => a.localeCompare(b));\n  }, [allSiteStaff]);\n  \n  // Filter staff based on selected roles and skills\n  const siteStaff = useMemo(() => {\n    let filtered = allSiteStaff;\n    \n    // Filter by role if any selected\n    if (selectedRoles.size > 0) {\n      filtered = filtered.filter((s) => s.role && selectedRoles.has(s.role));\n    }\n    \n    // Filter by skill if any selected\n    if (selectedSkills.size > 0) {\n      filtered = filtered.filter((s) => \n        s.skills?.some((skill) => selectedSkills.has(skill.id))\n      );\n    }\n    \n    return filtered;\n  }, [allSiteStaff, selectedRoles, selectedSkills]);\n  \n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (filterRef.current && !filterRef.current.contains(e.target as Node)) {\n        setIsFilterOpen(false);\n      }\n    };\n    \n    if (isFilterOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isFilterOpen]);\n  \n  // Toggle role selection\n  const toggleRole = (role: string) => {\n    setSelectedRoles((prev) => {\n      const next = new Set(prev);\n      if (next.has(role)) {\n        next.delete(role);\n      } else {\n        next.add(role);\n      }\n      return next;\n    });\n  };\n  \n  // Toggle skill selection\n  const toggleSkill = (skillId: number) => {\n    setSelectedSkills((prev) => {\n      const next = new Set(prev);\n      if (next.has(skillId)) {\n        next.delete(skillId);\n      } else {\n        next.add(skillId);\n      }\n      return next;\n    });\n  };\n  \n  // Clear all filters\n  const clearAllFilters = () => {\n    setSelectedRoles(new Set());\n    setSelectedSkills(new Set());\n  };\n  \n  // Check if any filters are active\n  const hasActiveFilters = selectedRoles.size > 0 || selectedSkills.size > 0;\n  \n  // Generate timeline data\n  const cells = useMemo(() => \n    generateTimelineCells(currentDate, viewMode, bankHolidayDates, bankHolidays, companyEventDates, companyEvents),\n    [currentDate, viewMode, bankHolidayDates, bankHolidays, companyEventDates, companyEvents]\n  );\n  const headers = useMemo(() => \n    generateTimelineHeaders(cells, viewMode),\n    [cells, viewMode]\n  );\n  \n  const totalWidth = cells.length * cellWidth;\n  \n  // Scroll to today when trigger changes (only when not embedded - Gantt handles this)\n  useEffect(() => {\n    if (embedded || !scrollToTodayTrigger || !timelineScrollRef.current) return;\n    \n    const todayIndex = cells.findIndex((cell) => cell.isToday);\n    if (todayIndex === -1) return;\n    \n    const scrollContainer = timelineScrollRef.current;\n    const containerWidth = scrollContainer.clientWidth;\n    const todayPosition = todayIndex * cellWidth;\n    \n    // Center today in the viewport\n    const scrollTo = Math.max(0, todayPosition - containerWidth / 2 + cellWidth / 2);\n    scrollContainer.scrollTo({ left: scrollTo, behavior: 'smooth' });\n  }, [embedded, scrollToTodayTrigger, cells, cellWidth]);\n  \n  // Build staff assignments map with stacking info\n  const staffAssignmentsMap = useMemo(() => {\n    const map = new Map<number, StaffAssignmentWithContext[]>();\n    siteStaff.forEach((s) => map.set(s.id, []));\n    \n    let totalAssignments = 0;\n    \n    // Helper to recursively process subphases\n    const processSubphases = (\n      subphases: Subphase[] | undefined,\n      project: Project,\n      phase: Phase\n    ) => {\n      if (!subphases) return;\n      \n      for (const subphase of subphases) {\n        // Process staff assignments on this subphase\n        subphase.staffAssignments?.forEach((sa: StaffAssignment) => {\n          totalAssignments++;\n          const existing = map.get(sa.staff_id) || [];\n          existing.push({\n            ...sa,\n            start_date: sa.start_date || subphase.start_date,\n            end_date: sa.end_date || subphase.end_date,\n            projectName: project.name,\n            projectId: project.id,\n            phaseName: phase.name,\n            phaseId: phase.id,\n            subphaseName: subphase.name,\n            subphaseId: subphase.id,\n            level: 'subphase',\n          });\n          map.set(sa.staff_id, existing);\n        });\n        \n        // Recursively process nested subphases\n        if (subphase.children?.length) {\n          processSubphases(subphase.children, project, phase);\n        }\n      }\n    };\n    \n    projects.forEach((project) => {\n      if (project.archived) return;\n      \n      // Project-level staff assignments\n      project.staffAssignments?.forEach((sa) => {\n        totalAssignments++;\n        const existing = map.get(sa.staff_id) || [];\n        existing.push({\n          ...sa,\n          projectName: project.name,\n          projectId: project.id,\n          level: 'project',\n        });\n        map.set(sa.staff_id, existing);\n      });\n      \n      // Phase-level staff assignments\n      project.phases?.forEach((phase) => {\n        phase.staffAssignments?.forEach((sa) => {\n          totalAssignments++;\n          const existing = map.get(sa.staff_id) || [];\n          existing.push({\n            ...sa,\n            start_date: sa.start_date || phase.start_date,\n            end_date: sa.end_date || phase.end_date,\n            projectName: project.name,\n            projectId: project.id,\n            phaseName: phase.name,\n            phaseId: phase.id,\n            level: 'phase',\n          });\n          map.set(sa.staff_id, existing);\n        });\n        \n        // Recursively process all subphases (handles nested subphases)\n        processSubphases(phase.children, project, phase);\n      });\n    });\n    \n    console.log('[StaffView] staffAssignmentsMap built:', { \n      projectCount: projects.length, \n      staffCount: siteStaff.length,\n      totalAssignments,\n      mapEntries: Array.from(map.entries()).filter(([_, v]) => v.length > 0).length\n    });\n    \n    return map;\n  }, [projects, siteStaff]);\n  \n  // Build vacations map\n  const staffVacationsMap = useMemo(() => {\n    const map = new Map<number, typeof vacations>();\n    siteStaff.forEach((s) => map.set(s.id, []));\n    \n    vacations.forEach((v) => {\n      const existing = map.get(v.staff_id) || [];\n      existing.push(v);\n      map.set(v.staff_id, existing);\n    });\n    \n    return map;\n  }, [vacations, siteStaff]);\n  \n  // Calculate minimum row heights based on stacked assignments (for timeline bars)\n  const calculatedRowHeights = useMemo(() => {\n    const heights = new Map<number, number>();\n    \n    siteStaff.forEach((staffMember) => {\n      const assignments = staffAssignmentsMap.get(staffMember.id) || [];\n      const vacas = staffVacationsMap.get(staffMember.id) || [];\n      \n      // Calculate max overlapping bars at any point in time\n      const maxStack = calculateMaxStack(assignments, vacas);\n      \n      // Height = padding + bars area + indicator area\n      // bars area = (bar_height + gap) * num_bars\n      // indicator area = space for the workload indicator at bottom\n      const barsHeight = maxStack > 0 \n        ? ROW_PADDING + (BAR_HEIGHT + BAR_GAP) * maxStack\n        : 0;\n      const height = barsHeight + INDICATOR_AREA_HEIGHT + ROW_PADDING;\n      \n      heights.set(staffMember.id, Math.max(BASE_ROW_HEIGHT, height));\n    });\n    \n    return heights;\n  }, [siteStaff, staffAssignmentsMap, staffVacationsMap]);\n  \n  // Measure actual panel row heights after render (for text wrapping)\n  useLayoutEffect(() => {\n    // Small delay to ensure DOM is fully rendered\n    const measureHeights = () => {\n      const newMeasured = new Map<number, number>();\n      let hasChanges = false;\n      \n      rowRefs.current.forEach((element, staffId) => {\n        if (element) {\n          const height = element.offsetHeight;\n          newMeasured.set(staffId, height);\n          if (measuredHeights.get(staffId) !== height) {\n            hasChanges = true;\n          }\n        }\n      });\n      \n      if (hasChanges || newMeasured.size !== measuredHeights.size) {\n        setMeasuredHeights(newMeasured);\n      }\n    };\n    \n    // Use requestAnimationFrame to measure after paint\n    const rafId = requestAnimationFrame(measureHeights);\n    return () => cancelAnimationFrame(rafId);\n  }, [siteStaff, localPanelWidth, panelWidth, measuredHeights]);\n  \n  // Combine calculated heights (for bars) with measured heights (for text wrapping)\n  // Use the maximum of both to ensure both content types fit\n  const rowHeights = useMemo(() => {\n    const heights = new Map<number, number>();\n    \n    siteStaff.forEach((staffMember) => {\n      const calculated = calculatedRowHeights.get(staffMember.id) || BASE_ROW_HEIGHT;\n      const measured = measuredHeights.get(staffMember.id) || 0;\n      // Use max of calculated (for bars) and measured (for text), with BASE_ROW_HEIGHT as minimum\n      heights.set(staffMember.id, Math.max(BASE_ROW_HEIGHT, calculated, measured));\n    });\n    \n    return heights;\n  }, [siteStaff, calculatedRowHeights, measuredHeights]);\n  \n  // Ref callback to register row elements for measurement\n  const setRowRef = useCallback((staffId: number) => (element: HTMLDivElement | null) => {\n    if (element) {\n      rowRefs.current.set(staffId, element);\n    } else {\n      rowRefs.current.delete(staffId);\n    }\n  }, []);\n  \n  // Helper to check if a date range includes today\n  const isActiveToday = (startDate: string, endDate: string): boolean => {\n    const today = new Date();\n    today.setHours(12, 0, 0, 0); // Noon to avoid timezone issues\n    const start = new Date(startDate);\n    start.setHours(0, 0, 0, 0);\n    const end = new Date(endDate);\n    end.setHours(23, 59, 59, 999);\n    return today >= start && today <= end;\n  };\n  \n  // Calculate availability for TODAY (matches ResourceCard logic)\n  // Takes into account max_capacity for part-time workers\n  const calcAvailability = (staffId: number): { available: number; maxCapacity: number } => {\n    const staffMember = siteStaff.find(s => s.id === staffId) || allSiteStaff.find(s => s.id === staffId);\n    const maxCapacity = staffMember?.max_capacity ?? 100;\n    \n    // Check if on vacation today\n    const staffVacations = staffVacationsMap.get(staffId) || [];\n    const onVacation = staffVacations.some(v => isActiveToday(v.start_date, v.end_date));\n    if (onVacation) {\n      return { available: 0, maxCapacity }; // No availability during vacation\n    }\n    \n    const assignments = staffAssignmentsMap.get(staffId) || [];\n    // Only sum allocations for assignments active TODAY\n    const totalAllocation = assignments\n      .filter(a => a.start_date && a.end_date && isActiveToday(a.start_date, a.end_date))\n      .reduce((sum, a) => sum + (a.allocation || 0), 0);\n    return { available: maxCapacity - totalAllocation, maxCapacity };\n  };\n  \n  // Toggle staff expansion\n  const toggleStaffExpand = useCallback((staffId: number) => {\n    setExpandedStaff((prev) => {\n      const next = new Set(prev);\n      if (next.has(staffId)) {\n        next.delete(staffId);\n      } else {\n        next.add(staffId);\n      }\n      return next;\n    });\n  }, []);\n  \n  // Check if user can manage vacation for a staff member\n  const canManageVacation = useCallback((staffId: number) => {\n    if (!currentUser) return false;\n    if (currentUser.role === 'admin' || currentUser.role === 'superuser') return true;\n    // Regular users can manage their own vacations\n    return currentUser.id === staffId;\n  }, [currentUser]);\n  \n  // Check if user can drag staff to assign\n  const canDrag = currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n  \n  // Format date range for display using browser locale\n  const formatDateRange = (start: string, end: string) => {\n    const s = new Date(start);\n    const e = new Date(end);\n    const formatDate = (d: Date) => d.toLocaleDateString(undefined, { day: 'numeric', month: 'short' });\n    if (start === end) return formatDate(s);\n    return `${formatDate(s)} - ${formatDate(e)}`;\n  };\n  \n  // Handle vacation delete request (show confirmation)\n  const handleDeleteVacationRequest = useCallback((\n    vacationId: number,\n    staffName: string,\n    description: string\n  ) => {\n    setDeleteConfirm({ vacationId, staffName, description });\n  }, []);\n  \n  // Confirm and execute vacation delete\n  const handleConfirmDelete = useCallback(async () => {\n    if (!deleteConfirm) return;\n    \n    setIsDeleting(true);\n    try {\n      await deleteVacation(deleteConfirm.vacationId);\n      const updatedVacations = await getVacations();\n      setVacations(updatedVacations);\n      setDeleteConfirm(null);\n    } catch (err) {\n      console.error('Failed to delete vacation:', err);\n      // Could add error toast here\n    } finally {\n      setIsDeleting(false);\n    }\n  }, [deleteConfirm, setVacations]);\n  \n  // Cancel delete\n  const handleCancelDelete = useCallback(() => {\n    setDeleteConfirm(null);\n  }, []);\n  \n  // Handle panel resize (horizontal - width)\n  const handleResizeStart = useCallback((e: React.MouseEvent) => {\n    e.preventDefault();\n    const startX = e.clientX;\n    const startWidth = effectivePanelWidth;\n\n    const handleMouseMove = (moveEvent: MouseEvent) => {\n      const delta = moveEvent.clientX - startX;\n      const newWidth = Math.max(200, Math.min(500, startWidth + delta));\n      \n      if (embedded && onPanelWidthChange) {\n        // In embedded mode, notify parent\n        onPanelWidthChange(newWidth);\n      } else {\n        // In standalone mode, update local state\n        setLocalPanelWidth(newWidth);\n      }\n    };\n\n    const handleMouseUp = () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      document.body.style.cursor = '';\n      document.body.style.userSelect = '';\n    };\n\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n    document.body.style.cursor = 'col-resize';\n    document.body.style.userSelect = 'none';\n  }, [embedded, effectivePanelWidth, onPanelWidthChange]);\n  \n  // Determine panel style - use effective width\n  const panelStyle = { width: effectivePanelWidth };\n  \n  // Determine container style (height when embedded)\n  const containerStyle = embedded && height ? { height } : undefined;\n  \n  // Count filter label\n  const filterLabel = () => {\n    const totalFilters = selectedRoles.size + selectedSkills.size;\n    if (totalFilters === 0) return 'Filter';\n    return `${totalFilters} filter${totalFilters > 1 ? 's' : ''}`;\n  };\n  \n  return (\n    <div \n      className={`${styles.container} ${embedded ? styles.embedded : ''}`}\n      style={containerStyle}\n    >\n      {/* Left Panel - Staff List */}\n      <div className={styles.panel} style={panelStyle}>\n        <div className={styles.panelHeader}>\n          <div className={styles.headerLeft}>\n            <span className={styles.headerTitle}>Staff Overview</span>\n            <span className={styles.headerCount}>{siteStaff.length}{hasActiveFilters ? `/${allSiteStaff.length}` : ''}</span>\n          </div>\n          \n          {/* Filter Dropdown */}\n          <div ref={filterRef} className={styles.filterWrapper}>\n            <button \n              className={`${styles.filterTrigger} ${hasActiveFilters ? styles.hasFilters : ''}`}\n              onClick={() => setIsFilterOpen(!isFilterOpen)}\n              aria-expanded={isFilterOpen}\n              aria-haspopup=\"true\"\n            >\n              <svg\n                width=\"14\"\n                height=\"14\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n              >\n                <polygon points=\"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\" />\n              </svg>\n              <span className={styles.filterLabel}>{filterLabel()}</span>\n              <svg\n                className={`${styles.chevron} ${isFilterOpen ? styles.open : ''}`}\n                width=\"12\"\n                height=\"12\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                strokeWidth=\"2\"\n              >\n                <polyline points=\"6 9 12 15 18 9\" />\n              </svg>\n            </button>\n            \n            {isFilterOpen && (\n              <div className={styles.filterDropdown}>\n                {/* Clear all button */}\n                {hasActiveFilters && (\n                  <div className={styles.filterActions}>\n                    <button className={styles.filterActionBtn} onClick={clearAllFilters}>\n                      Clear all filters\n                    </button>\n                  </div>\n                )}\n                \n                <div className={styles.filterColumns}>\n                  {/* Role filters column */}\n                  <div className={styles.filterColumn}>\n                    <div className={styles.filterSectionTitle}>Roles</div>\n                    <div className={styles.filterOptions}>\n                      {staffRoles.length > 0 ? (\n                        staffRoles.map((role) => (\n                          <label key={role} className={styles.filterOption}>\n                            <input\n                              type=\"checkbox\"\n                              className={styles.filterCheckboxInput}\n                              checked={selectedRoles.has(role)}\n                              onChange={() => toggleRole(role)}\n                            />\n                            <span className={styles.filterCheckbox}>\n                              <svg className={styles.checkIcon} width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\">\n                                <polyline points=\"20 6 9 17 4 12\" />\n                              </svg>\n                            </span>\n                            <span className={styles.filterOptionText}>{role}</span>\n                          </label>\n                        ))\n                      ) : (\n                        <div className={styles.filterEmptyColumn}>No roles defined</div>\n                      )}\n                    </div>\n                  </div>\n                  \n                  {/* Skills filters column */}\n                  <div className={styles.filterColumn}>\n                    <div className={styles.filterSectionTitle}>Skills</div>\n                    <div className={styles.filterOptions}>\n                      {skills.length > 0 ? (\n                        skills.map((skill) => (\n                          <label key={skill.id} className={styles.filterOption}>\n                            <input\n                              type=\"checkbox\"\n                              className={styles.filterCheckboxInput}\n                              checked={selectedSkills.has(skill.id)}\n                              onChange={() => toggleSkill(skill.id)}\n                            />\n                            <span className={styles.filterCheckbox}>\n                              <svg className={styles.checkIcon} width=\"10\" height=\"10\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\">\n                                <polyline points=\"20 6 9 17 4 12\" />\n                              </svg>\n                            </span>\n                            <span \n                              className={styles.filterOptionText}\n                              style={{ display: 'flex', alignItems: 'center', gap: '6px' }}\n                            >\n                              <span \n                                className={styles.skillDot} \n                                style={{ backgroundColor: skill.color }}\n                              />\n                              {skill.name}\n                            </span>\n                          </label>\n                        ))\n                      ) : (\n                        <div className={styles.filterEmptyColumn}>No skills defined</div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n        <div className={styles.panelBody} ref={panelRef}>\n          {siteStaff.length === 0 ? (\n            <div className={styles.empty}>\n              <p>No staff found</p>\n            </div>\n          ) : (\n            siteStaff.map((staffMember) => {\n              const { available, maxCapacity } = calcAvailability(staffMember.id);\n              const isPartTime = maxCapacity < 100;\n              const rowHeight = rowHeights.get(staffMember.id) || BASE_ROW_HEIGHT;\n              const isExpanded = expandedStaff.has(staffMember.id);\n              const staffVacations = staffVacationsMap.get(staffMember.id) || [];\n              const staffAssignments = staffAssignmentsMap.get(staffMember.id) || [];\n              const canManage = canManageVacation(staffMember.id);\n              \n              return (\n                <div key={staffMember.id} className={styles.staffWrapper}>\n                  {/* Main staff row */}\n                  <div \n                    ref={setRowRef(staffMember.id)}\n                    className={`${styles.staffRow} ${canDrag ? styles.draggable : ''}`}\n                    style={{ minHeight: rowHeight }}\n                    onClick={() => toggleStaffExpand(staffMember.id)}\n                    draggable={canDrag}\n                    onDragStart={canDrag ? (e) => {\n                      e.stopPropagation();\n                      handleDragStart(e, 'staff', staffMember.id, staffMember.name);\n                    } : undefined}\n                    onDragEnd={canDrag ? handleDragEnd : undefined}\n                  >\n                    {canDrag && (\n                      <div className={styles.dragHandle} title=\"Drag to assign\">\n                        <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                          <circle cx=\"9\" cy=\"5\" r=\"2\" />\n                          <circle cx=\"9\" cy=\"12\" r=\"2\" />\n                          <circle cx=\"9\" cy=\"19\" r=\"2\" />\n                          <circle cx=\"15\" cy=\"5\" r=\"2\" />\n                          <circle cx=\"15\" cy=\"12\" r=\"2\" />\n                          <circle cx=\"15\" cy=\"19\" r=\"2\" />\n                        </svg>\n                      </div>\n                    )}\n                    <div className={`${styles.expandIcon} ${isExpanded ? styles.expanded : ''}`}>\n                      <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                        <polyline points=\"9 18 15 12 9 6\" />\n                      </svg>\n                    </div>\n                    <div \n                      className={`${styles.status} ${available > 0 ? styles.available : styles.overloaded} ${isPartTime ? styles.partTime : ''}`}\n                      title={isPartTime ? `Part-time: Max ${maxCapacity}% capacity` : 'Full-time: 100% capacity'}\n                    />\n                    <div className={styles.staffInfo}>\n                      <div className={styles.staffName}>\n                        {staffMember.name}\n                        {isPartTime && <span className={styles.partTimeBadge}>{maxCapacity}%</span>}\n                      </div>\n                      <div className={styles.staffMeta}>\n                        <span>{staffMember.role || 'No title'}</span>\n                        <span>  </span>\n                        <span \n                          className={available <= 0 ? styles.overloadedText : ''}\n                          title={isPartTime ? `${available}% of ${maxCapacity}% max capacity` : undefined}\n                        >\n                          {available}% available\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {/* Expanded content - Vacations first, then assignments */}\n                  {isExpanded && (\n                    <div className={styles.expandedContent}>\n                      {/* Vacation rows */}\n                      {staffVacations.map((vacation) => {\n                        const recurringPattern = parseRecurringPattern(vacation.description);\n                        const displayDescription = recurringPattern \n                          ? recurringPattern.cleanDescription \n                          : (vacation.description || 'Time Off');\n                        \n                        return (\n                          <div \n                            key={`v-${vacation.id}`}\n                            className={`${styles.detailRow} ${canManage ? styles.clickable : ''} ${styles.vacationRow} ${recurringPattern ? styles.recurringRow : ''}`}\n                            onClick={canManage ? () => openVacationModal(vacation, staffMember.id) : undefined}\n                          >\n                            <span className={`${styles.detailType} ${styles.vacation}`}>\n                              {recurringPattern ? (\n                                <span className={styles.recurringBadge} title={getRecurringDaysDisplay(recurringPattern.daysOfWeek)}>\n                                  <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                    <path d=\"M17 1l4 4-4 4\" />\n                                    <path d=\"M3 11V9a4 4 0 0 1 4-4h14\" />\n                                    <path d=\"M7 23l-4-4 4-4\" />\n                                    <path d=\"M21 13v2a4 4 0 0 1-4 4H3\" />\n                                  </svg>\n                                  Recurring\n                                </span>\n                              ) : 'Vacation'}\n                            </span>\n                            <span className={styles.detailName}>\n                              {displayDescription}\n                              {recurringPattern && (\n                                <span className={styles.recurringDays}>\n                                  {getRecurringDaysDisplay(recurringPattern.daysOfWeek)}\n                                </span>\n                              )}\n                            </span>\n                            <span className={styles.dateBadge}>{formatDateRange(vacation.start_date, vacation.end_date)}</span>\n                            {canManage && (\n                              <span \n                                className={styles.deleteBtn}\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  handleDeleteVacationRequest(\n                                    vacation.id,\n                                    staffMember.name,\n                                    displayDescription\n                                  );\n                                }}\n                                title=\"Delete vacation\"\n                              >\n                                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n                                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n                                </svg>\n                              </span>\n                            )}\n                          </div>\n                        );\n                      })}\n                      \n                      {/* Add vacation placeholder */}\n                      {canManage && (\n                        <div \n                          className={`${styles.detailRow} ${styles.addRow}`}\n                          onClick={() => openVacationModal(undefined, staffMember.id)}\n                        >\n                          <span className={styles.addIcon}>\n                            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                              <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n                              <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n                            </svg>\n                          </span>\n                          <span className={styles.addText}>Add vacation / time off</span>\n                        </div>\n                      )}\n                      \n                      {/* Assignment rows */}\n                      {staffAssignments.map((assignment) => (\n                        <div \n                          key={`a-${assignment.id}-${assignment.level}`}\n                          className={`${styles.detailRow} ${styles.clickable}`}\n                        >\n                          <span className={`${styles.detailType} ${styles.allocation}`}>{assignment.allocation}%</span>\n                          <span className={styles.detailName}>\n                            {assignment.projectName}\n                            {assignment.phaseName && `  ${assignment.phaseName}`}\n                          </span>\n                          <span className={styles.dateBadge}>\n                            {formatDateRange(assignment.start_date, assignment.end_date)}\n                          </span>\n                        </div>\n                      ))}\n                      \n                      {staffAssignments.length === 0 && staffVacations.length === 0 && !canManage && (\n                        <div className={styles.detailRow}>\n                          <span className={styles.noAssignments}>No assignments</span>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              );\n            })\n          )}\n          \n          {/* Bank Holidays Row - always show to maintain height sync with timeline */}\n          <BankHolidaysRow\n            isExpanded={embedded ? false : expandedBankHolidays}\n            onToggle={embedded ? undefined : () => setExpandedBankHolidays(!expandedBankHolidays)}\n          />\n          \n          {/* Company Events Row - always show to maintain height sync with timeline */}\n          <CompanyEventsRow\n            isExpanded={embedded ? false : expandedCompanyEvents}\n            onToggle={embedded ? undefined : () => setExpandedCompanyEvents(!expandedCompanyEvents)}\n          />\n        </div>\n      </div>\n      \n      {/* Resizer for panel width */}\n      <div\n        className={styles.resizer}\n        onMouseDown={handleResizeStart}\n      />\n      \n      {/* Right Side - Timeline */}\n      <div className={styles.timeline}>\n        {/* Purple header spacer in embedded mode - stays fixed above scroll */}\n        {embedded && <div className={styles.timelineHeaderSpacer} />}\n        \n        <div \n          className={styles.timelineScroll} \n          ref={timelineScrollRef}\n          onScroll={handleSyncScroll}\n        >\n          <div className={styles.timelineContent} style={{ width: totalWidth }}>\n            {/* Full header when not embedded */}\n            {!embedded && (\n              <TimelineHeader\n                headers={headers}\n                cells={cells}\n                cellWidth={cellWidth}\n                totalWidth={totalWidth}\n                viewMode={viewMode}\n              />\n            )}\n            {/* StaffTimelineBody handles its own vertical scrolling */}\n            <StaffTimelineBody\n              ref={timelineBodyRef}\n              staff={siteStaff}\n              assignmentsMap={staffAssignmentsMap}\n              vacationsMap={staffVacationsMap}\n              rowHeights={rowHeights}\n              expandedStaff={expandedStaff}\n              expandedBankHolidays={embedded ? false : expandedBankHolidays}\n              expandedCompanyEvents={embedded ? false : expandedCompanyEvents}\n              cells={cells}\n              cellWidth={cellWidth}\n              totalWidth={totalWidth}\n              viewMode={viewMode}\n            />\n          </div>\n        </div>\n      </div>\n      \n      {/* Delete Confirmation Modal */}\n      {deleteConfirm && (\n        <div className={styles.confirmOverlay} onClick={handleCancelDelete}>\n          <div className={styles.confirmModal} onClick={(e) => e.stopPropagation()}>\n            <div className={styles.confirmIcon}>\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <path d=\"M3 6h18\" />\n                <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6\" />\n                <path d=\"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\n                <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\" />\n                <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\" />\n              </svg>\n            </div>\n            <h3 className={styles.confirmTitle}>Delete Vacation</h3>\n            <p className={styles.confirmText}>\n              Are you sure you want to delete <strong>{deleteConfirm.description}</strong> for <strong>{deleteConfirm.staffName}</strong>?\n            </p>\n            <p className={styles.confirmWarning}>This action cannot be undone.</p>\n            <div className={styles.confirmActions}>\n              <button \n                className={styles.confirmCancel}\n                onClick={handleCancelDelete}\n                disabled={isDeleting}\n              >\n                Cancel\n              </button>\n              <button \n                className={styles.confirmDelete}\n                onClick={handleConfirmDelete}\n                disabled={isDeleting}\n              >\n                {isDeleting ? 'Deleting...' : 'Delete'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Helper function to calculate max overlapping bars\nfunction calculateMaxStack(\n  assignments: StaffAssignmentWithContext[], \n  vacations: { start_date: string; end_date: string }[]\n): number {\n  if (assignments.length === 0 && vacations.length === 0) return 0;\n  \n  // Collect all date ranges\n  const ranges = [\n    ...assignments.map((a) => ({ start: a.start_date, end: a.end_date })),\n    ...vacations.map((v) => ({ start: v.start_date, end: v.end_date })),\n  ];\n  \n  if (ranges.length === 0) return 0;\n  \n  // Simple greedy algorithm: count maximum concurrent ranges at any point\n  const events: Array<{ date: string; type: 'start' | 'end' }> = [];\n  \n  ranges.forEach((r) => {\n    if (r.start && r.end) {\n      events.push({ date: r.start, type: 'start' });\n      events.push({ date: r.end, type: 'end' });\n    }\n  });\n  \n  // Sort by date, with starts before ends on same day\n  events.sort((a, b) => {\n    if (a.date !== b.date) return a.date.localeCompare(b.date);\n    return a.type === 'start' ? -1 : 1;\n  });\n  \n  let maxConcurrent = 0;\n  let current = 0;\n  \n  events.forEach((event) => {\n    if (event.type === 'start') {\n      current++;\n      maxConcurrent = Math.max(maxConcurrent, current);\n    } else {\n      current--;\n    }\n  });\n  \n  return maxConcurrent;\n}\n\n// Types\ninterface StaffAssignmentWithContext {\n  id: number;\n  staff_id: number;\n  allocation: number;\n  start_date: string;\n  end_date: string;\n  projectName: string;\n  projectId: number;\n  phaseName?: string;\n  phaseId?: number;\n  subphaseName?: string;\n  subphaseId?: number;\n  level: 'project' | 'phase' | 'subphase';\n}\n\nexport type { StaffAssignmentWithContext };\nexport { BASE_ROW_HEIGHT, DETAIL_ROW_HEIGHT, BAR_HEIGHT, BAR_GAP, ROW_PADDING, INDICATOR_AREA_HEIGHT };\n","/**\n * EquipmentTimelineBody\n * Timeline body for equipment view - shows bookings\n * Uses same structure as TimelineBody from main Gantt\n */\n\nimport { forwardRef, useMemo } from 'react';\nimport { calculateBarPosition, calculateTodayPosition } from '@/components/gantt/utils';\nimport { TodayLine } from '@/components/gantt/Timeline/TodayLine';\nimport type { TimelineCell } from '@/components/gantt/utils';\nimport type { Equipment, ViewMode } from '@/types';\nimport type { EquipmentBookingWithContext } from './EquipmentView';\nimport styles from './EquipmentTimelineBody.module.css';\n\ninterface EquipmentTimelineBodyProps {\n  equipment: Equipment[];\n  bookingsMap: Map<number, EquipmentBookingWithContext[]>;\n  cells: TimelineCell[];\n  cellWidth: number;\n  totalWidth: number;\n  viewMode: ViewMode;\n}\n\nexport const EquipmentTimelineBody = forwardRef<HTMLDivElement, EquipmentTimelineBodyProps>(\n  function EquipmentTimelineBody({ \n    equipment, \n    bookingsMap, \n    cells, \n    cellWidth, \n    totalWidth,\n    viewMode \n  }, ref) {\n    \n    const showHighlighting = viewMode === 'week' || viewMode === 'month';\n    \n    // Calculate today line position\n    const todayPosition = useMemo(\n      () => calculateTodayPosition(cells, cellWidth),\n      [cells, cellWidth]\n    );\n    \n    return (\n      <div ref={ref} className={styles.body}>\n        <div \n          className={styles.content}\n          style={{ \n            width: totalWidth,\n            '--cell-width': `${cellWidth}px`\n          } as React.CSSProperties}\n        >\n          {/* Grid background */}\n          <div className={styles.grid}>\n            {showHighlighting && cells.map((cell, index) => \n              cell.isWeekend ? (\n                <div\n                  key={`weekend-${index}`}\n                  className={`${styles.gridCell} ${styles.weekend}`}\n                  style={{ left: index * cellWidth, width: cellWidth }}\n                />\n              ) : null\n            )}\n            {showHighlighting && cells.map((cell, index) => \n              cell.isBankHoliday ? (\n                <div\n                  key={`holiday-${index}`}\n                  className={`${styles.gridCell} ${styles.holiday}`}\n                  style={{ left: index * cellWidth, width: cellWidth }}\n                />\n              ) : null\n            )}\n            {showHighlighting && cells.map((cell, index) => \n              cell.isCompanyEvent ? (\n                <div\n                  key={`event-${index}`}\n                  className={`${styles.gridCell} ${styles.companyEvent}`}\n                  style={{ left: index * cellWidth, width: cellWidth }}\n                />\n              ) : null\n            )}\n          </div>\n          \n          {/* Today line */}\n          {todayPosition !== null && (\n            <TodayLine position={todayPosition} />\n          )}\n          \n          {/* Equipment rows */}\n          <div className={styles.rows}>\n            {equipment.map((equip) => (\n              <EquipmentRow\n                key={equip.id}\n                equipment={equip}\n                bookings={bookingsMap.get(equip.id) || []}\n                cells={cells}\n                cellWidth={cellWidth}\n                viewMode={viewMode}\n              />\n            ))}\n          </div>\n          \n          {/* Holiday and event tooltip layer - top strip only */}\n          {showHighlighting && (\n            <div className={styles.tooltipLayer}>\n              {cells.map((cell, index) => {\n                // Priority: bank holidays first, then company events\n                if (cell.isBankHoliday) {\n                  return (\n                    <div\n                      key={`tooltip-${index}`}\n                      className={`${styles.tooltipCell} ${styles.holiday}`}\n                      style={{ left: index * cellWidth, width: cellWidth }}\n                      data-tooltip={cell.bankHolidayName || 'Holiday'}\n                    />\n                  );\n                }\n                if (cell.isCompanyEvent) {\n                  return (\n                    <div\n                      key={`tooltip-${index}`}\n                      className={`${styles.tooltipCell} ${styles.event}`}\n                      style={{ left: index * cellWidth, width: cellWidth }}\n                      data-tooltip={cell.companyEventName || 'Company Event'}\n                    />\n                  );\n                }\n                return null;\n              })}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n);\n\n// Individual equipment row\ninterface EquipmentRowProps {\n  equipment: Equipment;\n  bookings: EquipmentBookingWithContext[];\n  cells: TimelineCell[];\n  cellWidth: number;\n  viewMode: ViewMode;\n}\n\nfunction EquipmentRow({ bookings, cells, cellWidth, viewMode }: EquipmentRowProps) {\n  // Calculate bar positions for bookings\n  const bookingBars = useMemo(() => {\n    return bookings.map((booking) => {\n      const pos = calculateBarPosition(booking.start_date, booking.end_date, cells, cellWidth, viewMode);\n      if (!pos) return null;\n      return {\n        ...booking,\n        left: pos.left,\n        width: pos.width,\n      };\n    }).filter(Boolean);\n  }, [bookings, cells, cellWidth, viewMode]);\n  \n  return (\n    <div className={styles.row}>\n      {bookingBars.map((booking) => booking && (\n        <div\n          key={`booking-${booking.id}`}\n          className={styles.bookingBar}\n          style={{ left: booking.left, width: booking.width }}\n          title={`${booking.projectName}${booking.phaseName ? ` - ${booking.phaseName}` : ''}`}\n        >\n          <span className={styles.barLabel}>{booking.projectName}</span>\n        </div>\n      ))}\n    </div>\n  );\n}\n","/**\n * Equipment View\n * Shows all equipment with their bookings on a timeline\n * Uses the same structure as GanttContainer but organized by equipment\n * Supports embedded mode for display below Gantt chart\n */\n\nimport { useMemo, useRef, useState, useEffect } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useScrollSync, useCtrlScrollZoom, useResourceDragDrop } from '@/hooks';\nimport { useTimelineScrollSync } from '@/contexts/TimelineScrollContext';\nimport { generateTimelineCells, generateTimelineHeaders } from '@/components/gantt/utils/timeline';\nimport { TimelineHeader } from '@/components/gantt/Timeline/TimelineHeader';\nimport { EquipmentTimelineBody } from './EquipmentTimelineBody';\nimport styles from './EquipmentView.module.css';\n\ninterface EquipmentViewProps {\n  /** When true, hides the main header and syncs scroll with parent Gantt */\n  embedded?: boolean;\n  /** Panel width when embedded (controlled by parent) */\n  panelWidth?: number;\n  /** Callback when panel width changes in embedded mode */\n  onPanelWidthChange?: (width: number) => void;\n  /** Height when embedded (controlled by parent resizer) */\n  height?: number;\n}\n\nexport function EquipmentView({ embedded = false, panelWidth, onPanelWidthChange, height }: EquipmentViewProps) {\n  const panelRef = useRef<HTMLDivElement>(null);\n  const timelineBodyRef = useRef<HTMLDivElement>(null);\n  const timelineScrollRef = useRef<HTMLDivElement>(null);\n  const filterRef = useRef<HTMLDivElement>(null);\n  \n  // Local panel width state for standalone mode only\n  const [localPanelWidth, setLocalPanelWidth] = useState(320);\n  \n  // Resizer width constant\n  const RESIZER_WIDTH = 4;\n  \n  // Effective panel width: use prop in embedded mode, local state otherwise\n  // When embedded, panelWidth includes the resizer width, so subtract it for the panel itself\n  const effectivePanelWidth = embedded ? ((panelWidth || 324) - RESIZER_WIDTH) : localPanelWidth;\n  \n  const equipment = useAppStore((s) => s.equipment);\n  const projects = useAppStore((s) => s.projects);\n  const currentSite = useAppStore((s) => s.currentSite);\n  const viewMode = useAppStore((s) => s.viewMode);\n  const currentDate = useAppStore((s) => s.currentDate);\n  const cellWidth = useAppStore((s) => s.cellWidth);\n  const bankHolidayDates = useAppStore((s) => s.bankHolidayDates);\n  const bankHolidays = useAppStore((s) => s.bankHolidays);\n  const companyEventDates = useAppStore((s) => s.companyEventDates);\n  const companyEvents = useAppStore((s) => s.companyEvents);\n  \n  const scrollToTodayTrigger = useUIStore((s) => s.scrollToTodayTrigger);\n  const currentUser = useAppStore((s) => s.currentUser);\n  \n  // Drag and drop for equipment assignment\n  const { handleDragStart, handleDragEnd } = useResourceDragDrop();\n  \n  // Check if user can drag equipment to assign\n  const canDrag = currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n  \n  // Enable Ctrl+Scroll zoom (only when not embedded)\n  useCtrlScrollZoom({ containerRef: timelineScrollRef, cellWidth, enabled: !embedded });\n  \n  // Register for scroll sync when embedded\n  const { handleScroll: handleSyncScroll } = useTimelineScrollSync(\n    'equipment-view',\n    timelineScrollRef,\n    embedded\n  );\n  \n  // Type filter state\n  const [selectedTypes, setSelectedTypes] = useState<Set<string>>(new Set());\n  const [isFilterOpen, setIsFilterOpen] = useState(false);\n  \n  // Sync vertical scroll between panel and timeline body\n  useScrollSync(panelRef, timelineBodyRef);\n  \n  // Get all equipment for current site (unfiltered for type extraction)\n  const allSiteEquipment = useMemo(() => \n    equipment.filter((e) => e.site_id === currentSite?.id)\n      .sort((a, b) => a.name.localeCompare(b.name)),\n    [equipment, currentSite]\n  );\n  \n  // Extract unique equipment types\n  const equipmentTypes = useMemo(() => {\n    const types = new Set<string>();\n    allSiteEquipment.forEach((e) => {\n      if (e.type) types.add(e.type);\n    });\n    return Array.from(types).sort((a, b) => a.localeCompare(b));\n  }, [allSiteEquipment]);\n  \n  // Filter equipment based on selected types (show all if none selected)\n  const siteEquipment = useMemo(() => {\n    if (selectedTypes.size === 0) return allSiteEquipment;\n    return allSiteEquipment.filter((e) => e.type && selectedTypes.has(e.type));\n  }, [allSiteEquipment, selectedTypes]);\n  \n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (filterRef.current && !filterRef.current.contains(e.target as Node)) {\n        setIsFilterOpen(false);\n      }\n    };\n    \n    if (isFilterOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    \n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isFilterOpen]);\n  \n  // Toggle a type selection\n  const toggleType = (type: string) => {\n    setSelectedTypes((prev) => {\n      const next = new Set(prev);\n      if (next.has(type)) {\n        next.delete(type);\n      } else {\n        next.add(type);\n      }\n      return next;\n    });\n  };\n  \n  // Select all types\n  const selectAllTypes = () => {\n    setSelectedTypes(new Set(equipmentTypes));\n  };\n  \n  // Clear all selections\n  const clearAllTypes = () => {\n    setSelectedTypes(new Set());\n  };\n  \n  // Generate timeline data\n  const cells = useMemo(() => \n    generateTimelineCells(currentDate, viewMode, bankHolidayDates, bankHolidays, companyEventDates, companyEvents),\n    [currentDate, viewMode, bankHolidayDates, bankHolidays, companyEventDates, companyEvents]\n  );\n  const headers = useMemo(() => \n    generateTimelineHeaders(cells, viewMode),\n    [cells, viewMode]\n  );\n  \n  const totalWidth = cells.length * cellWidth;\n  \n  // Scroll to today when trigger changes (only when not embedded - Gantt handles sync)\n  useEffect(() => {\n    if (embedded || !scrollToTodayTrigger || !timelineScrollRef.current) return;\n    \n    const todayIndex = cells.findIndex((cell) => cell.isToday);\n    if (todayIndex === -1) return;\n    \n    const scrollContainer = timelineScrollRef.current;\n    const containerWidth = scrollContainer.clientWidth;\n    const todayPosition = todayIndex * cellWidth;\n    \n    // Center today in the viewport\n    const scrollTo = Math.max(0, todayPosition - containerWidth / 2 + cellWidth / 2);\n    scrollContainer.scrollTo({ left: scrollTo, behavior: 'smooth' });\n  }, [embedded, scrollToTodayTrigger, cells, cellWidth]);\n  \n  // Build equipment bookings map\n  const equipmentBookingsMap = useMemo(() => {\n    const map = new Map<number, EquipmentBookingWithContext[]>();\n    siteEquipment.forEach((e) => map.set(e.id, []));\n    \n    projects.forEach((project) => {\n      if (project.archived) return;\n      \n      // Project-level equipment assignments\n      project.equipmentAssignments?.forEach((ea) => {\n        const existing = map.get(ea.equipment_id) || [];\n        existing.push({\n          ...ea,\n          projectName: project.name,\n          projectId: project.id,\n          level: 'project',\n        });\n        map.set(ea.equipment_id, existing);\n      });\n      \n      // Phase-level equipment assignments\n      project.phases?.forEach((phase) => {\n        phase.equipmentAssignments?.forEach((ea) => {\n          const existing = map.get(ea.equipment_id) || [];\n          existing.push({\n            ...ea,\n            start_date: ea.start_date || phase.start_date,\n            end_date: ea.end_date || phase.end_date,\n            projectName: project.name,\n            projectId: project.id,\n            phaseName: phase.name,\n            phaseId: phase.id,\n            level: 'phase',\n          });\n          map.set(ea.equipment_id, existing);\n        });\n      });\n    });\n    \n    return map;\n  }, [projects, siteEquipment]);\n  \n  // Calculate utilization (based on number of bookings - simplified)\n  const calcUtilization = (equipmentId: number): number => {\n    const bookings = equipmentBookingsMap.get(equipmentId) || [];\n    // Simple check: if any booking exists, show as utilized\n    return bookings.length > 0 ? 100 : 0;\n  };\n  \n  // Handle panel resize (horizontal - width)\n  const handleResizeStart = (e: React.MouseEvent) => {\n    e.preventDefault();\n    const startX = e.clientX;\n    const startWidth = effectivePanelWidth;\n\n    const handleMouseMove = (moveEvent: MouseEvent) => {\n      const delta = moveEvent.clientX - startX;\n      const newWidth = Math.max(200, Math.min(500, startWidth + delta));\n      \n      if (embedded && onPanelWidthChange) {\n        // In embedded mode, notify parent\n        onPanelWidthChange(newWidth);\n      } else {\n        // In standalone mode, update local state\n        setLocalPanelWidth(newWidth);\n      }\n    };\n\n    const handleMouseUp = () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      document.body.style.cursor = '';\n      document.body.style.userSelect = '';\n    };\n\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n    document.body.style.cursor = 'col-resize';\n    document.body.style.userSelect = 'none';\n  };\n  \n  // Determine panel style - use effective width\n  const panelStyle = { width: effectivePanelWidth };\n  \n  // Determine container style (height when embedded)\n  const containerStyle = embedded && height ? { height } : undefined;\n  \n  return (\n    <div \n      className={`${styles.container} ${embedded ? styles.embedded : ''}`}\n      style={containerStyle}\n    >\n      {/* Left Panel - Equipment List */}\n      <div className={styles.panel} style={panelStyle}>\n        <div className={styles.panelHeader}>\n          <div className={styles.headerLeft}>\n            <span className={styles.headerTitle}>Equipment Overview</span>\n            <span className={styles.headerCount}>{siteEquipment.length}</span>\n          </div>\n          \n          {/* Type Filter Dropdown */}\n          {equipmentTypes.length > 0 && (\n            <div ref={filterRef} className={styles.filterWrapper}>\n              <button \n                className={`${styles.filterTrigger} ${selectedTypes.size > 0 ? styles.hasFilters : ''}`}\n                onClick={() => setIsFilterOpen(!isFilterOpen)}\n                aria-expanded={isFilterOpen}\n                aria-haspopup=\"true\"\n              >\n                <svg\n                  width=\"14\"\n                  height=\"14\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                >\n                  <polygon points=\"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\" />\n                </svg>\n                <span className={styles.filterLabel}>\n                  {selectedTypes.size === 0 \n                    ? 'All Types' \n                    : selectedTypes.size === 1 \n                      ? Array.from(selectedTypes)[0]\n                      : `${selectedTypes.size} types`}\n                </span>\n                <svg\n                  className={`${styles.chevron} ${isFilterOpen ? styles.open : ''}`}\n                  width=\"12\"\n                  height=\"12\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                >\n                  <polyline points=\"6 9 12 15 18 9\" />\n                </svg>\n              </button>\n              \n              {isFilterOpen && (\n                <div className={styles.filterDropdown}>\n                  <div className={styles.filterActions}>\n                    <button \n                      className={styles.filterActionBtn}\n                      onClick={selectAllTypes}\n                    >\n                      Select All\n                    </button>\n                    <button \n                      className={styles.filterActionBtn}\n                      onClick={clearAllTypes}\n                    >\n                      Clear\n                    </button>\n                  </div>\n                  <div className={styles.filterDivider} />\n                  <div className={styles.filterOptions}>\n                    {equipmentTypes.map((type) => (\n                      <label key={type} className={styles.filterOption}>\n                        <input\n                          type=\"checkbox\"\n                          checked={selectedTypes.has(type)}\n                          onChange={() => toggleType(type)}\n                          className={styles.filterCheckboxInput}\n                        />\n                        <span className={styles.filterCheckbox}>\n                          <svg\n                            className={styles.checkIcon}\n                            width=\"10\"\n                            height=\"10\"\n                            viewBox=\"0 0 24 24\"\n                            fill=\"none\"\n                            stroke=\"currentColor\"\n                            strokeWidth=\"3\"\n                          >\n                            <polyline points=\"20 6 9 17 4 12\" />\n                          </svg>\n                        </span>\n                        <span className={styles.filterOptionText}>{type}</span>\n                      </label>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n        <div className={styles.panelBody} ref={panelRef}>\n          {siteEquipment.length === 0 ? (\n            <div className={styles.empty}>\n              <p>No equipment found</p>\n            </div>\n          ) : (\n            siteEquipment.map((equip) => {\n              const utilization = calcUtilization(equip.id);\n              return (\n                <div \n                  key={equip.id} \n                  className={`${styles.equipmentRow} ${canDrag ? styles.draggable : ''}`}\n                  draggable={canDrag}\n                  onDragStart={canDrag ? (e) => {\n                    e.stopPropagation();\n                    handleDragStart(e, 'equipment', equip.id, equip.name);\n                  } : undefined}\n                  onDragEnd={canDrag ? handleDragEnd : undefined}\n                >\n                  {canDrag && (\n                    <div className={styles.dragHandle} title=\"Drag to assign\">\n                      <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                        <circle cx=\"9\" cy=\"5\" r=\"2\" />\n                        <circle cx=\"9\" cy=\"12\" r=\"2\" />\n                        <circle cx=\"9\" cy=\"19\" r=\"2\" />\n                        <circle cx=\"15\" cy=\"5\" r=\"2\" />\n                        <circle cx=\"15\" cy=\"12\" r=\"2\" />\n                        <circle cx=\"15\" cy=\"19\" r=\"2\" />\n                      </svg>\n                    </div>\n                  )}\n                  <div className={`${styles.status} ${utilization > 0 ? styles.booked : styles.available}`} />\n                  <div className={styles.equipmentInfo}>\n                    <div className={styles.equipmentName}>{equip.name}</div>\n                    <div className={styles.equipmentMeta}>\n                      <span>{equip.type || 'Equipment'}</span>\n                      <span>  </span>\n                      <span>{utilization > 0 ? 'In use' : 'Available'}</span>\n                    </div>\n                  </div>\n                </div>\n              );\n            })\n          )}\n        </div>\n      </div>\n      \n      {/* Resizer for panel width */}\n      <div\n        className={styles.resizer}\n        onMouseDown={handleResizeStart}\n      />\n      \n      {/* Right Side - Timeline */}\n      <div className={styles.timeline}>\n        {/* Purple header spacer in embedded mode - stays fixed above scroll */}\n        {embedded && <div className={styles.timelineHeaderSpacer} />}\n        \n        <div \n          className={styles.timelineScroll} \n          ref={timelineScrollRef}\n          onScroll={handleSyncScroll}\n        >\n          <div className={styles.timelineContent} style={{ width: totalWidth }}>\n            {/* Full header when not embedded */}\n            {!embedded && (\n              <TimelineHeader\n                headers={headers}\n                cells={cells}\n                cellWidth={cellWidth}\n                totalWidth={totalWidth}\n                viewMode={viewMode}\n              />\n            )}\n            <EquipmentTimelineBody\n              ref={timelineBodyRef}\n              equipment={siteEquipment}\n              bookingsMap={equipmentBookingsMap}\n              cells={cells}\n              cellWidth={cellWidth}\n              totalWidth={totalWidth}\n              viewMode={viewMode}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Types\ninterface EquipmentBookingWithContext {\n  id: number;\n  equipment_id: number;\n  start_date: string;\n  end_date: string;\n  projectName: string;\n  projectId: number;\n  phaseName?: string;\n  phaseId?: number;\n  level: 'project' | 'phase';\n}\n\nexport type { EquipmentBookingWithContext };\n","/**\n * GanttContainer\n * Main container for the Gantt chart view\n * Optionally shows Staff or Equipment Overview panel below when toggled\n */\n\nimport { useRef, useMemo, useState, useCallback } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { ProjectPanel } from './ProjectPanel';\nimport { Timeline } from './Timeline';\nimport { useScrollSync } from './hooks/useScrollSync';\nimport { generateTimelineCells, generateTimelineHeaders } from './utils';\nimport { TimelineScrollProvider } from '@/contexts/TimelineScrollContext';\nimport { StaffView } from '@/components/views/StaffView/StaffView';\nimport { EquipmentView } from '@/components/views/EquipmentView/EquipmentView';\nimport { sortProjectsByOrder, setProjectOrder, getProjectOrder } from '@/utils/storage';\nimport styles from './GanttContainer.module.css';\n\nexport function GanttContainer() {\n  const projectPanelRef = useRef<HTMLDivElement>(null);\n  const timelineBodyRef = useRef<HTMLDivElement>(null);\n  const [panelWidth, setPanelWidth] = useState(320);\n  const [overviewHeight, setOverviewHeight] = useState(250);\n\n  const projects = useAppStore((s) => s.projects);\n  const currentSite = useAppStore((s) => s.currentSite);\n  const viewMode = useAppStore((s) => s.viewMode);\n  const currentDate = useAppStore((s) => s.currentDate);\n  const cellWidth = useAppStore((s) => s.cellWidth);\n  const bankHolidayDates = useAppStore((s) => s.bankHolidayDates);\n  const bankHolidays = useAppStore((s) => s.bankHolidays);\n  const companyEventDates = useAppStore((s) => s.companyEventDates);\n  const companyEvents = useAppStore((s) => s.companyEvents);\n  const customColumns = useAppStore((s) => s.customColumns);\n  const showAllCustomColumns = useAppStore((s) => s.showAllCustomColumns);\n  const hiddenCustomColumns = useAppStore((s) => s.hiddenCustomColumns);\n  const showStaffOverview = useAppStore((s) => s.showStaffOverview);\n  const showEquipmentOverview = useAppStore((s) => s.showEquipmentOverview);\n  const currentUser = useAppStore((s) => s.currentUser);\n\n  // Only superusers/admins can see overview panels\n  const canShowOverview = currentUser?.role === 'superuser' || currentUser?.role === 'admin';\n  \n  // Track project order changes to trigger re-sorting\n  const [projectOrderVersion, setProjectOrderVersion] = useState(0);\n  \n  // Calculate visible columns\n  const visibleColumns = showAllCustomColumns\n    ? customColumns.filter(col => !hiddenCustomColumns.has(col.id))\n    : [];\n\n  // Filter and sort projects for current site (non-archived)\n  const filteredProjects = useMemo(() => {\n    if (!currentSite?.id) return [];\n    \n    // First filter to current site and non-archived\n    const siteProjects = projects.filter((p) => p.site_id === currentSite.id && !p.archived);\n    \n    // Check if there's a custom order stored\n    const customOrder = getProjectOrder(currentSite.id);\n    \n    if (customOrder.length > 0) {\n      // Use custom order (sorts projects by their position in the stored order)\n      return sortProjectsByOrder(siteProjects, currentSite.id);\n    }\n    \n    // Default sort: confirmed first, then by name\n    return [...siteProjects].sort((a, b) => {\n      if (a.confirmed !== b.confirmed) {\n        return a.confirmed ? -1 : 1;\n      }\n      return a.name.localeCompare(b.name);\n    });\n  }, [projects, currentSite, projectOrderVersion]); // Include projectOrderVersion to re-sort when order changes\n  \n  // Handler to reorder projects (called from ProjectPanel)\n  const handleProjectReorder = useCallback((fromId: number, toId: number) => {\n    if (!currentSite?.id) return;\n    \n    // Get current order (or create from filtered projects)\n    let order = getProjectOrder(currentSite.id);\n    if (order.length === 0) {\n      // Initialize order from current filtered projects\n      order = filteredProjects.map(p => p.id);\n    }\n    \n    // Find positions\n    const fromIndex = order.indexOf(fromId);\n    const toIndex = order.indexOf(toId);\n    \n    // If project isn't in order yet (shouldn't happen), add it\n    if (fromIndex === -1) {\n      order.push(fromId);\n    }\n    \n    // Move the project\n    if (fromIndex !== -1 && toIndex !== -1) {\n      order.splice(fromIndex, 1);\n      order.splice(toIndex, 0, fromId);\n    }\n    \n    // Save the new order\n    setProjectOrder(currentSite.id, order);\n    \n    // Trigger re-render\n    setProjectOrderVersion(v => v + 1);\n  }, [currentSite, filteredProjects]);\n\n  // Generate timeline cells\n  const timelineCells = useMemo(\n    () =>\n      generateTimelineCells(\n        currentDate,\n        viewMode,\n        bankHolidayDates,\n        bankHolidays,\n        companyEventDates,\n        companyEvents\n      ),\n    [currentDate, viewMode, bankHolidayDates, bankHolidays, companyEventDates, companyEvents]\n  );\n\n  // Generate timeline headers\n  const timelineHeaders = useMemo(\n    () => generateTimelineHeaders(timelineCells, viewMode),\n    [timelineCells, viewMode]\n  );\n\n  // Sync scroll between panels\n  useScrollSync(projectPanelRef, timelineBodyRef);\n\n  // Calculate custom columns width for staff panel alignment (only visible columns)\n  const customColumnsWidth = visibleColumns.reduce((sum, col) => sum + col.width, 0);\n  const totalPanelWidth = panelWidth + customColumnsWidth;\n\n  // Handle panel resize (horizontal - width)\n  const handleResizeStart = (e: React.MouseEvent) => {\n    e.preventDefault();\n    const startX = e.clientX;\n    const startWidth = panelWidth;\n\n    const handleMouseMove = (e: MouseEvent) => {\n      const delta = e.clientX - startX;\n      const newWidth = Math.max(200, Math.min(600, startWidth + delta));\n      setPanelWidth(newWidth);\n    };\n\n    const handleMouseUp = () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      document.body.style.cursor = '';\n      document.body.style.userSelect = '';\n    };\n\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n    document.body.style.cursor = 'col-resize';\n    document.body.style.userSelect = 'none';\n  };\n\n  // Handle overview panel height resize (vertical)\n  const handleVerticalResizeStart = (e: React.MouseEvent) => {\n    e.preventDefault();\n    const startY = e.clientY;\n    const startHeight = overviewHeight;\n\n    const handleMouseMove = (e: MouseEvent) => {\n      // Dragging up increases height, dragging down decreases\n      const delta = startY - e.clientY;\n      const newHeight = Math.max(100, Math.min(500, startHeight + delta));\n      setOverviewHeight(newHeight);\n    };\n\n    const handleMouseUp = () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n      document.body.style.cursor = '';\n      document.body.style.userSelect = '';\n    };\n\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n    document.body.style.cursor = 'row-resize';\n    document.body.style.userSelect = 'none';\n  };\n\n  // Determine which overview panel to show (only one at a time, mutual exclusivity handled in store)\n  const showStaffPanel = canShowOverview && showStaffOverview;\n  const showEquipmentPanel = canShowOverview && showEquipmentOverview;\n  const showAnyOverview = showStaffPanel || showEquipmentPanel;\n  \n  // Account for the 4px resizer in total panel width\n  const RESIZER_WIDTH = 4;\n  \n  // Handle overview panel width change (from embedded StaffView/EquipmentView resizer)\n  // This updates the main panel width to keep alignment\n  const handleOverviewPanelWidthChange = useCallback((newTotalWidth: number) => {\n    // newTotalWidth includes resizer, so subtract it and custom columns width\n    const newPanelWidth = newTotalWidth - RESIZER_WIDTH - customColumnsWidth;\n    const constrainedWidth = Math.max(200, Math.min(600, newPanelWidth));\n    setPanelWidth(constrainedWidth);\n  }, [customColumnsWidth]);\n\n  const ganttContent = (\n    <>\n      <div className={styles.ganttArea}>\n        <ProjectPanel\n          ref={projectPanelRef}\n          projects={filteredProjects}\n          width={panelWidth}\n          onProjectReorder={handleProjectReorder}\n        />\n        \n        <div\n          className={styles.resizer}\n          onMouseDown={handleResizeStart}\n        />\n        \n        <Timeline\n          ref={timelineBodyRef}\n          cells={timelineCells}\n          headers={timelineHeaders}\n          projects={filteredProjects}\n          cellWidth={cellWidth}\n          viewMode={viewMode}\n          hasCustomColumns={visibleColumns.length > 0}\n        />\n      </div>\n      \n      {/* Overview Panel - Staff or Equipment (only one at a time) */}\n      {showAnyOverview && (\n        <>\n          {/* Horizontal resizer */}\n          <div\n            className={`${styles.horizontalResizer} ${showEquipmentPanel ? styles.equipment : ''}`}\n            onMouseDown={handleVerticalResizeStart}\n          />\n          {showStaffPanel && (\n            <StaffView \n              embedded={true} \n              panelWidth={totalPanelWidth + RESIZER_WIDTH}\n              onPanelWidthChange={handleOverviewPanelWidthChange}\n              height={overviewHeight}\n            />\n          )}\n          {showEquipmentPanel && (\n            <EquipmentView \n              embedded={true} \n              panelWidth={totalPanelWidth + RESIZER_WIDTH}\n              onPanelWidthChange={handleOverviewPanelWidthChange}\n              height={overviewHeight}\n            />\n          )}\n        </>\n      )}\n    </>\n  );\n\n  // Always wrap with TimelineScrollProvider to maintain stable component tree\n  // This prevents remounting when overview panels are toggled\n  return (\n    <TimelineScrollProvider>\n      <div className={styles.container}>\n        {ganttContent}\n      </div>\n    </TimelineScrollProvider>\n  );\n}\n","/**\n * ShiftTooltip\n * Displays detailed information when hovering over a phase/subphase while holding Shift\n */\n\nimport { useEffect, useState, useCallback, useRef } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { differenceInDays, eachDayOfInterval, isWeekend, parseISO, format } from 'date-fns';\nimport type { Phase, Subphase, Project } from '@/types';\nimport styles from './ShiftTooltip.module.css';\n\ninterface StaffInfo {\n  name: string;\n  allocation: number;\n}\n\ninterface TooltipData {\n  type: 'phase' | 'subphase' | 'project';\n  title: string;\n  projectName?: string;  // Only for phase/subphase\n  parentName?: string;\n  startDate: string;\n  endDate: string;\n  completion: number | null;\n  isCalculatedCompletion: boolean;\n  workDays: number;\n  totalDays: number;\n  holidays: number;\n  staff: StaffInfo[];\n  x: number;\n  y: number;\n  // Project-specific\n  customer?: string | null;\n  pmName?: string | null;\n  confirmed?: boolean;\n}\n\n// Calculate work days excluding weekends and holidays\nfunction calculateDurationStats(startDate: string, endDate: string, bankHolidayDates: Set<string>) {\n  const start = parseISO(startDate);\n  const end = parseISO(endDate);\n  \n  const totalDays = differenceInDays(end, start) + 1;\n  \n  let workDays = 0;\n  let holidays = 0;\n  \n  try {\n    const days = eachDayOfInterval({ start, end });\n    for (const day of days) {\n      const dateStr = format(day, 'yyyy-MM-dd');\n      const isBankHoliday = bankHolidayDates.has(dateStr);\n      const isWeekendDay = isWeekend(day);\n      \n      if (isBankHoliday) {\n        holidays++;\n      } else if (!isWeekendDay) {\n        workDays++;\n      }\n    }\n  } catch {\n    // If dates are invalid, just use total days\n    workDays = totalDays;\n  }\n  \n  return { totalDays, workDays, holidays };\n}\n\n// Recursively calculate effective completion for an item\n// This mirrors the logic in PhaseRow.tsx\nfunction getEffectiveCompletion(item: Phase | Subphase): { completion: number | null; isCalculated: boolean } {\n  if (!item) return { completion: null, isCalculated: false };\n  \n  const children = item.children ?? [];\n  \n  // Check if any children have completion (direct or calculated)\n  let hasChildrenWithCompletion = false;\n  for (const child of children) {\n    const childResult = getEffectiveCompletion(child);\n    if (childResult && childResult.completion !== null) {\n      hasChildrenWithCompletion = true;\n      break;\n    }\n  }\n  \n  if (hasChildrenWithCompletion) {\n    // Calculate weighted average from children's effective completion\n    // Children without completion count as 0%\n    let weightedSum = 0;\n    let totalWeight = 0;\n    \n    for (const child of children) {\n      const childResult = getEffectiveCompletion(child);\n      const start = parseISO(child.start_date);\n      const end = parseISO(child.end_date);\n      const days = Math.max(1, differenceInDays(end, start) + 1);\n      // Unset completion counts as 0% when at least one sibling has a value\n      const completion = childResult.completion ?? 0;\n      weightedSum += completion * days;\n      totalWeight += days;\n    }\n    \n    if (totalWeight > 0) {\n      return { completion: Math.round(weightedSum / totalWeight), isCalculated: true };\n    }\n  }\n  \n  // No children with completion, return item's own completion\n  return { completion: item.completion ?? null, isCalculated: false };\n}\n\n// Format date range nicely using browser locale\nfunction formatDateRange(startDate: string, endDate: string): string {\n  const start = parseISO(startDate);\n  const end = parseISO(endDate);\n  \n  const formatter = new Intl.DateTimeFormat(undefined, {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n  \n  return `${formatter.format(start)} - ${formatter.format(end)}`;\n}\n\n// Find project by phase ID\nfunction findProjectByPhaseId(projects: Project[], phaseId: number): Project | null {\n  return projects.find(p => (p.phases ?? []).some(ph => ph.id === phaseId)) ?? null;\n}\n\n// Find phase by ID\nfunction findPhaseById(projects: Project[], phaseId: number): Phase | null {\n  for (const project of projects) {\n    const phase = (project.phases ?? []).find(ph => ph.id === phaseId);\n    if (phase) return phase;\n  }\n  return null;\n}\n\n// Find subphase and its context\nfunction findSubphaseContext(projects: Project[], subphaseId: number): { \n  subphase: Subphase; \n  project: Project; \n  parentPhase: Phase;\n} | null {\n  for (const project of projects) {\n    for (const phase of (project.phases ?? [])) {\n      const found = findSubphaseInTree(phase.children ?? [], subphaseId);\n      if (found) {\n        return { subphase: found, project, parentPhase: phase };\n      }\n    }\n  }\n  return null;\n}\n\nfunction findSubphaseInTree(children: Subphase[], targetId: number): Subphase | null {\n  for (const child of children) {\n    if (child.id === targetId) return child;\n    if (child.children?.length) {\n      const found = findSubphaseInTree(child.children, targetId);\n      if (found) return found;\n    }\n  }\n  return null;\n}\n\n// Check if target is in a link zone (start or end clickable areas)\nfunction isInLinkZone(target: HTMLElement): boolean {\n  // Check if the target or any parent is a link zone\n  let el: HTMLElement | null = target;\n  while (el) {\n    if (el.classList.contains('linkZone') || \n        el.className?.includes?.('linkZone') ||\n        el.getAttribute('title')?.includes('linking')) {\n      return true;\n    }\n    // Stop at the bar element\n    if (el.dataset.phaseId || el.dataset.subphaseId) {\n      break;\n    }\n    el = el.parentElement;\n  }\n  return false;\n}\n\nexport function ShiftTooltip() {\n  const [tooltipData, setTooltipData] = useState<TooltipData | null>(null);\n  const [isShiftHeld, setIsShiftHeld] = useState(false);\n  const projects = useAppStore((s) => s.projects);\n  const bankHolidayDates = useAppStore((s) => s.bankHolidayDates);\n  const currentBarRef = useRef<HTMLElement | null>(null);\n\n  // Track shift key\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Shift') {\n        setIsShiftHeld(true);\n      }\n    };\n    \n    const handleKeyUp = (e: KeyboardEvent) => {\n      if (e.key === 'Shift') {\n        setIsShiftHeld(false);\n        setTooltipData(null);\n        currentBarRef.current = null;\n      }\n    };\n    \n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n    \n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, []);\n\n  // Show tooltip for a phase bar\n  const showPhaseTooltip = useCallback((phaseId: number, x: number, y: number) => {\n    const phase = findPhaseById(projects, phaseId);\n    const project = findProjectByPhaseId(projects, phaseId);\n    \n    if (phase && project) {\n      const { totalDays, workDays, holidays } = calculateDurationStats(\n        phase.start_date, \n        phase.end_date, \n        bankHolidayDates\n      );\n      const completionResult = getEffectiveCompletion(phase);\n      \n      // Get staff assignments for this phase\n      const staff: StaffInfo[] = (phase.staffAssignments ?? []).map(a => ({\n        name: a.staff_name || `Staff #${a.staff_id}`,\n        allocation: a.allocation,\n      }));\n      \n      setTooltipData({\n        type: 'phase',\n        title: phase.name,\n        projectName: project.name,\n        startDate: phase.start_date,\n        endDate: phase.end_date,\n        completion: completionResult.completion,\n        isCalculatedCompletion: completionResult.isCalculated,\n        workDays,\n        totalDays,\n        holidays,\n        staff,\n        x,\n        y,\n      });\n    }\n  }, [projects, bankHolidayDates]);\n\n  // Show tooltip for a subphase bar\n  const showSubphaseTooltip = useCallback((subphaseId: number, x: number, y: number) => {\n    const context = findSubphaseContext(projects, subphaseId);\n    \n    if (context) {\n      const { subphase, project, parentPhase } = context;\n      const { totalDays, workDays, holidays } = calculateDurationStats(\n        subphase.start_date, \n        subphase.end_date, \n        bankHolidayDates\n      );\n      const completionResult = getEffectiveCompletion(subphase);\n      \n      // Get staff assignments for this subphase\n      const staff: StaffInfo[] = (subphase.staffAssignments ?? []).map(a => ({\n        name: a.staff_name || `Staff #${a.staff_id}`,\n        allocation: a.allocation,\n      }));\n      \n      setTooltipData({\n        type: 'subphase',\n        title: subphase.name,\n        projectName: project.name,\n        parentName: parentPhase.name,\n        startDate: subphase.start_date,\n        endDate: subphase.end_date,\n        completion: completionResult.completion,\n        isCalculatedCompletion: completionResult.isCalculated,\n        workDays,\n        totalDays,\n        holidays,\n        staff,\n        x,\n        y,\n      });\n    }\n  }, [projects, bankHolidayDates]);\n\n  // Show tooltip for a project bar\n  const showProjectTooltip = useCallback((projectId: number, x: number, y: number) => {\n    const project = projects.find(p => p.id === projectId);\n    \n    if (project) {\n      // Calculate project dates from phases if not set\n      const startDate = project.start_date || (project.phases?.[0]?.start_date ?? '');\n      const endDate = project.end_date || (project.phases?.reduce((latest, p) => \n        p.end_date > latest ? p.end_date : latest, ''\n      ) ?? '');\n      \n      if (!startDate || !endDate) return;\n      \n      const { totalDays, workDays, holidays } = calculateDurationStats(\n        startDate, \n        endDate, \n        bankHolidayDates\n      );\n      \n      // Get all staff assignments for the project (project-level)\n      const staff: StaffInfo[] = (project.staffAssignments ?? []).map(a => ({\n        name: a.staff_name || `Staff #${a.staff_id}`,\n        allocation: a.allocation,\n      }));\n      \n      // Calculate overall project completion from phases\n      let completion: number | null = null;\n      let isCalculatedCompletion = false;\n      const phasesWithCompletion = (project.phases ?? []).filter(p => {\n        const result = getEffectiveCompletion(p);\n        return result.completion !== null;\n      });\n      \n      if (phasesWithCompletion.length > 0) {\n        let weightedSum = 0;\n        let totalWeight = 0;\n        \n        for (const phase of project.phases ?? []) {\n          const result = getEffectiveCompletion(phase);\n          const start = parseISO(phase.start_date);\n          const end = parseISO(phase.end_date);\n          const days = Math.max(1, differenceInDays(end, start) + 1);\n          const comp = result.completion ?? 0;\n          weightedSum += comp * days;\n          totalWeight += days;\n        }\n        \n        if (totalWeight > 0) {\n          completion = Math.round(weightedSum / totalWeight);\n          isCalculatedCompletion = true;\n        }\n      }\n      \n      setTooltipData({\n        type: 'project',\n        title: project.name,\n        startDate,\n        endDate,\n        completion,\n        isCalculatedCompletion,\n        workDays,\n        totalDays,\n        holidays,\n        staff,\n        customer: project.customer,\n        pmName: project.pm_name,\n        confirmed: project.confirmed,\n        x,\n        y,\n      });\n    }\n  }, [projects, bankHolidayDates]);\n\n  // Handle mouse move to track hover and update position\n  useEffect(() => {\n    const handleMouseMove = (e: MouseEvent) => {\n      if (!isShiftHeld) {\n        if (tooltipData) {\n          setTooltipData(null);\n          currentBarRef.current = null;\n        }\n        return;\n      }\n      \n      const target = e.target as HTMLElement;\n      \n      // Check if we're in a link zone - don't show tooltip\n      if (isInLinkZone(target)) {\n        setTooltipData(null);\n        currentBarRef.current = null;\n        return;\n      }\n      \n      // Find the bar element - must be a direct bar element, not just within a row\n      // The bar has data-phase-id, data-subphase-id, or data-project-id directly on it\n      const bar = target.closest('[data-phase-id], [data-subphase-id], [data-project-id]') as HTMLElement;\n      \n      if (!bar) {\n        // Not over a bar, hide tooltip\n        setTooltipData(null);\n        currentBarRef.current = null;\n        return;\n      }\n      \n      // Make sure we're actually over the bar visually, not just in its container\n      // Check if the bar has the expected bar styling (position absolute, has width)\n      const barStyle = window.getComputedStyle(bar);\n      const isActualBar = barStyle.position === 'absolute' || \n                          bar.classList.toString().includes('bar') ||\n                          bar.classList.toString().includes('Bar');\n      \n      if (!isActualBar) {\n        // This is probably a row element, not the actual bar\n        setTooltipData(null);\n        currentBarRef.current = null;\n        return;\n      }\n      \n      // Check if mouse is actually within the bar's bounding rect\n      const barRect = bar.getBoundingClientRect();\n      if (e.clientX < barRect.left || e.clientX > barRect.right ||\n          e.clientY < barRect.top || e.clientY > barRect.bottom) {\n        // Mouse is outside the bar's visual bounds\n        setTooltipData(null);\n        currentBarRef.current = null;\n        return;\n      }\n      \n      // Update position if over the same bar\n      if (bar === currentBarRef.current && tooltipData) {\n        setTooltipData(prev => prev ? { ...prev, x: e.clientX, y: e.clientY } : null);\n        return;\n      }\n      \n      // New bar - show tooltip\n      currentBarRef.current = bar;\n      const phaseId = bar.dataset.phaseId;\n      const subphaseId = bar.dataset.subphaseId;\n      const projectId = bar.dataset.projectId;\n      \n      if (phaseId) {\n        showPhaseTooltip(parseInt(phaseId), e.clientX, e.clientY);\n      } else if (subphaseId) {\n        showSubphaseTooltip(parseInt(subphaseId), e.clientX, e.clientY);\n      } else if (projectId) {\n        showProjectTooltip(parseInt(projectId), e.clientX, e.clientY);\n      }\n    };\n    \n    document.addEventListener('mousemove', handleMouseMove);\n    \n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n    };\n  }, [isShiftHeld, tooltipData, showPhaseTooltip, showSubphaseTooltip, showProjectTooltip]);\n\n  if (!tooltipData || !isShiftHeld) return null;\n\n  const completionText = tooltipData.completion !== null\n    ? `${tooltipData.completion}%${tooltipData.isCalculatedCompletion ? ' (calc)' : ''}`\n    : '';\n\n  // Position tooltip with offset from cursor, ensuring it stays in viewport\n  const tooltipStyle: React.CSSProperties = {\n    left: Math.min(tooltipData.x + 15, window.innerWidth - 320),\n    top: Math.min(tooltipData.y + 15, window.innerHeight - 280),\n  };\n\n  return (\n    <div className={styles.tooltip} style={tooltipStyle}>\n      <div className={styles.title}>{tooltipData.title}</div>\n      \n      {/* Project-specific: show customer, PM, status */}\n      {tooltipData.type === 'project' && (\n        <>\n          {tooltipData.customer && (\n            <div className={styles.row}>\n              <span className={styles.label}>Customer:</span>\n              <span>{tooltipData.customer}</span>\n            </div>\n          )}\n          {tooltipData.pmName && (\n            <div className={styles.row}>\n              <span className={styles.label}>PM:</span>\n              <span>{tooltipData.pmName}</span>\n            </div>\n          )}\n          <div className={styles.row}>\n            <span className={styles.label}>Status:</span>\n            <span className={tooltipData.confirmed ? styles.confirmed : styles.unconfirmed}>\n              {tooltipData.confirmed ? 'Confirmed' : 'Unconfirmed'}\n            </span>\n          </div>\n        </>\n      )}\n      \n      {/* Phase/Subphase: show project name */}\n      {tooltipData.type !== 'project' && tooltipData.projectName && (\n        <div className={styles.row}>\n          <span className={styles.label}>Project:</span>\n          <span>{tooltipData.projectName}</span>\n        </div>\n      )}\n      \n      {tooltipData.parentName && (\n        <div className={styles.row}>\n          <span className={styles.label}>Parent:</span>\n          <span>{tooltipData.parentName}</span>\n        </div>\n      )}\n      \n      <div className={styles.row}>\n        <span className={styles.label}>Period:</span>\n        <span>{formatDateRange(tooltipData.startDate, tooltipData.endDate)}</span>\n      </div>\n      <div className={styles.row}>\n        <span className={styles.label}>Completion:</span>\n        <span>{completionText}</span>\n      </div>\n      <div className={styles.row}>\n        <span className={styles.label}>Work days:</span>\n        <span>\n          {tooltipData.workDays} days\n          {tooltipData.holidays > 0 && ` (excl. ${tooltipData.holidays} hol.)`}\n        </span>\n      </div>\n      <div className={styles.row}>\n        <span className={styles.label}>Total:</span>\n        <span>{tooltipData.totalDays} days</span>\n      </div>\n      \n      {/* Staff assignments */}\n      {tooltipData.staff.length > 0 && (\n        <div className={styles.staffSection}>\n          <div className={styles.staffHeader}>Assigned Staff:</div>\n          {tooltipData.staff.map((s, i) => (\n            <div key={i} className={styles.staffRow}>\n              <span className={styles.staffName}>{s.name}</span>\n              <span className={styles.staffAllocation}>{s.allocation}%</span>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * CrossSiteTimelineBody\n * Timeline body for cross-site view - shows site headers and project bars\n * Uses same structure as TimelineBody from main Gantt\n */\n\nimport { forwardRef, useMemo } from 'react';\nimport { calculateBarPosition, calculateTodayPosition } from '@/components/gantt/utils';\nimport { TodayLine } from '@/components/gantt/Timeline/TodayLine';\nimport type { TimelineCell } from '@/components/gantt/utils';\nimport type { ViewMode } from '@/types';\nimport type { CrossSiteRow } from './CrossSiteView';\nimport styles from './CrossSiteTimelineBody.module.css';\n\ninterface CrossSiteTimelineBodyProps {\n  rows: CrossSiteRow[];\n  cells: TimelineCell[];\n  cellWidth: number;\n  totalWidth: number;\n  viewMode: ViewMode;\n}\n\nexport const CrossSiteTimelineBody = forwardRef<HTMLDivElement, CrossSiteTimelineBodyProps>(\n  function CrossSiteTimelineBody({ \n    rows, \n    cells, \n    cellWidth, \n    totalWidth,\n    viewMode \n  }, ref) {\n    \n    const showHighlighting = viewMode === 'week' || viewMode === 'month';\n    \n    // Calculate today line position\n    const todayPosition = useMemo(\n      () => calculateTodayPosition(cells, cellWidth),\n      [cells, cellWidth]\n    );\n    \n    return (\n      <div ref={ref} className={styles.body}>\n        <div \n          className={styles.content}\n          style={{ \n            width: totalWidth,\n            '--cell-width': `${cellWidth}px`\n          } as React.CSSProperties}\n        >\n          {/* Grid background */}\n          <div className={styles.grid}>\n            {showHighlighting && cells.map((cell, index) => \n              cell.isWeekend ? (\n                <div\n                  key={`weekend-${index}`}\n                  className={`${styles.gridCell} ${styles.weekend}`}\n                  style={{ left: index * cellWidth, width: cellWidth }}\n                />\n              ) : null\n            )}\n            {showHighlighting && cells.map((cell, index) => \n              cell.isBankHoliday ? (\n                <div\n                  key={`holiday-${index}`}\n                  className={`${styles.gridCell} ${styles.holiday}`}\n                  style={{ left: index * cellWidth, width: cellWidth }}\n                />\n              ) : null\n            )}\n            {showHighlighting && cells.map((cell, index) => \n              cell.isCompanyEvent ? (\n                <div\n                  key={`event-${index}`}\n                  className={`${styles.gridCell} ${styles.companyEvent}`}\n                  style={{ left: index * cellWidth, width: cellWidth }}\n                />\n              ) : null\n            )}\n            {cells.map((cell, index) => \n              cell.isToday ? (\n                <div\n                  key={`today-${index}`}\n                  className={`${styles.gridCell} ${styles.today}`}\n                  style={{ left: index * cellWidth, width: cellWidth }}\n                />\n              ) : null\n            )}\n          </div>\n          \n          {/* Today line */}\n          {todayPosition !== null && (\n            <TodayLine position={todayPosition} />\n          )}\n          \n          {/* Rows */}\n          <div className={styles.rows}>\n            {rows.map((row) => {\n              if (row.type === 'site') {\n                return (\n                  <div \n                    key={`site-row-${row.site.id}`}\n                    className={`${styles.siteRow} ${row.isCurrentSite ? styles.currentSite : ''}`}\n                  />\n                );\n              } else {\n                return (\n                  <ProjectRow\n                    key={`project-row-${row.project.id}`}\n                    row={row}\n                    cells={cells}\n                    cellWidth={cellWidth}\n                    viewMode={viewMode}\n                  />\n                );\n              }\n            })}\n          </div>\n          \n          {/* Holiday and event tooltip overlay - sits above all content */}\n          {showHighlighting && (\n            <div className={styles.holidayTooltipOverlay}>\n              {cells.map((cell, index) => {\n                if (cell.isCompanyEvent) {\n                  return (\n                    <div\n                      key={`event-tooltip-${index}`}\n                      className={styles.eventTooltipZone}\n                      style={{ left: index * cellWidth, width: cellWidth }}\n                      data-tooltip={cell.companyEventName || 'Company Event'}\n                    />\n                  );\n                }\n                if (cell.isBankHoliday) {\n                  return (\n                    <div\n                      key={`holiday-tooltip-${index}`}\n                      className={styles.holidayTooltipZone}\n                      style={{ left: index * cellWidth, width: cellWidth }}\n                      data-tooltip={cell.bankHolidayName || 'Holiday'}\n                    />\n                  );\n                }\n                return null;\n              })}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n);\n\n// Project row with bar\ninterface ProjectRowProps {\n  row: Extract<CrossSiteRow, { type: 'project' }>;\n  cells: TimelineCell[];\n  cellWidth: number;\n  viewMode: ViewMode;\n}\n\nfunction ProjectRow({ row, cells, cellWidth, viewMode }: ProjectRowProps) {\n  const { project, isCurrentSite, displayName } = row;\n  \n  // Calculate bar position\n  const barPosition = useMemo(() => {\n    if (!project.start_date || !project.end_date) return null;\n    return calculateBarPosition(project.start_date, project.end_date, cells, cellWidth, viewMode);\n  }, [project.start_date, project.end_date, cells, cellWidth, viewMode]);\n  \n  return (\n    <div className={styles.projectRow}>\n      {barPosition && (\n        <div\n          className={`${styles.bar} ${project.confirmed ? styles.confirmed : styles.unconfirmed} ${!isCurrentSite ? styles.masked : ''}`}\n          style={{ left: barPosition.left, width: barPosition.width }}\n          title={isCurrentSite ? project.name : 'Confidential'}\n        >\n          <span className={styles.barLabel}>\n            {isCurrentSite ? displayName : 'Project'}\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * Cross-Site View\n * Shows all sites and their projects in a Gantt timeline\n * Other sites' project details are masked for confidentiality\n * Uses the same structure as GanttContainer\n */\n\nimport { useMemo, useRef, useEffect } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useScrollSync, useCtrlScrollZoom } from '@/hooks';\nimport { generateTimelineCells, generateTimelineHeaders } from '@/components/gantt/utils/timeline';\nimport { TimelineHeader } from '@/components/gantt/Timeline/TimelineHeader';\nimport { CrossSiteTimelineBody } from './CrossSiteTimelineBody';\nimport styles from './CrossSiteView.module.css';\n\nexport function CrossSiteView() {\n  const panelRef = useRef<HTMLDivElement>(null);\n  const timelineBodyRef = useRef<HTMLDivElement>(null);\n  const timelineScrollRef = useRef<HTMLDivElement>(null);\n  \n  const sites = useAppStore((s) => s.sites);\n  const projects = useAppStore((s) => s.projects);\n  const currentSite = useAppStore((s) => s.currentSite);\n  const viewMode = useAppStore((s) => s.viewMode);\n  const currentDate = useAppStore((s) => s.currentDate);\n  const cellWidth = useAppStore((s) => s.cellWidth);\n  const bankHolidayDates = useAppStore((s) => s.bankHolidayDates);\n  const bankHolidays = useAppStore((s) => s.bankHolidays);\n  const companyEventDates = useAppStore((s) => s.companyEventDates);\n  const companyEvents = useAppStore((s) => s.companyEvents);\n  \n  const scrollToTodayTrigger = useUIStore((s) => s.scrollToTodayTrigger);\n  \n  // Enable Ctrl+Scroll zoom\n  useCtrlScrollZoom({ containerRef: timelineScrollRef, cellWidth });\n  \n  // Sync vertical scroll between panel and timeline body\n  useScrollSync(panelRef, timelineBodyRef);\n  \n  // Generate timeline data\n  const cells = useMemo(() => \n    generateTimelineCells(currentDate, viewMode, bankHolidayDates, bankHolidays, companyEventDates, companyEvents),\n    [currentDate, viewMode, bankHolidayDates, bankHolidays, companyEventDates, companyEvents]\n  );\n  const headers = useMemo(() => \n    generateTimelineHeaders(cells, viewMode),\n    [cells, viewMode]\n  );\n  \n  const totalWidth = cells.length * cellWidth;\n  \n  // Scroll to today when trigger changes\n  useEffect(() => {\n    if (!scrollToTodayTrigger || !timelineScrollRef.current) return;\n    \n    const todayIndex = cells.findIndex((cell) => cell.isToday);\n    if (todayIndex === -1) return;\n    \n    const scrollContainer = timelineScrollRef.current;\n    const containerWidth = scrollContainer.clientWidth;\n    const todayPosition = todayIndex * cellWidth;\n    \n    // Center today in the viewport\n    const scrollTo = Math.max(0, todayPosition - containerWidth / 2 + cellWidth / 2);\n    scrollContainer.scrollTo({ left: scrollTo, behavior: 'smooth' });\n  }, [scrollToTodayTrigger, cells, cellWidth]);\n  \n  // Group projects by site (non-archived only)\n  const projectsBySite = useMemo(() => {\n    const grouped = new Map<number, typeof projects>();\n    \n    sites.forEach((site) => {\n      grouped.set(site.id, []);\n    });\n    \n    projects.forEach((project) => {\n      if (project.archived) return;\n      const siteProjects = grouped.get(project.site_id) || [];\n      siteProjects.push(project);\n      grouped.set(project.site_id, siteProjects);\n    });\n    \n    // Sort each site's projects\n    grouped.forEach((siteProjects, siteId) => {\n      grouped.set(siteId, siteProjects.sort((a, b) => a.name.localeCompare(b.name)));\n    });\n    \n    return grouped;\n  }, [sites, projects]);\n  \n  // Build flat list of rows for rendering\n  const rows = useMemo(() => {\n    const result: CrossSiteRow[] = [];\n    \n    sites.forEach((site) => {\n      const isCurrentSite = site.id === currentSite?.id;\n      const siteProjects = projectsBySite.get(site.id) || [];\n      \n      // Add site header row\n      result.push({\n        type: 'site',\n        site,\n        isCurrentSite,\n        projectCount: siteProjects.length,\n      });\n      \n      // Add project rows\n      siteProjects.forEach((project) => {\n        result.push({\n          type: 'project',\n          project,\n          site,\n          isCurrentSite,\n          // Mask details for other sites\n          displayName: isCurrentSite ? project.name : 'Confidential Project',\n          displayCustomer: isCurrentSite ? (project.customer || '') : '***',\n        });\n      });\n    });\n    \n    return result;\n  }, [sites, projectsBySite, currentSite]);\n  \n  return (\n    <div className={styles.container}>\n      {/* Left Panel */}\n      <div className={styles.panel}>\n        <div className={styles.panelHeader}>\n          <span className={styles.headerTitle}>Cross-Site Overview</span>\n        </div>\n        <div className={styles.panelBody} ref={panelRef}>\n          {rows.map((row) => {\n            if (row.type === 'site') {\n              return (\n                <div \n                  key={`site-${row.site.id}`}\n                  className={`${styles.siteRow} ${row.isCurrentSite ? styles.currentSite : ''}`}\n                >\n                  <div className={`${styles.siteIndicator} ${row.isCurrentSite ? styles.current : ''}`} />\n                  <div className={styles.siteInfo}>\n                    <div className={styles.siteName}>{row.site.name}</div>\n                    <div className={styles.siteMeta}>{row.projectCount} projects</div>\n                  </div>\n                </div>\n              );\n            } else {\n              return (\n                <div \n                  key={`project-${row.project!.id}`}\n                  className={`${styles.projectRow} ${!row.isCurrentSite ? styles.masked : ''}`}\n                >\n                  <div className={`${styles.status} ${row.project!.confirmed ? styles.confirmed : styles.unconfirmed}`} />\n                  <div className={styles.projectInfo}>\n                    <div className={styles.projectName}>{row.displayName}</div>\n                    {row.displayCustomer && (\n                      <div className={styles.projectMeta}>{row.displayCustomer}</div>\n                    )}\n                  </div>\n                </div>\n              );\n            }\n          })}\n        </div>\n      </div>\n      \n      {/* Right Side - Timeline */}\n      <div className={styles.timeline}>\n        <div className={styles.timelineScroll} ref={timelineScrollRef}>\n          <div className={styles.timelineContent} style={{ width: totalWidth }}>\n            <TimelineHeader\n              headers={headers}\n              cells={cells}\n              cellWidth={cellWidth}\n              totalWidth={totalWidth}\n              viewMode={viewMode}\n            />\n            <CrossSiteTimelineBody\n              ref={timelineBodyRef}\n              rows={rows}\n              cells={cells}\n              cellWidth={cellWidth}\n              totalWidth={totalWidth}\n              viewMode={viewMode}\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// Types\nimport type { Site, Project } from '@/types';\n\ninterface CrossSiteSiteRow {\n  type: 'site';\n  site: Site;\n  isCurrentSite: boolean;\n  projectCount: number;\n}\n\ninterface CrossSiteProjectRow {\n  type: 'project';\n  project: Project;\n  site: Site;\n  isCurrentSite: boolean;\n  displayName: string;\n  displayCustomer: string;\n}\n\ntype CrossSiteRow = CrossSiteSiteRow | CrossSiteProjectRow;\n\nexport type { CrossSiteRow, CrossSiteSiteRow, CrossSiteProjectRow };\n","/**\n * TimelineRow - Renders a single timeline row with grid and project bar\n * Uses the same optimized CSS grid pattern as the main Gantt view\n */\n\nimport { useMemo } from 'react';\nimport type { Project } from '@/types';\nimport type { TimelineCell } from '@/components/gantt/utils';\nimport styles from './TimelineRow.module.css';\n\ninterface TimelineRowProps {\n  project: Project;\n  cells: TimelineCell[];\n  cellWidth: number;\n  totalWidth: number;\n  showHighlighting: boolean;\n}\n\nexport function TimelineRow({ \n  project, \n  cells, \n  cellWidth, \n  totalWidth,\n  showHighlighting \n}: TimelineRowProps) {\n  \n  // Calculate bar position\n  const barPosition = useMemo(() => {\n    if (!project.start_date || !project.end_date || cells.length === 0) {\n      return null;\n    }\n    \n    const projectStart = new Date(project.start_date);\n    const projectEnd = new Date(project.end_date);\n    projectStart.setHours(0, 0, 0, 0);\n    projectEnd.setHours(0, 0, 0, 0);\n    \n    const firstCellDate = cells[0].date;\n    const lastCellDate = cells[cells.length - 1].date;\n    \n    // Check if project is visible in current range\n    if (projectEnd < firstCellDate || projectStart > lastCellDate) {\n      return null;\n    }\n    \n    // Find start index\n    let startIndex = 0;\n    for (let i = 0; i < cells.length; i++) {\n      if (cells[i].date >= projectStart) {\n        startIndex = i;\n        break;\n      }\n      if (i === cells.length - 1) {\n        startIndex = i;\n      }\n    }\n    \n    // If project starts before visible range\n    if (projectStart < firstCellDate) {\n      startIndex = 0;\n    }\n    \n    // Find end index\n    let endIndex = cells.length - 1;\n    for (let i = cells.length - 1; i >= 0; i--) {\n      if (cells[i].date <= projectEnd) {\n        endIndex = i;\n        break;\n      }\n    }\n    \n    // Calculate position\n    const left = startIndex * cellWidth;\n    const width = Math.max((endIndex - startIndex + 1) * cellWidth, cellWidth);\n    \n    return { left, width };\n  }, [project.start_date, project.end_date, cells, cellWidth]);\n  \n  return (\n    <div \n      className={styles.row}\n      style={{ \n        width: totalWidth,\n        '--cell-width': `${cellWidth}px`\n      } as React.CSSProperties}\n    >\n      {/* Special cell markers for weekends/holidays */}\n      {showHighlighting && cells.map((cell, index) => {\n        if (cell.isWeekend) {\n          return (\n            <div\n              key={`weekend-${index}`}\n              className={`${styles.specialCell} ${styles.weekend}`}\n              style={{ left: index * cellWidth, width: cellWidth }}\n            />\n          );\n        }\n        return null;\n      })}\n      \n      {showHighlighting && cells.map((cell, index) => {\n        if (cell.isBankHoliday) {\n          return (\n            <div\n              key={`holiday-${index}`}\n              className={`${styles.specialCell} ${styles.bankHoliday}`}\n              style={{ left: index * cellWidth, width: cellWidth }}\n              data-tooltip={cell.bankHolidayName || 'Holiday'}\n            />\n          );\n        }\n        return null;\n      })}\n      \n      {showHighlighting && cells.map((cell, index) => {\n        if (cell.isCompanyEvent) {\n          return (\n            <div\n              key={`event-${index}`}\n              className={`${styles.specialCell} ${styles.companyEvent}`}\n              style={{ left: index * cellWidth, width: cellWidth }}\n              data-tooltip={cell.companyEventName || 'Company Event'}\n            />\n          );\n        }\n        return null;\n      })}\n      \n      {/* Today marker */}\n      {cells.map((cell, index) => {\n        if (cell.isToday) {\n          return (\n            <div\n              key={`today-${index}`}\n              className={`${styles.specialCell} ${styles.today}`}\n              style={{ left: index * cellWidth, width: cellWidth }}\n            />\n          );\n        }\n        return null;\n      })}\n      \n      {/* Project bar */}\n      {barPosition && (\n        <div\n          className={`${styles.bar} ${project.confirmed ? styles.confirmed : styles.unconfirmed}`}\n          style={{ left: barPosition.left, width: barPosition.width }}\n        >\n          {project.name}\n        </div>\n      )}\n    </div>\n  );\n}\n","/**\n * Archived View\n * Shows archived projects in a Gantt timeline (same as main view but filtered)\n * Matches vanilla JS renderArchivedView()\n */\n\nimport { useMemo, useRef } from 'react';\nimport { useAppStore } from '@/stores/appStore';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useScrollSync } from '@/hooks';\nimport { generateTimelineCells, generateTimelineHeaders } from '@/components/gantt/utils/timeline';\nimport { TimelineHeader } from '@/components/gantt/Timeline/TimelineHeader';\nimport { TimelineRow } from './TimelineRow';\nimport styles from './ArchivedView.module.css';\n\nexport function ArchivedView() {\n  const panelRef = useRef<HTMLDivElement>(null);\n  const timelineBodyRef = useRef<HTMLDivElement>(null);\n  \n  const projects = useAppStore((s) => s.projects);\n  const currentSite = useAppStore((s) => s.currentSite);\n  const viewMode = useAppStore((s) => s.viewMode);\n  const currentDate = useAppStore((s) => s.currentDate);\n  const cellWidth = useAppStore((s) => s.cellWidth);\n  const bankHolidayDates = useAppStore((s) => s.bankHolidayDates);\n  const bankHolidays = useAppStore((s) => s.bankHolidays);\n  const companyEventDates = useAppStore((s) => s.companyEventDates);\n  const companyEvents = useAppStore((s) => s.companyEvents);\n  \n  const openProjectModal = useUIStore((s) => s.openProjectModal);\n  \n  // Sync vertical scroll between panel and timeline body\n  useScrollSync(panelRef, timelineBodyRef);\n  \n  // Get archived projects for current site\n  const archivedProjects = useMemo(() => {\n    return projects\n      .filter((p) => p.archived && p.site_id === currentSite?.id)\n      .sort((a, b) => a.name.localeCompare(b.name));\n  }, [projects, currentSite]);\n  \n  // Generate timeline data\n  const cells = useMemo(() => \n    generateTimelineCells(currentDate, viewMode, bankHolidayDates, bankHolidays, companyEventDates, companyEvents),\n    [currentDate, viewMode, bankHolidayDates, bankHolidays, companyEventDates, companyEvents]\n  );\n  const headers = useMemo(() => \n    generateTimelineHeaders(cells, viewMode),\n    [cells, viewMode]\n  );\n  \n  const totalWidth = cells.length * cellWidth;\n  \n  // Only show weekend/holiday highlighting for week and month views\n  const showHighlighting = viewMode === 'week' || viewMode === 'month';\n  \n  return (\n    <div className={styles.container}>\n      {/* Left Panel - Project List */}\n      <div className={styles.projectPanel}>\n        <div className={styles.panelHeader}>\n          Archived Projects\n        </div>\n        <div className={styles.panelContent} ref={panelRef}>\n          {archivedProjects.length === 0 ? (\n            <div className={styles.emptyState}>\n              <p>No archived projects</p>\n            </div>\n          ) : (\n            archivedProjects.map((project) => (\n              <div \n                key={project.id} \n                className={styles.projectRow}\n                data-project-id={project.id}\n              >\n                <div className={styles.projectMain}>\n                  {/* Empty expand button placeholder for alignment */}\n                  <div className={styles.expandPlaceholder}>\n                    <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" />\n                  </div>\n                  \n                  {/* Status indicator */}\n                  <div className={`${styles.status} ${project.confirmed ? styles.confirmed : styles.unconfirmed}`} />\n                  \n                  {/* Project info */}\n                  <div className={styles.projectInfo}>\n                    <div className={styles.projectName}>{project.name}</div>\n                    <div className={styles.projectMeta}>\n                      <span className={styles.pmName}>{project.pm_name || 'No PM'}</span>\n                      <span>  </span>\n                      <span>{project.customer || 'No customer'}</span>\n                    </div>\n                  </div>\n                  \n                  {/* Edit button */}\n                  <button \n                    className={styles.editBtn}\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      openProjectModal(project);\n                    }}\n                    title=\"Edit project\"\n                  >\n                    <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                      <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\" />\n                      <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\" />\n                    </svg>\n                  </button>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n      \n      {/* Right Side - Timeline (matches Gantt Timeline structure) */}\n      <div className={styles.timelineWrapper}>\n        <div className={styles.timelineScroll}>\n          <div className={styles.timelineContent} style={{ width: totalWidth }}>\n            {/* Timeline Header */}\n            <TimelineHeader\n              headers={headers}\n              cells={cells}\n              cellWidth={cellWidth}\n              totalWidth={totalWidth}\n              viewMode={viewMode}\n            />\n            \n            {/* Timeline Body */}\n            <div className={styles.timelineBody} ref={timelineBodyRef}>\n              <div \n                className={styles.timelineBodyContent}\n                style={{ \n                  width: totalWidth,\n                  '--cell-width': `${cellWidth}px`\n                } as React.CSSProperties}\n              >\n                {archivedProjects.length === 0 ? (\n                  <div className={styles.emptyTimeline} />\n                ) : (\n                  archivedProjects.map((project) => (\n                    <TimelineRow\n                      key={project.id}\n                      project={project}\n                      cells={cells}\n                      cellWidth={cellWidth}\n                      totalWidth={totalWidth}\n                      showHighlighting={showHighlighting}\n                    />\n                  ))\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * Main Layout\n * The primary application layout after authentication\n */\n\nimport { useAppStore } from '@/stores/appStore';\nimport { useKeyboardShortcuts } from '@/hooks';\nimport { Header } from './Header';\nimport { Sidebar } from './Sidebar';\nimport { GanttContainer } from '@/components/gantt';\nimport { ShiftTooltip } from '@/components/gantt/ShiftTooltip';\nimport { StaffView, EquipmentView, CrossSiteView, ArchivedView } from '@/components/views';\nimport styles from './MainLayout.module.css';\n\nexport function MainLayout() {\n  const currentView = useAppStore((s) => s.currentView);\n\n  // Enable global keyboard shortcuts\n  useKeyboardShortcuts();\n\n  // Render the appropriate view based on currentView\n  const renderView = () => {\n    switch (currentView) {\n      case 'gantt':\n        return <GanttContainer />;\n      case 'staff':\n        return <StaffView />;\n      case 'equipment':\n        return <EquipmentView />;\n      case 'crosssite':\n        return <CrossSiteView />;\n      case 'archived':\n        return <ArchivedView />;\n      default:\n        return <GanttContainer />;\n    }\n  };\n\n  return (\n    <div className={styles.container}>\n      <Header />\n      \n      <div className={styles.body}>\n        <Sidebar />\n        \n        <main className={styles.main}>\n          {renderView()}\n        </main>\n      </div>\n      \n      {/* Shift+hover tooltip for phases/subphases */}\n      <ShiftTooltip />\n      \n      {/* Modals are rendered by ModalContainer in App.tsx */}\n    </div>\n  );\n}\n","import { forwardRef, InputHTMLAttributes } from 'react';\nimport styles from './Checkbox.module.css';\n\nexport interface CheckboxProps extends Omit<InputHTMLAttributes<HTMLInputElement>, 'type'> {\n  label?: string;\n  error?: string;\n  indeterminate?: boolean;\n}\n\nexport const Checkbox = forwardRef<HTMLInputElement, CheckboxProps>(\n  ({ label, error, indeterminate, className, id, ...props }, ref) => {\n    const checkboxId = id || `checkbox-${Math.random().toString(36).substr(2, 9)}`;\n\n    const wrapperClasses = [styles.wrapper, className].filter(Boolean).join(' ');\n\n    return (\n      <div className={wrapperClasses}>\n        <label htmlFor={checkboxId} className={styles.label}>\n          <input\n            ref={(el) => {\n              if (el) {\n                el.indeterminate = indeterminate || false;\n              }\n              if (typeof ref === 'function') {\n                ref(el);\n              } else if (ref) {\n                ref.current = el;\n              }\n            }}\n            type=\"checkbox\"\n            id={checkboxId}\n            className={styles.input}\n            {...props}\n          />\n          <span className={styles.checkbox}>\n            <svg\n              className={styles.checkIcon}\n              width=\"12\"\n              height=\"12\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"3\"\n            >\n              <polyline points=\"20 6 9 17 4 12\" />\n            </svg>\n            <svg\n              className={styles.indeterminateIcon}\n              width=\"12\"\n              height=\"12\"\n              viewBox=\"0 0 24 24\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth=\"3\"\n            >\n              <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n            </svg>\n          </span>\n          {label && <span className={styles.labelText}>{label}</span>}\n        </label>\n        {error && <span className={styles.error}>{error}</span>}\n      </div>\n    );\n  }\n);\n\nCheckbox.displayName = 'Checkbox';\n","/**\n * ContextMenu\n * Right-click context menu for quick actions\n */\n\nimport { useEffect, useRef } from 'react';\nimport styles from './ContextMenu.module.css';\n\nexport interface ContextMenuItem {\n  label: string;\n  icon?: React.ReactNode;\n  onClick: () => void;\n  disabled?: boolean;\n  danger?: boolean;\n  divider?: boolean;\n}\n\ninterface ContextMenuProps {\n  x: number;\n  y: number;\n  items: ContextMenuItem[];\n  onClose: () => void;\n}\n\nexport function ContextMenu({ x, y, items, onClose }: ContextMenuProps) {\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\n        onClose();\n      }\n    };\n\n    const handleEscape = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    document.addEventListener('keydown', handleEscape);\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n      document.removeEventListener('keydown', handleEscape);\n    };\n  }, [onClose]);\n\n  // Adjust position to stay within viewport\n  useEffect(() => {\n    if (menuRef.current) {\n      const rect = menuRef.current.getBoundingClientRect();\n      const viewportWidth = window.innerWidth;\n      const viewportHeight = window.innerHeight;\n\n      let adjustedX = x;\n      let adjustedY = y;\n\n      if (x + rect.width > viewportWidth) {\n        adjustedX = viewportWidth - rect.width - 8;\n      }\n\n      if (y + rect.height > viewportHeight) {\n        adjustedY = viewportHeight - rect.height - 8;\n      }\n\n      menuRef.current.style.left = `${adjustedX}px`;\n      menuRef.current.style.top = `${adjustedY}px`;\n    }\n  }, [x, y]);\n\n  return (\n    <div\n      ref={menuRef}\n      className={styles.menu}\n      style={{ left: x, top: y }}\n    >\n      {items.map((item, index) => {\n        if (item.divider) {\n          return <div key={index} className={styles.divider} />;\n        }\n\n        return (\n          <button\n            key={index}\n            className={`${styles.item} ${item.danger ? styles.danger : ''} ${item.disabled ? styles.disabled : ''}`}\n            onClick={() => {\n              if (!item.disabled) {\n                item.onClick();\n                onClose();\n              }\n            }}\n            disabled={item.disabled}\n          >\n            {item.icon && <span className={styles.icon}>{item.icon}</span>}\n            <span className={styles.label}>{item.label}</span>\n          </button>\n        );\n      })}\n    </div>\n  );\n}\n","/**\n * ContextMenuContainer\n * Renders context menus based on uiStore state\n */\n\nimport { useCallback } from 'react';\nimport { useUIStore } from '@/stores/uiStore';\nimport { useAppStore } from '@/stores/appStore';\nimport { useDataLoader } from '@/hooks/useDataLoader';\nimport { ContextMenu, type ContextMenuItem } from '@/components/common';\nimport { deleteProject, deletePhase, deleteSubphase, deleteStaffAssignment, deleteEquipmentAssignment } from '@/api';\n\nexport function ContextMenuContainer() {\n  const contextMenu = useUIStore((s) => s.contextMenu);\n  const hideContextMenu = useUIStore((s) => s.hideContextMenu);\n  const openProjectModal = useUIStore((s) => s.openProjectModal);\n  const openPhaseModal = useUIStore((s) => s.openPhaseModal);\n  const openSubphaseModal = useUIStore((s) => s.openSubphaseModal);\n  const openModal = useUIStore((s) => s.openModal);\n  const setEditingStaffAssignment = useUIStore((s) => s.setEditingStaffAssignment);\n  const setEditingEquipmentAssignment = useUIStore((s) => s.setEditingEquipmentAssignment);\n\n  const projects = useAppStore((s) => s.projects);\n  const currentUser = useAppStore((s) => s.currentUser);\n  const { loadAllData } = useDataLoader();\n\n  const canEdit = currentUser?.role === 'admin' || currentUser?.role === 'superuser';\n\n  // Find the target project/phase/subphase\n  const findTarget = useCallback(() => {\n    if (!contextMenu.targetId || !contextMenu.type) return null;\n\n    if (contextMenu.type === 'project') {\n      return projects.find((p) => p.id === contextMenu.targetId);\n    }\n\n    if (contextMenu.type === 'phase' && contextMenu.projectId) {\n      const project = projects.find((p) => p.id === contextMenu.projectId);\n      return project?.phases?.find((ph) => ph.id === contextMenu.targetId);\n    }\n\n    if (contextMenu.type === 'subphase' && contextMenu.projectId && contextMenu.phaseId) {\n      const project = projects.find((p) => p.id === contextMenu.projectId);\n      const phase = project?.phases?.find((ph) => ph.id === contextMenu.phaseId);\n      return phase?.children?.find((sp) => sp.id === contextMenu.targetId);\n    }\n\n    return null;\n  }, [contextMenu, projects]);\n\n  const getMenuItems = useCallback((): ContextMenuItem[] => {\n    const { type, targetId, projectId, phaseId } = contextMenu;\n    const target = findTarget();\n\n    if (!type || !targetId) return [];\n\n    // Project context menu\n    if (type === 'project') {\n      const project = target as any;\n      return [\n        {\n          label: 'Edit Project',\n          icon: <EditIcon />,\n          onClick: () => {\n            if (project) openProjectModal(project);\n          },\n          disabled: !canEdit,\n        },\n        {\n          label: 'Add Phase',\n          icon: <AddIcon />,\n          onClick: () => {\n            openPhaseModal(undefined, targetId);\n          },\n          disabled: !canEdit,\n        },\n        {\n          label: 'Assign Staff',\n          icon: <PersonIcon />,\n          onClick: () => {\n            openModal('staffAssignment', { projectId: targetId });\n          },\n          disabled: !canEdit,\n        },\n        {\n          label: 'Assign Equipment',\n          icon: <EquipmentIcon />,\n          onClick: () => {\n            openModal('equipmentAssignment', { projectId: targetId });\n          },\n          disabled: !canEdit,\n        },\n        { label: '', divider: true, onClick: () => {} },\n        {\n          label: 'Delete Project',\n          icon: <DeleteIcon />,\n          danger: true,\n          onClick: async () => {\n            if (confirm(`Delete project \"${project?.name}\"? This cannot be undone.`)) {\n              await deleteProject(targetId);\n              loadAllData();\n            }\n          },\n          disabled: !canEdit,\n        },\n      ];\n    }\n\n    // Phase context menu\n    if (type === 'phase') {\n      const phase = target as any;\n      return [\n        {\n          label: 'Edit Phase',\n          icon: <EditIcon />,\n          onClick: () => {\n            if (phase && projectId) openPhaseModal(phase, projectId);\n          },\n          disabled: !canEdit,\n        },\n        {\n          label: 'Add Subphase',\n          icon: <AddIcon />,\n          onClick: () => {\n            openSubphaseModal(undefined, targetId, projectId);\n          },\n          disabled: !canEdit,\n        },\n        {\n          label: 'Assign Staff',\n          icon: <PersonIcon />,\n          onClick: () => {\n            openModal('staffAssignment', { phaseId: targetId, projectId });\n          },\n          disabled: !canEdit,\n        },\n        {\n          label: 'Assign Equipment',\n          icon: <EquipmentIcon />,\n          onClick: () => {\n            openModal('equipmentAssignment', { phaseId: targetId, projectId });\n          },\n          disabled: !canEdit,\n        },\n        { label: '', divider: true, onClick: () => {} },\n        {\n          label: 'Delete Phase',\n          icon: <DeleteIcon />,\n          danger: true,\n          onClick: async () => {\n            if (confirm(`Delete phase \"${phase?.name}\"? This cannot be undone.`)) {\n              await deletePhase(targetId);\n              loadAllData();\n            }\n          },\n          disabled: !canEdit,\n        },\n      ];\n    }\n\n    // Subphase context menu\n    if (type === 'subphase') {\n      const subphase = target as any;\n      return [\n        {\n          label: 'Edit Subphase',\n          icon: <EditIcon />,\n          onClick: () => {\n            if (subphase && phaseId && projectId) openSubphaseModal(subphase, phaseId, projectId);\n          },\n          disabled: !canEdit,\n        },\n        {\n          label: 'Add Child Subphase',\n          icon: <AddIcon />,\n          onClick: () => {\n            // Add subphase as child of this subphase\n            // phaseId stays the same, but we pass targetId as parentSubphaseId\n            openSubphaseModal(undefined, phaseId, projectId, targetId);\n          },\n          disabled: !canEdit,\n        },\n        {\n          label: 'Assign Staff',\n          icon: <PersonIcon />,\n          onClick: () => {\n            openModal('staffAssignment', { subphaseId: targetId, phaseId, projectId });\n          },\n          disabled: !canEdit,\n        },\n        {\n          label: 'Assign Equipment',\n          icon: <EquipmentIcon />,\n          onClick: () => {\n            openModal('equipmentAssignment', { subphaseId: targetId, phaseId, projectId });\n          },\n          disabled: !canEdit,\n        },\n        { label: '', divider: true, onClick: () => {} },\n        {\n          label: 'Delete Subphase',\n          icon: <DeleteIcon />,\n          danger: true,\n          onClick: async () => {\n            if (confirm(`Delete subphase \"${subphase?.name}\"? This cannot be undone.`)) {\n              await deleteSubphase(targetId);\n              loadAllData();\n            }\n          },\n          disabled: !canEdit,\n        },\n      ];\n    }\n\n    // Staff Assignment context menu\n    if (type === 'staffAssignment') {\n      const { assignmentData, subphaseId } = contextMenu;\n      const assignmentName = assignmentData?.name || 'Staff Assignment';\n      // Determine assignment level for API routing\n      const assignmentLevel = subphaseId ? 'subphase' : (phaseId ? 'phase' : 'project');\n      \n      return [\n        {\n          label: 'Edit Assignment',\n          icon: <EditIcon />,\n          onClick: () => {\n            setEditingStaffAssignment({\n              id: targetId,\n              project_id: projectId || 0,\n              phase_id: phaseId || null,\n              subphase_id: subphaseId || null,\n              staff_id: assignmentData?.staffId || 0,\n              staff_name: assignmentData?.name || '',\n              allocation: assignmentData?.allocation || 100,\n              start_date: assignmentData?.startDate || '',\n              end_date: assignmentData?.endDate || '',\n            });\n            openModal('staffAssignment', { projectId, phaseId, subphaseId });\n          },\n          disabled: !canEdit,\n        },\n        { label: '', divider: true, onClick: () => {} },\n        {\n          label: 'Delete Assignment',\n          icon: <DeleteIcon />,\n          danger: true,\n          onClick: async () => {\n            if (confirm(`Remove ${assignmentName} from this assignment?`)) {\n              await deleteStaffAssignment(targetId, assignmentLevel);\n              loadAllData();\n            }\n          },\n          disabled: !canEdit,\n        },\n      ];\n    }\n\n    // Equipment Assignment context menu\n    if (type === 'equipmentAssignment') {\n      const { assignmentData, subphaseId } = contextMenu;\n      const assignmentName = assignmentData?.name || 'Equipment Assignment';\n      return [\n        {\n          label: 'Edit Assignment',\n          icon: <EditIcon />,\n          onClick: () => {\n            setEditingEquipmentAssignment({\n              id: targetId,\n              project_id: projectId || 0,\n              phase_id: phaseId || null,\n              subphase_id: subphaseId || null,\n              equipment_id: assignmentData?.equipmentId || 0,\n              equipment_name: assignmentData?.name || '',\n              start_date: assignmentData?.startDate || '',\n              end_date: assignmentData?.endDate || '',\n            });\n            openModal('equipmentAssignment', { projectId, phaseId, subphaseId });\n          },\n          disabled: !canEdit,\n        },\n        { label: '', divider: true, onClick: () => {} },\n        {\n          label: 'Delete Assignment',\n          icon: <DeleteIcon />,\n          danger: true,\n          onClick: async () => {\n            if (confirm(`Remove ${assignmentName} from this assignment?`)) {\n              // Equipment assignments use a single endpoint for all levels\n              await deleteEquipmentAssignment(targetId);\n              loadAllData();\n            }\n          },\n          disabled: !canEdit,\n        },\n      ];\n    }\n\n    return [];\n  }, [contextMenu, findTarget, canEdit, openProjectModal, openPhaseModal, openSubphaseModal, openModal, setEditingStaffAssignment, setEditingEquipmentAssignment, loadAllData]);\n\n  if (!contextMenu.visible) return null;\n\n  return (\n    <ContextMenu\n      x={contextMenu.x}\n      y={contextMenu.y}\n      items={getMenuItems()}\n      onClose={hideContextMenu}\n    />\n  );\n}\n\n// Simple icons\nconst EditIcon = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n    <path d=\"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7\" />\n    <path d=\"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z\" />\n  </svg>\n);\n\nconst AddIcon = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n    <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n    <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n  </svg>\n);\n\nconst DeleteIcon = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n    <polyline points=\"3 6 5 6 21 6\" />\n    <path d=\"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2\" />\n  </svg>\n);\n\nconst PersonIcon = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n    <path d=\"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2\" />\n    <circle cx=\"12\" cy=\"7\" r=\"4\" />\n  </svg>\n);\n\nconst EquipmentIcon = () => (\n  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n    <rect x=\"2\" y=\"7\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\" />\n    <path d=\"M16 21V5a2 2 0 00-2-2h-4a2 2 0 00-2 2v16\" />\n  </svg>\n);\n","/**\n * Admin Store\n * State management for multi-tenant admin panel\n */\n\nimport { create } from 'zustand';\nimport type { AdminUser, Tenant, SystemStats, AdminUserListItem, Organization } from '@/api/endpoints/admin';\n\ninterface AdminState {\n  // Auth\n  adminUser: AdminUser | null;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n  mustChangePassword: boolean;\n  \n  // Data\n  tenants: Tenant[];\n  organizations: Organization[];\n  systemStats: SystemStats | null;\n  adminUsers: AdminUserListItem[];\n  \n  // UI\n  activeTab: 'tenants' | 'organizations' | 'admins' | 'stats';\n  selectedTenantId: string | null;\n  selectedOrganizationId: string | null;\n  \n  // Actions\n  setAdminUser: (user: AdminUser | null) => void;\n  setIsAuthenticated: (auth: boolean) => void;\n  setIsLoading: (loading: boolean) => void;\n  setMustChangePassword: (must: boolean) => void;\n  setTenants: (tenants: Tenant[]) => void;\n  setOrganizations: (organizations: Organization[]) => void;\n  setSystemStats: (stats: SystemStats | null) => void;\n  setAdminUsers: (users: AdminUserListItem[]) => void;\n  setActiveTab: (tab: 'tenants' | 'organizations' | 'admins' | 'stats') => void;\n  setSelectedTenantId: (id: string | null) => void;\n  setSelectedOrganizationId: (id: string | null) => void;\n  \n  // Tenant helpers\n  updateTenantInList: (id: string, updates: Partial<Tenant>) => void;\n  removeTenantFromList: (id: string) => void;\n  addTenantToList: (tenant: Tenant) => void;\n  \n  // Organization helpers\n  updateOrganizationInList: (id: string, updates: Partial<Organization>) => void;\n  removeOrganizationFromList: (id: string) => void;\n  addOrganizationToList: (organization: Organization) => void;\n  \n  // Admin user helpers\n  updateAdminUserInList: (id: number, updates: Partial<AdminUserListItem>) => void;\n  removeAdminUserFromList: (id: number) => void;\n  addAdminUserToList: (user: AdminUserListItem) => void;\n  \n  // Reset\n  reset: () => void;\n}\n\nconst initialState = {\n  adminUser: null,\n  isAuthenticated: false,\n  isLoading: true,\n  mustChangePassword: false,\n  tenants: [],\n  organizations: [],\n  systemStats: null,\n  adminUsers: [],\n  activeTab: 'tenants' as const,\n  selectedTenantId: null,\n  selectedOrganizationId: null,\n};\n\nexport const useAdminStore = create<AdminState>((set) => ({\n  ...initialState,\n  \n  setAdminUser: (user) => set({ adminUser: user }),\n  setIsAuthenticated: (auth) => set({ isAuthenticated: auth }),\n  setIsLoading: (loading) => set({ isLoading: loading }),\n  setMustChangePassword: (must) => set({ mustChangePassword: must }),\n  setTenants: (tenants) => set({ tenants }),\n  setOrganizations: (organizations) => set({ organizations }),\n  setSystemStats: (stats) => set({ systemStats: stats }),\n  setAdminUsers: (users) => set({ adminUsers: users }),\n  setActiveTab: (tab) => set({ activeTab: tab }),\n  setSelectedTenantId: (id) => set({ selectedTenantId: id }),\n  setSelectedOrganizationId: (id) => set({ selectedOrganizationId: id }),\n  \n  updateTenantInList: (id, updates) => set((state) => ({\n    tenants: state.tenants.map((t) => \n      t.id === id ? { ...t, ...updates } : t\n    ),\n  })),\n  \n  removeTenantFromList: (id) => set((state) => ({\n    tenants: state.tenants.filter((t) => t.id !== id),\n  })),\n  \n  addTenantToList: (tenant) => set((state) => ({\n    tenants: [tenant, ...state.tenants],\n  })),\n  \n  updateOrganizationInList: (id, updates) => set((state) => ({\n    organizations: state.organizations.map((o) =>\n      o.id === id ? { ...o, ...updates } : o\n    ),\n  })),\n  \n  removeOrganizationFromList: (id) => set((state) => ({\n    organizations: state.organizations.filter((o) => o.id !== id),\n  })),\n  \n  addOrganizationToList: (organization) => set((state) => ({\n    organizations: [organization, ...state.organizations],\n  })),\n  \n  updateAdminUserInList: (id, updates) => set((state) => ({\n    adminUsers: state.adminUsers.map((u) =>\n      u.id === id ? { ...u, ...updates } : u\n    ),\n  })),\n  \n  removeAdminUserFromList: (id) => set((state) => ({\n    adminUsers: state.adminUsers.filter((u) => u.id !== id),\n  })),\n  \n  addAdminUserToList: (user) => set((state) => ({\n    adminUsers: [user, ...state.adminUsers],\n  })),\n  \n  reset: () => set(initialState),\n}));\n","/**\n * Admin Login Screen\n * Authentication for multi-tenant admin panel\n * Includes forced password change on first login\n */\n\nimport { useState, FormEvent, useEffect } from 'react';\nimport { adminLogin, changeAdminPassword } from '@/api';\nimport { useAdminStore } from '@/stores/adminStore';\nimport { getTheme, isDarkTheme, type Theme } from '@/utils/storage';\nimport styles from './AdminLogin.module.css';\n\nexport function AdminLoginScreen() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [theme, setThemeState] = useState<Theme>(() => getTheme());\n\n  // Password change state\n  const [showChangePassword, setShowChangePassword] = useState(false);\n  const [currentPassword, setCurrentPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [changeSuccess, setChangeSuccess] = useState(false);\n\n  const setAdminUser = useAdminStore((s) => s.setAdminUser);\n  const setIsAuthenticated = useAdminStore((s) => s.setIsAuthenticated);\n  const setIsLoading = useAdminStore((s) => s.setIsLoading);\n  const setMustChangePassword = useAdminStore((s) => s.setMustChangePassword);\n\n  // Watch for theme changes\n  useEffect(() => {\n    const observer = new MutationObserver(() => {\n      const currentTheme = document.documentElement.dataset.theme as Theme;\n      if (currentTheme && currentTheme !== theme) {\n        setThemeState(currentTheme);\n      }\n    });\n\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: ['data-theme'],\n    });\n\n    return () => observer.disconnect();\n  }, [theme]);\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setIsSubmitting(true);\n\n    try {\n      const response = await adminLogin(email, password);\n      if (response.success && response.user) {\n        if (response.must_change_password) {\n          // Show password change form instead of completing login\n          setShowChangePassword(true);\n          setCurrentPassword(password);\n          setAdminUser(response.user);\n          setMustChangePassword(true);\n        } else {\n          setAdminUser(response.user);\n          setIsAuthenticated(true);\n        }\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Invalid credentials');\n    } finally {\n      setIsSubmitting(false);\n      setIsLoading(false);\n    }\n  };\n\n  const handleChangePassword = async (e: FormEvent) => {\n    e.preventDefault();\n    setError(null);\n\n    if (newPassword.length < 8) {\n      setError('New password must be at least 8 characters');\n      return;\n    }\n\n    if (newPassword !== confirmPassword) {\n      setError('Passwords do not match');\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      await changeAdminPassword(currentPassword, newPassword);\n      setChangeSuccess(true);\n      setMustChangePassword(false);\n      // Brief delay so the user sees the success message\n      setTimeout(() => {\n        setIsAuthenticated(true);\n      }, 1500);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to change password');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const logoSrc = isDarkTheme(theme)\n    ? '/img/milestone_logo_dark_theme.svg'\n    : '/img/milestone_logo_light_theme.svg';\n\n  if (showChangePassword) {\n    return (\n      <div className={styles.container}>\n        <div className={styles.card}>\n          <div className={styles.header}>\n            <img src={logoSrc} alt=\"Milestone\" className={styles.logo} />\n            <h1 className={styles.title}>Change Password</h1>\n            <p className={styles.subtitle}>You must set a new password before continuing</p>\n          </div>\n\n          {changeSuccess ? (\n            <div className={styles.success}>\n              Password changed successfully. Redirecting...\n            </div>\n          ) : (\n            <form onSubmit={handleChangePassword} className={styles.form}>\n              <div className={styles.formGroup}>\n                <label htmlFor=\"newPassword\" className={styles.label}>New Password</label>\n                <input\n                  type=\"password\"\n                  id=\"newPassword\"\n                  className={styles.input}\n                  value={newPassword}\n                  onChange={(e) => setNewPassword(e.target.value)}\n                  placeholder=\"Minimum 8 characters\"\n                  required\n                  minLength={8}\n                  autoFocus\n                  disabled={isSubmitting}\n                />\n              </div>\n\n              <div className={styles.formGroup}>\n                <label htmlFor=\"confirmPassword\" className={styles.label}>Confirm Password</label>\n                <input\n                  type=\"password\"\n                  id=\"confirmPassword\"\n                  className={styles.input}\n                  value={confirmPassword}\n                  onChange={(e) => setConfirmPassword(e.target.value)}\n                  placeholder=\"Re-enter new password\"\n                  required\n                  minLength={8}\n                  disabled={isSubmitting}\n                />\n              </div>\n\n              {error && <div className={styles.error}>{error}</div>}\n\n              <button\n                type=\"submit\"\n                className={styles.submitBtn}\n                disabled={isSubmitting}\n              >\n                {isSubmitting ? 'Changing...' : 'Set New Password'}\n              </button>\n            </form>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.card}>\n        <div className={styles.header}>\n          <img src={logoSrc} alt=\"Milestone\" className={styles.logo} />\n          <h1 className={styles.title}>Admin Portal</h1>\n          <p className={styles.subtitle}>Multi-tenant Management</p>\n        </div>\n\n        <form onSubmit={handleSubmit} className={styles.form}>\n          <div className={styles.formGroup}>\n            <label htmlFor=\"email\" className={styles.label}>Email</label>\n            <input\n              type=\"email\"\n              id=\"email\"\n              className={styles.input}\n              value={email}\n              onChange={(e) => setEmail(e.target.value)}\n              placeholder=\"admin@example.com\"\n              required\n              autoFocus\n              disabled={isSubmitting}\n            />\n          </div>\n\n          <div className={styles.formGroup}>\n            <label htmlFor=\"password\" className={styles.label}>Password</label>\n            <input\n              type=\"password\"\n              id=\"password\"\n              className={styles.input}\n              value={password}\n              onChange={(e) => setPassword(e.target.value)}\n              placeholder=\"\"\n              required\n              disabled={isSubmitting}\n            />\n          </div>\n\n          {error && <div className={styles.error}>{error}</div>}\n\n          <button\n            type=\"submit\"\n            className={styles.submitBtn}\n            disabled={isSubmitting}\n          >\n            {isSubmitting ? 'Signing in...' : 'Sign In'}\n          </button>\n        </form>\n\n        <div className={styles.footer}>\n          <a href=\"/\" className={styles.backLink}>\n             Back to Application\n          </a>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * TenantList\n * List of tenants with actions\n */\n\nimport { useState } from 'react';\nimport { useAdminStore } from '@/stores/adminStore';\nimport { \n  updateTenantStatus, \n  provisionTenant, \n  resetTenantAdminPassword,\n  deleteTenant,\n} from '@/api';\nimport type { Tenant } from '@/api/endpoints/admin';\nimport styles from './TenantList.module.css';\n\ninterface TenantListProps {\n  onCreateNew: () => void;\n  onViewDetails: (id: string) => void;\n  onShowCredentials: (title: string, email: string, password: string) => void;\n  onRefresh: () => void;\n}\n\nexport function TenantList({ onCreateNew, onViewDetails, onShowCredentials, onRefresh }: TenantListProps) {\n  const tenants = useAdminStore((s) => s.tenants);\n  const systemStats = useAdminStore((s) => s.systemStats);\n  const [actionLoading, setActionLoading] = useState<string | null>(null);\n\n  const handleProvision = async (tenant: Tenant) => {\n    if (!confirm('This will create the database for this tenant. Continue?')) return;\n    \n    setActionLoading(tenant.id);\n    try {\n      const result = await provisionTenant(tenant.id);\n      onShowCredentials('Database Provisioned!', result.adminEmail, result.adminPassword);\n      onRefresh();\n    } catch (err) {\n      alert('Error: ' + (err instanceof Error ? err.message : 'Unknown error'));\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  const handleResetPassword = async (tenant: Tenant) => {\n    if (!confirm('This will generate a new password for the tenant admin. Continue?')) return;\n    \n    setActionLoading(tenant.id);\n    try {\n      const result = await resetTenantAdminPassword(tenant.id);\n      onShowCredentials('Password Reset!', result.email, result.password);\n    } catch (err) {\n      alert('Error: ' + (err instanceof Error ? err.message : 'Unknown error'));\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  const handleStatusChange = async (tenant: Tenant, status: Tenant['status']) => {\n    if (!confirm(`Change tenant status to ${status}?`)) return;\n    \n    setActionLoading(tenant.id);\n    try {\n      await updateTenantStatus(tenant.id, status);\n      onRefresh();\n    } catch (err) {\n      alert('Error: ' + (err instanceof Error ? err.message : 'Unknown error'));\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  const handleDelete = async (tenant: Tenant) => {\n    // Must be suspended first\n    if (tenant.status === 'active') {\n      alert('You must suspend the tenant before deleting it. This ensures no users are actively using the system.');\n      return;\n    }\n    \n    const confirmMsg = tenant.database_status?.accessible\n      ? `Delete tenant \"${tenant.name}\"?\\n\\n This will permanently delete:\\n The tenant record\\n The tenant database and all its data\\n\\nThis action cannot be undone.`\n      : `Delete tenant \"${tenant.name}\"?\\n\\nThis will remove the tenant record.\\nThis action cannot be undone.`;\n    \n    if (!confirm(confirmMsg)) return;\n    \n    setActionLoading(tenant.id);\n    try {\n      // Always delete database if it exists\n      await deleteTenant(tenant.id, true);\n      onRefresh();\n    } catch (err) {\n      alert('Error: ' + (err instanceof Error ? err.message : 'Unknown error'));\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  const getStatusBadge = (status: Tenant['status']) => {\n    const classes: Record<string, string> = {\n      active: styles.badgeSuccess,\n      pending: styles.badgeWarning,\n      suspended: styles.badgeDanger,\n      archived: styles.badgeInfo,\n    };\n    return <span className={`${styles.badge} ${classes[status] || ''}`}>{status}</span>;\n  };\n\n  const getDbStatusBadge = (dbStatus?: { exists: boolean; accessible: boolean }) => {\n    if (!dbStatus) return <span className={styles.badge}>Unknown</span>;\n    if (dbStatus.accessible) return <span className={`${styles.badge} ${styles.badgeSuccess}`}>Connected</span>;\n    if (dbStatus.exists) return <span className={`${styles.badge} ${styles.badgeWarning}`}>Exists</span>;\n    return <span className={`${styles.badge} ${styles.badgeDanger}`}>Not provisioned</span>;\n  };\n\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString(undefined, {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  return (\n    <div className={styles.container}>\n      {/* Stats Cards */}\n      {systemStats && (\n        <div className={styles.statsGrid}>\n          <div className={styles.statCard}>\n            <h3>Total Tenants</h3>\n            <div className={styles.statValue}>{systemStats.tenants.total}</div>\n          </div>\n          <div className={`${styles.statCard} ${styles.success}`}>\n            <h3>Active</h3>\n            <div className={styles.statValue}>{systemStats.tenants.active}</div>\n          </div>\n          <div className={`${styles.statCard} ${styles.warning}`}>\n            <h3>Pending</h3>\n            <div className={styles.statValue}>{systemStats.tenants.pending}</div>\n          </div>\n          <div className={`${styles.statCard} ${styles.danger}`}>\n            <h3>Suspended</h3>\n            <div className={styles.statValue}>{systemStats.tenants.suspended}</div>\n          </div>\n        </div>\n      )}\n\n      {/* Tenant Table */}\n      <div className={styles.panel}>\n        <div className={styles.panelHeader}>\n          <h2>Tenants</h2>\n          <button className={styles.btnPrimary} onClick={onCreateNew}>\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n              <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n            </svg>\n            Create Tenant\n          </button>\n        </div>\n\n        <div className={styles.tableWrapper}>\n          <table className={styles.table}>\n            <thead>\n              <tr>\n                <th>Name</th>\n                <th>Slug</th>\n                <th>Status</th>\n                <th>Database</th>\n                <th>Organization</th>\n                <th>Admin Email</th>\n                <th>Plan</th>\n                <th>Created</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {tenants.length === 0 ? (\n                <tr>\n                  <td colSpan={9} className={styles.emptyMessage}>\n                    No tenants found. Create your first tenant to get started.\n                  </td>\n                </tr>\n              ) : (\n                tenants.map((tenant) => (\n                  <tr key={tenant.id}>\n                    <td>\n                      <button \n                        className={styles.tenantName}\n                        onClick={() => onViewDetails(tenant.id)}\n                      >\n                        {tenant.name}\n                      </button>\n                      {tenant.company_name && (\n                        <div className={styles.companyName}>{tenant.company_name}</div>\n                      )}\n                    </td>\n                    <td>\n                      <code className={styles.slug}>{tenant.slug}</code>\n                    </td>\n                    <td>{getStatusBadge(tenant.status)}</td>\n                    <td>{getDbStatusBadge(tenant.database_status)}</td>\n                    <td>\n                      {tenant.organization_name ? (\n                        <span style={{ fontSize: '0.8125rem' }}>\n                          {tenant.organization_name}\n                          {tenant.required_group_ids && tenant.required_group_ids.length > 0 && (\n                            <span style={{ marginLeft: '0.25rem', color: 'var(--text-muted)', fontSize: '0.75rem' }}>\n                              ({tenant.required_group_ids.length} groups)\n                            </span>\n                          )}\n                        </span>\n                      ) : (\n                        <span style={{ color: 'var(--text-muted)', fontSize: '0.8125rem' }}></span>\n                      )}\n                    </td>\n                    <td>{tenant.admin_email}</td>\n                    <td>{tenant.plan}</td>\n                    <td>{formatDate(tenant.created_at)}</td>\n                    <td>\n                      <div className={styles.actions}>\n                        {actionLoading === tenant.id ? (\n                          <span className={styles.loading}>Loading...</span>\n                        ) : (\n                          <>\n                            <button\n                              className={styles.btnSmall}\n                              onClick={() => onViewDetails(tenant.id)}\n                              title=\"View Details\"\n                            >\n                              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\" />\n                                <circle cx=\"12\" cy=\"12\" r=\"3\" />\n                              </svg>\n                            </button>\n                            \n                            {!tenant.database_status?.accessible && (\n                              <button\n                                className={`${styles.btnSmall} ${styles.btnSuccess}`}\n                                onClick={() => handleProvision(tenant)}\n                                title=\"Provision Database\"\n                              >\n                                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                  <ellipse cx=\"12\" cy=\"5\" rx=\"9\" ry=\"3\" />\n                                  <path d=\"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3\" />\n                                  <path d=\"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5\" />\n                                </svg>\n                              </button>\n                            )}\n                            \n                            {tenant.database_status?.accessible && (\n                              <button\n                                className={styles.btnSmall}\n                                onClick={() => handleResetPassword(tenant)}\n                                title=\"Reset Admin Password\"\n                              >\n                                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                  <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\" />\n                                  <path d=\"M7 11V7a5 5 0 0 1 10 0v4\" />\n                                </svg>\n                              </button>\n                            )}\n                            \n                            {tenant.status === 'active' && (\n                              <button\n                                className={`${styles.btnSmall} ${styles.btnWarning}`}\n                                onClick={() => handleStatusChange(tenant, 'suspended')}\n                                title=\"Suspend\"\n                              >\n                                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                  <rect x=\"6\" y=\"4\" width=\"4\" height=\"16\" />\n                                  <rect x=\"14\" y=\"4\" width=\"4\" height=\"16\" />\n                                </svg>\n                              </button>\n                            )}\n                            \n                            {tenant.status === 'suspended' && (\n                              <button\n                                className={`${styles.btnSmall} ${styles.btnSuccess}`}\n                                onClick={() => handleStatusChange(tenant, 'active')}\n                                title=\"Activate\"\n                              >\n                                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                  <polygon points=\"5 3 19 12 5 21 5 3\" />\n                                </svg>\n                              </button>\n                            )}\n                            \n                            <button\n                              className={`${styles.btnSmall} ${styles.btnDanger}`}\n                              onClick={() => handleDelete(tenant)}\n                              title=\"Delete Tenant\"\n                            >\n                              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                <polyline points=\"3 6 5 6 21 6\" />\n                                <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\n                              </svg>\n                            </button>\n                          </>\n                        )}\n                      </div>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * OrganizationList\n * List of organizations with actions for SSO management\n */\n\nimport { useState } from 'react';\nimport { useAdminStore } from '@/stores/adminStore';\nimport { deleteOrganization } from '@/api';\nimport type { Organization } from '@/api/endpoints/admin';\nimport styles from './TenantList.module.css';\n\ninterface OrganizationListProps {\n  onCreateNew: () => void;\n  onViewDetails: (id: string) => void;\n  onRefresh: () => void;\n}\n\nexport function OrganizationList({ onCreateNew, onViewDetails, onRefresh }: OrganizationListProps) {\n  const organizations = useAdminStore((s) => s.organizations);\n  const [actionLoading, setActionLoading] = useState<string | null>(null);\n\n  const handleDelete = async (org: Organization) => {\n    if (org.tenant_count > 0) {\n      alert(`Cannot delete organization \"${org.name}\" - it has ${org.tenant_count} tenant(s) assigned.\\n\\nRemove all tenants from this organization first.`);\n      return;\n    }\n    \n    if (!confirm(`Delete organization \"${org.name}\"?\\n\\nThis will also delete its SSO configuration.\\nThis action cannot be undone.`)) {\n      return;\n    }\n    \n    setActionLoading(org.id);\n    try {\n      await deleteOrganization(org.id);\n      onRefresh();\n    } catch (err) {\n      alert('Error: ' + (err instanceof Error ? err.message : 'Unknown error'));\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString(undefined, {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  return (\n    <div className={styles.container}>\n      {/* Stats Cards */}\n      <div className={styles.statsGrid}>\n        <div className={styles.statCard}>\n          <h3>Total Organizations</h3>\n          <div className={styles.statValue}>{organizations.length}</div>\n        </div>\n        <div className={`${styles.statCard} ${styles.success}`}>\n          <h3>SSO Enabled</h3>\n          <div className={styles.statValue}>\n            {organizations.filter(o => o.sso_enabled).length}\n          </div>\n        </div>\n        <div className={styles.statCard}>\n          <h3>Total Tenants</h3>\n          <div className={styles.statValue}>\n            {organizations.reduce((sum, o) => sum + o.tenant_count, 0)}\n          </div>\n        </div>\n      </div>\n\n      {/* Organization Table */}\n      <div className={styles.panel}>\n        <div className={styles.panelHeader}>\n          <h2>Organizations</h2>\n          <button className={styles.btnPrimary} onClick={onCreateNew}>\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n              <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n            </svg>\n            Create Organization\n          </button>\n        </div>\n\n        <div className={styles.tableWrapper}>\n          <table className={styles.table}>\n            <thead>\n              <tr>\n                <th>Name</th>\n                <th>Slug</th>\n                <th>Tenants</th>\n                <th>SSO</th>\n                <th>Description</th>\n                <th>Created</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {organizations.length === 0 ? (\n                <tr>\n                  <td colSpan={7} className={styles.emptyMessage}>\n                    No organizations found. Create an organization to enable shared SSO configuration across multiple tenants.\n                  </td>\n                </tr>\n              ) : (\n                organizations.map((org) => (\n                  <tr key={org.id}>\n                    <td>\n                      <button \n                        className={styles.tenantName}\n                        onClick={() => onViewDetails(org.id)}\n                      >\n                        {org.name}\n                      </button>\n                    </td>\n                    <td>\n                      <code className={styles.slug}>{org.slug}</code>\n                    </td>\n                    <td>{org.tenant_count}</td>\n                    <td>\n                      {org.sso_enabled ? (\n                        <span className={`${styles.badge} ${styles.badgeSuccess}`}>Enabled</span>\n                      ) : (\n                        <span className={`${styles.badge} ${styles.badgeWarning}`}>Not configured</span>\n                      )}\n                    </td>\n                    <td style={{ maxWidth: 200, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>\n                      {org.description || ''}\n                    </td>\n                    <td>{formatDate(org.created_at)}</td>\n                    <td>\n                      <div className={styles.actions}>\n                        {actionLoading === org.id ? (\n                          <span className={styles.loading}>Loading...</span>\n                        ) : (\n                          <>\n                            <button\n                              className={styles.btnSmall}\n                              onClick={() => onViewDetails(org.id)}\n                              title=\"View Details & Configure SSO\"\n                            >\n                              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                <path d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\" />\n                                <circle cx=\"12\" cy=\"12\" r=\"3\" />\n                              </svg>\n                            </button>\n                            \n                            <button\n                              className={`${styles.btnSmall} ${styles.btnDanger}`}\n                              onClick={() => handleDelete(org)}\n                              title=\"Delete Organization\"\n                            >\n                              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                <polyline points=\"3 6 5 6 21 6\" />\n                                <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\n                              </svg>\n                            </button>\n                          </>\n                        )}\n                      </div>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Info Panel */}\n      <div className={styles.panel} style={{ padding: '1rem 1.25rem' }}>\n        <h3 style={{ margin: '0 0 0.5rem', fontSize: '0.875rem', color: 'var(--text-primary)' }}>\n          About Organizations\n        </h3>\n        <p style={{ margin: 0, fontSize: '0.8125rem', color: 'var(--text-muted)', lineHeight: 1.6 }}>\n          Organizations allow multiple tenants to share a single SSO configuration. This is useful for enterprises \n          with multiple departments or subsidiaries that use the same Microsoft Entra ID tenant. Each tenant within \n          an organization can have its own group-based access requirements to control which Entra groups can access \n          that specific tenant.\n        </p>\n      </div>\n    </div>\n  );\n}\n","/**\n * AdminUserList\n * List of admin users (superadmin only)\n */\n\nimport { useState } from 'react';\nimport { useAdminStore } from '@/stores/adminStore';\nimport { deleteAdminUser, updateAdminUser } from '@/api';\nimport styles from './TenantList.module.css'; // Reuse styles\n\ninterface AdminUserListProps {\n  onCreateNew: () => void;\n  onRefresh: () => void;\n}\n\nexport function AdminUserList({ onCreateNew, onRefresh }: AdminUserListProps) {\n  const adminUsers = useAdminStore((s) => s.adminUsers);\n  const currentUser = useAdminStore((s) => s.adminUser);\n  const [actionLoading, setActionLoading] = useState<number | null>(null);\n\n  const handleToggleActive = async (id: number, currentActive: boolean) => {\n    setActionLoading(id);\n    try {\n      await updateAdminUser(id, { active: !currentActive });\n      onRefresh();\n    } catch (err) {\n      alert('Error: ' + (err instanceof Error ? err.message : 'Unknown error'));\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  const handleDelete = async (id: number, email: string) => {\n    if (id === currentUser?.id) {\n      alert('You cannot delete yourself.');\n      return;\n    }\n    \n    if (!confirm(`Delete admin user \"${email}\"?`)) return;\n    \n    setActionLoading(id);\n    try {\n      await deleteAdminUser(id);\n      onRefresh();\n    } catch (err) {\n      alert('Error: ' + (err instanceof Error ? err.message : 'Unknown error'));\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  const formatDate = (dateStr: string | null) => {\n    if (!dateStr) return '-';\n    return new Date(dateStr).toLocaleDateString(undefined, {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    });\n  };\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.panel}>\n        <div className={styles.panelHeader}>\n          <h2>Admin Users</h2>\n          <button className={styles.btnPrimary} onClick={onCreateNew}>\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\n              <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\n            </svg>\n            Add Admin\n          </button>\n        </div>\n\n        <div className={styles.tableWrapper}>\n          <table className={styles.table}>\n            <thead>\n              <tr>\n                <th>Email</th>\n                <th>Name</th>\n                <th>Role</th>\n                <th>Status</th>\n                <th>Created</th>\n                <th>Last Login</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {adminUsers.length === 0 ? (\n                <tr>\n                  <td colSpan={7} className={styles.emptyMessage}>\n                    No admin users found.\n                  </td>\n                </tr>\n              ) : (\n                adminUsers.map((user) => (\n                  <tr key={user.id}>\n                    <td>\n                      <strong>{user.email}</strong>\n                      {user.id === currentUser?.id && (\n                        <span style={{ marginLeft: 8, fontSize: '0.75rem', color: 'var(--text-muted)' }}>\n                          (you)\n                        </span>\n                      )}\n                    </td>\n                    <td>{user.name}</td>\n                    <td>\n                      <span className={`${styles.badge} ${user.role === 'superadmin' ? styles.badgeInfo : ''}`}>\n                        {user.role}\n                      </span>\n                    </td>\n                    <td>\n                      <span className={`${styles.badge} ${user.active ? styles.badgeSuccess : styles.badgeDanger}`}>\n                        {user.active ? 'Active' : 'Disabled'}\n                      </span>\n                    </td>\n                    <td>{formatDate(user.created_at)}</td>\n                    <td>{formatDate(user.last_login)}</td>\n                    <td>\n                      <div className={styles.actions}>\n                        {actionLoading === user.id ? (\n                          <span className={styles.loading}>Loading...</span>\n                        ) : (\n                          <>\n                            <button\n                              className={`${styles.btnSmall} ${user.active ? styles.btnWarning : styles.btnSuccess}`}\n                              onClick={() => handleToggleActive(user.id, user.active)}\n                              title={user.active ? 'Disable' : 'Enable'}\n                              disabled={user.id === currentUser?.id}\n                            >\n                              {user.active ? (\n                                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                  <circle cx=\"12\" cy=\"12\" r=\"10\" />\n                                  <line x1=\"4.93\" y1=\"4.93\" x2=\"19.07\" y2=\"19.07\" />\n                                </svg>\n                              ) : (\n                                <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                  <polyline points=\"20 6 9 17 4 12\" />\n                                </svg>\n                              )}\n                            </button>\n                            \n                            <button\n                              className={`${styles.btnSmall} ${styles.btnDanger}`}\n                              onClick={() => handleDelete(user.id, user.email)}\n                              title=\"Delete\"\n                              disabled={user.id === currentUser?.id}\n                            >\n                              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                                <polyline points=\"3 6 5 6 21 6\" />\n                                <path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\" />\n                              </svg>\n                            </button>\n                          </>\n                        )}\n                      </div>\n                    </td>\n                  </tr>\n                ))\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * SystemStatsPanel\n * System statistics display\n */\n\nimport { useAdminStore } from '@/stores/adminStore';\nimport styles from './SystemStatsPanel.module.css';\n\ninterface SystemStatsPanelProps {\n  onRefresh: () => void;\n}\n\nexport function SystemStatsPanel({ onRefresh }: SystemStatsPanelProps) {\n  const systemStats = useAdminStore((s) => s.systemStats);\n\n  const formatUptime = (seconds: number) => {\n    const days = Math.floor(seconds / 86400);\n    const hours = Math.floor((seconds % 86400) / 3600);\n    const mins = Math.floor((seconds % 3600) / 60);\n    if (days > 0) return `${days}d ${hours}h ${mins}m`;\n    if (hours > 0) return `${hours}h ${mins}m`;\n    return `${mins}m`;\n  };\n\n  if (!systemStats) {\n    return (\n      <div className={styles.container}>\n        <div className={styles.loading}>Loading statistics...</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.header}>\n        <h2>System Statistics</h2>\n        <button className={styles.refreshBtn} onClick={onRefresh}>\n          <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <polyline points=\"23 4 23 10 17 10\" />\n            <polyline points=\"1 20 1 14 7 14\" />\n            <path d=\"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15\" />\n          </svg>\n          Refresh\n        </button>\n      </div>\n\n      {/* Stats Grid */}\n      <div className={styles.grid}>\n        {/* Tenants Section */}\n        <div className={styles.section}>\n          <h3>Tenants</h3>\n          <div className={styles.statsRow}>\n            <div className={styles.stat}>\n              <span className={styles.statLabel}>Total</span>\n              <span className={styles.statValue}>{systemStats.tenants.total}</span>\n            </div>\n            <div className={styles.stat}>\n              <span className={styles.statLabel}>Active</span>\n              <span className={`${styles.statValue} ${styles.success}`}>{systemStats.tenants.active}</span>\n            </div>\n            <div className={styles.stat}>\n              <span className={styles.statLabel}>Pending</span>\n              <span className={`${styles.statValue} ${styles.warning}`}>{systemStats.tenants.pending}</span>\n            </div>\n            <div className={styles.stat}>\n              <span className={styles.statLabel}>Suspended</span>\n              <span className={`${styles.statValue} ${styles.danger}`}>{systemStats.tenants.suspended}</span>\n            </div>\n            <div className={styles.stat}>\n              <span className={styles.statLabel}>Archived</span>\n              <span className={styles.statValue}>{systemStats.tenants.archived}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Connections Section */}\n        <div className={styles.section}>\n          <h3>Database Connections</h3>\n          <div className={styles.statsRow}>\n            <div className={styles.stat}>\n              <span className={styles.statLabel}>Active Pools</span>\n              <span className={styles.statValue}>{systemStats.connections.active_pools}</span>\n            </div>\n            <div className={styles.stat}>\n              <span className={styles.statLabel}>Total Connections</span>\n              <span className={styles.statValue}>{systemStats.connections.total_connections}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* System Section */}\n        <div className={styles.section}>\n          <h3>Server</h3>\n          <div className={styles.statsRow}>\n            <div className={styles.stat}>\n              <span className={styles.statLabel}>Uptime</span>\n              <span className={styles.statValue}>{formatUptime(systemStats.system.uptime)}</span>\n            </div>\n            <div className={styles.stat}>\n              <span className={styles.statLabel}>Memory</span>\n              <span className={styles.statValue}>{Math.round(systemStats.system.memory_mb)} MB</span>\n            </div>\n          </div>\n          <div className={styles.info}>\n            <span className={styles.infoLabel}>Python Version:</span>\n            <code className={styles.infoValue}>{systemStats.system.python_version.split(' ')[0]}</code>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * CreateTenantModal\n * Modal for creating a new tenant\n */\n\nimport { useState, FormEvent } from 'react';\nimport { createTenant } from '@/api';\nimport type { Tenant, TenantCreateRequest } from '@/api/endpoints/admin';\nimport styles from './AdminModal.module.css';\n\ninterface CreateTenantModalProps {\n  onClose: () => void;\n  onCreated: (tenant: Tenant) => void;\n}\n\nexport function CreateTenantModal({ onClose, onCreated }: CreateTenantModalProps) {\n  const [formData, setFormData] = useState<TenantCreateRequest>({\n    name: '',\n    slug: '',\n    company_name: '',\n    admin_email: '',\n    plan: 'standard',\n    max_users: 10,\n    max_projects: 50,\n  });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value, type } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: type === 'number' ? parseInt(value, 10) : value,\n    }));\n  };\n\n  // Auto-generate slug from name\n  const handleNameChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const name = e.target.value;\n    const slug = name\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/^-+|-+$/g, '');\n    setFormData((prev) => ({\n      ...prev,\n      name,\n      slug,\n    }));\n  };\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setIsSubmitting(true);\n\n    try {\n      const tenant = await createTenant(formData);\n      onCreated(tenant);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to create tenant');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleOverlayClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  return (\n    <div className={styles.overlay} onClick={handleOverlayClick}>\n      <div className={styles.modal}>\n        <div className={styles.header}>\n          <h2 className={styles.title}>Create Tenant</h2>\n          <button className={styles.closeBtn} onClick={onClose}>\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n            </svg>\n          </button>\n        </div>\n\n        <form id=\"create-tenant-form\" onSubmit={handleSubmit} className={styles.body}>\n            <div className={styles.form}>\n              <div className={styles.formGroup}>\n                <label className={styles.label}>Tenant Name *</label>\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  className={styles.input}\n                  value={formData.name}\n                  onChange={handleNameChange}\n                  placeholder=\"Acme Corporation\"\n                  required\n                  disabled={isSubmitting}\n                />\n              </div>\n\n              <div className={styles.formGroup}>\n                <label className={styles.label}>URL Slug *</label>\n                <input\n                  type=\"text\"\n                  name=\"slug\"\n                  className={styles.input}\n                  value={formData.slug}\n                  onChange={handleChange}\n                  placeholder=\"acme-corp\"\n                  pattern=\"[a-z0-9-]+\"\n                  required\n                  disabled={isSubmitting}\n                />\n                <small style={{ color: 'var(--text-muted)', fontSize: '0.75rem' }}>\n                  Access URL: /t/{formData.slug || 'slug'}/\n                </small>\n              </div>\n\n              <div className={styles.formGroup}>\n                <label className={styles.label}>Company Name</label>\n                <input\n                  type=\"text\"\n                  name=\"company_name\"\n                  className={styles.input}\n                  value={formData.company_name}\n                  onChange={handleChange}\n                  placeholder=\"Acme Corporation Inc.\"\n                  disabled={isSubmitting}\n                />\n              </div>\n\n              <div className={styles.formGroup}>\n                <label className={styles.label}>Admin Email *</label>\n                <input\n                  type=\"email\"\n                  name=\"admin_email\"\n                  className={styles.input}\n                  value={formData.admin_email}\n                  onChange={handleChange}\n                  placeholder=\"admin@acme.com\"\n                  required\n                  disabled={isSubmitting}\n                />\n              </div>\n\n              <div className={styles.formRow}>\n                <div className={styles.formGroup}>\n                  <label className={styles.label}>Plan</label>\n                  <select\n                    name=\"plan\"\n                    className={styles.select}\n                    value={formData.plan}\n                    onChange={handleChange}\n                    disabled={isSubmitting}\n                  >\n                    <option value=\"trial\">Trial</option>\n                    <option value=\"standard\">Standard</option>\n                    <option value=\"professional\">Professional</option>\n                    <option value=\"enterprise\">Enterprise</option>\n                  </select>\n                </div>\n\n                <div className={styles.formGroup}>\n                  <label className={styles.label}>Max Users</label>\n                  <input\n                    type=\"number\"\n                    name=\"max_users\"\n                    className={styles.input}\n                    value={formData.max_users}\n                    onChange={handleChange}\n                    min=\"1\"\n                    disabled={isSubmitting}\n                  />\n                </div>\n              </div>\n\n              <div className={styles.formGroup}>\n                <label className={styles.label}>Max Projects</label>\n                <input\n                  type=\"number\"\n                  name=\"max_projects\"\n                  className={styles.input}\n                  value={formData.max_projects}\n                  onChange={handleChange}\n                  min=\"1\"\n                  disabled={isSubmitting}\n                />\n              </div>\n\n              {error && <div className={styles.error}>{error}</div>}\n            </div>\n        </form>\n\n        <div className={styles.footer}>\n          <button\n            type=\"button\"\n            className={`${styles.btn} ${styles.btnSecondary}`}\n            onClick={onClose}\n            disabled={isSubmitting}\n          >\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            form=\"create-tenant-form\"\n            className={`${styles.btn} ${styles.btnPrimary}`}\n            disabled={isSubmitting}\n          >\n            {isSubmitting ? 'Creating...' : 'Create Tenant'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * CreateAdminModal\n * Modal for creating a new admin user\n */\n\nimport { useState, FormEvent } from 'react';\nimport { createAdminUser } from '@/api';\nimport styles from './AdminModal.module.css';\n\ninterface CreateAdminModalProps {\n  onClose: () => void;\n  onCreated: () => void;\n}\n\nexport function CreateAdminModal({ onClose, onCreated }: CreateAdminModalProps) {\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n    name: '',\n    role: 'admin',\n  });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = async (e: FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setIsSubmitting(true);\n\n    try {\n      await createAdminUser(formData);\n      onCreated();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to create admin user');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleOverlayClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  return (\n    <div className={styles.overlay} onClick={handleOverlayClick}>\n      <div className={styles.modal}>\n        <div className={styles.header}>\n          <h2 className={styles.title}>Create Admin User</h2>\n          <button className={styles.closeBtn} onClick={onClose}>\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n            </svg>\n          </button>\n        </div>\n\n        <form id=\"create-admin-form\" onSubmit={handleSubmit} className={styles.body}>\n            <div className={styles.form}>\n              <div className={styles.formGroup}>\n                <label className={styles.label}>Email *</label>\n                <input\n                  type=\"email\"\n                  name=\"email\"\n                  className={styles.input}\n                  value={formData.email}\n                  onChange={handleChange}\n                  placeholder=\"admin@example.com\"\n                  required\n                  disabled={isSubmitting}\n                />\n              </div>\n\n              <div className={styles.formGroup}>\n                <label className={styles.label}>Password *</label>\n                <input\n                  type=\"password\"\n                  name=\"password\"\n                  className={styles.input}\n                  value={formData.password}\n                  onChange={handleChange}\n                  placeholder=\"\"\n                  minLength={8}\n                  required\n                  disabled={isSubmitting}\n                />\n              </div>\n\n              <div className={styles.formGroup}>\n                <label className={styles.label}>Name *</label>\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  className={styles.input}\n                  value={formData.name}\n                  onChange={handleChange}\n                  placeholder=\"John Doe\"\n                  required\n                  disabled={isSubmitting}\n                />\n              </div>\n\n              <div className={styles.formGroup}>\n                <label className={styles.label}>Role</label>\n                <select\n                  name=\"role\"\n                  className={styles.select}\n                  value={formData.role}\n                  onChange={handleChange}\n                  disabled={isSubmitting}\n                >\n                  <option value=\"admin\">Admin</option>\n                  <option value=\"superadmin\">Superadmin</option>\n                </select>\n              </div>\n\n              {error && <div className={styles.error}>{error}</div>}\n            </div>\n        </form>\n\n        <div className={styles.footer}>\n          <button\n            type=\"button\"\n            className={`${styles.btn} ${styles.btnSecondary}`}\n            onClick={onClose}\n            disabled={isSubmitting}\n          >\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            form=\"create-admin-form\"\n            className={`${styles.btn} ${styles.btnPrimary}`}\n            disabled={isSubmitting}\n          >\n            {isSubmitting ? 'Creating...' : 'Create Admin'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * CreateOrganizationModal\n * Modal for creating a new organization\n */\n\nimport { useState } from 'react';\nimport { createOrganization } from '@/api';\nimport styles from './AdminModal.module.css';\n\ninterface CreateOrganizationModalProps {\n  onClose: () => void;\n  onCreated: () => void;\n}\n\nexport function CreateOrganizationModal({ onClose, onCreated }: CreateOrganizationModalProps) {\n  const [name, setName] = useState('');\n  const [slug, setSlug] = useState('');\n  const [description, setDescription] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const generateSlug = (name: string) => {\n    return name\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/^-|-$/g, '')\n      .substring(0, 63);\n  };\n\n  const handleNameChange = (value: string) => {\n    setName(value);\n    // Auto-generate slug if user hasn't manually edited it\n    if (!slug || slug === generateSlug(name)) {\n      setSlug(generateSlug(value));\n    }\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n\n    if (!name.trim() || !slug.trim()) {\n      setError('Name and slug are required');\n      return;\n    }\n\n    // Validate slug format\n    if (!/^[a-z0-9][a-z0-9-]*[a-z0-9]$|^[a-z0-9]$/.test(slug)) {\n      setError('Slug must start and end with a letter/number and contain only lowercase letters, numbers, and hyphens');\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      await createOrganization({\n        name: name.trim(),\n        slug: slug.trim(),\n        description: description.trim() || undefined,\n      });\n      onCreated();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to create organization');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleOverlayClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  return (\n    <div className={styles.overlay} onClick={handleOverlayClick}>\n      <div className={styles.modal}>\n        <div className={styles.header}>\n          <h2 className={styles.title}>Create Organization</h2>\n          <button className={styles.closeBtn} onClick={onClose}>\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n            </svg>\n          </button>\n        </div>\n\n        <form className={styles.body} onSubmit={handleSubmit}>\n          {error && <div className={styles.error}>{error}</div>}\n\n          <div className={styles.form}>\n            <div className={styles.formGroup}>\n              <label className={styles.label} htmlFor=\"orgName\">Name *</label>\n              <input\n                type=\"text\"\n                id=\"orgName\"\n                className={styles.input}\n                value={name}\n                onChange={(e) => handleNameChange(e.target.value)}\n                placeholder=\"Acme Corporation\"\n                required\n              />\n            </div>\n\n            <div className={styles.formGroup}>\n              <label className={styles.label} htmlFor=\"orgSlug\">Slug *</label>\n              <input\n                type=\"text\"\n                id=\"orgSlug\"\n                className={styles.input}\n                value={slug}\n                onChange={(e) => setSlug(e.target.value.toLowerCase().replace(/[^a-z0-9-]/g, ''))}\n                placeholder=\"acme-corp\"\n                required\n              />\n              <span style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>\n                Used in URLs. Only lowercase letters, numbers, and hyphens.\n              </span>\n            </div>\n\n            <div className={styles.formGroup}>\n              <label className={styles.label} htmlFor=\"orgDesc\">Description</label>\n              <input\n                type=\"text\"\n                id=\"orgDesc\"\n                className={styles.input}\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                placeholder=\"Optional description of the organization\"\n              />\n            </div>\n          </div>\n        </form>\n\n        <div className={styles.footer}>\n          <button\n            type=\"button\"\n            className={`${styles.btn} ${styles.btnSecondary}`}\n            onClick={onClose}\n            disabled={isSubmitting}\n          >\n            Cancel\n          </button>\n          <button\n            type=\"submit\"\n            className={`${styles.btn} ${styles.btnPrimary}`}\n            onClick={handleSubmit}\n            disabled={isSubmitting}\n          >\n            {isSubmitting ? 'Creating...' : 'Create Organization'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * TenantDetailsModal\n * Modal showing detailed tenant information including organization membership\n */\n\nimport { useState, useEffect } from 'react';\nimport { getTenant, getTenantAuditLog } from '@/api';\nimport type { Tenant, AuditLogEntry } from '@/api/endpoints/admin';\nimport styles from './AdminModal.module.css';\n\ninterface TenantDetailsModalProps {\n  tenantId: string;\n  onClose: () => void;\n  onShowCredentials?: (title: string, email: string, password: string) => void;\n  onRefresh?: () => void;\n}\n\nexport function TenantDetailsModal({ tenantId, onClose }: TenantDetailsModalProps) {\n  const [tenant, setTenant] = useState<Tenant | null>(null);\n  const [auditLog, setAuditLog] = useState<AuditLogEntry[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    loadTenantDetails();\n  }, [tenantId]);\n\n  const loadTenantDetails = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const [tenantData, logData] = await Promise.all([\n        getTenant(tenantId),\n        getTenantAuditLog(tenantId, 10),\n      ]);\n      setTenant(tenantData);\n      setAuditLog(logData);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load tenant details');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleOverlayClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  const getStatusBadge = (status: Tenant['status']) => {\n    const classes: Record<string, string> = {\n      active: styles.badgeSuccess,\n      pending: styles.badgeWarning,\n      suspended: styles.badgeDanger,\n      archived: styles.badgeInfo,\n    };\n    return <span className={`${styles.badge} ${classes[status] || ''}`}>{status}</span>;\n  };\n\n  const getDbStatusBadge = (dbStatus?: { exists: boolean; accessible: boolean }) => {\n    if (!dbStatus) return <span className={styles.badge}>Unknown</span>;\n    if (dbStatus.accessible) return <span className={`${styles.badge} ${styles.badgeSuccess}`}>Connected</span>;\n    if (dbStatus.exists) return <span className={`${styles.badge} ${styles.badgeWarning}`}>Exists</span>;\n    return <span className={`${styles.badge} ${styles.badgeDanger}`}>Not provisioned</span>;\n  };\n\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString(undefined, {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  return (\n    <div className={styles.overlay} onClick={handleOverlayClick}>\n      <div className={`${styles.modal} ${styles.wide}`}>\n        <div className={styles.header}>\n          <h2 className={styles.title}>Tenant Details</h2>\n          <button className={styles.closeBtn} onClick={onClose}>\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n            </svg>\n          </button>\n        </div>\n\n        <div className={styles.body}>\n          {isLoading ? (\n            <div style={{ textAlign: 'center', padding: '2rem', color: 'var(--text-muted)' }}>\n              Loading...\n            </div>\n          ) : error ? (\n            <div className={styles.error}>{error}</div>\n          ) : tenant ? (\n            <>\n              {/* Header Info */}\n              <div style={{ marginBottom: '1.5rem' }}>\n                <h3 style={{ margin: 0, color: 'var(--text-primary)' }}>{tenant.name}</h3>\n                {tenant.company_name && (\n                  <p style={{ margin: '0.25rem 0 0', color: 'var(--text-muted)' }}>{tenant.company_name}</p>\n                )}\n              </div>\n\n              {/* Details Grid */}\n              <div className={styles.infoGrid}>\n                <div className={styles.infoRow}>\n                  <span className={styles.infoLabel}>Slug</span>\n                  <code className={styles.infoValue}>{tenant.slug}</code>\n                </div>\n                <div className={styles.infoRow}>\n                  <span className={styles.infoLabel}>Status</span>\n                  <span className={styles.infoValue}>{getStatusBadge(tenant.status)}</span>\n                </div>\n                <div className={styles.infoRow}>\n                  <span className={styles.infoLabel}>Database</span>\n                  <span className={styles.infoValue}>{getDbStatusBadge(tenant.database_status)}</span>\n                </div>\n                <div className={styles.infoRow}>\n                  <span className={styles.infoLabel}>DB Name</span>\n                  <code className={styles.infoValue}>{tenant.database_name}</code>\n                </div>\n                <div className={styles.infoRow}>\n                  <span className={styles.infoLabel}>DB User</span>\n                  <code className={styles.infoValue}>{tenant.database_user}</code>\n                </div>\n                <div className={styles.infoRow}>\n                  <span className={styles.infoLabel}>Admin Email</span>\n                  <span className={styles.infoValue}>{tenant.admin_email}</span>\n                </div>\n                <div className={styles.infoRow}>\n                  <span className={styles.infoLabel}>Plan</span>\n                  <span className={styles.infoValue}>{tenant.plan}</span>\n                </div>\n                <div className={styles.infoRow}>\n                  <span className={styles.infoLabel}>Max Users</span>\n                  <span className={styles.infoValue}>{tenant.max_users}</span>\n                </div>\n                <div className={styles.infoRow}>\n                  <span className={styles.infoLabel}>Max Projects</span>\n                  <span className={styles.infoValue}>{tenant.max_projects}</span>\n                </div>\n                <div className={styles.infoRow}>\n                  <span className={styles.infoLabel}>Created</span>\n                  <span className={styles.infoValue}>{formatDate(tenant.created_at)}</span>\n                </div>\n              </div>\n\n              {/* Organization Section */}\n              <h4 className={styles.sectionTitle}>Organization & SSO</h4>\n              <div className={styles.infoGrid}>\n                <div className={styles.infoRow}>\n                  <span className={styles.infoLabel}>Organization</span>\n                  <span className={styles.infoValue}>\n                    {tenant.organization_name ? (\n                      <span style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n                        {tenant.organization_name}\n                        <span className={`${styles.badge} ${styles.badgeInfo}`}>SSO via Org</span>\n                      </span>\n                    ) : (\n                      <span style={{ color: 'var(--text-muted)' }}>Not assigned</span>\n                    )}\n                  </span>\n                </div>\n                {tenant.organization_id && (\n                  <>\n                    <div className={styles.infoRow}>\n                      <span className={styles.infoLabel}>Required Groups</span>\n                      <span className={styles.infoValue}>\n                        {tenant.required_group_ids && tenant.required_group_ids.length > 0 ? (\n                          <span>{tenant.required_group_ids.length} group(s) configured</span>\n                        ) : (\n                          <span style={{ color: 'var(--text-muted)' }}>None (all org users allowed)</span>\n                        )}\n                      </span>\n                    </div>\n                    <div className={styles.infoRow}>\n                      <span className={styles.infoLabel}>Group Mode</span>\n                      <span className={styles.infoValue}>\n                        {tenant.group_membership_mode === 'all' ? 'All groups required' : 'Any group allowed'}\n                      </span>\n                    </div>\n                  </>\n                )}\n              </div>\n\n              {/* Access URL */}\n              <h4 className={styles.sectionTitle}>Access URL</h4>\n              <div className={styles.codeBlock}>\n                {window.location.origin}/t/{tenant.slug}/\n              </div>\n\n              {/* Audit Log */}\n              {auditLog.length > 0 && (\n                <>\n                  <h4 className={styles.sectionTitle}>Recent Activity</h4>\n                  <div className={styles.auditLog}>\n                    {auditLog.map((log) => (\n                      <div key={log.id} className={styles.auditEntry}>\n                        <span className={styles.auditAction}>{log.action}</span>\n                        <span className={styles.auditMeta}>\n                          {formatDate(log.created_at)}\n                          {log.actor && ` by ${log.actor}`}\n                        </span>\n                      </div>\n                    ))}\n                  </div>\n                </>\n              )}\n            </>\n          ) : null}\n        </div>\n\n        <div className={styles.footer}>\n          <button\n            className={`${styles.btn} ${styles.btnSecondary}`}\n            onClick={onClose}\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * OrganizationDetailsModal\n * Modal showing organization details with SSO configuration and tenant management\n */\n\nimport { useState, useEffect } from 'react';\nimport { useAdminStore } from '@/stores/adminStore';\nimport { \n  getOrganization, \n  updateOrganization,\n  updateOrganizationSSOConfig,\n  removeTenantFromOrganization,\n  addTenantToOrganization,\n  updateTenantGroupAccess,\n} from '@/api';\nimport type { OrganizationDetail, TenantSummary } from '@/api/endpoints/admin';\nimport styles from './AdminModal.module.css';\n\ninterface OrganizationDetailsModalProps {\n  organizationId: string;\n  onClose: () => void;\n  onRefresh?: () => void;\n}\n\ntype Tab = 'details' | 'sso' | 'tenants';\n\nexport function OrganizationDetailsModal({ organizationId, onClose, onRefresh }: OrganizationDetailsModalProps) {\n  const allTenants = useAdminStore((s) => s.tenants);\n  \n  const [organization, setOrganization] = useState<OrganizationDetail | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [activeTab, setActiveTab] = useState<Tab>('details');\n  \n  // Edit states\n  const [isEditing, setIsEditing] = useState(false);\n  const [editName, setEditName] = useState('');\n  const [editDescription, setEditDescription] = useState('');\n  \n  // SSO states\n  const [ssoEnabled, setSsoEnabled] = useState(false);\n  const [entraTenantId, setEntraTenantId] = useState('');\n  const [clientId, setClientId] = useState('');\n  const [clientSecret, setClientSecret] = useState('');\n  const [redirectUri, setRedirectUri] = useState('');\n  const [autoCreateUsers, setAutoCreateUsers] = useState(false);\n  const [defaultUserRole, setDefaultUserRole] = useState('user');\n  const [isSavingSSO, setIsSavingSSO] = useState(false);\n  const [ssoSuccess, setSsoSuccess] = useState<string | null>(null);\n  \n  // Tenant management states\n  const [selectedTenantToAdd, setSelectedTenantToAdd] = useState('');\n  const [editingTenant, setEditingTenant] = useState<string | null>(null);\n  const [tenantGroupIds, setTenantGroupIds] = useState('');\n  const [tenantGroupMode, setTenantGroupMode] = useState<'any' | 'all'>('any');\n\n  const redirectHint = typeof window !== 'undefined' \n    ? `${window.location.origin}/api/auth/sso/callback`\n    : '/api/auth/sso/callback';\n\n  useEffect(() => {\n    loadOrganization();\n  }, [organizationId]);\n\n  const loadOrganization = async () => {\n    setIsLoading(true);\n    setError(null);\n    try {\n      const data = await getOrganization(organizationId);\n      setOrganization(data);\n      \n      // Set edit fields\n      setEditName(data.name);\n      setEditDescription(data.description || '');\n      \n      // Set SSO fields\n      if (data.sso_config) {\n        setSsoEnabled(data.sso_config.enabled);\n        setEntraTenantId(data.sso_config.entraTenantId || '');\n        setClientId(data.sso_config.clientId || '');\n        setRedirectUri(data.sso_config.redirectUri || redirectHint);\n        setAutoCreateUsers(data.sso_config.autoCreateUsers);\n        setDefaultUserRole(data.sso_config.defaultUserRole);\n      } else {\n        setRedirectUri(redirectHint);\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load organization');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSaveDetails = async () => {\n    if (!organization) return;\n    \n    try {\n      await updateOrganization(organization.id, {\n        name: editName.trim(),\n        description: editDescription.trim() || undefined,\n      });\n      await loadOrganization();\n      setIsEditing(false);\n      onRefresh?.();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to update organization');\n    }\n  };\n\n  const handleSaveSSO = async () => {\n    if (!organization) return;\n    \n    setError(null);\n    setSsoSuccess(null);\n    \n    // Validate if enabling\n    if (ssoEnabled && (!entraTenantId.trim() || !clientId.trim() || !redirectUri.trim())) {\n      setError('Tenant ID, Client ID, and Redirect URI are required to enable SSO');\n      return;\n    }\n    \n    setIsSavingSSO(true);\n    \n    try {\n      const config: Record<string, unknown> = {\n        enabled: ssoEnabled,\n        entraTenantId: entraTenantId.trim(),\n        clientId: clientId.trim(),\n        redirectUri: redirectUri.trim(),\n        autoCreateUsers,\n        defaultUserRole,\n      };\n      \n      if (clientSecret) {\n        config.clientSecret = clientSecret;\n      }\n      \n      await updateOrganizationSSOConfig(organization.id, config);\n      setSsoSuccess('SSO configuration saved successfully');\n      setClientSecret('');\n      await loadOrganization();\n      onRefresh?.();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to save SSO configuration');\n    } finally {\n      setIsSavingSSO(false);\n    }\n  };\n\n  const handleAddTenant = async () => {\n    if (!organization || !selectedTenantToAdd) return;\n    \n    try {\n      await addTenantToOrganization(organization.id, selectedTenantToAdd);\n      setSelectedTenantToAdd('');\n      await loadOrganization();\n      onRefresh?.();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to add tenant');\n    }\n  };\n\n  const handleRemoveTenant = async (tenantId: string) => {\n    if (!organization) return;\n    \n    if (!confirm('Remove this tenant from the organization?\\n\\nThe tenant will no longer use the organization\\'s SSO configuration.')) {\n      return;\n    }\n    \n    try {\n      await removeTenantFromOrganization(organization.id, tenantId);\n      await loadOrganization();\n      onRefresh?.();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to remove tenant');\n    }\n  };\n\n  const handleEditTenantGroups = (tenant: TenantSummary) => {\n    setEditingTenant(tenant.id);\n    setTenantGroupIds(tenant.required_group_ids.join(', '));\n    setTenantGroupMode(tenant.group_membership_mode);\n  };\n\n  const handleSaveTenantGroups = async () => {\n    if (!editingTenant) return;\n    \n    try {\n      const groupIds = tenantGroupIds\n        .split(',')\n        .map(id => id.trim())\n        .filter(id => id);\n      \n      await updateTenantGroupAccess(editingTenant, {\n        requiredGroupIds: groupIds,\n        groupMembershipMode: tenantGroupMode,\n      });\n      \n      setEditingTenant(null);\n      await loadOrganization();\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to update tenant groups');\n    }\n  };\n\n  const handleOverlayClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  const formatDate = (dateStr: string) => {\n    return new Date(dateStr).toLocaleDateString(undefined, {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n    });\n  };\n\n  // Get available tenants (not already in this organization)\n  const availableTenants = allTenants.filter(t => \n    !organization?.tenants.some(ot => ot.id === t.id)\n  );\n\n  return (\n    <div className={styles.overlay} onClick={handleOverlayClick}>\n      <div className={`${styles.modal} ${styles.wide}`} style={{ maxWidth: 800 }}>\n        <div className={styles.header}>\n          <h2 className={styles.title}>\n            {organization?.name || 'Organization Details'}\n          </h2>\n          <button className={styles.closeBtn} onClick={onClose}>\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n            </svg>\n          </button>\n        </div>\n\n        {/* Tab Navigation */}\n        <div style={{\n          display: 'flex',\n          gap: '0.25rem',\n          padding: '0.75rem 1.25rem',\n          borderBottom: '1px solid var(--border-color)',\n          background: 'var(--bg-tertiary)',\n          flexShrink: 0,\n        }}>\n          {(['details', 'sso', 'tenants'] as Tab[]).map((tab) => (\n            <button\n              key={tab}\n              onClick={() => setActiveTab(tab)}\n              style={{\n                padding: '0.5rem 1rem',\n                fontSize: '0.875rem',\n                fontWeight: 500,\n                background: activeTab === tab ? 'var(--bg-secondary)' : 'transparent',\n                border: activeTab === tab ? '1px solid var(--border-color)' : '1px solid transparent',\n                borderBottom: activeTab === tab ? '1px solid var(--bg-secondary)' : '1px solid transparent',\n                borderRadius: 'var(--radius-md) var(--radius-md) 0 0',\n                color: activeTab === tab ? 'var(--accent-blue)' : 'var(--text-secondary)',\n                cursor: 'pointer',\n                marginBottom: '-1px',\n                textTransform: 'capitalize',\n              }}\n            >\n              {tab === 'sso' ? 'SSO Configuration' : tab}\n            </button>\n          ))}\n        </div>\n\n        <div className={styles.body}>\n          {isLoading ? (\n            <div style={{ textAlign: 'center', padding: '2rem', color: 'var(--text-muted)' }}>\n              Loading...\n            </div>\n          ) : error && !organization ? (\n            <div className={styles.error}>{error}</div>\n          ) : organization ? (\n            <>\n              {error && <div className={styles.error} style={{ marginBottom: '1rem' }}>{error}</div>}\n              \n              {/* Details Tab */}\n              {activeTab === 'details' && (\n                <div>\n                  {isEditing ? (\n                    <div className={styles.form}>\n                      <div className={styles.formGroup}>\n                        <label className={styles.label}>Name</label>\n                        <input\n                          type=\"text\"\n                          className={styles.input}\n                          value={editName}\n                          onChange={(e) => setEditName(e.target.value)}\n                        />\n                      </div>\n                      <div className={styles.formGroup}>\n                        <label className={styles.label}>Description</label>\n                        <input\n                          type=\"text\"\n                          className={styles.input}\n                          value={editDescription}\n                          onChange={(e) => setEditDescription(e.target.value)}\n                        />\n                      </div>\n                      <div style={{ display: 'flex', gap: '0.5rem', marginTop: '1rem' }}>\n                        <button \n                          className={`${styles.btn} ${styles.btnPrimary}`}\n                          onClick={handleSaveDetails}\n                        >\n                          Save\n                        </button>\n                        <button \n                          className={`${styles.btn} ${styles.btnSecondary}`}\n                          onClick={() => setIsEditing(false)}\n                        >\n                          Cancel\n                        </button>\n                      </div>\n                    </div>\n                  ) : (\n                    <>\n                      <div className={styles.infoGrid}>\n                        <div className={styles.infoRow}>\n                          <span className={styles.infoLabel}>Name</span>\n                          <span className={styles.infoValue}>{organization.name}</span>\n                        </div>\n                        <div className={styles.infoRow}>\n                          <span className={styles.infoLabel}>Slug</span>\n                          <code className={styles.infoValue}>{organization.slug}</code>\n                        </div>\n                        <div className={styles.infoRow}>\n                          <span className={styles.infoLabel}>Description</span>\n                          <span className={styles.infoValue}>{organization.description || ''}</span>\n                        </div>\n                        <div className={styles.infoRow}>\n                          <span className={styles.infoLabel}>SSO Status</span>\n                          <span className={styles.infoValue}>\n                            {organization.sso_config?.enabled ? (\n                              <span className={`${styles.badge} ${styles.badgeSuccess}`}>Enabled</span>\n                            ) : organization.sso_config?.configured ? (\n                              <span className={`${styles.badge} ${styles.badgeWarning}`}>Configured (Disabled)</span>\n                            ) : (\n                              <span className={`${styles.badge} ${styles.badgeInfo}`}>Not configured</span>\n                            )}\n                          </span>\n                        </div>\n                        <div className={styles.infoRow}>\n                          <span className={styles.infoLabel}>Tenants</span>\n                          <span className={styles.infoValue}>{organization.tenants.length}</span>\n                        </div>\n                        <div className={styles.infoRow}>\n                          <span className={styles.infoLabel}>Created</span>\n                          <span className={styles.infoValue}>{formatDate(organization.created_at)}</span>\n                        </div>\n                      </div>\n                      <button \n                        className={`${styles.btn} ${styles.btnSecondary}`}\n                        onClick={() => setIsEditing(true)}\n                        style={{ marginTop: '1rem' }}\n                      >\n                        Edit Details\n                      </button>\n                    </>\n                  )}\n                </div>\n              )}\n\n              {/* SSO Configuration Tab */}\n              {activeTab === 'sso' && (\n                <div className={styles.form}>\n                  {ssoSuccess && (\n                    <div style={{ \n                      padding: '0.75rem', \n                      background: 'rgba(16, 185, 129, 0.15)', \n                      color: 'var(--accent-green)',\n                      borderRadius: 'var(--radius-md)',\n                      marginBottom: '1rem',\n                      fontSize: '0.875rem'\n                    }}>\n                      {ssoSuccess}\n                    </div>\n                  )}\n                  \n                  {/* Enable Toggle */}\n                  <div className={styles.formGroup}>\n                    <label style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', cursor: 'pointer' }}>\n                      <input\n                        type=\"checkbox\"\n                        checked={ssoEnabled}\n                        onChange={(e) => setSsoEnabled(e.target.checked)}\n                        style={{ width: 18, height: 18 }}\n                      />\n                      <span style={{ fontWeight: 500 }}>Enable SSO for this organization</span>\n                    </label>\n                    <span style={{ fontSize: '0.75rem', color: 'var(--text-muted)', marginTop: '0.25rem' }}>\n                      When enabled, all tenants in this organization can use SSO login.\n                    </span>\n                  </div>\n\n                  <h4 className={styles.sectionTitle} style={{ marginTop: '1rem' }}>Microsoft Entra Settings</h4>\n                  \n                  <div className={styles.formGroup}>\n                    <label className={styles.label}>Entra Tenant ID *</label>\n                    <input\n                      type=\"text\"\n                      className={styles.input}\n                      value={entraTenantId}\n                      onChange={(e) => setEntraTenantId(e.target.value)}\n                      placeholder=\"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\"\n                      disabled={!ssoEnabled}\n                    />\n                  </div>\n\n                  <div className={styles.formGroup}>\n                    <label className={styles.label}>Client ID (Application ID) *</label>\n                    <input\n                      type=\"text\"\n                      className={styles.input}\n                      value={clientId}\n                      onChange={(e) => setClientId(e.target.value)}\n                      placeholder=\"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\"\n                      disabled={!ssoEnabled}\n                    />\n                  </div>\n\n                  <div className={styles.formGroup}>\n                    <label className={styles.label}>Client Secret</label>\n                    <input\n                      type=\"password\"\n                      className={styles.input}\n                      value={clientSecret}\n                      onChange={(e) => setClientSecret(e.target.value)}\n                      placeholder={organization.sso_config?.configured ? '' : 'Enter client secret'}\n                      disabled={!ssoEnabled}\n                    />\n                    <span style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>\n                      Leave blank to keep existing secret.\n                    </span>\n                  </div>\n\n                  <div className={styles.formGroup}>\n                    <label className={styles.label}>Redirect URI *</label>\n                    <input\n                      type=\"text\"\n                      className={styles.input}\n                      value={redirectUri}\n                      onChange={(e) => setRedirectUri(e.target.value)}\n                      placeholder={redirectHint}\n                      disabled={!ssoEnabled}\n                    />\n                  </div>\n\n                  <h4 className={styles.sectionTitle}>User Management</h4>\n                  \n                  <div className={styles.formGroup}>\n                    <label style={{ display: 'flex', alignItems: 'center', gap: '0.75rem', cursor: 'pointer' }}>\n                      <input\n                        type=\"checkbox\"\n                        checked={autoCreateUsers}\n                        onChange={(e) => setAutoCreateUsers(e.target.checked)}\n                        disabled={!ssoEnabled}\n                        style={{ width: 16, height: 16 }}\n                      />\n                      <span>Auto-create users on first SSO login</span>\n                    </label>\n                  </div>\n\n                  <div className={styles.formGroup}>\n                    <label className={styles.label}>Default role for new users</label>\n                    <select\n                      className={styles.select}\n                      value={defaultUserRole}\n                      onChange={(e) => setDefaultUserRole(e.target.value)}\n                      disabled={!ssoEnabled || !autoCreateUsers}\n                    >\n                      <option value=\"viewer\">Viewer</option>\n                      <option value=\"user\">User</option>\n                      <option value=\"superuser\">SuperUser</option>\n                      <option value=\"admin\">Admin</option>\n                    </select>\n                  </div>\n\n                  <button\n                    className={`${styles.btn} ${styles.btnPrimary}`}\n                    onClick={handleSaveSSO}\n                    disabled={isSavingSSO}\n                    style={{ marginTop: '1rem' }}\n                  >\n                    {isSavingSSO ? 'Saving...' : 'Save SSO Configuration'}\n                  </button>\n                </div>\n              )}\n\n              {/* Tenants Tab */}\n              {activeTab === 'tenants' && (\n                <div>\n                  {/* Add Tenant */}\n                  <div style={{ \n                    display: 'flex', \n                    gap: '0.75rem', \n                    marginBottom: '1.5rem',\n                    padding: '1rem',\n                    background: 'var(--bg-tertiary)',\n                    borderRadius: 'var(--radius-md)',\n                  }}>\n                    <select\n                      className={styles.select}\n                      value={selectedTenantToAdd}\n                      onChange={(e) => setSelectedTenantToAdd(e.target.value)}\n                      style={{ flex: 1 }}\n                    >\n                      <option value=\"\">Select a tenant to add...</option>\n                      {availableTenants.map(t => (\n                        <option key={t.id} value={t.id}>{t.name} ({t.slug})</option>\n                      ))}\n                    </select>\n                    <button\n                      className={`${styles.btn} ${styles.btnPrimary}`}\n                      onClick={handleAddTenant}\n                      disabled={!selectedTenantToAdd}\n                    >\n                      Add Tenant\n                    </button>\n                  </div>\n\n                  {/* Tenant List */}\n                  {organization.tenants.length === 0 ? (\n                    <div style={{ textAlign: 'center', padding: '2rem', color: 'var(--text-muted)' }}>\n                      No tenants assigned to this organization yet.\n                    </div>\n                  ) : (\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '0.75rem' }}>\n                      {organization.tenants.map((tenant) => (\n                        <div\n                          key={tenant.id}\n                          style={{\n                            padding: '1rem',\n                            background: 'var(--bg-tertiary)',\n                            borderRadius: 'var(--radius-md)',\n                            border: '1px solid var(--border-color)',\n                          }}\n                        >\n                          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start' }}>\n                            <div>\n                              <div style={{ fontWeight: 500, color: 'var(--text-primary)' }}>\n                                {tenant.name}\n                              </div>\n                              <div style={{ fontSize: '0.8125rem', color: 'var(--text-muted)' }}>\n                                <code>{tenant.slug}</code>  {tenant.status}\n                              </div>\n                            </div>\n                            <div style={{ display: 'flex', gap: '0.5rem' }}>\n                              <button\n                                className={`${styles.btn} ${styles.btnSecondary}`}\n                                onClick={() => handleEditTenantGroups(tenant)}\n                                style={{ padding: '0.375rem 0.75rem', fontSize: '0.8125rem' }}\n                              >\n                                Configure Groups\n                              </button>\n                              <button\n                                className={`${styles.btn} ${styles.btnSecondary}`}\n                                onClick={() => handleRemoveTenant(tenant.id)}\n                                style={{ padding: '0.375rem 0.75rem', fontSize: '0.8125rem', color: 'var(--accent-red)' }}\n                              >\n                                Remove\n                              </button>\n                            </div>\n                          </div>\n                          \n                          {/* Group requirements display/edit */}\n                          {editingTenant === tenant.id ? (\n                            <div style={{ marginTop: '1rem', padding: '1rem', background: 'var(--bg-secondary)', borderRadius: 'var(--radius-md)' }}>\n                              <div className={styles.formGroup}>\n                                <label className={styles.label}>Required Group IDs</label>\n                                <input\n                                  type=\"text\"\n                                  className={styles.input}\n                                  value={tenantGroupIds}\n                                  onChange={(e) => setTenantGroupIds(e.target.value)}\n                                  placeholder=\"group-id-1, group-id-2\"\n                                />\n                                <span style={{ fontSize: '0.75rem', color: 'var(--text-muted)' }}>\n                                  Comma-separated Entra group IDs. Leave empty for no group restrictions.\n                                </span>\n                              </div>\n                              <div className={styles.formGroup}>\n                                <label className={styles.label}>Membership Mode</label>\n                                <select\n                                  className={styles.select}\n                                  value={tenantGroupMode}\n                                  onChange={(e) => setTenantGroupMode(e.target.value as 'any' | 'all')}\n                                >\n                                  <option value=\"any\">Any (user must be in at least ONE group)</option>\n                                  <option value=\"all\">All (user must be in ALL groups)</option>\n                                </select>\n                              </div>\n                              <div style={{ display: 'flex', gap: '0.5rem', marginTop: '0.75rem' }}>\n                                <button\n                                  className={`${styles.btn} ${styles.btnPrimary}`}\n                                  onClick={handleSaveTenantGroups}\n                                  style={{ padding: '0.375rem 0.75rem', fontSize: '0.8125rem' }}\n                                >\n                                  Save\n                                </button>\n                                <button\n                                  className={`${styles.btn} ${styles.btnSecondary}`}\n                                  onClick={() => setEditingTenant(null)}\n                                  style={{ padding: '0.375rem 0.75rem', fontSize: '0.8125rem' }}\n                                >\n                                  Cancel\n                                </button>\n                              </div>\n                            </div>\n                          ) : tenant.required_group_ids.length > 0 ? (\n                            <div style={{ marginTop: '0.75rem', fontSize: '0.8125rem' }}>\n                              <span style={{ color: 'var(--text-muted)' }}>Required groups: </span>\n                              <span style={{ color: 'var(--text-secondary)' }}>\n                                {tenant.required_group_ids.length} group(s) ({tenant.group_membership_mode} mode)\n                              </span>\n                            </div>\n                          ) : null}\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              )}\n            </>\n          ) : null}\n        </div>\n\n        <div className={styles.footer}>\n          <button\n            className={`${styles.btn} ${styles.btnSecondary}`}\n            onClick={onClose}\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * CredentialsModal\n * Modal showing credentials after provisioning or password reset\n */\n\nimport { useState } from 'react';\nimport styles from './AdminModal.module.css';\n\ninterface CredentialsModalProps {\n  title: string;\n  email: string;\n  password: string;\n  onClose: () => void;\n}\n\nexport function CredentialsModal({ title, email, password, onClose }: CredentialsModalProps) {\n  const [copied, setCopied] = useState(false);\n\n  const handleCopy = async () => {\n    const text = `Email: ${email}\\nPassword: ${password}`;\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (err) {\n      console.error('Failed to copy:', err);\n    }\n  };\n\n  const handleOverlayClick = (e: React.MouseEvent) => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  return (\n    <div className={styles.overlay} onClick={handleOverlayClick}>\n      <div className={styles.modal}>\n        <div className={styles.header}>\n          <h2 className={styles.title}>{title}</h2>\n          <button className={styles.closeBtn} onClick={onClose}>\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n            </svg>\n          </button>\n        </div>\n\n        <div className={styles.body}>\n          <p style={{ marginBottom: '1.5rem', color: 'var(--text-secondary)' }}>\n            Please save these credentials securely. The password will not be shown again.\n          </p>\n\n          <div className={styles.form}>\n            <div className={styles.formGroup}>\n              <label className={styles.label}>Email</label>\n              <div className={styles.credentialsField}>\n                <input\n                  type=\"text\"\n                  className={styles.credentialsInput}\n                  value={email}\n                  readOnly\n                />\n              </div>\n            </div>\n\n            <div className={styles.formGroup}>\n              <label className={styles.label}>Password</label>\n              <div className={styles.credentialsField}>\n                <input\n                  type=\"text\"\n                  className={styles.credentialsInput}\n                  value={password}\n                  readOnly\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className={styles.footer}>\n          <button\n            className={`${styles.btn} ${styles.btnSecondary}`}\n            onClick={onClose}\n          >\n            Close\n          </button>\n          <button\n            className={`${styles.btn} ${styles.btnPrimary}`}\n            onClick={handleCopy}\n          >\n            {copied ? 'Copied!' : 'Copy Credentials'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","/**\n * Admin Dashboard\n * Main dashboard for multi-tenant management\n */\n\nimport { useEffect, useState } from 'react';\nimport { useAdminStore } from '@/stores/adminStore';\nimport { \n  adminLogout, \n  getTenants, \n  getSystemStats, \n  getAdminUsers,\n  getOrganizations,\n} from '@/api';\nimport { getTheme, isDarkTheme, type Theme } from '@/utils/storage';\nimport { TenantList } from './TenantList';\nimport { OrganizationList } from './OrganizationList';\nimport { AdminUserList } from './AdminUserList';\nimport { SystemStatsPanel } from './SystemStatsPanel';\nimport { CreateTenantModal } from './modals/CreateTenantModal';\nimport { CreateAdminModal } from './modals/CreateAdminModal';\nimport { CreateOrganizationModal } from './modals/CreateOrganizationModal';\nimport { TenantDetailsModal } from './modals/TenantDetailsModal';\nimport { OrganizationDetailsModal } from './modals/OrganizationDetailsModal';\nimport { CredentialsModal } from './modals/CredentialsModal';\nimport styles from './AdminDashboard.module.css';\n\nexport function AdminDashboard() {\n  const adminUser = useAdminStore((s) => s.adminUser);\n  const activeTab = useAdminStore((s) => s.activeTab);\n  const setActiveTab = useAdminStore((s) => s.setActiveTab);\n  const setTenants = useAdminStore((s) => s.setTenants);\n  const setOrganizations = useAdminStore((s) => s.setOrganizations);\n  const setSystemStats = useAdminStore((s) => s.setSystemStats);\n  const setAdminUsers = useAdminStore((s) => s.setAdminUsers);\n  const setIsAuthenticated = useAdminStore((s) => s.setIsAuthenticated);\n  const setAdminUser = useAdminStore((s) => s.setAdminUser);\n  const reset = useAdminStore((s) => s.reset);\n  \n  const [theme, setThemeState] = useState<Theme>(() => getTheme());\n  const [showCreateTenant, setShowCreateTenant] = useState(false);\n  const [showCreateOrganization, setShowCreateOrganization] = useState(false);\n  const [showCreateAdmin, setShowCreateAdmin] = useState(false);\n  const [selectedTenantId, setSelectedTenantId] = useState<string | null>(null);\n  const [selectedOrganizationId, setSelectedOrganizationId] = useState<string | null>(null);\n  const [credentials, setCredentials] = useState<{ title: string; email: string; password: string } | null>(null);\n\n  // Watch for theme changes\n  useEffect(() => {\n    const observer = new MutationObserver(() => {\n      const currentTheme = document.documentElement.dataset.theme as Theme;\n      if (currentTheme && currentTheme !== theme) {\n        setThemeState(currentTheme);\n      }\n    });\n\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: ['data-theme'],\n    });\n\n    return () => observer.disconnect();\n  }, [theme]);\n\n  // Load initial data\n  useEffect(() => {\n    loadTenants();\n    loadOrganizations();\n    loadStats();\n  }, []);\n\n  // Load admin users when switching to admins tab\n  useEffect(() => {\n    if (activeTab === 'admins') {\n      loadAdminUsers();\n    }\n  }, [activeTab]);\n\n  const loadTenants = async () => {\n    try {\n      const data = await getTenants();\n      setTenants(data);\n    } catch (err) {\n      console.error('Failed to load tenants:', err);\n    }\n  };\n\n  const loadOrganizations = async () => {\n    try {\n      const data = await getOrganizations();\n      setOrganizations(data);\n    } catch (err) {\n      console.error('Failed to load organizations:', err);\n    }\n  };\n\n  const loadStats = async () => {\n    try {\n      const data = await getSystemStats();\n      setSystemStats(data);\n    } catch (err) {\n      console.error('Failed to load stats:', err);\n    }\n  };\n\n  const loadAdminUsers = async () => {\n    try {\n      const data = await getAdminUsers();\n      setAdminUsers(data);\n    } catch (err) {\n      console.error('Failed to load admin users:', err);\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      await adminLogout();\n    } catch (err) {\n      console.error('Logout error:', err);\n    } finally {\n      reset();\n      setIsAuthenticated(false);\n      setAdminUser(null);\n    }\n  };\n\n  const handleShowCredentials = (title: string, email: string, password: string) => {\n    setCredentials({ title, email, password });\n  };\n\n  const logoSrc = isDarkTheme(theme)\n    ? '/img/milestone_logo_dark_theme.svg'\n    : '/img/milestone_logo_light_theme.svg';\n\n  const isSuperadmin = adminUser?.role === 'superadmin';\n\n  return (\n    <div className={styles.container}>\n      {/* Header */}\n      <header className={styles.header}>\n        <div className={styles.headerLeft}>\n          <img src={logoSrc} alt=\"Milestone\" className={styles.logo} />\n          <h1 className={styles.title}>Admin Portal</h1>\n        </div>\n        <div className={styles.headerRight}>\n          <span className={styles.userInfo}>\n            {adminUser?.email}\n            {adminUser?.role === 'superadmin' && (\n              <span className={styles.roleBadge}>Superadmin</span>\n            )}\n          </span>\n          <button className={styles.logoutBtn} onClick={handleLogout}>\n            Logout\n          </button>\n        </div>\n      </header>\n\n      {/* Navigation Tabs */}\n      <nav className={styles.tabs}>\n        <button\n          className={`${styles.tab} ${activeTab === 'tenants' ? styles.active : ''}`}\n          onClick={() => setActiveTab('tenants')}\n        >\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <path d=\"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\" />\n            <polyline points=\"9 22 9 12 15 12 15 22\" />\n          </svg>\n          Tenants\n        </button>\n        <button\n          className={`${styles.tab} ${activeTab === 'organizations' ? styles.active : ''}`}\n          onClick={() => setActiveTab('organizations')}\n        >\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <circle cx=\"12\" cy=\"12\" r=\"10\" />\n            <line x1=\"2\" y1=\"12\" x2=\"22\" y2=\"12\" />\n            <path d=\"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z\" />\n          </svg>\n          Organizations\n        </button>\n        {isSuperadmin && (\n          <button\n            className={`${styles.tab} ${activeTab === 'admins' ? styles.active : ''}`}\n            onClick={() => setActiveTab('admins')}\n          >\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\" />\n              <circle cx=\"9\" cy=\"7\" r=\"4\" />\n              <path d=\"M23 21v-2a4 4 0 0 0-3-3.87\" />\n              <path d=\"M16 3.13a4 4 0 0 1 0 7.75\" />\n            </svg>\n            Admin Users\n          </button>\n        )}\n        <button\n          className={`${styles.tab} ${activeTab === 'stats' ? styles.active : ''}`}\n          onClick={() => setActiveTab('stats')}\n        >\n          <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n            <line x1=\"18\" y1=\"20\" x2=\"18\" y2=\"10\" />\n            <line x1=\"12\" y1=\"20\" x2=\"12\" y2=\"4\" />\n            <line x1=\"6\" y1=\"20\" x2=\"6\" y2=\"14\" />\n          </svg>\n          System Stats\n        </button>\n      </nav>\n\n      {/* Main Content */}\n      <main className={styles.main}>\n        {activeTab === 'tenants' && (\n          <TenantList\n            onCreateNew={() => setShowCreateTenant(true)}\n            onViewDetails={(id) => setSelectedTenantId(id)}\n            onShowCredentials={handleShowCredentials}\n            onRefresh={loadTenants}\n          />\n        )}\n        {activeTab === 'organizations' && (\n          <OrganizationList\n            onCreateNew={() => setShowCreateOrganization(true)}\n            onViewDetails={(id) => setSelectedOrganizationId(id)}\n            onRefresh={loadOrganizations}\n          />\n        )}\n        {activeTab === 'admins' && isSuperadmin && (\n          <AdminUserList\n            onCreateNew={() => setShowCreateAdmin(true)}\n            onRefresh={loadAdminUsers}\n          />\n        )}\n        {activeTab === 'stats' && (\n          <SystemStatsPanel onRefresh={loadStats} />\n        )}\n      </main>\n\n      {/* Modals */}\n      {showCreateTenant && (\n        <CreateTenantModal\n          onClose={() => setShowCreateTenant(false)}\n          onCreated={() => {\n            loadTenants();\n            setShowCreateTenant(false);\n          }}\n        />\n      )}\n\n      {showCreateOrganization && (\n        <CreateOrganizationModal\n          onClose={() => setShowCreateOrganization(false)}\n          onCreated={() => {\n            loadOrganizations();\n            setShowCreateOrganization(false);\n          }}\n        />\n      )}\n\n      {showCreateAdmin && (\n        <CreateAdminModal\n          onClose={() => setShowCreateAdmin(false)}\n          onCreated={() => {\n            loadAdminUsers();\n            setShowCreateAdmin(false);\n          }}\n        />\n      )}\n\n      {selectedTenantId && (\n        <TenantDetailsModal\n          tenantId={selectedTenantId}\n          onClose={() => setSelectedTenantId(null)}\n          onShowCredentials={handleShowCredentials}\n          onRefresh={loadTenants}\n        />\n      )}\n\n      {selectedOrganizationId && (\n        <OrganizationDetailsModal\n          organizationId={selectedOrganizationId}\n          onClose={() => setSelectedOrganizationId(null)}\n          onRefresh={() => {\n            loadOrganizations();\n            loadTenants();\n          }}\n        />\n      )}\n\n      {credentials && (\n        <CredentialsModal\n          title={credentials.title}\n          email={credentials.email}\n          password={credentials.password}\n          onClose={() => setCredentials(null)}\n        />\n      )}\n    </div>\n  );\n}\n","/**\n * AdminApp\n * Main Admin application component\n */\n\nimport { useEffect } from 'react';\nimport { useAdminStore } from '@/stores/adminStore';\nimport { getAdminMe } from '@/api';\nimport { AdminLoginScreen } from './AdminLoginScreen';\nimport { AdminDashboard } from './AdminDashboard';\n\nexport function AdminApp() {\n  const isAuthenticated = useAdminStore((s) => s.isAuthenticated);\n  const isLoading = useAdminStore((s) => s.isLoading);\n  const setAdminUser = useAdminStore((s) => s.setAdminUser);\n  const setIsAuthenticated = useAdminStore((s) => s.setIsAuthenticated);\n  const setIsLoading = useAdminStore((s) => s.setIsLoading);\n\n  // Check authentication on mount\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const response = await getAdminMe();\n        if (response.user) {\n          setAdminUser(response.user);\n          setIsAuthenticated(true);\n        }\n      } catch (err) {\n        // Not authenticated\n        console.log('Admin not authenticated');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    checkAuth();\n  }, [setAdminUser, setIsAuthenticated, setIsLoading]);\n\n  // Show loading state\n  if (isLoading) {\n    return (\n      <div style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        minHeight: '100vh',\n        background: 'var(--bg-primary)',\n        color: 'var(--text-muted)',\n      }}>\n        Loading...\n      </div>\n    );\n  }\n\n  // Show login or dashboard\n  return isAuthenticated ? <AdminDashboard /> : <AdminLoginScreen />;\n}\n","import { useEffect, useState } from 'react';\nimport { useAppStore } from './stores/appStore';\nimport { useAuth } from './hooks/useAuth';\nimport { useDataLoader } from './hooks/useDataLoader';\nimport { LoadingScreen } from './components/screens/LoadingScreen';\nimport { LoginScreen } from './components/screens/LoginScreen';\nimport { MainLayout } from './components/layout/MainLayout';\nimport { ModalContainer } from './components/modals';\nimport { ContextMenuContainer } from './components/gantt/ContextMenuContainer';\nimport { AdminApp } from './components/admin';\nimport { WebSocketProvider } from './contexts/WebSocketContext';\nimport './App.css';\n\nfunction App() {\n  const { isLoading, isAuthenticated } = useAuth();\n  const { loadAllData, isLoading: isDataLoading } = useDataLoader();\n  const whatIfMode = useAppStore((state) => state.whatIfMode);\n  const instanceSettings = useAppStore((state) => state.instanceSettings);\n\n  // Check if we're on the admin route\n  const [isAdminRoute, setIsAdminRoute] = useState(false);\n\n  useEffect(() => {\n    // Check URL path for /admin\n    const path = window.location.pathname;\n    const isAdmin = path === '/admin' || path === '/admin/' || path.startsWith('/admin/');\n    setIsAdminRoute(isAdmin);\n  }, []);\n\n  // Load data when authenticated (only for main app)\n  useEffect(() => {\n    if (isAuthenticated && !isAdminRoute) {\n      loadAllData();\n    }\n  }, [isAuthenticated, loadAllData, isAdminRoute]);\n\n  // Update document title when instance settings change\n  useEffect(() => {\n    if (isAdminRoute) {\n      document.title = 'Milestone Admin';\n    } else {\n      const title = instanceSettings?.instance_title || 'Milestone';\n      document.title = title;\n    }\n  }, [instanceSettings, isAdminRoute]);\n\n  // Add/remove what-if-mode class on body\n  useEffect(() => {\n    if (whatIfMode) {\n      document.body.classList.add('what-if-mode');\n    } else {\n      document.body.classList.remove('what-if-mode');\n    }\n    return () => {\n      document.body.classList.remove('what-if-mode');\n    };\n  }, [whatIfMode]);\n\n  // Render Admin app if on /admin route\n  if (isAdminRoute) {\n    return <AdminApp />;\n  }\n\n  // Show loading screen while checking auth\n  if (isLoading) {\n    return <LoadingScreen />;\n  }\n\n  // Show login screen if not authenticated\n  if (!isAuthenticated) {\n    return <LoginScreen />;\n  }\n\n  // Show loading screen while loading data\n  if (isDataLoading) {\n    return <LoadingScreen message=\"Loading data...\" />;\n  }\n\n  // Render main application with WebSocket provider for real-time updates\n  return (\n    <WebSocketProvider>\n      <MainLayout />\n      <ModalContainer />\n      <ContextMenuContainer />\n    </WebSocketProvider>\n  );\n}\n\nexport default App;\n","import { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport App from './App';\nimport { initTheme, migrateLegacyStorage } from './utils/storage';\nimport { configureApiClient } from './api/client';\nimport { useAppStore } from './stores/appStore';\nimport './styles/global.css';\n\n// Initialize theme before render to prevent flash\ninitTheme();\n\n// Migrate any legacy storage keys from vanilla JS app\nmigrateLegacyStorage();\n\n// Configure API client with What If mode check and queue function\nconfigureApiClient({\n  isWhatIfMode: () => useAppStore.getState().whatIfMode,\n  queueWhatIfOperation: (op) => useAppStore.getState().queueWhatIfOperation(op),\n});\n\n// Create React Query client with sensible defaults\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 1000 * 60 * 5, // 5 minutes\n      gcTime: 1000 * 60 * 30, // 30 minutes (formerly cacheTime)\n      retry: 1,\n      refetchOnWindowFocus: false,\n    },\n    mutations: {\n      retry: 0,\n    },\n  },\n});\n\n// Render the app\ncreateRoot(document.getElementById('root')!).render(\n  <StrictMode>\n    <QueryClientProvider client={queryClient}>\n      <App />\n    </QueryClientProvider>\n  </StrictMode>\n);\n"],"file":"index-p20gDzRX.js"}