# Milestone - Environment Configuration
# Copy this file to .env and update values for your environment
#
# IMPORTANT: Never commit .env files with real credentials!

# ============================================
# APPLICATION
# ============================================
DEBUG=false
PORT=8485

# ============================================
# DATABASE (PostgreSQL) - TENANT DATABASE
# ============================================
# For single-tenant mode, this is your main database
# For multi-tenant mode, this is ignored (uses MASTER_DATABASE_URL)

# Option 1: Individual settings
DB_HOST=localhost
DB_PORT=5432
DB_NAME=milestone
DB_USER=milestone
DB_PASSWORD=your_secure_password_here
DB_SSL=false

# Option 2: Connection URL (overrides individual settings)
# DATABASE_URL=postgresql://milestone:password@localhost:5432/milestone

# Connection pool settings
DB_POOL_SIZE=20
DB_POOL_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# ============================================
# SESSION & SECURITY
# ============================================
# Secret key for session signing (change this in production!)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SESSION_SECRET=change-this-to-a-random-64-character-string-in-production

# Session cookie settings
SESSION_COOKIE_NAME=connect.sid
SESSION_MAX_AGE=86400

# Set to true when serving over HTTPS (marks cookies as Secure)
SECURE_COOKIES=false

# CORS allowed origins (comma-separated)
# Required for production if frontend is on a different origin
# If not set: allows localhost in debug mode, blocks all cross-origin in production
# CORS_ORIGINS=https://app.example.com,https://admin.example.com

# ============================================
# MULTI-TENANT MODE
# ============================================
# Set to true for multi-tenant deployment
MULTI_TENANT=false

# Default tenant slug (optional, for development)
DEFAULT_TENANT=

# Master database (required for multi-tenant mode)
# This stores tenant configurations and admin users
MASTER_DATABASE_URL=postgresql://postgres:password@localhost:5432/milestone_master

# Or use individual settings:
# MASTER_DB_HOST=localhost
# MASTER_DB_PORT=5432
# MASTER_DB_NAME=milestone_master
# MASTER_DB_USER=postgres
# MASTER_DB_PASSWORD=your_master_password

# PostgreSQL admin credentials (for auto-provisioning tenant databases)
# Needs CREATEDB and CREATEROLE privileges
PG_ADMIN_USER=postgres
PG_ADMIN_PASSWORD=your_postgres_admin_password

# Encryption key for tenant database credentials (32 bytes, hex encoded)
# Generate with: python -c "import secrets; print(secrets.token_hex(32))"
# REQUIRED for multi-tenant mode!
TENANT_ENCRYPTION_KEY=

# ============================================
# MICROSOFT ENTRA SSO (Optional)
# ============================================
# Configure in the Settings modal within the app, or set here:
# SSO_ENABLED=false
# SSO_CLIENT_ID=your-azure-app-client-id
# SSO_CLIENT_SECRET=your-azure-app-client-secret  
# SSO_TENANT_ID=your-azure-tenant-id
# SSO_REDIRECT_URI=http://localhost:8485/api/auth/callback

# ============================================
# EXTERNAL APIs
# ============================================
# Bank holiday API (Nager.Date)
NAGER_API_URL=https://date.nager.at/api/v3

# ============================================
# TIMEZONE
# ============================================
TZ=Europe/Zurich
